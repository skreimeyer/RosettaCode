{"task": "Last_Friday_of_each_month", "blocks": [{"lang": "360 Assembly", "loc": 79, "block": "<pre class=\"text highlighted_source\">*        Last Friday of each month 17/07/2016<br/>LASTFRI  CSECT<br/>         USING  LASTFRI,R13        base register<br/>         B      72(R15)            skip savearea<br/>         DC     17F'0'             savearea<br/>         STM    R14,R12,12(R13)    prolog<br/>         ST     R13,4(R15)         \" &lt;-<br/>         ST     R15,8(R13)         \" -&gt;<br/>         LR     R13,R15            \" addressability<br/>         L      R4,YEAR            year<br/>         SRDA   R4,32              .<br/>         D      R4,=F'400'         year/400<br/>         LTR    R4,R4              if year//400=0<br/>         BZ     LEAP<br/>         L      R4,YEAR            year<br/>         SRDA   R4,32              .<br/>         D      R4,=F'4'           year/4<br/>         LTR    R4,R4              if year//4=0<br/>         BNZ    NOTLEAP<br/>         L      R4,YEAR            year<br/>         SRDA   R4,32              .<br/>         D      R4,=F'100'         year/400<br/>         LTR    R4,R4              if year//100=0<br/>         BZ     NOTLEAP<br/>LEAP     MVC    DAYS+4(4),=F'29'   days(2)=29<br/>NOTLEAP  L      R8,YEAR            year<br/>         BCTR   R8,0               y=year-1<br/>         LA     R7,44              44<br/>         AR     R7,R8              +y<br/>         LR     R3,R8              y<br/>         SRA    R3,2               y/4<br/>         AR     R7,R3              +y/4<br/>         LR     R4,R8              y<br/>         SRDA   R4,32              .<br/>         D      R4,=F'100'         y/100<br/>         LA     R4,0               .<br/>         M      R4,=F'6'           *6<br/>         AR     R7,R5              +6*(y/100)<br/>         LR     R4,R8              y<br/>         SRDA   R4,32              .<br/>         D      R4,=F'400'         y/100<br/>         AR     R7,R5              k=44+y+y/4+6*(y/100)+y/400<br/>         LA     R6,1               m=1<br/>LOOPM    C      R6,=F'12'          do m=1 to 12<br/>         BH     ELOOPM<br/>         LR     R1,R6              m<br/>         SLA    R1,2               .<br/>         L      R2,DAYS-4(R1)      days(m)<br/>         AR     R7,R2              k=k+days(m)<br/>         LR     R4,R7              k<br/>         SRDA   R4,32              .<br/>         D      R4,=F'7'           k/7<br/>         SR     R2,R4              days(m)-k//7<br/>         LR     R9,R2              d=days(m)-k//7<br/>         L      R1,YEAR            year<br/>         CVD    R1,DW              year: binary to packed <br/>         OI     DW+7,X'0F'           zap sign<br/>         UNPK   PG(4),DW             unpack (ZL4)<br/>         CVD    R6,DW              m\u00a0: binary to packed <br/>         OI     DW+7,X'0F'           zap sign<br/>         UNPK   PG+5(2),DW           unpack (ZL2)<br/>         CVD    R9,DW              d: binary to packed <br/>         OI     DW+7,X'0F'           zap sign<br/>         UNPK   PG+8(2),DW           unpack (ZL2)<br/>         XPRNT  PG,L'PG            print buffer<br/>         LA     R6,1(R6)           m=m+1<br/>         B      LOOPM<br/>ELOOPM   L      R13,4(0,R13)       epilog <br/>         LM     R14,R12,12(R13)    \" restore<br/>         XR     R15,R15            \" rc=0<br/>         BR     R14                exit<br/>YEAR     DC     F'2016'            &lt;== input year<br/>DAYS     DC     F'31',F'28',F'31',F'30',F'31',F'30'<br/>         DC     F'31',F'31',F'30',F'31',F'30',F'31'<br/>PG       DC     CL80'YYYY-MM-DD'   buffer<br/>XDEC     DS     CL12               temp<br/>DW       DS     D                  packed (PL8) 15num<br/>         YREGS<br/>         END    LASTFRI</pre>"}, {"lang": "Ada", "loc": 30, "block": "<pre class=\"ada highlighted_source\"><span class=\"kw3\">with</span> Ada.<span class=\"me1\">Text_IO</span>, GNAT.<span class=\"me1\">Calendar</span>.<span class=\"me1\">Time_IO</span>, Ada.<span class=\"me1\">Command_Line</span>,<br/>  Ada.<span class=\"me1\">Calendar</span>.<span class=\"me1\">Formatting</span>, Ada.<span class=\"me1\">Calendar</span>.<span class=\"me1\">Arithmetic</span>;<br/>\u00a0<br/><span class=\"kw3\">procedure</span> Last_Weekday_In_Month <span class=\"kw1\">is</span><br/>\u00a0<br/>   <span class=\"kw3\">procedure</span> Put_Line<span class=\"br0\">(</span>T: Ada.<span class=\"me1\">Calendar</span>.<span class=\"me1\">Time</span><span class=\"br0\">)</span> <span class=\"kw1\">is</span><br/>      <span class=\"kw3\">use</span> GNAT.<span class=\"me1\">Calendar</span>.<span class=\"me1\">Time_IO</span>;<br/>   <span class=\"kw1\">begin</span><br/>      Ada.<span class=\"me1\">Text_IO</span>.<span class=\"me1\">Put_Line</span><span class=\"br0\">(</span>Image<span class=\"br0\">(</span>Date =&gt; T, Picture =&gt; ISO_Date<span class=\"br0\">)</span><span class=\"br0\">)</span>;<br/>   <span class=\"kw1\">end</span> Put_Line;<br/>\u00a0<br/>   <span class=\"kw3\">use</span> Ada.<span class=\"me1\">Calendar</span>, Ada.<span class=\"me1\">Calendar</span>.<span class=\"me1\">Arithmetic</span>;<br/>   <span class=\"kw3\">subtype</span> Day_Name <span class=\"kw1\">is</span> Formatting.<span class=\"me1\">Day_Name</span>; <span class=\"kw3\">use</span> <span class=\"kw3\">type</span> Formatting.<span class=\"me1\">Day_Name</span>;<br/>\u00a0<br/>   T, Selected\u00a0: Time;<br/>   Weekday: Day_Name \u00a0:= Day_Name'Value<span class=\"br0\">(</span>Ada.<span class=\"me1\">Command_Line</span>.<span class=\"me1\">Argument</span> <span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"br0\">)</span>;<br/>   Year\u00a0: Year_Number\u00a0:= Integer'Value <span class=\"br0\">(</span>Ada.<span class=\"me1\">Command_Line</span>.<span class=\"me1\">Argument</span> <span class=\"br0\">(</span><span class=\"nu0\">2</span><span class=\"br0\">)</span><span class=\"br0\">)</span>;<br/>\u00a0<br/><span class=\"kw1\">begin</span><br/>   <span class=\"kw1\">for</span> Month <span class=\"kw3\">in</span> <span class=\"nu0\">1</span> .. <span class=\"nu0\">12</span> <span class=\"kw1\">loop</span><br/>      T\u00a0:= Time_Of <span class=\"br0\">(</span>Year =&gt; Year, Month =&gt; Month, Day =&gt; 01<span class=\"br0\">)</span>;<br/>      <span class=\"kw1\">while</span> Ada.<span class=\"me1\">Calendar</span>.<span class=\"me1\">Month</span><span class=\"br0\">(</span>T<span class=\"br0\">)</span> = Month <span class=\"kw1\">loop</span><br/>\t <span class=\"kw1\">if</span> Formatting.<span class=\"me1\">Day_Of_Week</span> <span class=\"br0\">(</span>T<span class=\"br0\">)</span> = Weekday <span class=\"kw1\">then</span><br/>\t    Selected\u00a0:= T;<br/>\t <span class=\"kw1\">end</span> <span class=\"kw1\">if</span>;<br/>\t T\u00a0:= T + Day_Count<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"br0\">)</span>;<br/>      <span class=\"kw1\">end</span> <span class=\"kw1\">loop</span>;<br/>      Put_Line<span class=\"br0\">(</span>Selected<span class=\"br0\">)</span>;<br/>   <span class=\"kw1\">end</span> <span class=\"kw1\">loop</span>;<br/><span class=\"kw1\">end</span> Last_Weekday_In_Month;</pre>"}, {"lang": "AppleScript", "loc": 196, "block": "<pre class=\"applescript highlighted_source\"><span class=\"co1\">-- LAST FRIDAYS OF YEAR ------------------------------------------------------</span><br/>\u00a0<br/><span class=\"co1\">--  lastFridaysOfYear\u00a0:: Int -&gt; [Date]</span><br/><span class=\"kw3\">on</span> lastFridaysOfYear<span class=\"br0\">(</span>y<span class=\"br0\">)</span><br/>\u00a0<br/>    <span class=\"co1\">-- lastWeekDaysOfYear\u00a0:: Int -&gt; Int -&gt; [Date]</span><br/>    <span class=\"kw3\">script</span> lastWeekDaysOfYear<br/>        <span class=\"kw3\">on</span> |\u03bb|<span class=\"br0\">(</span>intYear, iWeekday<span class=\"br0\">)</span><br/>\u00a0<br/>            <span class=\"co1\">-- lastWeekDay\u00a0:: Int -&gt; Int -&gt; Date</span><br/>            <span class=\"kw3\">script</span> lastWeekDay<br/>                <span class=\"kw3\">on</span> |\u03bb|<span class=\"br0\">(</span>iLastDay, iMonth<span class=\"br0\">)</span><br/>                    <span class=\"kw3\">set</span> iYear <span class=\"kw3\">to</span> intYear<br/>\u00a0<br/>                    calendarDate<span class=\"br0\">(</span>iYear, iMonth, iLastDay <span class=\"sy0\">-</span> \u00ac<br/>                        <span class=\"br0\">(</span><span class=\"br0\">(</span><span class=\"br0\">(</span><span class=\"kw1\">weekday</span> <span class=\"kw3\">of</span> calendarDate<span class=\"br0\">(</span>iYear, iMonth, iLastDay<span class=\"br0\">)</span><span class=\"br0\">)</span> \u00ac<br/>                            <span class=\"kw2\">as</span> <span class=\"kw1\">integer</span><span class=\"br0\">)</span> <span class=\"sy0\">+</span> <span class=\"br0\">(</span><span class=\"nu0\">7</span> <span class=\"sy0\">-</span> <span class=\"br0\">(</span>iWeekday<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"kw2\">mod</span> <span class=\"nu0\">7</span><span class=\"br0\">)</span><br/>                <span class=\"kw3\">end</span> |\u03bb|<br/>            <span class=\"kw3\">end</span> <span class=\"kw3\">script</span><br/>\u00a0<br/>            map<span class=\"br0\">(</span>lastWeekDay, lastDaysOfMonths<span class=\"br0\">(</span>intYear<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>        <span class=\"kw3\">end</span> |\u03bb|<br/>\u00a0<br/>        <span class=\"co1\">-- isLeapYear\u00a0:: Int -&gt; Bool</span><br/>        <span class=\"kw3\">on</span> isLeapYear<span class=\"br0\">(</span>y<span class=\"br0\">)</span><br/>            <span class=\"br0\">(</span><span class=\"nu0\">0</span> <span class=\"sy0\">=</span> y <span class=\"kw2\">mod</span> <span class=\"nu0\">4</span><span class=\"br0\">)</span> <span class=\"kw2\">and</span> <span class=\"br0\">(</span><span class=\"nu0\">0</span> \u2260 y <span class=\"kw2\">mod</span> <span class=\"nu0\">100</span><span class=\"br0\">)</span> <span class=\"kw2\">or</span> <span class=\"br0\">(</span><span class=\"nu0\">0</span> <span class=\"sy0\">=</span> y <span class=\"kw2\">mod</span> <span class=\"nu0\">400</span><span class=\"br0\">)</span><br/>        <span class=\"kw3\">end</span> isLeapYear<br/>\u00a0<br/>        <span class=\"co1\">-- lastDaysOfMonths\u00a0:: Int -&gt; [Int]</span><br/>        <span class=\"kw3\">on</span> lastDaysOfMonths<span class=\"br0\">(</span>y<span class=\"br0\">)</span><br/>            <span class=\"br0\">{</span><span class=\"nu0\">31</span>, cond<span class=\"br0\">(</span>isLeapYear<span class=\"br0\">(</span>y<span class=\"br0\">)</span>, <span class=\"nu0\">29</span>, <span class=\"nu0\">28</span><span class=\"br0\">)</span>, \u00ac<br/>                <span class=\"nu0\">31</span>, <span class=\"nu0\">30</span>, <span class=\"nu0\">31</span>, <span class=\"nu0\">30</span>, <span class=\"nu0\">31</span>, <span class=\"nu0\">31</span>, <span class=\"nu0\">30</span>, <span class=\"nu0\">31</span>, <span class=\"nu0\">30</span>, <span class=\"nu0\">31</span><span class=\"br0\">}</span><br/>        <span class=\"kw3\">end</span> lastDaysOfMonths<br/>    <span class=\"kw3\">end</span> <span class=\"kw3\">script</span><br/>\u00a0<br/>    lastWeekDaysOfYear<span class=\"co2\">'</span>s |\u03bb|<span class=\"br0\">(</span>y, <span class=\"kw1\">Friday</span> <span class=\"kw2\">as</span> <span class=\"kw1\">integer</span><span class=\"br0\">)</span><br/><span class=\"kw3\">end</span> lastFridaysOfYear<br/>\u00a0<br/>\u00a0<br/><span class=\"co1\">-- TEST ----------------------------------------------------------------------</span><br/><span class=\"kw3\">on</span> <span class=\"kw1\">run</span> argv<br/>\u00a0<br/>    intercalate<span class=\"br0\">(</span>linefeed, \u00ac<br/>        map<span class=\"br0\">(</span>isoRow, \u00ac<br/>            transpose<span class=\"br0\">(</span>map<span class=\"br0\">(</span>lastFridaysOfYear, \u00ac<br/>                apply<span class=\"br0\">(</span>cond<span class=\"br0\">(</span>class <span class=\"kw3\">of</span> argv <span class=\"kw3\">is</span> <span class=\"kw1\">list</span> <span class=\"kw2\">and</span> argv \u2260 <span class=\"br0\">{</span><span class=\"br0\">}</span>, \u00ac<br/>                    singleYearOrRange, fiveCurrentYears<span class=\"br0\">)</span>, \u00ac<br/>                    argIntegers<span class=\"br0\">(</span>argv<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"kw3\">end</span> <span class=\"kw1\">run</span><br/>\u00a0<br/>\u00a0<br/><span class=\"co1\">-- ARGUMENT HANDLING ---------------------------------------------------------</span><br/>\u00a0<br/><span class=\"co1\">-- Up to two optional command line arguments: [yearFrom], [yearTo]</span><br/><span class=\"co1\">-- (Default range in absence of arguments: </span><br/><span class=\"co1\">--  from two years ago, to two years ahead)</span><br/>\u00a0<br/><span class=\"co1\">-- ~ $ osascript ~/Desktop/lastFridays.scpt </span><br/><span class=\"co1\">-- ~ $ osascript ~/Desktop/lastFridays.scpt 2013</span><br/><span class=\"co1\">-- ~ $ osascript ~/Desktop/lastFridays.scpt 2013 2016</span><br/>\u00a0<br/><span class=\"co1\">-- singleYearOrRange\u00a0:: [Int] -&gt; [Int]</span><br/><span class=\"kw3\">on</span> singleYearOrRange<span class=\"br0\">(</span>argv<span class=\"br0\">)</span><br/>    apply<span class=\"br0\">(</span>cond<span class=\"br0\">(</span>length <span class=\"kw3\">of</span> argv &gt; <span class=\"nu0\">0</span>, <span class=\"kw3\">my</span> enumFromTo, <span class=\"kw3\">my</span> fiveCurrentYears<span class=\"br0\">)</span>, argv<span class=\"br0\">)</span><br/><span class=\"kw3\">end</span> singleYearOrRange<br/>\u00a0<br/><span class=\"co1\">-- fiveCurrentYears\u00a0:: () -&gt; [Int]</span><br/><span class=\"kw3\">on</span> fiveCurrentYears<span class=\"br0\">(</span>_<span class=\"br0\">)</span><br/>    <span class=\"kw3\">set</span> intThisYear <span class=\"kw3\">to</span> year <span class=\"kw3\">of</span> <span class=\"br0\">(</span>current date<span class=\"br0\">)</span><br/>    enumFromTo<span class=\"br0\">(</span>intThisYear <span class=\"sy0\">-</span> <span class=\"nu0\">2</span>, intThisYear <span class=\"sy0\">+</span> <span class=\"nu0\">2</span><span class=\"br0\">)</span><br/><span class=\"kw3\">end</span> fiveCurrentYears<br/>\u00a0<br/><span class=\"co1\">-- argIntegers\u00a0:: maybe [String] -&gt; [Int]</span><br/><span class=\"kw3\">on</span> argIntegers<span class=\"br0\">(</span>argv<span class=\"br0\">)</span><br/>    <span class=\"co1\">-- parseInt\u00a0:: String -&gt; Int</span><br/>    <span class=\"kw3\">script</span> parseInt<br/>        <span class=\"kw3\">on</span> |\u03bb|<span class=\"br0\">(</span>s<span class=\"br0\">)</span><br/>            s <span class=\"kw2\">as</span> <span class=\"kw1\">integer</span><br/>        <span class=\"kw3\">end</span> |\u03bb|<br/>    <span class=\"kw3\">end</span> <span class=\"kw3\">script</span><br/>\u00a0<br/>    <span class=\"kw3\">if</span> class <span class=\"kw3\">of</span> argv <span class=\"kw3\">is</span> <span class=\"kw1\">list</span> <span class=\"kw2\">and</span> argv \u2260 <span class=\"br0\">{</span><span class=\"br0\">}</span> <span class=\"kw3\">then</span><br/>        <span class=\"br0\">{</span>map<span class=\"br0\">(</span>parseInt, argv<span class=\"br0\">)</span><span class=\"br0\">}</span><br/>    <span class=\"kw3\">else</span><br/>        <span class=\"br0\">{</span><span class=\"br0\">}</span><br/>    <span class=\"kw3\">end</span> <span class=\"kw3\">if</span><br/><span class=\"kw3\">end</span> argIntegers<br/>\u00a0<br/>\u00a0<br/><span class=\"co1\">-- GENERIC FUNCTIONS ---------------------------------------------------------</span><br/>\u00a0<br/><span class=\"co1\">-- Dates and date strings ----------------------------------------------------</span><br/>\u00a0<br/><span class=\"co1\">-- calendarDate\u00a0:: Int -&gt; Int -&gt; Int -&gt; Date</span><br/><span class=\"kw3\">on</span> calendarDate<span class=\"br0\">(</span>intYear, intMonth, intDay<span class=\"br0\">)</span><br/>    <span class=\"kw3\">tell</span> <span class=\"br0\">(</span>current date<span class=\"br0\">)</span><br/>        <span class=\"kw3\">set</span> <span class=\"br0\">{</span>its year, its <span class=\"kw1\">month</span>, its day, its time<span class=\"br0\">}</span> <span class=\"kw3\">to</span> \u00ac<br/>            <span class=\"br0\">{</span>intYear, intMonth, intDay, <span class=\"nu0\">0</span><span class=\"br0\">}</span><br/>        <span class=\"kw3\">return</span> <span class=\"kw1\">it</span><br/>    <span class=\"kw3\">end</span> <span class=\"kw3\">tell</span><br/><span class=\"kw3\">end</span> calendarDate<br/>\u00a0<br/><span class=\"co1\">-- isoDateString\u00a0:: Date -&gt; String</span><br/><span class=\"kw3\">on</span> isoDateString<span class=\"br0\">(</span>dte<span class=\"br0\">)</span><br/>    <span class=\"br0\">(</span><span class=\"br0\">(</span><span class=\"br0\">(</span>year <span class=\"kw3\">of</span> dte<span class=\"br0\">)</span> <span class=\"kw2\">as</span> <span class=\"kw1\">string</span><span class=\"br0\">)</span> <span class=\"sy0\">&amp;</span> \u00ac<br/>        <span class=\"st0\">\"-\"</span> <span class=\"sy0\">&amp;</span> <span class=\"kw1\">text</span> <span class=\"kw1\">items</span> <span class=\"sy0\">-</span><span class=\"nu0\">2</span> <span class=\"kw2\">thru</span> <span class=\"sy0\">-</span><span class=\"nu0\">1</span> <span class=\"kw3\">of</span> \u00ac<br/>        <span class=\"br0\">(</span><span class=\"st0\">\"0\"</span> <span class=\"sy0\">&amp;</span> <span class=\"br0\">(</span><span class=\"br0\">(</span><span class=\"kw1\">month</span> <span class=\"kw3\">of</span> dte<span class=\"br0\">)</span> <span class=\"kw2\">as</span> <span class=\"kw1\">integer</span><span class=\"br0\">)</span> <span class=\"kw2\">as</span> <span class=\"kw1\">string</span><span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"sy0\">&amp;</span> \u00ac<br/>        <span class=\"st0\">\"-\"</span> <span class=\"sy0\">&amp;</span> <span class=\"kw1\">text</span> <span class=\"kw1\">items</span> <span class=\"sy0\">-</span><span class=\"nu0\">2</span> <span class=\"kw2\">thru</span> <span class=\"sy0\">-</span><span class=\"nu0\">1</span> <span class=\"kw3\">of</span> \u00ac<br/>        <span class=\"br0\">(</span><span class=\"st0\">\"0\"</span> <span class=\"sy0\">&amp;</span> day <span class=\"kw3\">of</span> dte<span class=\"br0\">)</span><br/><span class=\"kw3\">end</span> isoDateString<br/>\u00a0<br/><span class=\"co1\">-- Testing and tabulation ----------------------------------------------------</span><br/>\u00a0<br/><span class=\"co1\">-- apply (a -&gt; b) -&gt; a -&gt; b</span><br/><span class=\"kw3\">on</span> apply<span class=\"br0\">(</span>f, a<span class=\"br0\">)</span><br/>    mReturn<span class=\"br0\">(</span>f<span class=\"br0\">)</span>'s |\u03bb|<span class=\"br0\">(</span>a<span class=\"br0\">)</span><br/><span class=\"kw3\">end</span> apply<br/>\u00a0<br/><span class=\"co1\">-- cond\u00a0:: Bool -&gt; (a -&gt; b) -&gt; (a -&gt; b) -&gt; (a -&gt; b)</span><br/><span class=\"kw3\">on</span> cond<span class=\"br0\">(</span>bool, f, g<span class=\"br0\">)</span><br/>    <span class=\"kw3\">if</span> bool <span class=\"kw3\">then</span><br/>        f<br/>    <span class=\"kw3\">else</span><br/>        g<br/>    <span class=\"kw3\">end</span> <span class=\"kw3\">if</span><br/><span class=\"kw3\">end</span> cond<br/>\u00a0<br/><span class=\"co1\">-- enumFromTo\u00a0:: Int -&gt; Int -&gt; [Int]</span><br/><span class=\"kw3\">on</span> enumFromTo<span class=\"br0\">(</span>m, n<span class=\"br0\">)</span><br/>    <span class=\"kw3\">if</span> m &gt; n <span class=\"kw3\">then</span><br/>        <span class=\"kw3\">set</span> d <span class=\"kw3\">to</span> <span class=\"sy0\">-</span><span class=\"nu0\">1</span><br/>    <span class=\"kw3\">else</span><br/>        <span class=\"kw3\">set</span> d <span class=\"kw3\">to</span> <span class=\"nu0\">1</span><br/>    <span class=\"kw3\">end</span> <span class=\"kw3\">if</span><br/>    <span class=\"kw3\">set</span> lst <span class=\"kw3\">to</span> <span class=\"br0\">{</span><span class=\"br0\">}</span><br/>    <span class=\"kw3\">repeat</span> <span class=\"kw3\">with</span> i <span class=\"kw3\">from</span> m <span class=\"kw3\">to</span> n <span class=\"kw1\">by</span> d<br/>        <span class=\"kw3\">set</span> <span class=\"kw3\">end</span> <span class=\"kw3\">of</span> lst <span class=\"kw3\">to</span> i<br/>    <span class=\"kw3\">end</span> <span class=\"kw3\">repeat</span><br/>    <span class=\"kw3\">return</span> lst<br/><span class=\"kw3\">end</span> enumFromTo<br/>\u00a0<br/><span class=\"co1\">-- intercalate\u00a0:: Text -&gt; [Text] -&gt; Text</span><br/><span class=\"kw3\">on</span> intercalate<span class=\"br0\">(</span>strText, lstText<span class=\"br0\">)</span><br/>    <span class=\"kw3\">set</span> <span class=\"br0\">{</span>dlm, <span class=\"kw3\">my</span> <span class=\"kw1\">text</span> <span class=\"kw1\">item</span> <span class=\"kw1\">delimiters</span><span class=\"br0\">}</span> <span class=\"kw3\">to</span> \u00ac<br/>        <span class=\"br0\">{</span><span class=\"kw3\">my</span> <span class=\"kw1\">text</span> <span class=\"kw1\">item</span> <span class=\"kw1\">delimiters</span>, strText<span class=\"br0\">}</span><br/>    <span class=\"kw3\">set</span> strJoined <span class=\"kw3\">to</span> lstText <span class=\"kw2\">as</span> <span class=\"kw1\">text</span><br/>    <span class=\"kw3\">set</span> <span class=\"kw3\">my</span> <span class=\"kw1\">text</span> <span class=\"kw1\">item</span> <span class=\"kw1\">delimiters</span> <span class=\"kw3\">to</span> dlm<br/>    <span class=\"kw3\">return</span> strJoined<br/><span class=\"kw3\">end</span> intercalate<br/>\u00a0<br/><span class=\"co1\">-- isoRow\u00a0:: [Date] -&gt; String</span><br/><span class=\"kw3\">on</span> isoRow<span class=\"br0\">(</span>lstDate<span class=\"br0\">)</span><br/>    intercalate<span class=\"br0\">(</span><span class=\"kw1\">tab</span>, map<span class=\"br0\">(</span><span class=\"kw3\">my</span> isoDateString, lstDate<span class=\"br0\">)</span><span class=\"br0\">)</span><br/><span class=\"kw3\">end</span> isoRow<br/>\u00a0<br/><span class=\"co1\">-- map\u00a0:: (a -&gt; b) -&gt; [a] -&gt; [b]</span><br/><span class=\"kw3\">on</span> map<span class=\"br0\">(</span>f, xs<span class=\"br0\">)</span><br/>    <span class=\"kw3\">tell</span> mReturn<span class=\"br0\">(</span>f<span class=\"br0\">)</span><br/>        <span class=\"kw3\">set</span> lng <span class=\"kw3\">to</span> length <span class=\"kw3\">of</span> xs<br/>        <span class=\"kw3\">set</span> lst <span class=\"kw3\">to</span> <span class=\"br0\">{</span><span class=\"br0\">}</span><br/>        <span class=\"kw3\">repeat</span> <span class=\"kw3\">with</span> i <span class=\"kw3\">from</span> <span class=\"nu0\">1</span> <span class=\"kw3\">to</span> lng<br/>            <span class=\"kw3\">set</span> <span class=\"kw3\">end</span> <span class=\"kw3\">of</span> lst <span class=\"kw3\">to</span> |\u03bb|<span class=\"br0\">(</span><span class=\"kw1\">item</span> i <span class=\"kw3\">of</span> xs, i, xs<span class=\"br0\">)</span><br/>        <span class=\"kw3\">end</span> <span class=\"kw3\">repeat</span><br/>        <span class=\"kw3\">return</span> lst<br/>    <span class=\"kw3\">end</span> <span class=\"kw3\">tell</span><br/><span class=\"kw3\">end</span> map<br/>\u00a0<br/><span class=\"co1\">-- Lift 2nd class handler function into 1st class script wrapper </span><br/><span class=\"co1\">-- mReturn\u00a0:: Handler -&gt; Script</span><br/><span class=\"kw3\">on</span> mReturn<span class=\"br0\">(</span>f<span class=\"br0\">)</span><br/>    <span class=\"kw3\">if</span> class <span class=\"kw3\">of</span> f <span class=\"kw3\">is</span> <span class=\"kw3\">script</span> <span class=\"kw3\">then</span><br/>        f<br/>    <span class=\"kw3\">else</span><br/>        <span class=\"kw3\">script</span><br/>            <span class=\"kw3\">property</span> |\u03bb|\u00a0: f<br/>        <span class=\"kw3\">end</span> <span class=\"kw3\">script</span><br/>    <span class=\"kw3\">end</span> <span class=\"kw3\">if</span><br/><span class=\"kw3\">end</span> mReturn<br/>\u00a0<br/><span class=\"co1\">-- transpose\u00a0:: [[a]] -&gt; [[a]]</span><br/><span class=\"kw3\">on</span> transpose<span class=\"br0\">(</span>xss<span class=\"br0\">)</span><br/>    <span class=\"kw3\">script</span> column<br/>        <span class=\"kw3\">on</span> |\u03bb|<span class=\"br0\">(</span>_, iCol<span class=\"br0\">)</span><br/>            <span class=\"kw3\">script</span> row<br/>                <span class=\"kw3\">on</span> |\u03bb|<span class=\"br0\">(</span>xs<span class=\"br0\">)</span><br/>                    <span class=\"kw1\">item</span> iCol <span class=\"kw3\">of</span> xs<br/>                <span class=\"kw3\">end</span> |\u03bb|<br/>            <span class=\"kw3\">end</span> <span class=\"kw3\">script</span><br/>\u00a0<br/>            map<span class=\"br0\">(</span>row, xss<span class=\"br0\">)</span><br/>        <span class=\"kw3\">end</span> |\u03bb|<br/>    <span class=\"kw3\">end</span> <span class=\"kw3\">script</span><br/>\u00a0<br/>    map<span class=\"br0\">(</span>column, <span class=\"kw1\">item</span> <span class=\"nu0\">1</span> <span class=\"kw3\">of</span> xss<span class=\"br0\">)</span><br/><span class=\"kw3\">end</span> transpose</pre>"}, {"lang": "AutoHotkey", "loc": 29, "block": "<pre class=\"ahk highlighted_source\"><span class=\"kw1\">if</span> <span class=\"nu0\">1</span> <span class=\"sy0\">=</span> <span class=\"co1\">; no parameter passed</span><br/><span class=\"br0\">{</span><br/>\t<a href=\"http://www.autohotkey.com/docs/commands/InputBox.htm\"><span class=\"kw3\">InputBox</span></a><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> Last Fridays of year<span class=\"sy0\">,</span> <span class=\"kw6\">Enter</span> a year:<span class=\"sy0\">,</span> <span class=\"sy0\">,</span> <span class=\"sy0\">,</span> <span class=\"sy0\">,</span> <span class=\"sy0\">,</span> <span class=\"sy0\">,</span> <span class=\"sy0\">,</span> <span class=\"sy0\">,</span> <span class=\"re0\">%A_YYYY%</span><br/>\t<span class=\"kw1\">If</span> <a href=\"http://www.autohotkey.com/docs/Variables.htm#ErrorLevel\"><span class=\"kw2\">ErrorLevel</span></a><br/>\t\t<a href=\"http://www.autohotkey.com/docs/commands/ExitApp.htm\"><span class=\"kw3\">ExitApp</span></a><br/><span class=\"br0\">}</span><br/>\u00a0<br/>YYYY <span class=\"sy0\">=</span>\u00a0%1% <span class=\"co1\">; retrieve command line parameter</span><br/>Stmp <span class=\"sy0\">=</span> <span class=\"re0\">%YYYY%</span>0101000000<br/>count<span class=\"sy0\">=</span> <span class=\"nu0\">0</span><br/>\u00a0<br/><span class=\"kw1\">While</span> count <span class=\"sy0\">&lt;</span> <span class=\"nu0\">12</span><br/><span class=\"br0\">{</span><br/>\t<a href=\"http://www.autohotkey.com/docs/commands/FormatTime.htm\"><span class=\"kw3\">FormatTime</span></a><span class=\"sy0\">,</span> ddd<span class=\"sy0\">,</span> <span class=\"re0\">%stmp%</span><span class=\"sy0\">,</span> ddd<br/>\t<a href=\"http://www.autohotkey.com/docs/commands/FormatTime.htm\"><span class=\"kw3\">FormatTime</span></a><span class=\"sy0\">,</span> M<span class=\"sy0\">,</span> <span class=\"re0\">%stmp%</span><span class=\"sy0\">,</span> M<br/>\t<span class=\"kw1\">If</span> <span class=\"br0\">(</span>ddd <span class=\"sy0\">=</span> <span class=\"st0\">\"Fri\"</span><span class=\"br0\">)</span><span class=\"br0\">{</span><br/>\t\t<span class=\"kw1\">if</span> <span class=\"br0\">(</span>M<span class=\"sy0\">-</span><span class=\"nu0\">1</span> <span class=\"sy0\">=</span> count<span class=\"br0\">)</span><span class=\"br0\">{</span><br/>\t\t\tt <span class=\"sy0\">:=</span> stmp<br/>\t\t\tstmp <span class=\"sy0\">+=</span> <span class=\"nu0\">7</span><span class=\"sy0\">,</span> days<br/>\t\t<span class=\"br0\">}</span><br/>\t\t<span class=\"kw1\">else</span><br/>\t\t\t res <span class=\"sy0\">.=</span> <a href=\"http://www.autohotkey.com/docs/Functions.htm#BuiltIn\"><span class=\"kw4\">SubStr</span></a><span class=\"br0\">(</span>t<span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">4</span><span class=\"br0\">)</span> <span class=\"st0\">\"-\"</span> <a href=\"http://www.autohotkey.com/docs/Functions.htm#BuiltIn\"><span class=\"kw4\">SubStr</span></a><span class=\"br0\">(</span>t<span class=\"sy0\">,</span> <span class=\"nu0\">5</span><span class=\"sy0\">,</span> <span class=\"nu0\">2</span><span class=\"br0\">)</span> <span class=\"st0\">\"-\"</span> <a href=\"http://www.autohotkey.com/docs/Functions.htm#BuiltIn\"><span class=\"kw4\">SubStr</span></a><span class=\"br0\">(</span>t<span class=\"sy0\">,</span> <span class=\"nu0\">7</span><span class=\"sy0\">,</span> <span class=\"nu0\">2</span><span class=\"br0\">)</span> <span class=\"st0\">\"`n\"</span><br/>\t\t\t<span class=\"sy0\">,</span>count<span class=\"sy0\">++</span><br/>\t\t\t<span class=\"sy0\">,</span>stmp <span class=\"sy0\">:=</span> YYYY <span class=\"sy0\">.</span> <a href=\"http://www.autohotkey.com/docs/Functions.htm#BuiltIn\"><span class=\"kw4\">SubStr</span></a><span class=\"br0\">(</span><span class=\"st0\">\"0\"</span> M<span class=\"sy0\">,</span> <span class=\"sy0\">-</span><span class=\"nu0\">1</span><span class=\"br0\">)</span> <span class=\"sy0\">.</span> <span class=\"st0\">\"01\"</span><br/>\t<span class=\"br0\">}</span><br/>\t<span class=\"kw1\">else</span><br/>\t\tstmp <span class=\"sy0\">+=</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> days<br/><span class=\"br0\">}</span><br/><a href=\"http://www.autohotkey.com/docs/commands/MsgBox.htm\"><span class=\"kw3\">MsgBox</span></a>\u00a0% res</pre>"}, {"lang": "AutoIt", "loc": 24, "block": "<pre class=\"autoit highlighted_source\">\u00a0<br/><span class=\"kw5\">#include</span><span class=\"co1\"> &lt;Date.au3&gt;</span><br/>\u00a0<br/><span class=\"re0\">$iYear</span> <span class=\"sy0\">=</span> <a href=\"http://www.autoitscript.com/autoit3/docs/functions/InputBox.htm\"><span class=\"kw3\">InputBox</span></a><span class=\"br0\">(</span><span class=\"st0\">'Last Friday in each month'</span><span class=\"sy0\">,</span> <span class=\"st0\">'Please input the year:'</span><span class=\"br0\">)</span><br/>\u00a0<br/>_GetLastFridays<span class=\"br0\">(</span><span class=\"re0\">$iYear</span><span class=\"br0\">)</span><br/>\u00a0<br/><a href=\"http://www.autoitscript.com/autoit3/docs/keywords.htm\"><span class=\"kw1\">Func</span></a> _GetLastFridays<span class=\"br0\">(</span><span class=\"re0\">$_iYear</span><span class=\"br0\">)</span><br/>\t<a href=\"http://www.autoitscript.com/autoit3/docs/keywords.htm\"><span class=\"kw1\">Local</span></a> <span class=\"re0\">$sResult</span> <span class=\"sy0\">=</span> <span class=\"st0\">'last fridays in '</span> <span class=\"sy0\">&amp;</span> <span class=\"re0\">$_iYear</span> <span class=\"sy0\">&amp;</span> <a href=\"http://www.autoitscript.com/autoit3/docs/macros.htm\"><span class=\"kw2\"><span class=\"re0\">@LF</span></span></a><span class=\"sy0\">,</span> <span class=\"re0\">$iDay</span><br/>\t<a href=\"http://www.autoitscript.com/autoit3/docs/keywords.htm\"><span class=\"kw1\">Local</span></a> <span class=\"re0\">$aDaysInMonth</span><span class=\"br0\">[</span><span class=\"nu0\">12</span><span class=\"br0\">]</span> <span class=\"sy0\">=</span> <span class=\"br0\">[</span><span class=\"nu0\">31</span><span class=\"sy0\">,</span><span class=\"nu0\">28</span><span class=\"sy0\">,</span><span class=\"nu0\">31</span><span class=\"sy0\">,</span><span class=\"nu0\">30</span><span class=\"sy0\">,</span><span class=\"nu0\">31</span><span class=\"sy0\">,</span><span class=\"nu0\">30</span><span class=\"sy0\">,</span><span class=\"nu0\">31</span><span class=\"sy0\">,</span><span class=\"nu0\">31</span><span class=\"sy0\">,</span><span class=\"nu0\">30</span><span class=\"sy0\">,</span><span class=\"nu0\">31</span><span class=\"sy0\">,</span><span class=\"nu0\">30</span><span class=\"sy0\">,</span><span class=\"nu0\">31</span><span class=\"br0\">]</span><br/>\t<a href=\"http://www.autoitscript.com/autoit3/docs/keywords.htm\"><span class=\"kw1\">If</span></a> <span class=\"kw4\">_DateIsLeapYear</span><span class=\"br0\">(</span><span class=\"re0\">$_iYear</span><span class=\"br0\">)</span> <a href=\"http://www.autoitscript.com/autoit3/docs/keywords.htm\"><span class=\"kw1\">Then</span></a> <span class=\"re0\">$aDaysInMonth</span><span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"br0\">]</span> <span class=\"sy0\">=</span> <span class=\"nu0\">29</span><br/>\t<a href=\"http://www.autoitscript.com/autoit3/docs/keywords.htm\"><span class=\"kw1\">For</span></a> <span class=\"re0\">$i</span> <span class=\"sy0\">=</span> <span class=\"nu0\">1</span> <a href=\"http://www.autoitscript.com/autoit3/docs/keywords.htm\"><span class=\"kw1\">To</span></a> <span class=\"nu0\">12</span><br/>\t\t<span class=\"re0\">$iDay</span> <span class=\"sy0\">=</span> <span class=\"re0\">$aDaysInMonth</span><span class=\"br0\">[</span><span class=\"re0\">$i</span><span class=\"sy0\">-</span><span class=\"nu0\">1</span><span class=\"br0\">]</span><br/>\t\t<a href=\"http://www.autoitscript.com/autoit3/docs/keywords.htm\"><span class=\"kw1\">While</span></a> <span class=\"nu0\">1</span><br/>\t\t\t<a href=\"http://www.autoitscript.com/autoit3/docs/keywords.htm\"><span class=\"kw1\">If</span></a> <span class=\"kw4\">_DateToDayOfWeekISO</span><span class=\"br0\">(</span><span class=\"re0\">$_iYear</span><span class=\"sy0\">,</span> <span class=\"re0\">$i</span><span class=\"sy0\">,</span> <span class=\"re0\">$iDay</span><span class=\"br0\">)</span> <span class=\"sy0\">=</span> <span class=\"nu0\">5</span> <a href=\"http://www.autoitscript.com/autoit3/docs/keywords.htm\"><span class=\"kw1\">Then</span></a><br/>\t\t\t\t<span class=\"re0\">$sResult</span> <span class=\"sy0\">&amp;=</span> <a href=\"http://www.autoitscript.com/autoit3/docs/functions/StringFormat.htm\"><span class=\"kw3\">StringFormat</span></a><span class=\"br0\">(</span><span class=\"st0\">'%4d-%02d-%02d'</span><span class=\"sy0\">,</span> <span class=\"re0\">$_iYear</span><span class=\"sy0\">,</span> <span class=\"re0\">$i</span><span class=\"sy0\">,</span> <span class=\"re0\">$iDay</span><span class=\"br0\">)</span> <span class=\"sy0\">&amp;</span> <a href=\"http://www.autoitscript.com/autoit3/docs/macros.htm\"><span class=\"kw2\"><span class=\"re0\">@LF</span></span></a><br/>\t\t\t\t<a href=\"http://www.autoitscript.com/autoit3/docs/keywords.htm\"><span class=\"kw1\">ExitLoop</span></a><br/>\t\t\t<a href=\"http://www.autoitscript.com/autoit3/docs/keywords.htm\"><span class=\"kw1\">EndIf</span></a><br/>\t\t\t<span class=\"re0\">$iDay</span> <span class=\"sy0\">-=</span> <span class=\"nu0\">1</span><br/>\t\t<a href=\"http://www.autoitscript.com/autoit3/docs/keywords.htm\"><span class=\"kw1\">WEnd</span></a><br/>\t<a href=\"http://www.autoitscript.com/autoit3/docs/keywords.htm\"><span class=\"kw1\">Next</span></a><br/>\t<a href=\"http://www.autoitscript.com/autoit3/docs/functions/ConsoleWrite.htm\"><span class=\"kw3\">ConsoleWrite</span></a><span class=\"br0\">(</span><span class=\"re0\">$sResult</span><span class=\"br0\">)</span><br/><a href=\"http://www.autoitscript.com/autoit3/docs/keywords.htm\"><span class=\"kw1\">EndFunc</span></a>  <span class=\"co0\">;==&gt;_GetFridays</span><br/>\u00a0</pre>"}, {"lang": "AWK", "loc": 19, "block": "<pre class=\"awk highlighted_source\">\u00a0<br/><span class=\"co1\"># syntax: GAWK -f LAST_FRIDAY_OF_EACH_MONTH.AWK year</span><br/><span class=\"co1\"># converted from Fortran</span><br/><span class=\"kw2\">BEGIN</span> <span class=\"br0\">{</span><br/>    <span class=\"kw4\">split</span><span class=\"br0\">(</span><span class=\"st0\">\"31,28,31,30,31,30,31,31,30,31,30,31\"</span>,daynum_array,<span class=\"st0\">\",\"</span><span class=\"br0\">)</span> <span class=\"co1\"># days per month in non leap year</span><br/>    year = <span class=\"kw3\">ARGV</span><span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"br0\">]</span><br/>    <span class=\"kw1\">if</span> <span class=\"br0\">(</span>year <span class=\"sy3\">%</span> <span class=\"nu0\">400</span> <span class=\"sy2\">==</span> <span class=\"nu0\">0</span> <span class=\"sy1\">||</span> <span class=\"br0\">(</span>year <span class=\"sy3\">%</span> <span class=\"nu0\">4</span> <span class=\"sy2\">==</span> <span class=\"nu0\">0</span> <span class=\"sy1\">&amp;&amp;</span> year <span class=\"sy3\">%</span> <span class=\"nu0\">100</span> <span class=\"sy2\">!=</span> <span class=\"nu0\">0</span><span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>      daynum_array<span class=\"br0\">[</span><span class=\"nu0\">2</span><span class=\"br0\">]</span> = <span class=\"nu0\">29</span><br/>    <span class=\"br0\">}</span><br/>    y = year <span class=\"sy3\">-</span> <span class=\"nu0\">1</span><br/>    k = <span class=\"nu0\">44</span> <span class=\"sy3\">+</span> y <span class=\"sy3\">+</span> <span class=\"kw4\">int</span><span class=\"br0\">(</span>y<span class=\"sy3\">/</span><span class=\"nu0\">4</span><span class=\"br0\">)</span> <span class=\"sy3\">+</span> <span class=\"kw4\">int</span><span class=\"br0\">(</span><span class=\"nu0\">6</span><span class=\"sy3\">*</span><span class=\"br0\">(</span>y<span class=\"sy3\">/</span><span class=\"nu0\">100</span><span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"sy3\">+</span> <span class=\"kw4\">int</span><span class=\"br0\">(</span>y<span class=\"sy3\">/</span><span class=\"nu0\">400</span><span class=\"br0\">)</span><br/>    <span class=\"kw1\">for</span> <span class=\"br0\">(</span>m=<span class=\"nu0\">1</span>; m<span class=\"sy2\">&lt;=</span><span class=\"nu0\">12</span>; m<span class=\"sy3\">++</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>      k <span class=\"sy3\">+</span>= daynum_array<span class=\"br0\">[</span>m<span class=\"br0\">]</span><br/>      d = daynum_array<span class=\"br0\">[</span>m<span class=\"br0\">]</span> <span class=\"sy3\">-</span> <span class=\"br0\">(</span>k<span class=\"sy3\">%</span>7<span class=\"br0\">)</span><br/>      <span class=\"kw5\">printf</span><span class=\"br0\">(</span><span class=\"st0\">\"%04d-%02d-%02d<span class=\"es0\">\\n</span>\"</span>,year,m,d<span class=\"br0\">)</span><br/>    <span class=\"br0\">}</span><br/>    exit<span class=\"br0\">(</span><span class=\"nu0\">0</span><span class=\"br0\">)</span><br/><span class=\"br0\">}</span><br/>\u00a0</pre>"}, {"lang": "Befunge", "loc": 6, "block": "<pre class=\"text highlighted_source\">\":raeY\",,,,,&amp;&gt;55+,:::45*:*%\\\"d\"%!*\\4%+!3v<br/>v2++1**\"I\"5\\+/*:*54\\-/\"d\"\\/4::-1::p53+g5&lt;<br/>&gt;:00p5g4-+7%\\:0\\v&gt;,\"-\",5g+:55+/68*+,55+%v<br/>^&lt;&lt;_$$vv*86%+55:&lt;^+*86%+55,+*86/+55:-1:&lt;6<br/>&gt;$$^@$&lt;&gt;+\\55+/:#^_$&gt;:#,_$\"-\",\\:04-\\-00g^8<br/>^&lt;# #\"#\"##\"#\"##!`       +76:+1g00,+55,+*&lt;</pre>"}, {"lang": "C", "loc": 20, "block": "<pre class=\"c highlighted_source\"><span class=\"co2\">#include &lt;stdio.h&gt;</span><br/><span class=\"co2\">#include &lt;stdlib.h&gt;</span><br/>\u00a0<br/><span class=\"kw4\">int</span> main<span class=\"br0\">(</span><span class=\"kw4\">int</span> c<span class=\"sy0\">,</span> <span class=\"kw4\">char</span> <span class=\"sy0\">*</span>v<span class=\"br0\">[</span><span class=\"br0\">]</span><span class=\"br0\">)</span><br/><span class=\"br0\">{</span><br/>\t<span class=\"kw4\">int</span> days<span class=\"br0\">[</span><span class=\"br0\">]</span> <span class=\"sy0\">=</span> <span class=\"br0\">{</span><span class=\"nu0\">31</span><span class=\"sy0\">,</span><span class=\"nu0\">29</span><span class=\"sy0\">,</span><span class=\"nu0\">31</span><span class=\"sy0\">,</span><span class=\"nu0\">30</span><span class=\"sy0\">,</span><span class=\"nu0\">31</span><span class=\"sy0\">,</span><span class=\"nu0\">30</span><span class=\"sy0\">,</span><span class=\"nu0\">31</span><span class=\"sy0\">,</span><span class=\"nu0\">31</span><span class=\"sy0\">,</span><span class=\"nu0\">30</span><span class=\"sy0\">,</span><span class=\"nu0\">31</span><span class=\"sy0\">,</span><span class=\"nu0\">30</span><span class=\"sy0\">,</span><span class=\"nu0\">31</span><span class=\"br0\">}</span><span class=\"sy0\">;</span><br/>\t<span class=\"kw4\">int</span> m<span class=\"sy0\">,</span> y<span class=\"sy0\">,</span> w<span class=\"sy0\">;</span><br/>\u00a0<br/>\t<span class=\"kw1\">if</span> <span class=\"br0\">(</span>c <span class=\"sy0\">&lt;</span> <span class=\"nu0\">2</span> <span class=\"sy0\">||</span> <span class=\"br0\">(</span>y <span class=\"sy0\">=</span> <a href=\"http://www.opengroup.org/onlinepubs/009695399/functions/atoi.html\"><span class=\"kw3\">atoi</span></a><span class=\"br0\">(</span>v<span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"sy0\">&lt;=</span> <span class=\"nu0\">1700</span><span class=\"br0\">)</span> <span class=\"kw1\">return</span> <span class=\"nu0\">1</span><span class=\"sy0\">;</span><br/> \tdays<span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"br0\">]</span> <span class=\"sy0\">-=</span> <span class=\"br0\">(</span>y <span class=\"sy0\">%</span> <span class=\"nu0\">4</span><span class=\"br0\">)</span> <span class=\"sy0\">||</span> <span class=\"br0\">(</span><span class=\"sy0\">!</span><span class=\"br0\">(</span>y <span class=\"sy0\">%</span> <span class=\"nu0\">100</span><span class=\"br0\">)</span> <span class=\"sy0\">&amp;&amp;</span> <span class=\"br0\">(</span>y <span class=\"sy0\">%</span> <span class=\"nu0\">400</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>\tw <span class=\"sy0\">=</span> y <span class=\"sy0\">*</span> <span class=\"nu0\">365</span> <span class=\"sy0\">+</span> <span class=\"br0\">(</span>y <span class=\"sy0\">-</span> <span class=\"nu0\">1</span><span class=\"br0\">)</span> <span class=\"sy0\">/</span> <span class=\"nu0\">4</span> <span class=\"sy0\">-</span> <span class=\"br0\">(</span>y <span class=\"sy0\">-</span> <span class=\"nu0\">1</span><span class=\"br0\">)</span> <span class=\"sy0\">/</span> <span class=\"nu0\">100</span> <span class=\"sy0\">+</span> <span class=\"br0\">(</span>y <span class=\"sy0\">-</span> <span class=\"nu0\">1</span><span class=\"br0\">)</span> <span class=\"sy0\">/</span> <span class=\"nu0\">400</span> <span class=\"sy0\">+</span> <span class=\"nu0\">6</span><span class=\"sy0\">;</span><br/>\u00a0<br/>\t<span class=\"kw1\">for</span><span class=\"br0\">(</span>m <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span> m <span class=\"sy0\">&lt;</span> <span class=\"nu0\">12</span><span class=\"sy0\">;</span> m<span class=\"sy0\">++</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>\t\tw <span class=\"sy0\">=</span> <span class=\"br0\">(</span>w <span class=\"sy0\">+</span> days<span class=\"br0\">[</span>m<span class=\"br0\">]</span><span class=\"br0\">)</span> <span class=\"sy0\">%</span> <span class=\"nu0\">7</span><span class=\"sy0\">;</span><br/>\t\t<a href=\"http://www.opengroup.org/onlinepubs/009695399/functions/printf.html\"><span class=\"kw3\">printf</span></a><span class=\"br0\">(</span><span class=\"st0\">\"%d-%02d-%d<span class=\"es1\">\\n</span>\"</span><span class=\"sy0\">,</span> y<span class=\"sy0\">,</span> m <span class=\"sy0\">+</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span><br/>\t\t\tdays<span class=\"br0\">[</span>m<span class=\"br0\">]</span> <span class=\"sy0\">+</span> <span class=\"br0\">(</span>w <span class=\"sy0\">&lt;</span> <span class=\"nu0\">5</span> <span class=\"sy0\">?</span> <span class=\"sy0\">-</span><span class=\"nu0\">2</span> <span class=\"sy0\">:</span> <span class=\"nu0\">5</span><span class=\"br0\">)</span> <span class=\"sy0\">-</span> w<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>\t<span class=\"br0\">}</span><br/>\u00a0<br/>\t<span class=\"kw1\">return</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span><br/><span class=\"br0\">}</span></pre>"}, {"lang": "C#", "loc": 38, "block": "<pre class=\"csharp highlighted_source\"><span class=\"kw1\">using</span> <span class=\"co3\">System</span><span class=\"sy0\">;</span><br/><span class=\"kw1\">using</span> <span class=\"co3\">System.Collections.Generic</span><span class=\"sy0\">;</span><br/><span class=\"kw1\">using</span> <span class=\"co3\">System.Globalization</span><span class=\"sy0\">;</span><br/><span class=\"kw1\">using</span> <span class=\"co3\">System.Linq</span><span class=\"sy0\">;</span><br/>\u00a0<br/><span class=\"kw1\">namespace</span> RosettaCode<span class=\"sy0\">.</span><span class=\"me1\">LastFridaysOfYear</span><br/><span class=\"br0\">{</span><br/>    <span class=\"kw1\">internal</span> <span class=\"kw1\">static</span> <span class=\"kw4\">class</span> Program<br/>    <span class=\"br0\">{</span><br/>        <span class=\"kw1\">private</span> <span class=\"kw1\">static</span> IEnumerable<span class=\"sy0\">&lt;</span>DateTime<span class=\"sy0\">&gt;</span> LastFridaysOfYear<span class=\"br0\">(</span><span class=\"kw4\">int</span> year<span class=\"br0\">)</span><br/>        <span class=\"br0\">{</span><br/>            <span class=\"kw1\">for</span> <span class=\"br0\">(</span><span class=\"kw1\">var</span> month <span class=\"sy0\">=</span> <span class=\"nu0\">1</span><span class=\"sy0\">;</span> month <span class=\"sy0\">&lt;=</span> <span class=\"nu0\">12</span><span class=\"sy0\">;</span> month<span class=\"sy0\">++</span><span class=\"br0\">)</span><br/>            <span class=\"br0\">{</span><br/>                <span class=\"kw1\">var</span> date <span class=\"sy0\">=</span> <a href=\"http://www.google.com/search?q=new+msdn.microsoft.com\"><span class=\"kw3\">new</span></a> DateTime<span class=\"br0\">(</span>year, month, <span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"sy0\">.</span><span class=\"me1\">AddMonths</span><span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"sy0\">.</span><span class=\"me1\">AddDays</span><span class=\"br0\">(</span><span class=\"sy0\">-</span><span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>                <span class=\"kw1\">while</span> <span class=\"br0\">(</span>date<span class=\"sy0\">.</span><span class=\"me1\">DayOfWeek</span> <span class=\"sy0\">!=</span> DayOfWeek<span class=\"sy0\">.</span><span class=\"me1\">Friday</span><span class=\"br0\">)</span><br/>                <span class=\"br0\">{</span><br/>                    date <span class=\"sy0\">=</span> date<span class=\"sy0\">.</span><span class=\"me1\">AddDays</span><span class=\"br0\">(</span><span class=\"sy0\">-</span><span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>                <span class=\"br0\">}</span><br/>                <span class=\"kw1\">yield</span> <span class=\"kw1\">return</span> date<span class=\"sy0\">;</span><br/>            <span class=\"br0\">}</span><br/>        <span class=\"br0\">}</span><br/>\u00a0<br/>        <span class=\"kw1\">private</span> <span class=\"kw1\">static</span> <span class=\"kw4\">void</span> Main<span class=\"br0\">(</span><span class=\"kw4\">string</span><span class=\"br0\">[</span><span class=\"br0\">]</span> arguments<span class=\"br0\">)</span><br/>        <span class=\"br0\">{</span><br/>            <span class=\"kw4\">int</span> year<span class=\"sy0\">;</span><br/>            <span class=\"kw1\">var</span> argument <span class=\"sy0\">=</span> arguments<span class=\"sy0\">.</span><span class=\"me1\">FirstOrDefault</span><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>            <span class=\"kw1\">if</span> <span class=\"br0\">(</span><span class=\"kw4\">string</span><span class=\"sy0\">.</span><span class=\"me1\">IsNullOrEmpty</span><span class=\"br0\">(</span>argument<span class=\"br0\">)</span> <span class=\"sy0\">||</span> <span class=\"sy0\">!</span><span class=\"kw4\">int</span><span class=\"sy0\">.</span><span class=\"me1\">TryParse</span><span class=\"br0\">(</span>argument, <span class=\"kw1\">out</span> year<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>            <span class=\"br0\">{</span><br/>                year <span class=\"sy0\">=</span> DateTime<span class=\"sy0\">.</span><span class=\"me1\">Today</span><span class=\"sy0\">.</span><span class=\"me1\">Year</span><span class=\"sy0\">;</span><br/>            <span class=\"br0\">}</span><br/>\u00a0<br/>            <span class=\"kw1\">foreach</span> <span class=\"br0\">(</span><span class=\"kw1\">var</span> date <span class=\"kw1\">in</span> LastFridaysOfYear<span class=\"br0\">(</span>year<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>            <span class=\"br0\">{</span><br/>                Console<span class=\"sy0\">.</span><span class=\"me1\">WriteLine</span><span class=\"br0\">(</span>date<span class=\"sy0\">.</span><span class=\"me1\">ToString</span><span class=\"br0\">(</span><span class=\"st0\">\"d\"</span>, CultureInfo<span class=\"sy0\">.</span><span class=\"me1\">InvariantCulture</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>            <span class=\"br0\">}</span><br/>        <span class=\"br0\">}</span><br/>    <span class=\"br0\">}</span><br/><span class=\"br0\">}</span></pre>"}, {"lang": "C++", "loc": 17, "block": "<pre class=\"cpp highlighted_source\"><span class=\"co2\">#include &lt;boost/date_time/gregorian/gregorian.hpp&gt;</span><br/><span class=\"co2\">#include &lt;iostream&gt;</span><br/><span class=\"co2\">#include &lt;cstdlib&gt;</span><br/>\u00a0<br/><span class=\"kw4\">int</span> main<span class=\"br0\">(</span> <span class=\"kw4\">int</span> argc , <span class=\"kw4\">char</span><span class=\"sy2\">*</span> argv<span class=\"br0\">[</span> <span class=\"br0\">]</span> <span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>   <span class=\"kw2\">using</span> <span class=\"kw2\">namespace</span> boost<span class=\"sy4\">::</span><span class=\"me2\">gregorian</span> <span class=\"sy4\">;</span><br/>\u00a0<br/>   greg_month months<span class=\"br0\">[</span> <span class=\"br0\">]</span> <span class=\"sy1\">=</span> <span class=\"br0\">{</span> Jan , Feb , Mar , Apr , May , Jun , Jul ,<br/>      Aug , Sep , Oct , Nov , Dec <span class=\"br0\">}</span> <span class=\"sy4\">;</span><br/>   greg_year gy <span class=\"sy1\">=</span> <span class=\"kw3\">atoi</span><span class=\"br0\">(</span> argv<span class=\"br0\">[</span> <span class=\"nu0\">1</span> <span class=\"br0\">]</span> <span class=\"br0\">)</span> <span class=\"sy4\">;</span><br/>   <span class=\"kw1\">for</span> <span class=\"br0\">(</span> <span class=\"kw4\">int</span> i <span class=\"sy1\">=</span> <span class=\"nu0\">0</span> <span class=\"sy4\">;</span> i <span class=\"sy1\">&lt;</span> <span class=\"nu0\">12</span> <span class=\"sy4\">;</span> i<span class=\"sy2\">++</span> <span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>      last_day_of_the_week_in_month lwdm <span class=\"br0\">(</span> Friday , months<span class=\"br0\">[</span> i <span class=\"br0\">]</span> <span class=\"br0\">)</span> <span class=\"sy4\">;</span><br/>      date d <span class=\"sy1\">=</span> lwdm.<span class=\"me1\">get_date</span><span class=\"br0\">(</span> gy <span class=\"br0\">)</span> <span class=\"sy4\">;</span><br/>      std<span class=\"sy4\">::</span><span class=\"kw3\">cout</span> <span class=\"sy1\">&lt;&lt;</span> d <span class=\"sy1\">&lt;&lt;</span> std<span class=\"sy4\">::</span><span class=\"me2\">endl</span> <span class=\"sy4\">;</span><br/>   <span class=\"br0\">}</span><br/>   <span class=\"kw1\">return</span> <span class=\"nu0\">0</span> <span class=\"sy4\">;</span><br/><span class=\"br0\">}</span></pre>"}, {"lang": "Clojure", "loc": 11, "block": "<pre class=\"clojure highlighted_source\"><span class=\"br0\">(</span>use '<span class=\"br0\">[</span>clj<span class=\"sy0\">-</span><span class=\"kw1\">time</span><span class=\"sy0\">.</span>core\u00a0:<span class=\"me1\">only</span> <span class=\"br0\">[</span>last<span class=\"sy0\">-</span>day<span class=\"sy0\">-</span>of<span class=\"sy0\">-</span>the<span class=\"sy0\">-</span>month day<span class=\"sy0\">-</span>of<span class=\"sy0\">-</span>week minus days<span class=\"br0\">]</span><span class=\"br0\">]</span><br/>     '<span class=\"br0\">[</span>clj<span class=\"sy0\">-</span><span class=\"kw1\">time</span><span class=\"sy0\">.</span><span class=\"kw1\">format</span>\u00a0:<span class=\"me1\">only</span> <span class=\"br0\">[</span>unparse formatters<span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"br0\">(</span><span class=\"kw1\">defn</span> last<span class=\"sy0\">-</span>fridays <span class=\"br0\">[</span>year<span class=\"br0\">]</span> <br/>  <span class=\"br0\">(</span><span class=\"kw1\">let</span> <span class=\"br0\">[</span>last<span class=\"sy0\">-</span>days <span class=\"br0\">(</span><span class=\"kw1\">map</span> #<span class=\"br0\">(</span>last<span class=\"sy0\">-</span>day<span class=\"sy0\">-</span>of<span class=\"sy0\">-</span>the<span class=\"sy0\">-</span>month year <span class=\"sy0\">%</span><span class=\"br0\">)</span> <span class=\"br0\">(</span><span class=\"kw1\">range</span> <span class=\"nu0\">1</span> <span class=\"nu0\">13</span> <span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"br0\">)</span> <br/>        dow <span class=\"br0\">(</span><span class=\"kw1\">map</span> day<span class=\"sy0\">-</span>of<span class=\"sy0\">-</span>week last<span class=\"sy0\">-</span>days<span class=\"br0\">)</span> <br/>        relation <span class=\"br0\">(</span><span class=\"kw1\">zipmap</span> last<span class=\"sy0\">-</span>days dow<span class=\"br0\">)</span><span class=\"br0\">]</span> <br/>    <span class=\"br0\">(</span><span class=\"kw1\">map</span> #<span class=\"br0\">(</span>minus <span class=\"br0\">(</span>key <span class=\"sy0\">%</span><span class=\"br0\">)</span> <span class=\"br0\">(</span>days <span class=\"br0\">(</span>mod <span class=\"br0\">(</span><span class=\"sy0\">+</span> <span class=\"br0\">(</span>val <span class=\"sy0\">%</span><span class=\"br0\">)</span> <span class=\"nu0\">2</span><span class=\"br0\">)</span> <span class=\"nu0\">7</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span> relation<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"br0\">(</span><span class=\"kw1\">defn</span> last<span class=\"sy0\">-</span>fridays<span class=\"sy0\">-</span>formatted <span class=\"br0\">[</span>year<span class=\"br0\">]</span><br/>  <span class=\"br0\">(</span><span class=\"kw1\">sort</span> <span class=\"br0\">(</span><span class=\"kw1\">map</span> #<span class=\"br0\">(</span>unparse <span class=\"br0\">(</span>formatters\u00a0:<span class=\"me1\">year</span><span class=\"sy0\">-</span>month<span class=\"sy0\">-</span>day<span class=\"br0\">)</span> <span class=\"sy0\">%</span><span class=\"br0\">)</span> <span class=\"br0\">(</span>last<span class=\"sy0\">-</span>fridays year<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span></pre>"}, {"lang": "COBOL", "loc": 50, "block": "<pre class=\"cobol highlighted_source\">\u00a0<br/>       <span class=\"kw3\">program-id</span><span class=\"sy0\">.</span> last-fri<span class=\"sy0\">.</span><br/>       <span class=\"kw3\">data</span> <span class=\"kw3\">division</span><span class=\"sy0\">.</span><br/>       <span class=\"kw3\">working-storage</span> <span class=\"kw1\">section</span><span class=\"sy0\">.</span><br/>       <span class=\"nu0\">1</span> wk-<span class=\"kw3\">date</span><span class=\"sy0\">.</span><br/>        <span class=\"nu0\">2</span> yr <span class=\"kw3\">pic</span> <span class=\"nu0\">9999</span><span class=\"sy0\">.</span><br/>        <span class=\"nu0\">2</span> mo <span class=\"kw3\">pic</span> <span class=\"nu0\">99</span> <span class=\"kw3\">value</span> <span class=\"nu0\">1</span><span class=\"sy0\">.</span><br/>        <span class=\"nu0\">2</span> da <span class=\"kw3\">pic</span> <span class=\"nu0\">99</span> <span class=\"kw3\">value</span> <span class=\"nu0\">1</span><span class=\"sy0\">.</span><br/>       <span class=\"nu0\">1</span> rd-<span class=\"kw3\">date</span> <span class=\"kw3\">redefines</span> wk-<span class=\"kw3\">date</span> <span class=\"kw3\">pic</span> <span class=\"nu0\">9</span><span class=\"br0\">(</span><span class=\"nu0\">8</span><span class=\"br0\">)</span><span class=\"sy0\">.</span><br/>       <span class=\"nu0\">1</span> <span class=\"kw3\">binary</span><span class=\"sy0\">.</span><br/>        <span class=\"nu0\">2</span> int-<span class=\"kw3\">date</span> <span class=\"kw3\">pic</span> <span class=\"nu0\">9</span><span class=\"br0\">(</span><span class=\"nu0\">8</span><span class=\"br0\">)</span><span class=\"sy0\">.</span><br/>        <span class=\"nu0\">2</span> dow <span class=\"kw3\">pic</span> <span class=\"nu0\">9</span><span class=\"br0\">(</span><span class=\"nu0\">4</span><span class=\"br0\">)</span><span class=\"sy0\">.</span><br/>        <span class=\"nu0\">2</span> friday <span class=\"kw3\">pic</span> <span class=\"nu0\">9</span><span class=\"br0\">(</span><span class=\"nu0\">4</span><span class=\"br0\">)</span> <span class=\"kw3\">value</span> <span class=\"nu0\">5</span><span class=\"sy0\">.</span><br/>       <span class=\"kw3\">procedure</span> <span class=\"kw3\">division</span><span class=\"sy0\">.</span><br/>           <span class=\"kw2\">display</span> <span class=\"st0\">\"Enter a calendar year (1601 thru 9999): \"</span><br/>               <span class=\"kw3\">with</span> <span class=\"kw3\">no</span> <span class=\"kw3\">advancing</span><br/>           <span class=\"kw2\">accept</span> yr<br/>           <span class=\"kw1\">if</span> yr &gt;<span class=\"sy0\">=</span> <span class=\"nu0\">1601</span> <span class=\"kw3\">and</span> &lt;<span class=\"sy0\">=</span> <span class=\"nu0\">9999</span><br/>               <span class=\"kw2\">continue</span><br/>           <span class=\"kw3\">else</span><br/>               <span class=\"kw2\">display</span> <span class=\"st0\">\"Invalid year\"</span><br/>               <span class=\"kw3\">stop</span> <span class=\"kw3\">run</span><br/>           end-<span class=\"kw1\">if</span><br/>           <span class=\"kw2\">perform</span> <span class=\"nu0\">12</span> <span class=\"kw2\">times</span><br/>               <span class=\"kw2\">move</span> <span class=\"nu0\">1</span> <span class=\"kw2\">to</span> da<br/>               <span class=\"kw2\">add</span> <span class=\"nu0\">1</span> <span class=\"kw2\">to</span> mo<br/>               <span class=\"kw1\">if</span> mo &gt; <span class=\"nu0\">12</span>              *&gt; <span class=\"kw2\">to</span> avoid y10k <span class=\"kw3\">in</span> <span class=\"nu0\">9999</span><br/>                   <span class=\"kw2\">move</span> <span class=\"nu0\">12</span> <span class=\"kw2\">to</span> mo<br/>                   <span class=\"kw2\">move</span> <span class=\"nu0\">31</span> <span class=\"kw2\">to</span> da<br/>               end-<span class=\"kw1\">if</span><br/>               <span class=\"kw2\">compute</span> int-<span class=\"kw3\">date</span> <span class=\"sy0\">=</span> <span class=\"kw3\">function</span><br/>                   integer-of-<span class=\"kw3\">date</span> <span class=\"br0\">(</span>rd-<span class=\"kw3\">date</span><span class=\"br0\">)</span><br/>               <span class=\"kw1\">if</span> mo <span class=\"sy0\">=</span><span class=\"nu0\">12</span> <span class=\"kw3\">and</span> da <span class=\"sy0\">=</span> <span class=\"nu0\">31</span>   *&gt; <span class=\"kw2\">to</span> avoid y10k <span class=\"kw3\">in</span> <span class=\"nu0\">9999</span><br/>                   <span class=\"kw2\">continue</span><br/>               <span class=\"kw3\">else</span><br/>                   <span class=\"kw3\">subtract</span> <span class=\"nu0\">1</span> <span class=\"kw3\">from</span> int-<span class=\"kw3\">date</span><br/>               end-<span class=\"kw1\">if</span><br/>               <span class=\"kw2\">compute</span> rd-<span class=\"kw3\">date</span> <span class=\"sy0\">=</span> <span class=\"kw3\">function</span><br/>                   <span class=\"kw4\">date-of-integer</span> <span class=\"br0\">(</span>int-<span class=\"kw3\">date</span><span class=\"br0\">)</span><br/>               <span class=\"kw2\">compute</span> dow <span class=\"sy0\">=</span> <span class=\"kw3\">function</span> <span class=\"kw4\">mod</span><br/>                   <span class=\"br0\">(</span><span class=\"br0\">(</span>int-<span class=\"kw3\">date</span><span class=\"sy0\"> - </span><span class=\"nu0\">1</span><span class=\"br0\">)</span> <span class=\"nu0\">7</span><span class=\"br0\">)</span><span class=\"sy0\"> + </span><span class=\"nu0\">1</span><br/>               <span class=\"kw2\">compute</span> dow <span class=\"sy0\">=</span> <span class=\"kw3\">function</span> <span class=\"kw4\">mod</span> <span class=\"br0\">(</span><span class=\"br0\">(</span>dow<span class=\"sy0\"> - </span>friday<span class=\"br0\">)</span> <span class=\"nu0\">7</span><span class=\"br0\">)</span><br/>               <span class=\"kw3\">subtract</span> dow <span class=\"kw3\">from</span> da<br/>               <span class=\"kw2\">display</span> yr <span class=\"st0\">\"-\"</span> mo <span class=\"st0\">\"-\"</span> da<br/>               <span class=\"kw2\">add</span> <span class=\"nu0\">1</span> <span class=\"kw2\">to</span> mo<br/>           end-<span class=\"kw2\">perform</span><br/>           <span class=\"kw3\">stop</span> <span class=\"kw3\">run</span><br/>           <span class=\"sy0\">.</span><br/>       <span class=\"kw3\">end</span> <span class=\"kw3\">program</span> last-fri<span class=\"sy0\">.</span><br/>\u00a0</pre>"}, {"lang": "CoffeeScript", "loc": 20, "block": "<pre class=\"coffeescript highlighted_source\">\u00a0<br/>last_friday_of_month = <span class=\"br0\">(</span>year<span class=\"sy0\">,</span> month<span class=\"br0\">)</span> <span class=\"sy0\">-&gt;</span><br/>  <span class=\"co1\"># month is 1-based, JS API is 0-based, then we use</span><br/>  <span class=\"co1\"># non-positive indexes to work backward relative to the</span><br/>  <span class=\"co1\"># first day of the next month</span><br/>  i = <span class=\"nu0\">0</span><br/>  <span class=\"kw1\">while</span> <span class=\"kw4\">true</span><br/>    last_day = <span class=\"kw3\">new</span> Date<span class=\"br0\">(</span>year<span class=\"sy0\">,</span> month<span class=\"sy0\">,</span> i<span class=\"br0\">)</span> <br/>    <span class=\"kw1\">if</span> last_day.<span class=\"me1\">getDay</span><span class=\"br0\">(</span><span class=\"br0\">)</span> == <span class=\"nu0\">5</span><br/>      <span class=\"kw1\">return</span> last_day.<span class=\"me1\">toDateString</span><span class=\"br0\">(</span><span class=\"br0\">)</span><br/>    i <span class=\"sy0\">-</span>= <span class=\"nu0\">1</span><br/>\u00a0<br/>print_last_fridays_of_month = <span class=\"br0\">(</span>year<span class=\"br0\">)</span> <span class=\"sy0\">-&gt;</span><br/>  <span class=\"kw1\">for</span> month <span class=\"kw1\">in</span> <span class=\"br0\">[</span><span class=\"nu0\">1</span>..<span class=\"nu0\">12</span><span class=\"br0\">]</span><br/>    console.<span class=\"me1\">log</span> last_friday_of_month year<span class=\"sy0\">,</span> month<br/>\u00a0<br/>do <span class=\"sy0\">-&gt;</span> <br/>  year = parseInt process.<span class=\"me1\">argv</span><span class=\"br0\">[</span><span class=\"nu0\">2</span><span class=\"br0\">]</span><br/>  print_last_fridays_of_month year<br/>\u00a0</pre>"}, {"lang": "Common Lisp", "loc": 14, "block": "<pre class=\"lisp highlighted_source\"><span class=\"br0\">(</span><span class=\"kw1\">defun</span> friday-before <span class=\"br0\">(</span>year month day<span class=\"br0\">)</span><br/> <span class=\"br0\">(</span><span class=\"kw1\">let</span>* <br/>  <span class=\"br0\">(</span><span class=\"br0\">(</span>timestamp <span class=\"br0\">(</span>encode-universal-time <span class=\"nu0\">0</span> <span class=\"nu0\">0</span> <span class=\"nu0\">12</span> day month year<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>   <span class=\"br0\">(</span>weekday <span class=\"br0\">(</span><span class=\"kw1\">nth</span> <span class=\"nu0\">6</span> <span class=\"br0\">(</span>multiple-value-<span class=\"kw1\">list</span> <span class=\"br0\">(</span>decode-universal-time timestamp<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>   <span class=\"br0\">(</span>fri <span class=\"br0\">(</span>- timestamp <span class=\"br0\">(</span>* <span class=\"br0\">(</span>+ <span class=\"br0\">(</span>mod <span class=\"br0\">(</span>+ weekday <span class=\"nu0\">2</span><span class=\"br0\">)</span> <span class=\"nu0\">7</span><span class=\"br0\">)</span> <span class=\"nu0\">1</span><span class=\"br0\">)</span> <span class=\"nu0\">86400</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>    <span class=\"br0\">(</span>multiple-value-bind <span class=\"br0\">(</span>_ _ _ d m y<span class=\"br0\">)</span> <span class=\"br0\">(</span>decode-universal-time fri<span class=\"br0\">)</span><br/>     <span class=\"br0\">(</span><span class=\"kw1\">list</span> y m d<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"br0\">(</span><span class=\"kw1\">defun</span> last-fridays <span class=\"br0\">(</span>year<span class=\"br0\">)</span> <br/>  <span class=\"br0\">(</span><span class=\"kw1\">append</span> <span class=\"br0\">(</span>loop for month from <span class=\"nu0\">2</span> to <span class=\"nu0\">12</span> collecting <span class=\"br0\">(</span>friday-before year month <span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>          <span class=\"br0\">(</span><span class=\"kw1\">list</span> <span class=\"br0\">(</span>friday-before <span class=\"br0\">(</span><span class=\"nu0\">1</span>+ year<span class=\"br0\">)</span> <span class=\"nu0\">1</span> <span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"br0\">(</span><span class=\"kw1\">let</span>* <span class=\"br0\">(</span><span class=\"br0\">(</span>year <span class=\"br0\">(</span>read-from-string <span class=\"br0\">(</span><span class=\"kw1\">car</span> *args*<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>  <span class=\"br0\">(</span>format t <span class=\"st0\">\"~{~{~a-~2,'0d-~2,'0d~}~%~}\"</span> <span class=\"br0\">(</span>last-fridays year<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span></pre>"}, {"lang": "D", "loc": 15, "block": "<pre class=\"d highlighted_source\"><span class=\"kw2\">import</span> std.<span class=\"me1\">stdio</span><span class=\"sy0\">,</span> std.<span class=\"me1\">datetime</span><span class=\"sy0\">,</span> std.<span class=\"me1\">traits</span><span class=\"sy0\">;</span><br/>\u00a0<br/><span class=\"kw4\">void</span> lastFridays<span class=\"br0\">(</span><span class=\"kw2\">in</span> <span class=\"kw4\">uint</span> year<span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>    <span class=\"kw4\">auto</span> date <span class=\"sy0\">=</span> Date<span class=\"br0\">(</span>year<span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>    <span class=\"kw1\">foreach</span> <span class=\"br0\">(</span>_<span class=\"sy0\">;</span> <span class=\"br0\">[</span>EnumMembers<span class=\"sy0\">!</span>Month<span class=\"br0\">]</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>        date.<span class=\"me1\">day</span><span class=\"br0\">(</span>date.<span class=\"me1\">daysInMonth</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        date.<span class=\"me1\">roll</span><span class=\"sy0\">!</span><span class=\"st0\">\"days\"</span><span class=\"br0\">(</span><span class=\"sy0\">-</span><span class=\"br0\">(</span>date.<span class=\"me1\">dayOfWeek</span> <span class=\"sy0\">+</span> <span class=\"nu0\">2</span><span class=\"br0\">)</span> <span class=\"sy0\">%</span> <span class=\"nu0\">7</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        writeln<span class=\"br0\">(</span>date<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        date.<span class=\"me1\">add</span><span class=\"sy0\">!</span><span class=\"st0\">\"months\"</span><span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">,</span> AllowDayOverflow.<span class=\"me1\">no</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>    <span class=\"br0\">}</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"kw4\">void</span> main<span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>    lastFridays<span class=\"br0\">(</span><span class=\"nu0\">2012</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/><span class=\"br0\">}</span></pre>"}, {"lang": "Elixir", "loc": 15, "block": "<pre class=\"text highlighted_source\">defmodule RC do<br/>  def lastFriday(year) do<br/>    Enum.map(1..12, fn month -&gt;<br/>      lastday =\u00a0:calendar.last_day_of_the_month(year, month)<br/>      daynum =\u00a0:calendar.day_of_the_week(year, month, lastday)<br/>      friday = lastday - rem(daynum + 2, 7)<br/>      {year, month, friday}<br/>    end)<br/>  end<br/>end<br/>\u00a0<br/>y = String.to_integer(hd(System.argv))<br/>Enum.each(RC.lastFriday(y), fn {year, month, day} -&gt;<br/> \u00a0:io.format \"~4b-~2..0w-~2..0w~n\", [year, month, day]<br/>end)</pre>"}, {"lang": "Elm", "loc": 67, "block": "<pre class=\"text highlighted_source\">import Html exposing (Html, Attribute, text, div, input)<br/>import Html.App exposing (beginnerProgram)<br/>import Html.Attributes exposing (placeholder, value, style)<br/>import Html.Events exposing (onInput)<br/>import String exposing (toInt)<br/>import Maybe exposing (withDefault)<br/>import List exposing (map, map2)<br/>import List.Extra exposing (scanl1)<br/>\u00a0<br/>type Msg = SetYear String<br/>\u00a0<br/>lastFridays\u00a0: Int -&gt; List Int<br/>lastFridays year =<br/>  let isLeap = (year\u00a0% 400) == 0 || ( (year\u00a0% 4) == 0 &amp;&amp; (year\u00a0% 100) /= 0 )<br/>      daysInMonth = [31, if isLeap then 29 else 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31]<br/>      y = year-1<br/>  in scanl1 (+) daysInMonth<br/>     |&gt; map2 (\\len day -&gt; len - (day + 2 + y + y//4 - y//100 + y//400)\u00a0% 7) daysInMonth<br/>\u00a0<br/>lastFridayStrings\u00a0: String -&gt; List String<br/>lastFridayStrings yearString = <br/>  let months= [\"January \", \"February \", \"March \", \"April \", \"May \", \"June \", \"July \", \"August \", \"September \", \"October \", \"November \", \"December \"]<br/>      errString = \"Only years after 1752 are valid.\"<br/>  in case toInt yearString of <br/>       Ok year -&gt; <br/>           if (year &lt; 1753) <br/>           then [errString] <br/>           else lastFridays year<br/>                |&gt; map2 (\\m d -&gt; m ++ toString d ++ \", \" ++ toString year) months<br/>       Err _ -&gt; <br/>           [errString]<br/>\u00a0<br/>view\u00a0:  String -&gt; Html Msg<br/>view yearString =<br/>  div []<br/>    ([ input<br/>        [ placeholder \"Enter a year.\"<br/>        , value yearString<br/>        , onInput SetYear<br/>        , myStyle<br/>        ]<br/>        []<br/>     ] ++ (lastFridayStrings yearString<br/>           |&gt; map (\\date -&gt; div [ myStyle ] [ text date ]) ))<br/>\u00a0<br/>myStyle\u00a0: Attribute Msg<br/>myStyle =<br/>  style<br/>    [ (\"width\", \"100%\")<br/>    , (\"height\", \"20px\")<br/>    , (\"padding\", \"5px 0 0 5px\")<br/>    , (\"font-size\", \"1em\")<br/>    , (\"text-align\", \"left\")<br/>    ]<br/>\u00a0<br/>update\u00a0: Msg -&gt; String -&gt; String<br/>update msg _ = <br/>    case msg of<br/>        SetYear yearString -&gt; yearString<br/>\u00a0<br/>\u00a0<br/>main =<br/>    beginnerProgram<br/>        { model = \"\"<br/>        , view = view<br/>        , update = update<br/>        }</pre>"}, {"lang": "Erlang", "loc": 20, "block": "<pre class=\"erlang highlighted_source\">\u00a0<br/><span class=\"sy3\">-</span><span class=\"re2\">module</span><span class=\"br0\">(</span> last_date_each_month <span class=\"br0\">)</span><span class=\"sy1\">.</span><br/>\u00a0<br/><span class=\"sy3\">-</span><span class=\"re2\">export</span><span class=\"br0\">(</span> <span class=\"br0\">[</span>monday<span class=\"sy3\">/</span><span class=\"nu0\">1</span><span class=\"sy1\">,</span> tuesday<span class=\"sy3\">/</span><span class=\"nu0\">1</span><span class=\"sy1\">,</span> wednesday<span class=\"sy3\">/</span><span class=\"nu0\">1</span><span class=\"sy1\">,</span> thursday<span class=\"sy3\">/</span><span class=\"nu0\">1</span><span class=\"sy1\">,</span> friday<span class=\"sy3\">/</span><span class=\"nu0\">1</span><span class=\"sy1\">,</span> saturday<span class=\"sy3\">/</span><span class=\"nu0\">1</span><span class=\"sy1\">,</span> sunday<span class=\"sy3\">/</span><span class=\"nu0\">1</span><span class=\"br0\">]</span> <span class=\"br0\">)</span><span class=\"sy1\">.</span><br/>\u00a0<br/><span class=\"re3\">monday</span><span class=\"br0\">(</span> <span class=\"re5\">Year</span> <span class=\"br0\">)</span> <span class=\"sy1\">-&gt;</span> <span class=\"re3\">last</span><span class=\"br0\">(</span> <span class=\"re5\">Year</span><span class=\"sy1\">,</span> <span class=\"nu0\">1</span> <span class=\"br0\">)</span><span class=\"sy1\">.</span><br/><span class=\"re3\">tuesday</span><span class=\"br0\">(</span> <span class=\"re5\">Year</span> <span class=\"br0\">)</span> <span class=\"sy1\">-&gt;</span> <span class=\"re3\">last</span><span class=\"br0\">(</span> <span class=\"re5\">Year</span><span class=\"sy1\">,</span> <span class=\"nu0\">2</span> <span class=\"br0\">)</span><span class=\"sy1\">.</span><br/><span class=\"re3\">wednesday</span><span class=\"br0\">(</span> <span class=\"re5\">Year</span> <span class=\"br0\">)</span> <span class=\"sy1\">-&gt;</span> <span class=\"re3\">last</span><span class=\"br0\">(</span> <span class=\"re5\">Year</span><span class=\"sy1\">,</span> <span class=\"nu0\">3</span> <span class=\"br0\">)</span><span class=\"sy1\">.</span><br/><span class=\"re3\">thursday</span><span class=\"br0\">(</span> <span class=\"re5\">Year</span> <span class=\"br0\">)</span> <span class=\"sy1\">-&gt;</span> <span class=\"re3\">last</span><span class=\"br0\">(</span> <span class=\"re5\">Year</span><span class=\"sy1\">,</span> <span class=\"nu0\">4</span> <span class=\"br0\">)</span><span class=\"sy1\">.</span><br/><span class=\"re3\">friday</span><span class=\"br0\">(</span> <span class=\"re5\">Year</span> <span class=\"br0\">)</span> <span class=\"sy1\">-&gt;</span> <span class=\"re3\">last</span><span class=\"br0\">(</span> <span class=\"re5\">Year</span><span class=\"sy1\">,</span> <span class=\"nu0\">5</span> <span class=\"br0\">)</span><span class=\"sy1\">.</span><br/><span class=\"re3\">saturday</span><span class=\"br0\">(</span> <span class=\"re5\">Year</span> <span class=\"br0\">)</span> <span class=\"sy1\">-&gt;</span> <span class=\"re3\">last</span><span class=\"br0\">(</span> <span class=\"re5\">Year</span><span class=\"sy1\">,</span> <span class=\"nu0\">6</span> <span class=\"br0\">)</span><span class=\"sy1\">.</span><br/><span class=\"re3\">sunday</span><span class=\"br0\">(</span> <span class=\"re5\">Year</span> <span class=\"br0\">)</span> <span class=\"sy1\">-&gt;</span> <span class=\"re3\">last</span><span class=\"br0\">(</span> <span class=\"re5\">Year</span><span class=\"sy1\">,</span> <span class=\"nu0\">7</span> <span class=\"br0\">)</span><span class=\"sy1\">.</span><br/>\u00a0<br/>\u00a0<br/>\u00a0<br/><span class=\"re3\">last</span><span class=\"br0\">(</span> <span class=\"re5\">Year</span><span class=\"sy1\">,</span> <span class=\"re5\">Week_day</span> <span class=\"br0\">)</span> <span class=\"sy1\">-&gt;</span><br/>    <span class=\"re5\">Months</span> <span class=\"sy3\">=</span> <a href=\"http://erlang.org/doc/man/lists.html\"><span class=\"kw5\">lists</span></a>:<span class=\"re3\">seq</span><span class=\"br0\">(</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">12</span> <span class=\"br0\">)</span><span class=\"sy1\">,</span><br/>    <span class=\"re5\">Months_days</span> <span class=\"sy3\">=</span> <span class=\"br0\">[</span><span class=\"br0\">{</span><span class=\"re5\">X</span><span class=\"sy1\">,</span> <span class=\"re5\">Y</span><span class=\"br0\">}</span> <span class=\"sy3\">||</span> <span class=\"re5\">X</span> <span class=\"sy3\">&lt;-</span> <span class=\"re5\">Months</span><span class=\"sy1\">,</span> <span class=\"re5\">Y</span> <span class=\"sy3\">&lt;-</span> <a href=\"http://erlang.org/doc/man/lists.html\"><span class=\"kw5\">lists</span></a>:<span class=\"re3\">seq</span><span class=\"br0\">(</span><a href=\"http://erlang.org/doc/man/calendar.html\"><span class=\"kw5\">calendar</span></a>:<span class=\"re3\">last_day_of_the_month</span><span class=\"br0\">(</span><span class=\"re5\">Year</span><span class=\"sy1\">,</span> <span class=\"re5\">X</span><span class=\"br0\">)</span><span class=\"sy1\">,</span> <a href=\"http://erlang.org/doc/man/calendar.html\"><span class=\"kw5\">calendar</span></a>:<span class=\"re3\">last_day_of_the_month</span><span class=\"br0\">(</span><span class=\"re5\">Year</span><span class=\"sy1\">,</span> <span class=\"re5\">X</span><span class=\"br0\">)</span> <span class=\"sy3\">-</span> <span class=\"nu0\">7</span><span class=\"sy1\">,</span> <span class=\"sy3\">-</span><span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"sy1\">,</span> <a href=\"http://erlang.org/doc/man/calendar.html\"><span class=\"kw5\">calendar</span></a>:<span class=\"re3\">valid_date</span><span class=\"br0\">(</span><span class=\"re5\">Year</span><span class=\"sy1\">,</span> <span class=\"re5\">X</span><span class=\"sy1\">,</span> <span class=\"re5\">Y</span><span class=\"br0\">)</span><span class=\"sy1\">,</span> <a href=\"http://erlang.org/doc/man/calendar.html\"><span class=\"kw5\">calendar</span></a>:<span class=\"re3\">day_of_the_week</span><span class=\"br0\">(</span><span class=\"re5\">Year</span><span class=\"sy1\">,</span> <span class=\"re5\">X</span><span class=\"sy1\">,</span> <span class=\"re5\">Y</span><span class=\"br0\">)</span> <span class=\"sy3\">=:=</span> <span class=\"re5\">Week_day</span><span class=\"br0\">]</span><span class=\"sy1\">,</span><br/>    <span class=\"br0\">[</span><span class=\"br0\">{</span><span class=\"re5\">Year</span><span class=\"sy1\">,</span> <span class=\"re5\">X</span><span class=\"sy1\">,</span> <a href=\"http://erlang.org/doc/man/proplists.html\"><span class=\"kw5\">proplists</span></a>:<span class=\"kw3\">get</span>_<span class=\"re3\">value</span><span class=\"br0\">(</span><span class=\"re5\">X</span><span class=\"sy1\">,</span> <span class=\"re5\">Months_days</span><span class=\"br0\">)</span><span class=\"br0\">}</span> <span class=\"sy3\">||</span> <span class=\"re5\">X</span> <span class=\"sy3\">&lt;-</span> <span class=\"re5\">Months</span><span class=\"br0\">]</span><span class=\"sy1\">.</span><br/>\u00a0</pre>"}, {"lang": "Factor", "loc": 6, "block": "<pre class=\"text highlighted_source\">USING: calendar calendar.format command-line io kernel math.parser sequences\u00a0;<br/>IN: rosetta-code.last-fridays<br/>\u00a0<br/>(command-line) second string&gt;number &lt;year&gt; 12 iota<br/>[ months time+ last-friday-of-month ] with map<br/>[ timestamp&gt;ymd print ] each</pre>"}, {"lang": "Fortran", "loc": 14, "block": "<pre class=\"fortran highlighted_source\"><span class=\"kw1\">program</span> fridays<br/>   <span class=\"kw3\">implicit</span> <span class=\"kw3\">none</span><br/>   <span class=\"kw3\">integer</span> <span class=\"sy0\">::</span> <span class=\"me2\">days</span><span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">:</span><span class=\"nu0\">12</span><span class=\"br0\">)</span> <span class=\"sy0\">=</span> <span class=\"br0\">(</span><span class=\"sy0\">/</span><span class=\"nu0\">31</span>, <span class=\"nu0\">28</span>, <span class=\"nu0\">31</span>, <span class=\"nu0\">30</span>, <span class=\"nu0\">31</span>, <span class=\"nu0\">30</span>, <span class=\"nu0\">31</span>, <span class=\"nu0\">31</span>, <span class=\"nu0\">30</span>, <span class=\"nu0\">31</span>, <span class=\"nu0\">30</span>, <span class=\"nu0\">31</span><span class=\"sy0\">/</span><span class=\"br0\">)</span><br/>   <span class=\"kw3\">integer</span> <span class=\"sy0\">::</span> <span class=\"me2\">year</span>, k, y, m<br/>   read <span class=\"sy0\">*</span>, year<br/>   <span class=\"kw1\">if</span> <span class=\"br0\">(</span><span class=\"kw4\">mod</span><span class=\"br0\">(</span>year, <span class=\"nu0\">400</span><span class=\"br0\">)</span> <span class=\"sy0\">==</span> <span class=\"nu0\">0</span> <span class=\"kw2\">.<span class=\"me1\">or</span>.</span> <span class=\"br0\">(</span><span class=\"kw4\">mod</span><span class=\"br0\">(</span>year, <span class=\"nu0\">4</span><span class=\"br0\">)</span> <span class=\"sy0\">==</span> <span class=\"nu0\">0</span> <span class=\"kw2\">.<span class=\"me1\">and</span>.</span> <span class=\"kw4\">mod</span><span class=\"br0\">(</span>year, <span class=\"nu0\">100</span><span class=\"br0\">)</span> <span class=\"sy0\">/=</span> <span class=\"nu0\">0</span><span class=\"br0\">)</span><span class=\"br0\">)</span> days<span class=\"br0\">(</span><span class=\"nu0\">2</span><span class=\"br0\">)</span> <span class=\"sy0\">=</span> <span class=\"nu0\">29</span><br/>   y <span class=\"sy0\">=</span> year <span class=\"sy0\">-</span> <span class=\"nu0\">1</span><br/>   k <span class=\"sy0\">=</span> <span class=\"nu0\">44</span> <span class=\"sy0\">+</span> y <span class=\"sy0\">+</span> y<span class=\"sy0\">/</span><span class=\"nu0\">4</span> <span class=\"sy0\">+</span> <span class=\"nu0\">6</span><span class=\"sy0\">*</span><span class=\"br0\">(</span>y<span class=\"sy0\">/</span><span class=\"nu0\">100</span><span class=\"br0\">)</span> <span class=\"sy0\">+</span> y<span class=\"sy0\">/</span><span class=\"nu0\">400</span><br/>   <span class=\"kw1\">do</span> m <span class=\"sy0\">=</span> <span class=\"nu0\">1</span>, <span class=\"nu0\">12</span><br/>      k <span class=\"sy0\">=</span> k <span class=\"sy0\">+</span> days<span class=\"br0\">(</span>m<span class=\"br0\">)</span><br/>      print <span class=\"st0\">\"(I4,A1,I2.2,A1,I2)\"</span>, year, <span class=\"st0\">'-'</span>, m, <span class=\"st0\">'-'</span>, days<span class=\"br0\">(</span>m<span class=\"br0\">)</span> <span class=\"sy0\">-</span> <span class=\"kw4\">mod</span><span class=\"br0\">(</span>k, <span class=\"nu0\">7</span><span class=\"br0\">)</span><br/>   <span class=\"kw1\">end</span> <span class=\"kw1\">do</span><br/><span class=\"kw1\">end</span> <span class=\"kw1\">program</span><br/>\u00a0</pre>"}, {"lang": "FreeBASIC", "loc": 85, "block": "<pre class=\"freebasic highlighted_source\"><span class=\"co1\">' version 23-06-2015</span><br/><span class=\"co1\">' compile with: fbc -s console</span><br/>\u00a0<br/><span class=\"co2\">#Ifndef TRUE        ' define true and false for older freebasic versions</span><br/>    <span class=\"co2\">#Define FALSE 0</span><br/>    <span class=\"co2\">#Define TRUE Not FALSE</span><br/><span class=\"co2\">#EndIf</span><br/>\u00a0<br/><span class=\"kw1\">Function</span> leapyear<span class=\"br0\">(</span>Year_ <span class=\"kw1\">As</span> <span class=\"kw1\">Integer</span><span class=\"br0\">)</span> <span class=\"kw1\">As</span> <span class=\"kw1\">Integer</span><br/>    <span class=\"co1\">' from the leapyear entry</span><br/>    <span class=\"kw1\">If</span> <span class=\"br0\">(</span>Year_ <span class=\"kw1\">Mod</span> <span class=\"nu0\">4</span><span class=\"br0\">)</span> &lt;&gt; <span class=\"nu0\">0</span> <span class=\"kw1\">Then</span> <span class=\"kw1\">Return</span> <span class=\"kw1\">FALSE</span><br/>    <span class=\"kw1\">If</span> <span class=\"br0\">(</span>Year_ <span class=\"kw1\">Mod</span> <span class=\"nu0\">100</span><span class=\"br0\">)</span> = <span class=\"nu0\">0</span> AndAlso <span class=\"br0\">(</span>Year_ <span class=\"kw1\">Mod</span> <span class=\"nu0\">400</span><span class=\"br0\">)</span> &lt;&gt; <span class=\"nu0\">0</span> <span class=\"kw1\">Then</span> <span class=\"kw1\">Return</span> <span class=\"kw1\">FALSE</span><br/>    <span class=\"kw1\">Return</span> <span class=\"kw1\">TRUE</span><br/>\u00a0<br/><span class=\"kw1\">End</span> <span class=\"kw1\">Function</span><br/>\u00a0<br/><span class=\"kw1\">Function</span> wd<span class=\"br0\">(</span>m <span class=\"kw1\">As</span> <span class=\"kw1\">Integer</span>, d <span class=\"kw1\">As</span> <span class=\"kw1\">Integer</span>, y <span class=\"kw1\">As</span> <span class=\"kw1\">Integer</span><span class=\"br0\">)</span> <span class=\"kw1\">As</span> <span class=\"kw1\">Integer</span><br/>    <span class=\"co1\">' Zellerish</span><br/>    <span class=\"co1\">' 0 = Sunday, 1 = Monday, 2 = Tuesday, 3 = Wednesday</span><br/>    <span class=\"co1\">' 4 = Thursday, 5 = Friday, 6 = Saturday</span><br/>\u00a0<br/>    <span class=\"kw1\">If</span> m &lt; <span class=\"nu0\">3</span> <span class=\"kw1\">Then</span>        <span class=\"co1\">' If m = 1 Or m = 2 Then</span><br/>        m += <span class=\"nu0\">12</span><br/>        y -= <span class=\"nu0\">1</span><br/>    <span class=\"kw1\">End</span> <span class=\"kw1\">If</span><br/>    <span class=\"kw1\">Return</span> <span class=\"br0\">(</span>y + <span class=\"br0\">(</span>y \\ <span class=\"nu0\">4</span><span class=\"br0\">)</span> - <span class=\"br0\">(</span>y \\ <span class=\"nu0\">100</span><span class=\"br0\">)</span> + <span class=\"br0\">(</span>y \\ <span class=\"nu0\">400</span><span class=\"br0\">)</span> + d + <span class=\"br0\">(</span><span class=\"br0\">(</span><span class=\"nu0\">153</span> * m + <span class=\"nu0\">8</span><span class=\"br0\">)</span> \\ <span class=\"nu0\">5</span><span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"kw1\">Mod</span> <span class=\"nu0\">7</span><br/><span class=\"kw1\">End</span> <span class=\"kw1\">Function</span><br/>\u00a0<br/><span class=\"co1\">' ------=&lt; MAIN &gt;=------</span><br/>\u00a0<br/><span class=\"kw1\">Type</span> month_days<br/>    m_name <span class=\"kw1\">As</span> <span class=\"kw1\">String</span><br/>    days <span class=\"kw1\">As</span> <span class=\"kw1\">UByte</span><br/><span class=\"kw1\">End</span> <span class=\"kw1\">Type</span><br/>\u00a0<br/><span class=\"kw1\">Dim</span> <span class=\"kw1\">As</span> month_days arr<span class=\"br0\">(</span><span class=\"nu0\">1</span> <span class=\"kw1\">To</span> <span class=\"nu0\">12</span><span class=\"br0\">)</span><br/><span class=\"kw1\">Data</span> <span class=\"st0\">\"January\"</span>,   <span class=\"nu0\">31</span>, <span class=\"st0\">\"February\"</span>, <span class=\"nu0\">28</span>, <span class=\"st0\">\"March\"</span>,    <span class=\"nu0\">31</span>, <span class=\"st0\">\"April\"</span>,    <span class=\"nu0\">30</span><br/><span class=\"kw1\">Data</span> <span class=\"st0\">\"May\"</span>,       <span class=\"nu0\">31</span>, <span class=\"st0\">\"June\"</span>,     <span class=\"nu0\">30</span>, <span class=\"st0\">\"July\"</span>,     <span class=\"nu0\">31</span>, <span class=\"st0\">\"August\"</span>,   <span class=\"nu0\">31</span><br/><span class=\"kw1\">Data</span> <span class=\"st0\">\"September\"</span>, <span class=\"nu0\">30</span>, <span class=\"st0\">\"October\"</span>,  <span class=\"nu0\">31</span>, <span class=\"st0\">\"November\"</span>, <span class=\"nu0\">30</span>, <span class=\"st0\">\"December\"</span>, <span class=\"nu0\">31</span><br/>\u00a0<br/><span class=\"kw1\">Dim</span> <span class=\"kw1\">As</span> <span class=\"kw1\">Integer</span> yr, d, i, x<br/><span class=\"kw1\">Dim</span> <span class=\"kw1\">As</span> <span class=\"kw1\">String</span> keypress<br/>\u00a0<br/><span class=\"kw1\">For</span> i = <span class=\"nu0\">1</span> <span class=\"kw1\">To</span> <span class=\"nu0\">12</span><br/>    <span class=\"kw1\">With</span> arr<span class=\"br0\">(</span>i<span class=\"br0\">)</span><br/>        <span class=\"kw1\">Read</span> .<span class=\"me1\">m_name</span><br/>        <span class=\"kw1\">Read</span> .<span class=\"me1\">days</span><br/>    <span class=\"kw1\">End</span> <span class=\"kw1\">With</span><br/><span class=\"kw1\">Next</span><br/>\u00a0<br/><span class=\"kw1\">Do</span><br/>\u00a0<br/>    <span class=\"kw1\">Do</span><br/>        <span class=\"kw1\">Print</span> <span class=\"st0\">\"For what year do you want to find the last Friday of the month\"</span><br/>        <span class=\"kw1\">Input</span> <span class=\"st0\">\"any number below 1800 stops program, year in YYYY format\"</span>;yr<br/>        <span class=\"co1\">' empty input also stops</span><br/>        <span class=\"kw1\">If</span> yr &lt; <span class=\"nu0\">1800</span> <span class=\"kw1\">Then</span><br/>            <span class=\"kw1\">End</span><br/>        <span class=\"kw1\">Else</span><br/>            <span class=\"kw1\">Exit</span> <span class=\"kw1\">Do</span><br/>        <span class=\"kw1\">End</span> <span class=\"kw1\">If</span><br/>    <span class=\"kw1\">Loop</span><br/>\u00a0<br/>    <span class=\"kw1\">Print</span>\u00a0: <span class=\"kw1\">Print</span><br/>    <span class=\"kw1\">Print</span> <span class=\"st0\">\"Last Friday of the month for\"</span>; yr<br/>\u00a0<br/>    <span class=\"kw1\">For</span> i = <span class=\"nu0\">1</span> <span class=\"kw1\">To</span> <span class=\"nu0\">12</span><br/>        d = arr<span class=\"br0\">(</span>i<span class=\"br0\">)</span>.<span class=\"me1\">days</span><br/>        <span class=\"kw1\">If</span> i = <span class=\"nu0\">2</span> AndAlso leapyear<span class=\"br0\">(</span>yr<span class=\"br0\">)</span> = <span class=\"kw1\">TRUE</span> <span class=\"kw1\">Then</span> d = d + <span class=\"nu0\">1</span><br/>        x = wd<span class=\"br0\">(</span>i, d, yr<span class=\"br0\">)</span><br/>        <span class=\"kw1\">If</span> x &lt;&gt; <span class=\"nu0\">5</span> <span class=\"kw1\">Then</span> d = d - <span class=\"kw1\">IIf</span><span class=\"br0\">(</span>x &gt; <span class=\"nu0\">5</span>, x - <span class=\"nu0\">5</span>, x + <span class=\"nu0\">2</span><span class=\"br0\">)</span><br/>        <span class=\"kw1\">Print</span> d; <span class=\"st0\">\" \"</span>; arr<span class=\"br0\">(</span>i<span class=\"br0\">)</span>.<span class=\"me1\">m_name</span><br/>    <span class=\"kw1\">Next</span><br/>\u00a0<br/>    <span class=\"co1\">' empty key buffer</span><br/>    <span class=\"kw1\">While</span> <span class=\"kw1\">InKey</span> &lt;&gt; <span class=\"st0\">\"\"</span>\u00a0: keypress = <span class=\"kw1\">InKey</span>\u00a0: <span class=\"kw1\">Wend</span><br/>    <span class=\"kw1\">Print</span>\u00a0: <span class=\"kw1\">Print</span><br/>    <span class=\"kw1\">Print</span> <span class=\"st0\">\"Find last Friday for a other year [Y|y], anything else stops\"</span><br/>    keypress =<span class=\"st0\">\"\"</span><br/>    <span class=\"kw1\">While</span> keypress = <span class=\"st0\">\"\"</span>\u00a0: keypress = <span class=\"kw1\">InKey</span>\u00a0: <span class=\"kw1\">Wend</span><br/>    <span class=\"kw1\">If</span> <span class=\"kw1\">LCase</span><span class=\"br0\">(</span>keypress<span class=\"br0\">)</span> &lt;&gt; <span class=\"st0\">\"y\"</span> <span class=\"kw1\">Then</span> <span class=\"kw1\">Exit</span> <span class=\"kw1\">Do</span><br/>    <span class=\"kw1\">Print</span>\u00a0: <span class=\"kw1\">Print</span><br/>\u00a0<br/><span class=\"kw1\">Loop</span><br/><span class=\"kw1\">End</span></pre>"}, {"lang": "Gambas", "loc": 20, "block": "<pre class=\"gambas highlighted_source\"><a href=\"http://gambasdoc.org/help/lang/public\"><span class=\"kw1\">Public</span></a> <a href=\"http://gambasdoc.org/help/lang/sub\"><span class=\"kw1\">Sub</span></a> Form_Open<span class=\"br0\">(</span><span class=\"br0\">)</span><br/><a href=\"http://gambasdoc.org/help/lang/dim\"><span class=\"kw1\">Dim</span></a> siYear <a href=\"http://gambasdoc.org/help/lang/as\"><span class=\"kw1\">As</span></a> <a href=\"http://gambasdoc.org/help/lang/type/short\"><span class=\"kw4\">Short</span></a> <span class=\"sy0\">=</span> <a href=\"http://www.google.com/search?hl=en&amp;q=inputbox+site:http://gambasdoc.org/&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw6\">InputBox</span></a><span class=\"br0\">(</span><span class=\"st0\">\"Please input a year\"</span>, <span class=\"st0\">\"Last Friday of each month\"</span><span class=\"br0\">)</span><br/><a href=\"http://gambasdoc.org/help/lang/dim\"><span class=\"kw1\">Dim</span></a> siMonth, siDay <a href=\"http://gambasdoc.org/help/lang/as\"><span class=\"kw1\">As</span></a> <a href=\"http://gambasdoc.org/help/lang/type/short\"><span class=\"kw4\">Short</span></a><br/><a href=\"http://gambasdoc.org/help/lang/dim\"><span class=\"kw1\">Dim</span></a> dDay <a href=\"http://gambasdoc.org/help/lang/as\"><span class=\"kw1\">As</span></a> <a href=\"http://gambasdoc.org/help/lang/type/date\"><span class=\"kw4\">Date</span></a><br/>\u00a0<br/><a href=\"http://gambasdoc.org/help/lang/for\"><span class=\"kw1\">For</span></a> siMonth <span class=\"sy0\">=</span> <span class=\"nu0\">1</span> <a href=\"http://gambasdoc.org/help/lang/to\"><span class=\"kw1\">To</span></a> <span class=\"nu0\">12</span><br/>  <a href=\"http://gambasdoc.org/help/lang/for\"><span class=\"kw1\">For</span></a> siDay <span class=\"sy0\">=</span> <span class=\"nu0\">31</span> DownTo <span class=\"nu0\">22</span><br/>    <a href=\"http://gambasdoc.org/help/lang/try\"><span class=\"kw1\">Try</span></a> dDay <span class=\"sy0\">=</span> <a href=\"http://gambasdoc.org/help/lang/type/date\"><span class=\"kw4\">Date</span></a><span class=\"br0\">(</span>siYear, siMonth, siDay<span class=\"br0\">)</span><br/>    <a href=\"http://gambasdoc.org/help/lang/if\"><span class=\"kw1\">If</span></a> <a href=\"http://gambasdoc.org/help/lang/error\"><span class=\"kw1\">Error</span></a> <a href=\"http://gambasdoc.org/help/lang/then\"><span class=\"kw1\">Then</span></a> <a href=\"http://gambasdoc.org/help/lang/continue\"><span class=\"kw1\">Continue</span></a><br/>    <a href=\"http://gambasdoc.org/help/lang/if\"><span class=\"kw1\">If</span></a> <a href=\"http://gambasdoc.org/help/lang/weekday\"><span class=\"kw2\">WeekDay</span></a><span class=\"br0\">(</span>dDay<span class=\"br0\">)</span> <span class=\"sy0\">=</span> <span class=\"nu0\">5</span> <a href=\"http://gambasdoc.org/help/lang/then\"><span class=\"kw1\">Then</span></a> <br/>      <a href=\"http://gambasdoc.org/help/lang/print\"><span class=\"kw1\">Print</span></a> <a href=\"http://gambasdoc.org/help/lang/format\"><span class=\"kw2\">Format</span></a><span class=\"br0\">(</span>dDay, <span class=\"st0\">\"yyyy-mm-dd\"</span><span class=\"br0\">)</span>;;<br/>      <a href=\"http://gambasdoc.org/help/lang/print\"><span class=\"kw1\">Print</span></a> <a href=\"http://gambasdoc.org/help/lang/space\"><span class=\"kw2\">Space</span></a><span class=\"br0\">(</span><span class=\"nu0\">6</span><span class=\"br0\">)</span> <span class=\"sy0\">&amp;</span> <a href=\"http://gambasdoc.org/help/lang/format\"><span class=\"kw2\">Format</span></a><span class=\"br0\">(</span>dDay, <span class=\"st0\">\"dddd dd mmmm yyyy\"</span><span class=\"br0\">)</span><br/>      <a href=\"http://gambasdoc.org/help/lang/break\"><span class=\"kw1\">Break</span></a><br/>    <a href=\"http://gambasdoc.org/help/lang/end\"><span class=\"kw1\">End</span></a> <a href=\"http://gambasdoc.org/help/lang/if\"><span class=\"kw1\">If</span></a><br/>  <a href=\"http://gambasdoc.org/help/lang/next\"><span class=\"kw1\">Next</span></a><br/><a href=\"http://gambasdoc.org/help/lang/next\"><span class=\"kw1\">Next</span></a><br/>\u00a0<br/><a href=\"http://gambasdoc.org/help/lang/me\"><span class=\"kw1\">Me</span></a>.<a href=\"http://gambasdoc.org/help/lang/close\"><span class=\"kw1\">Close</span></a><br/>\u00a0<br/><a href=\"http://gambasdoc.org/help/lang/end\"><span class=\"kw1\">End</span></a></pre>"}, {"lang": "Go", "loc": 22, "block": "<pre class=\"go highlighted_source\"><span class=\"kw1\">package</span> main<br/>\u00a0<br/><span class=\"kw1\">import</span> <span class=\"sy1\">(</span><br/>\t<span class=\"st0\">\"fmt\"</span><br/>\t<span class=\"st0\">\"os\"</span><br/>\t<span class=\"st0\">\"strconv\"</span><br/>\t<span class=\"st0\">\"time\"</span><br/><span class=\"sy1\">)</span><br/>\u00a0<br/><span class=\"kw4\">func</span> main<span class=\"sy1\">()</span> <span class=\"sy1\">{</span><br/>\ty <span class=\"sy2\">:=</span> time<span class=\"sy3\">.</span>Now<span class=\"sy1\">()</span><span class=\"sy3\">.</span>Year<span class=\"sy1\">()</span><br/>\t<span class=\"kw1\">if</span> <span class=\"kw3\">len</span><span class=\"sy1\">(</span>os<span class=\"sy3\">.</span>Args<span class=\"sy1\">)</span> <span class=\"sy3\">==</span> <span class=\"nu0\">2</span> <span class=\"sy1\">{</span><br/>\t\t<span class=\"kw1\">if</span> <span class=\"nu2\">i</span><span class=\"sy1\">,</span> err <span class=\"sy2\">:=</span> strconv<span class=\"sy3\">.</span>Atoi<span class=\"sy1\">(</span>os<span class=\"sy3\">.</span>Args<span class=\"sy1\">[</span><span class=\"nu0\">1</span><span class=\"sy1\">]);</span> err <span class=\"sy3\">==</span> <span class=\"kw2\">nil</span> <span class=\"sy1\">{</span><br/>\t\t\ty <span class=\"sy2\">=</span> <span class=\"nu2\">i</span><br/>\t\t<span class=\"sy1\">}</span><br/>\t<span class=\"sy1\">}</span><br/>\t<span class=\"kw1\">for</span> m <span class=\"sy2\">:=</span> time<span class=\"sy3\">.</span>January<span class=\"sy1\">;</span> m &lt;<span class=\"sy2\">=</span> time<span class=\"sy3\">.</span>December<span class=\"sy1\">;</span> m<span class=\"sy2\">++</span> <span class=\"sy1\">{</span><br/>\t\td <span class=\"sy2\">:=</span> time<span class=\"sy3\">.</span>Date<span class=\"sy1\">(</span>y<span class=\"sy1\">,</span> m<span class=\"sy3\">+</span><span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">0</span><span class=\"sy1\">,</span> <span class=\"nu0\">0</span><span class=\"sy1\">,</span> <span class=\"nu0\">0</span><span class=\"sy1\">,</span> <span class=\"nu0\">0</span><span class=\"sy1\">,</span> time<span class=\"sy3\">.</span>UTC<span class=\"sy1\">)</span><span class=\"sy3\">.</span>Add<span class=\"sy1\">(</span><span class=\"sy3\">-</span><span class=\"nu0\">24</span> <span class=\"sy3\">*</span> time<span class=\"sy3\">.</span>Hour<span class=\"sy1\">)</span><br/>\t\td <span class=\"sy2\">=</span> d<span class=\"sy3\">.</span>Add<span class=\"sy1\">(</span><span class=\"sy3\">-</span>time<span class=\"sy3\">.</span>Duration<span class=\"sy1\">((</span>d<span class=\"sy3\">.</span>Weekday<span class=\"sy1\">()</span><span class=\"sy3\">+</span><span class=\"nu0\">7</span><span class=\"sy3\">-</span>time<span class=\"sy3\">.</span>Friday<span class=\"sy1\">)</span><span class=\"sy3\">%</span><span class=\"nu0\">7</span><span class=\"sy1\">)</span> <span class=\"sy3\">*</span> <span class=\"nu0\">24</span> <span class=\"sy3\">*</span> time<span class=\"sy3\">.</span>Hour<span class=\"sy1\">)</span><br/>\t\tfmt<span class=\"sy3\">.</span>Println<span class=\"sy1\">(</span>d<span class=\"sy3\">.</span>Format<span class=\"sy1\">(</span><span class=\"st0\">\"2006-01-02\"</span><span class=\"sy1\">))</span><br/>\t<span class=\"sy1\">}</span><br/><span class=\"sy1\">}</span></pre>"}, {"lang": "Groovy", "loc": 3, "block": "<pre class=\"groovy highlighted_source\"><a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20def\"><span class=\"kw2\">def</span></a> ymd <span class=\"sy0\">=</span> <span class=\"br0\">{</span> it.<span class=\"me1\">format</span><span class=\"br0\">(</span><span class=\"st0\">'yyyy-MM-dd'</span><span class=\"br0\">)</span> <span class=\"br0\">}</span><br/><a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20def\"><span class=\"kw2\">def</span></a> lastFridays <span class=\"sy0\">=</span> lastWeekDays.<span class=\"me1\">curry</span><span class=\"br0\">(</span>Day.<span class=\"me1\">Fri</span><span class=\"br0\">)</span><br/>lastFridays<span class=\"br0\">(</span>args<span class=\"br0\">[</span><span class=\"nu0\">0</span><span class=\"br0\">]</span> <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20as\"><span class=\"kw2\">as</span></a> <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20int\"><span class=\"kw4\">int</span></a><span class=\"br0\">)</span>.<a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20each\"><span class=\"kw5\">each</span></a> <span class=\"br0\">{</span> <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20println\"><span class=\"kw8\">println</span></a> <span class=\"br0\">(</span>ymd<span class=\"br0\">(</span>it<span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"br0\">}</span></pre>"}, {"lang": "Haskell", "loc": 26, "block": "<pre class=\"haskell highlighted_source\"><span class=\"kw1\">import</span> Data<span class=\"sy0\">.</span>Time<span class=\"sy0\">.</span>Calendar<br/>       <span class=\"br0\">(</span>Day<span class=\"sy0\">,</span> addDays<span class=\"sy0\">,</span> showGregorian<span class=\"sy0\">,</span> fromGregorian<span class=\"sy0\">,</span> gregorianMonthLength<span class=\"br0\">)</span><br/><span class=\"kw1\">import</span> Data<span class=\"sy0\">.</span>Time<span class=\"sy0\">.</span>Calendar<span class=\"sy0\">.</span>WeekDate <span class=\"br0\">(</span>toWeekDate<span class=\"br0\">)</span><br/><span class=\"kw1\">import</span> Data<span class=\"sy0\">.</span>List <span class=\"br0\">(</span>transpose<span class=\"sy0\">,</span> intercalate<span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"co1\">-- [1 .. 7] for [Mon .. Sun]</span><br/>findWeekDay <span class=\"sy0\">::</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t:Int\"><span class=\"kw4\">Int</span></a> <span class=\"sy0\">-&gt;</span> Day <span class=\"sy0\">-&gt;</span> Day<br/>findWeekDay dayOfWeek date <span class=\"sy0\">=</span><br/>  <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:head\"><span class=\"kw3\">head</span></a><br/>    <span class=\"br0\">(</span><a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:filter\"><span class=\"kw3\">filter</span></a><br/>       <span class=\"br0\">(</span>\\x <span class=\"sy0\">-&gt;</span><br/>           <span class=\"kw1\">let</span> <span class=\"br0\">(</span><span class=\"sy0\">_,</span> <span class=\"sy0\">_,</span> day<span class=\"br0\">)</span> <span class=\"sy0\">=</span> toWeekDate x<br/>           <span class=\"kw1\">in</span> day <span class=\"sy0\">==</span> dayOfWeek<span class=\"br0\">)</span><br/>       <span class=\"br0\">(</span><span class=\"br0\">(</span>`addDays` date<span class=\"br0\">)</span> <span class=\"sy0\">&lt;$&gt;</span> <span class=\"br0\">[</span><span class=\"sy0\">-</span><span class=\"nu0\">6</span> <span class=\"sy0\">..</span> <span class=\"nu0\">0</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\u00a0<br/>weekDayDates <span class=\"sy0\">::</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t:Int\"><span class=\"kw4\">Int</span></a> <span class=\"sy0\">-&gt;</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t:Integer\"><span class=\"kw4\">Integer</span></a> <span class=\"sy0\">-&gt;</span> <span class=\"br0\">[</span><a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t:String\"><span class=\"kw4\">String</span></a><span class=\"br0\">]</span><br/>weekDayDates dayOfWeek year <span class=\"sy0\">=</span><br/>  <span class=\"br0\">(</span><span class=\"br0\">(</span>showGregorian <span class=\"sy0\">.</span> findWeekDay dayOfWeek<span class=\"br0\">)</span> <span class=\"sy0\">.</span><br/>   <span class=\"br0\">(</span>fromGregorian year <span class=\"sy0\">&lt;*&gt;</span> gregorianMonthLength year<span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"sy0\">&lt;$&gt;</span><br/>  <span class=\"br0\">[</span><span class=\"nu0\">1</span> <span class=\"sy0\">..</span> <span class=\"nu0\">12</span><span class=\"br0\">]</span><br/>\u00a0<br/>main <span class=\"sy0\">::</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t:IO\"><span class=\"kw4\">IO</span></a> <span class=\"br0\">(</span><span class=\"br0\">)</span><br/>main <span class=\"sy0\">=</span><br/>  <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:mapM_\"><span class=\"kw3\">mapM_</span></a><br/>    <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:putStrLn\"><span class=\"kw3\">putStrLn</span></a><br/>    <span class=\"br0\">(</span>intercalate <span class=\"st0\">\"  \"</span> <span class=\"sy0\">&lt;$&gt;</span> transpose <span class=\"br0\">(</span>weekDayDates <span class=\"nu0\">5</span> <span class=\"sy0\">&lt;$&gt;</span> <span class=\"br0\">[</span><span class=\"nu0\">2012</span> <span class=\"sy0\">..</span> <span class=\"nu0\">2017</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"br0\">)</span></pre>"}, {"lang": "Icon and Unicon", "loc": 20, "block": "<pre class=\"icon highlighted_source\"><span class=\"kw1\">procedure</span> main<span class=\"br0\">(</span>A<span class=\"br0\">)</span><br/><span class=\"kw1\">every</span> <span class=\"kw4\">write</span><span class=\"br0\">(</span>lastfridays<span class=\"br0\">(</span><span class=\"sy1\">!</span>A<span class=\"br0\">)</span><span class=\"br0\">)</span><br/><span class=\"kw1\">end</span><br/>\u00a0<br/><span class=\"kw1\">procedure</span> lastfridays<span class=\"br0\">(</span>year<span class=\"br0\">)</span><br/><span class=\"kw1\">every</span> m <span class=\"sy1\">:=</span> <span class=\"nu0\">1</span> <span class=\"kw1\">to</span> <span class=\"nu0\">12</span> <span class=\"kw1\">do</span> <span class=\"br0\">{</span><br/>   d <span class=\"sy1\">:=</span> <span class=\"kw1\">case</span> m <span class=\"kw1\">of</span> <span class=\"br0\">{</span><br/>      <span class=\"nu0\">2</span>        <span class=\"sy1\">:</span> <span class=\"kw1\">if</span> IsLeapYear<span class=\"br0\">(</span>year<span class=\"br0\">)</span> <span class=\"kw1\">then</span> <span class=\"nu0\">29</span> <span class=\"kw1\">else</span> <span class=\"nu0\">28</span><br/>      <span class=\"nu0\">4</span><span class=\"sy1\">|</span><span class=\"nu0\">6</span><span class=\"sy1\">|</span><span class=\"nu0\">9</span><span class=\"sy1\">|</span><span class=\"nu0\">11</span> <span class=\"sy1\">:</span> <span class=\"nu0\">30</span><br/>      <span class=\"kw1\">default</span>  <span class=\"sy1\">:</span> <span class=\"nu0\">31</span><br/>      <span class=\"br0\">}</span>                          <span class=\"co1\"># last day of month</span><br/>\u00a0<br/>   z <span class=\"sy1\">:=</span> <span class=\"nu0\">0</span>  <br/>   j <span class=\"sy1\">:=</span> julian<span class=\"br0\">(</span>m<span class=\"sy1\">,</span>d<span class=\"sy1\">,</span>year<span class=\"br0\">)</span> <span class=\"sy1\">+</span> <span class=\"nu0\">1</span>     <span class=\"co1\"># first day of next month</span><br/>   <span class=\"kw1\">until</span> <span class=\"br0\">(</span>j<span class=\"sy1\">-:=</span><span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"sy1\">%</span>7 <span class=\"sy1\">=</span> <span class=\"nu0\">4</span> <span class=\"kw1\">do</span> z <span class=\"sy1\">-:=</span><span class=\"nu0\">1</span> <span class=\"co1\"># backup to last friday=4</span><br/>   <span class=\"kw1\">suspend</span> sprintf<span class=\"br0\">(</span><span class=\"st0\">\"%d-%d-%d\"</span><span class=\"sy1\">,</span>year<span class=\"sy1\">,</span>m<span class=\"sy1\">,</span>d<span class=\"sy1\">+</span>z<span class=\"br0\">)</span><br/>   <span class=\"br0\">}</span><br/><span class=\"kw1\">end</span><br/>\u00a0<br/><span class=\"kw1\">link</span> datetime<span class=\"sy1\">,</span> printf</pre>"}, {"lang": "J", "loc": 2, "block": "<pre class=\"j highlighted_source\">require <span class=\"st_h\">'dates'</span><br/>last_fridays=: <span class=\"nu0\">12</span> {. [: <span class=\"sy0\">(</span>{:/.~ }:\"<span class=\"nu0\">1</span><span class=\"sy0\">)</span>@<span class=\"sy0\">(</span>#~ <span class=\"nu0\">5</span> = weekday<span class=\"sy0\">)</span>@todate <span class=\"sy0\">(</span>i.<span class=\"nu0\">366</span><span class=\"sy0\">)</span> + <a class=\"__cf_email__\" data-cfemail=\"20544f4441594e4f60\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>,&amp;<span class=\"nu0\">1</span> <span class=\"nu0\">1</span></pre>"}, {"lang": "Java", "loc": 26, "block": "<pre class=\"java5 highlighted_source\"><span class=\"kw2\">import</span> <span class=\"co2\">java.text.*</span><span class=\"sy0\">;</span><br/><span class=\"kw2\">import</span> <span class=\"co2\">java.util.*</span><span class=\"sy0\">;</span><br/>\u00a0<br/><span class=\"kw2\">public</span> <span class=\"kw2\">class</span> LastFridays <span class=\"br0\">{</span><br/>\u00a0<br/>    <span class=\"kw2\">public</span> <span class=\"kw2\">static</span> <span class=\"kw3\">void</span> main<span class=\"br0\">(</span><a href=\"http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/lang/String.html\"><span class=\"kw21\">String</span></a><span class=\"br0\">[</span><span class=\"br0\">]</span> args<span class=\"br0\">)</span> <span class=\"kw2\">throws</span> <a href=\"http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/lang/Exception.html\"><span class=\"kw21\">Exception</span></a> <span class=\"br0\">{</span><br/>        <span class=\"kw3\">int</span> year = <a href=\"http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/lang/Integer.html\"><span class=\"kw21\">Integer</span></a>.<span class=\"me1\">parseInt</span><span class=\"br0\">(</span>args<span class=\"br0\">[</span><span class=\"nu0\">0</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        <a href=\"http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/util/GregorianCalendar.html\"><span class=\"kw46\">GregorianCalendar</span></a> c = <span class=\"kw2\">new</span> <a href=\"http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/util/GregorianCalendar.html\"><span class=\"kw46\">GregorianCalendar</span></a><span class=\"br0\">(</span>year, <span class=\"nu0\">0</span>, <span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>\u00a0<br/>        <span class=\"kw1\">for</span> <span class=\"br0\">(</span><a href=\"http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/lang/String.html\"><span class=\"kw21\">String</span></a> mon\u00a0: <span class=\"kw2\">new</span> <a href=\"http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/text/DateFormatSymbols.html\"><span class=\"kw45\">DateFormatSymbols</span></a><span class=\"br0\">(</span><a href=\"http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/util/Locale.html\"><span class=\"kw46\">Locale</span></a>.<span class=\"me1\">US</span><span class=\"br0\">)</span>.<span class=\"me1\">getShortMonths</span><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>            <span class=\"kw1\">if</span> <span class=\"br0\">(</span><span class=\"sy0\">!</span>mon.<span class=\"me1\">isEmpty</span><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>                <span class=\"kw3\">int</span> totalDaysOfMonth = c.<span class=\"me1\">getActualMaximum</span><span class=\"br0\">(</span><a href=\"http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/util/Calendar.html\"><span class=\"kw46\">Calendar</span></a>.<span class=\"me1\">DAY_OF_MONTH</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>                c.<span class=\"me1\">set</span><span class=\"br0\">(</span><a href=\"http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/util/Calendar.html\"><span class=\"kw46\">Calendar</span></a>.<span class=\"me1\">DAY_OF_MONTH</span>, totalDaysOfMonth<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>\u00a0<br/>                <span class=\"kw3\">int</span> daysToRollBack = <span class=\"br0\">(</span>c.<span class=\"me1\">get</span><span class=\"br0\">(</span><a href=\"http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/util/Calendar.html\"><span class=\"kw46\">Calendar</span></a>.<span class=\"me1\">DAY_OF_WEEK</span><span class=\"br0\">)</span> + <span class=\"nu0\">1</span><span class=\"br0\">)</span> <span class=\"sy0\">%</span> <span class=\"nu0\">7</span><span class=\"sy0\">;</span><br/>\u00a0<br/>                <span class=\"kw3\">int</span> day = totalDaysOfMonth - daysToRollBack<span class=\"sy0\">;</span><br/>                c.<span class=\"me1\">set</span><span class=\"br0\">(</span><a href=\"http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/util/Calendar.html\"><span class=\"kw46\">Calendar</span></a>.<span class=\"me1\">DAY_OF_MONTH</span>, day<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>\u00a0<br/>                <a href=\"http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/lang/System.html\"><span class=\"kw21\">System</span></a>.<span class=\"me1\">out</span>.<span class=\"me1\">printf</span><span class=\"br0\">(</span><span class=\"st0\">\"%d\u00a0%s\u00a0%d<span class=\"es0\">\\n</span>\"</span>, year, mon, day<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>\u00a0<br/>                c.<span class=\"me1\">set</span><span class=\"br0\">(</span>year, c.<span class=\"me1\">get</span><span class=\"br0\">(</span><a href=\"http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/util/Calendar.html\"><span class=\"kw46\">Calendar</span></a>.<span class=\"me1\">MONTH</span><span class=\"br0\">)</span> + <span class=\"nu0\">1</span>, <span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>            <span class=\"br0\">}</span><br/>        <span class=\"br0\">}</span><br/>    <span class=\"br0\">}</span><br/><span class=\"br0\">}</span></pre>"}, {"lang": "JavaScript", "loc": 28, "block": "<pre class=\"javascript highlighted_source\"><span class=\"kw1\">var</span> last_friday_of_month<span class=\"sy0\">,</span> print_last_fridays_of_month<span class=\"sy0\">;</span><br/>\u00a0<br/>last_friday_of_month <span class=\"sy0\">=</span> <span class=\"kw1\">function</span><span class=\"br0\">(</span>year<span class=\"sy0\">,</span> month<span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>  <span class=\"kw1\">var</span> i<span class=\"sy0\">,</span> last_day<span class=\"sy0\">;</span><br/>  i <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span><br/>  while <span class=\"br0\">(</span><span class=\"kw2\">true</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>    last_day <span class=\"sy0\">=</span> <span class=\"kw1\">new</span> <span class=\"kw4\">Date</span><span class=\"br0\">(</span>year<span class=\"sy0\">,</span> month<span class=\"sy0\">,</span> i<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>    <span class=\"kw1\">if</span> <span class=\"br0\">(</span>last_day.<span class=\"me1\">getDay</span><span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"sy0\">===</span> <span class=\"nu0\">5</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>      <span class=\"kw1\">return</span> last_day.<span class=\"me1\">toDateString</span><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>    <span class=\"br0\">}</span><br/>    i <span class=\"sy0\">-=</span> <span class=\"nu0\">1</span><span class=\"sy0\">;</span><br/>  <span class=\"br0\">}</span><br/><span class=\"br0\">}</span><span class=\"sy0\">;</span><br/>\u00a0<br/>print_last_fridays_of_month <span class=\"sy0\">=</span> <span class=\"kw1\">function</span><span class=\"br0\">(</span>year<span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>  <span class=\"kw1\">var</span> month<span class=\"sy0\">,</span> results<span class=\"sy0\">;</span><br/>  results <span class=\"sy0\">=</span> <span class=\"br0\">[</span><span class=\"br0\">]</span><span class=\"sy0\">;</span><br/>  <span class=\"kw1\">for</span> <span class=\"br0\">(</span>month <span class=\"sy0\">=</span> <span class=\"nu0\">1</span><span class=\"sy0\">;</span> month <span class=\"sy0\">&lt;=</span> <span class=\"nu0\">12</span><span class=\"sy0\">;</span> <span class=\"sy0\">++</span>month<span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>    results.<span class=\"me1\">push</span><span class=\"br0\">(</span>console.<span class=\"me1\">log</span><span class=\"br0\">(</span>last_friday_of_month<span class=\"br0\">(</span>year<span class=\"sy0\">,</span> month<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>  <span class=\"br0\">}</span><br/>  <span class=\"kw1\">return</span> results<span class=\"sy0\">;</span><br/><span class=\"br0\">}</span><span class=\"sy0\">;</span><br/>\u00a0<br/><span class=\"br0\">(</span><span class=\"kw1\">function</span><span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>  <span class=\"kw1\">var</span> year<span class=\"sy0\">;</span><br/>  year <span class=\"sy0\">=</span> parseInt<span class=\"br0\">(</span>process.<span class=\"me1\">argv</span><span class=\"br0\">[</span><span class=\"nu0\">2</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>  <span class=\"kw1\">return</span> print_last_fridays_of_month<span class=\"br0\">(</span>year<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/><span class=\"br0\">}</span><span class=\"br0\">)</span><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"sy0\">;</span></pre>"}, {"lang": "jq", "loc": 27, "block": "<pre class=\"text highlighted_source\"># In case your jq does not have \"until\" defined:<br/>\u00a0<br/>def until(cond; next):<br/>  def _until:<br/>    if cond then . else (next|_until) end;<br/>  _until;<br/>\u00a0<br/># Zeller's Congruence is from [[Day_of_the_week#jq]]<br/>\u00a0<br/># Use Zeller's Congruence to determine the day of the week, given<br/># year, month and day as integers in the conventional way.<br/># If iso == \"iso\" or \"ISO\", then emit an integer in 1 -- 7 where <br/># 1 represents Monday, 2 Tuesday, etc;<br/># otherwise emit 0 for Saturday, 1 for Sunday, etc.<br/>#<br/>def day_of_week(year; month; day; iso):<br/>  if month == 1 or month == 2 then<br/>    [year - 1, month + 12, day]<br/>  else<br/>    [year, month, day]<br/>  end<br/>  | .[2] + (13*(.[1] + 1)/5|floor) <br/>    +  (.[0]%100)       + ((.[0]%100)/4|floor)<br/>    +  (.[0]/400|floor) - 2*(.[0]/100|floor)<br/>  | if iso == \"iso\" or iso == \"ISO\" then 1 + ((. + 5)\u00a0% 7)<br/>    else .\u00a0% 7<br/>    end\u00a0;</pre>"}, {"lang": "Julia", "loc": 27, "block": "<pre class=\"text highlighted_source\">\u00a0<br/>isdefined(:Date) || using Dates<br/>\u00a0<br/>const wday = Dates.Fri<br/>const lo = 1<br/>const hi = 12<br/>\u00a0<br/>print(\"\\nThis script will print the last \", Dates.dayname(wday))<br/>println(\"s of each month of the year given.\")<br/>println(\"(Leave input empty to quit.)\")<br/>\u00a0<br/>while true<br/>    print(\"\\nYear&gt; \")<br/>    y = chomp(readline())<br/>    0 &lt; length(y) || break<br/>    y = try<br/>        parseint(y)<br/>    catch<br/>        println(\"Sorry, but \\\"\", y, \"\\\" does not compute as a year.\")<br/>        continue<br/>    end<br/>    println()<br/>    for m in Date(y, lo):Month(1):Date(y, hi)<br/>        println(\"    \", tolast(m, wday))<br/>    end<br/>end<br/>\u00a0</pre>"}, {"lang": "K", "loc": 15, "block": "<pre class=\"text highlighted_source\">\u00a0<br/>/ List the dates of last Fridays of each month of<br/>/ a given year<br/>/ lastfridt.k<br/>\u00a0<br/>isleap: {(+/~x!' 4 100 400)!2}<br/>wd: {(_jd x)!7}<br/>dom: (31;28;31;30;31;30;31;31;30;31;30;31)<br/>init: {:[isleap x;dom[1]::29;dom[1]::28]}<br/>wdme: {[m;y]; init y; dt:(10000*y)+(100*m)+dom[m-1];jd::(_jd dt);mewd::(wd dt)}<br/>lfd: {[m;y]; wdme[m;y];:[mewd&gt;3;jd::jd+(4-mewd);jd::jd-(3+mewd)];dt:_dj(jd);yy:$(yr:dt%10000);dd:$(d:dt!100);mm:$(mo:((dt-yr*10000)%100));arr::arr,$(yy,\"-\",(2$mm),\"-\",(2$dd))}<br/>lfd1: {[y];arr::(); m:1; do[12;lfd[m;y];m+:1]}<br/>main: {[y]; lfd1[y];`0: ,\"Dates of last Fridays of \",($y);12 10#arr}<br/>\u00a0<br/>\u00a0</pre>"}, {"lang": "Kotlin", "loc": 23, "block": "<pre class=\"scala highlighted_source\"><span class=\"co1\">// version 1.0.6</span><br/>\u00a0<br/><a href=\"http://scala-lang.org\"><span class=\"kw1\">import</span></a> java.<span class=\"me1\">util</span>.<span class=\"sy0\">*</span><br/>\u00a0<br/>fun main<span class=\"br0\">(</span>args<span class=\"sy0\">:</span> Array<span class=\"sy0\">&lt;</span>String<span class=\"sy0\">&gt;</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>    print<span class=\"br0\">(</span><span class=\"st0\">\"Enter a year\u00a0: \"</span><span class=\"br0\">)</span><br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> year <span class=\"sy0\">=</span> readLine<span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"sy0\">!!</span>.<span class=\"me1\">toInt</span><span class=\"br0\">(</span><span class=\"br0\">)</span><br/>\u00a0<br/>    println<span class=\"br0\">(</span><span class=\"st0\">\"The last Fridays of each month in $year are as follows:\"</span><span class=\"br0\">)</span><br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> calendar <span class=\"sy0\">=</span> GregorianCalendar<span class=\"br0\">(</span>year, <span class=\"nu0\">0</span>, <span class=\"nu0\">31</span><span class=\"br0\">)</span><br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">for</span></a> <span class=\"br0\">(</span>month in <span class=\"nu0\">1</span>..<span class=\"nu0\">12</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>        <a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> daysInMonth <span class=\"sy0\">=</span> calendar.<span class=\"me1\">getActualMaximum</span><span class=\"br0\">(</span>Calendar.<span class=\"me1\">DAY_OF_MONTH</span><span class=\"br0\">)</span><br/>        <a href=\"http://scala-lang.org\"><span class=\"kw1\">var</span></a> offset <span class=\"sy0\">=</span> calendar<span class=\"br0\">[</span>Calendar.<span class=\"me1\">DAY_OF_WEEK</span><span class=\"br0\">]</span> - Calendar.<span class=\"me1\">FRIDAY</span><br/>        <a href=\"http://scala-lang.org\"><span class=\"kw1\">if</span></a> <span class=\"br0\">(</span>offset <span class=\"sy0\">&lt;</span> <span class=\"nu0\">0</span><span class=\"br0\">)</span> offset +<span class=\"sy0\">=</span> <span class=\"nu0\">7</span><br/>        <a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> lastFriday <span class=\"sy0\">=</span> daysInMonth - offset<br/>        println<span class=\"br0\">(</span><span class=\"st0\">\"$year-\"</span> + <span class=\"st0\">\"%02d-\"</span>.<span class=\"me1\">format</span><span class=\"br0\">(</span>month<span class=\"br0\">)</span> + <span class=\"st0\">\"%02d\"</span>.<span class=\"me1\">format</span><span class=\"br0\">(</span>lastFriday<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>        <a href=\"http://scala-lang.org\"><span class=\"kw1\">if</span></a> <span class=\"br0\">(</span>month <span class=\"sy0\">&lt;</span> <span class=\"nu0\">12</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>            calendar.<span class=\"me1\">add</span><span class=\"br0\">(</span>Calendar.<span class=\"me1\">DAY_OF_MONTH</span>, <span class=\"nu0\">1</span><span class=\"br0\">)</span><br/>            calendar.<span class=\"me1\">add</span><span class=\"br0\">(</span>Calendar.<span class=\"me1\">MONTH</span>, <span class=\"nu0\">1</span><span class=\"br0\">)</span><br/>            calendar.<span class=\"me1\">add</span><span class=\"br0\">(</span>Calendar.<span class=\"me1\">DAY_OF_MONTH</span>, -<span class=\"nu0\">1</span><span class=\"br0\">)</span><br/>        <span class=\"br0\">}</span><br/>    <span class=\"br0\">}</span><br/><span class=\"br0\">}</span></pre>"}, {"lang": "Lasso", "loc": 24, "block": "<pre class=\"text highlighted_source\">define isLeapYear(y::integer) =&gt; {<br/>\t#y\u00a0% 400 == 0\u00a0? return true<br/>\t#y\u00a0% 100 == 0\u00a0? return false<br/>\t#y\u00a0% 4 == 0\u00a0? return true<br/>\treturn false<br/>}<br/>define fridays(y::integer) =&gt; {<br/>\tlocal(out = array)<br/>\tloop(12) =&gt; {<br/>\t\tlocal(last = 28)<br/>\t\tloop_count == 2 &amp;&amp; isLeapYear(#y)\u00a0? #last = 29<br/>\t\tarray(4,6,9,11) &gt;&gt; loop_count\u00a0? #last == 30<br/>\t\t#last == 28 &amp;&amp; loop_count\u00a0!= 2\u00a0? #last = 31<br/>\t\tlocal(start = date(-year=#y,-month=loop_count,-day=#last))<br/>\t\twhile(#start-&gt;dayofweek\u00a0!= 6) =&gt; {<br/>\t\t\t#start-&gt;subtract(-day=1)<br/>\t\t}<br/>\t\t#out-&gt;insert(#start)<br/>\t}<br/>\treturn #out<br/>}<br/>with f in fridays(2012) do =&gt; {^<br/>\t#f-&gt;format('%Q') + '\\r'<br/>^}</pre>"}, {"lang": "LiveCode", "loc": 23, "block": "<pre class=\"text highlighted_source\">function lastFriday yyyy<br/>    -- year,month num,day of month,hour in 24-hour time,minute,second,numeric day of week.<br/>    convert the long date to dateitems<br/>    put 1 into item 2 of it<br/>    put 1 into item 3 of it<br/>    put yyyy into item 1 of it<br/>    put it into startDate<br/>    convert startDate to dateItems<br/>    repeat with m = 1 to 12<br/>        put m into item 2 of startDate<br/>        repeat with d = 20 to 31<br/>            put d into item 3 of startDate<br/>            convert startDate to dateItems<br/>            -- 6 is friday<br/>            if item 7 of startDate is 6 and item 1 of startDate is yyyy and item 2 of startDate is m then<br/>                put item 3 of startDate into fridays[item 2 of startDate]<br/>            end if<br/>        end repeat<br/>    end repeat<br/>    combine fridays using cr and space<br/>    sort fridays ascending numeric<br/>    return fridays<br/>end lastFriday</pre>"}, {"lang": "Logo", "loc": 45, "block": "<pre class=\"text highlighted_source\">; Determine if a Gregorian calendar year is leap <br/>to leap?\u00a0:year<br/>  output (and <br/>    equal? 0 modulo\u00a0:year 4<br/>    not member? modulo\u00a0:year 400 [100 200 300]<br/>  )<br/>end<br/>\u00a0<br/>; Convert Gregorian calendar date to a simple day count from <br/>; RD 1 = January 1, 1 CE <br/>to day_number\u00a0:year\u00a0:month\u00a0:day<br/>  local \"elapsed make \"elapsed difference\u00a0:year 1<br/>  output (sum  product 365\u00a0:elapsed<br/>              int quotient\u00a0:elapsed 4<br/>              minus int quotient\u00a0:elapsed 100<br/>              int quotient\u00a0:elapsed 400<br/>              int quotient difference product 367\u00a0:month 362 12<br/>              ifelse lessequal?\u00a0:month 2 0 ifelse leap?\u00a0:year -1 -2<br/>             \u00a0:day)<br/>end<br/>\u00a0<br/>; Find the day of the week from a day number, 0 = Sunday through 6 = Saturday<br/>to day_of_week\u00a0:day_number<br/>  output modulo\u00a0:day_number 7<br/>end<br/>\u00a0<br/>; Find the date of the last Friday of a given month<br/>to last_friday\u00a0:year\u00a0:month<br/>  local \"zero make \"zero day_number\u00a0:year\u00a0:month 0<br/>  local \"last make \"last day_number\u00a0:year sum 1\u00a0:month 0<br/>  local \"wday make \"wday day_of_week\u00a0:last<br/>  local \"friday make \"friday sum\u00a0:last remainder difference -2\u00a0:wday 7<br/>  output difference\u00a0:friday\u00a0:zero<br/>end<br/>\u00a0<br/>local \"year<br/>make \"year ifelse empty?\u00a0:command.line 2012\u00a0:command.line<br/>\u00a0<br/>repeat 12 [<br/>  local \"month make \"month #<br/>  local \"day make \"day last_friday\u00a0:year\u00a0:month<br/>  if (less?\u00a0:month 10) [make \"month word \"0\u00a0:month]<br/>  print reduce [(word\u00a0?1 \"-\u00a0?2)] (list\u00a0:year\u00a0:month\u00a0:day)<br/>]<br/>bye</pre>"}, {"lang": "Lua", "loc": 20, "block": "<pre class=\"lua highlighted_source\"><span class=\"kw1\">function</span> isLeapYear <span class=\"br0\">(</span>y<span class=\"br0\">)</span><br/>    <span class=\"kw1\">return</span> <span class=\"br0\">(</span>y <span class=\"sy0\">%</span> <span class=\"nu0\">4</span> <span class=\"sy0\">==</span> <span class=\"nu0\">0</span> <span class=\"kw2\">and</span> y <span class=\"sy0\">%</span> <span class=\"nu0\">100</span> <span class=\"sy0\">~=</span><span class=\"nu0\">0</span><span class=\"br0\">)</span> <span class=\"kw2\">or</span> y <span class=\"sy0\">%</span> <span class=\"nu0\">400</span> <span class=\"sy0\">==</span> <span class=\"nu0\">0</span><br/><span class=\"kw1\">end</span><br/>\u00a0<br/><span class=\"kw1\">function</span> dayOfWeek <span class=\"br0\">(</span>y<span class=\"sy0\">,</span> m<span class=\"sy0\">,</span> d<span class=\"br0\">)</span><br/>    <span class=\"kw1\">local</span> t <span class=\"sy0\">=</span> <span class=\"kw3\">os.time</span><span class=\"br0\">(</span><span class=\"br0\">{</span>year <span class=\"sy0\">=</span> y<span class=\"sy0\">,</span> month <span class=\"sy0\">=</span> m<span class=\"sy0\">,</span> day <span class=\"sy0\">=</span> d<span class=\"br0\">}</span><span class=\"br0\">)</span><br/>    <span class=\"kw1\">return</span> <span class=\"kw3\">os.date</span><span class=\"br0\">(</span><span class=\"st0\">\"%A\"</span><span class=\"sy0\">,</span> t<span class=\"br0\">)</span><br/><span class=\"kw1\">end</span><br/>\u00a0<br/><span class=\"kw1\">function</span> lastWeekdays <span class=\"br0\">(</span>wday<span class=\"sy0\">,</span> year<span class=\"br0\">)</span><br/>    <span class=\"kw1\">local</span> monthLength<span class=\"sy0\">,</span> day <span class=\"sy0\">=</span> <span class=\"br0\">{</span><span class=\"nu0\">31</span><span class=\"sy0\">,</span> <span class=\"nu0\">28</span><span class=\"sy0\">,</span> <span class=\"nu0\">31</span><span class=\"sy0\">,</span> <span class=\"nu0\">30</span><span class=\"sy0\">,</span> <span class=\"nu0\">31</span><span class=\"sy0\">,</span> <span class=\"nu0\">30</span><span class=\"sy0\">,</span> <span class=\"nu0\">31</span><span class=\"sy0\">,</span> <span class=\"nu0\">31</span><span class=\"sy0\">,</span> <span class=\"nu0\">30</span><span class=\"sy0\">,</span> <span class=\"nu0\">31</span><span class=\"sy0\">,</span> <span class=\"nu0\">30</span><span class=\"sy0\">,</span> <span class=\"nu0\">31</span><span class=\"br0\">}</span><br/>    <span class=\"kw1\">if</span> isLeapYear<span class=\"br0\">(</span>year<span class=\"br0\">)</span> <span class=\"kw1\">then</span> monthLength<span class=\"br0\">[</span><span class=\"nu0\">2</span><span class=\"br0\">]</span> <span class=\"sy0\">=</span> <span class=\"nu0\">29</span> <span class=\"kw1\">end</span><br/>    <span class=\"kw1\">for</span> month <span class=\"sy0\">=</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">12</span> <span class=\"kw1\">do</span><br/>        day <span class=\"sy0\">=</span> monthLength<span class=\"br0\">[</span>month<span class=\"br0\">]</span><br/>        <span class=\"kw1\">while</span> dayOfWeek<span class=\"br0\">(</span>year<span class=\"sy0\">,</span> month<span class=\"sy0\">,</span> day<span class=\"br0\">)</span> <span class=\"sy0\">~=</span> wday <span class=\"kw1\">do</span> day <span class=\"sy0\">=</span> day <span class=\"sy0\">-</span> <span class=\"nu0\">1</span> <span class=\"kw1\">end</span><br/>        <span class=\"kw3\">print</span><span class=\"br0\">(</span>year <span class=\"sy0\">..</span> <span class=\"st0\">\"-\"</span> <span class=\"sy0\">..</span> month <span class=\"sy0\">..</span> <span class=\"st0\">\"-\"</span> <span class=\"sy0\">..</span> day<span class=\"br0\">)</span><br/>    <span class=\"kw1\">end</span><br/><span class=\"kw1\">end</span><br/>\u00a0<br/>lastWeekdays<span class=\"br0\">(</span><span class=\"st0\">\"Friday\"</span><span class=\"sy0\">,</span> <span class=\"kw3\">tonumber</span><span class=\"br0\">(</span>arg<span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"br0\">)</span></pre>"}, {"lang": "Maple", "loc": 18, "block": "<pre class=\"text highlighted_source\">fridays\u00a0:= proc(year)<br/>\tlocal i, dt, change, last_days;<br/>\tlast_days\u00a0:= [31,28,31,30,31,30,31,31,30,31,30,31];<br/>\tif (Calendar:-IsLeapYear(year)) then<br/>\t\tlast_days[2]\u00a0:= 28;<br/>\tend if;<br/>\tfor i to 12 do<br/>\t\tdt\u00a0:= Date(year, i, last_days[i]);<br/>\t\tchange\u00a0:= 0;<br/>\t\tif not(Calendar:-DayOfWeek(dt) = 6) then <br/>\t\t\tchange\u00a0:= -(Calendar:-DayOfWeek(dt) mod 7)-1;<br/>\t\tend if;<br/>\t\tdt\u00a0:= Calendar:-AdjustDateField(dt, \"date\", change);<br/>\t\tprintf(\"%d-%d-%d\\n\", year, Month(dt), DayOfMonth(dt));<br/>\tend do;<br/>end proc;<br/>\u00a0<br/>fridays(2012);</pre>"}, {"lang": "Mathematica", "loc": 4, "block": "<pre class=\"text highlighted_source\">FridaysOfYear[Y_]\u00a0:= <br/> NestWhile[(DaysPlus[#, - 1]) &amp;, #, (DateString[#, \"DayName\"]\u00a0!= \"Friday\") &amp;] &amp; /@ <br/>  <a class=\"__cf_email__\" data-cfemail=\"2865475b5c687a4d5e4d5a5b4d\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>@NestList [DaysPlus[# /. {x_, y_, X_} -&gt; {x, y, 1}, - 1] &amp;, {Y + 1, 1, 1}, 12]<br/><a class=\"__cf_email__\" data-cfemail=\"c182aeadb4acaf8187b3a8a5a0b8b28ea798a4a0b3\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>[2012]</pre>"}, {"lang": "MATLAB / Octave", "loc": 10, "block": "<pre class=\"matlab highlighted_source\"> <span class=\"kw1\">function</span> t = last_fridays_of_year<span class=\"br0\">(</span>y<span class=\"br0\">)</span><br/>  t1 = <a href=\"http://www.mathworks.com/access/helpdesk/help/techdoc/ref/datenum.html\"><span class=\"kw2\">datenum</span></a><span class=\"br0\">(</span><span class=\"br0\">[</span>y,<span class=\"nu0\">1</span>,<span class=\"nu0\">1</span>,<span class=\"nu0\">0</span>,<span class=\"nu0\">0</span>,<span class=\"nu0\">0</span><span class=\"br0\">]</span><span class=\"br0\">)</span>;<br/>  t2 = <a href=\"http://www.mathworks.com/access/helpdesk/help/techdoc/ref/datenum.html\"><span class=\"kw2\">datenum</span></a><span class=\"br0\">(</span><span class=\"br0\">[</span>y,<span class=\"nu0\">12</span>,<span class=\"nu0\">31</span>,<span class=\"nu0\">0</span>,<span class=\"nu0\">0</span>,<span class=\"nu0\">0</span><span class=\"br0\">]</span><span class=\"br0\">)</span>;<br/>  t  = <a href=\"http://www.mathworks.com/access/helpdesk/help/techdoc/ref/datevec.html\"><span class=\"kw2\">datevec</span></a><span class=\"br0\">(</span>t1:t2<span class=\"br0\">)</span>;<br/>  t  = t<span class=\"br0\">(</span><a href=\"http://www.mathworks.com/access/helpdesk/help/techdoc/ref/strmatch.html\"><span class=\"kw2\">strmatch</span></a><span class=\"br0\">(</span><span class=\"co2\">'Friday'</span>, <a href=\"http://www.mathworks.com/access/helpdesk/help/techdoc/ref/datestr.html\"><span class=\"kw2\">datestr</span></a><span class=\"br0\">(</span>t,<span class=\"co2\">'dddd'</span><span class=\"br0\">)</span><span class=\"br0\">)</span>,\u00a0:<span class=\"br0\">)</span>;     <span class=\"co1\">% find all Fridays</span><br/>  t  = t<span class=\"br0\">(</span><span class=\"br0\">[</span><a href=\"http://www.mathworks.com/access/helpdesk/help/techdoc/ref/find.html\"><span class=\"kw2\">find</span></a><span class=\"br0\">(</span><a href=\"http://www.mathworks.com/access/helpdesk/help/techdoc/ref/diff.html\"><span class=\"kw2\">diff</span></a><span class=\"br0\">(</span>t<span class=\"br0\">(</span>:,<span class=\"nu0\">2</span><span class=\"br0\">)</span><span class=\"br0\">)</span> &gt; <span class=\"nu0\">0</span><span class=\"br0\">)</span>; <span class=\"kw1\">end</span><span class=\"br0\">]</span>,\u00a0:<span class=\"br0\">)</span>;     <span class=\"co1\">% find Fridays before change of month</span><br/>  <span class=\"kw1\">end</span>; <br/>\u00a0<br/>  <a href=\"http://www.mathworks.com/access/helpdesk/help/techdoc/ref/datestr.html\"><span class=\"kw2\">datestr</span></a><span class=\"br0\">(</span>last_fridays_of_year<span class=\"br0\">(</span><span class=\"nu0\">2012</span><span class=\"br0\">)</span>,<span class=\"co2\">'yyyy-mm-dd'</span><span class=\"br0\">)</span>\t\t<br/>\u00a0</pre>"}, {"lang": "Maxima", "loc": 20, "block": "<pre class=\"text highlighted_source\">weekday(year,  month,  day)\u00a0:= block([m: month,  y: year,  k], <br/>   if m &lt; 3 then (m: m + 12,  y: y - 1), <br/>   k: 1 + remainder(day + quotient((m + 1)*26,  10) + y + quotient(y,  4)<br/>        + 6*quotient(y,  100) + quotient(y,  400) + 5,  7), <br/>   ['monday,  'tuesday,  'wednesday,  'thurdsday,  'friday,  'saturday,  'sunday][k]<br/>)$<br/>\u00a0<br/>leapyearp(year)\u00a0:= is(mod(year,  4) = 0 and (mod(year,  100) # 0 or mod(year,  400) = 0))$<br/>\u00a0<br/>\u00a0<br/>lastfridays(year)\u00a0:= block(<br/>   [m: [31,  if leapyearp(year) then 29 else 28,  31,  30,  31,  30,  31,  31,  30,  31,  30,  31],  v: [ ]], <br/>   for month thru 12 do v: endcons(sconcat(year,  \"-\",  month,  \"-\", <br/>      lmax(sublist(makelist(i,  i,  1,  m[month]),  lambda([day],  weekday(year,  month,  day) = 'friday)))),  v), <br/>   v<br/>)$<br/>\u00a0<br/>lastfridays(2012);<br/>[\"2012-1-27\", \"2012-2-24\", \"2012-3-30\", \"2012-4-27\", \"2012-5-25\", \"2012-6-29\",<br/>\"2012-7-27\",\"2012-8-31\", \"2012-9-28\", \"2012-10-26\", \"2012-11-30\", \"2012-12-28\"]</pre>"}, {"lang": "NetRexx", "loc": 77, "block": "<pre class=\"netrexx highlighted_source\"><span class=\"coMULTI\">/* NetRexx */</span><br/>options replace format comments java crossref symbols nobinary<br/>\u00a0<br/><span class=\"kw1\">import</span> java.<span class=\"me0\">text</span>.<br/>\u00a0<br/><span class=\"me0\">runSample</span><span class=\"br0\">(</span>arg<span class=\"br0\">)</span><br/><span class=\"kw1\">return</span><br/>\u00a0<br/><span class=\"co1\">-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br/>method lastFridayByLib<span class=\"br0\">(</span>year<span class=\"br0\">)</span> <span class=\"kw2\">public</span> <span class=\"kw2\">static</span><br/>\u00a0<br/>  cal = GregorianCalendar<span class=\"br0\">(</span>year, <span class=\"nu0\">0</span>, <span class=\"nu0\">1</span><span class=\"br0\">)</span><br/>\u00a0<br/>  <span class=\"kw1\">loop</span> mon over DateFormatSymbols<span class=\"br0\">(</span><span class=\"br0\">)</span>.<span class=\"me0\">getShortMonths</span><span class=\"br0\">(</span><span class=\"br0\">)</span><br/>    <span class=\"kw1\">if</span> <span class=\"sy0\">\\</span>mon.<span class=\"me0\">isEmpty</span><span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"kw3\">then</span> <span class=\"kw1\">do</span><br/>      totalDaysOfMonth = cal.<span class=\"me0\">getActualMaximum</span><span class=\"br0\">(</span>Calendar.<span class=\"me0\">DAY_OF_MONTH</span><span class=\"br0\">)</span><br/>      cal.<span class=\"me0\">set</span><span class=\"br0\">(</span>Calendar.<span class=\"me0\">DAY_OF_MONTH</span>, totalDaysOfMonth<span class=\"br0\">)</span><br/>\u00a0<br/>      daysToRollBack = <span class=\"br0\">(</span>cal.<span class=\"me0\">get</span><span class=\"br0\">(</span>Calendar.<span class=\"me0\">DAY_OF_WEEK</span><span class=\"br0\">)</span> + <span class=\"nu0\">1</span><span class=\"br0\">)</span> <span class=\"sy0\">//</span> <span class=\"nu0\">7</span><br/>\u00a0<br/>      day = totalDaysOfMonth - daysToRollBack<br/>      cal.<span class=\"me0\">set</span><span class=\"br0\">(</span>Calendar.<span class=\"me0\">DAY_OF_MONTH</span>, day<span class=\"br0\">)</span><br/>\u00a0<br/>      <span class=\"kw1\">say</span> year.<span class=\"kw6\">right</span><span class=\"br0\">(</span><span class=\"nu0\">4</span>, <span class=\"nu0\">0</span><span class=\"br0\">)</span> mon day.<span class=\"kw6\">right</span><span class=\"br0\">(</span><span class=\"nu0\">2</span>, <span class=\"nu0\">0</span><span class=\"br0\">)</span><br/>\u00a0<br/>      cal.<span class=\"me0\">set</span><span class=\"br0\">(</span>year, cal.<span class=\"me0\">get</span><span class=\"br0\">(</span>Calendar.<span class=\"me0\">MONTH</span><span class=\"br0\">)</span> + <span class=\"nu0\">1</span>, <span class=\"nu0\">1</span><span class=\"br0\">)</span><br/>      <span class=\"kw3\">end</span><br/>    <span class=\"kw3\">end</span> mon<br/>  <span class=\"kw1\">return</span><br/>\u00a0<br/><span class=\"co1\">-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br/>method lastFridayCalc<span class=\"br0\">(</span>year<span class=\"br0\">)</span> <span class=\"kw2\">public</span> <span class=\"kw2\">static</span> <span class=\"kw2\">binary</span> <span class=\"kw2\">signals</span> BadArgumentException<br/>\u00a0<br/>  <span class=\"kw1\">if</span> year <span class=\"sy0\">&lt;</span>= <span class=\"nu0\">1700</span> <span class=\"kw3\">then</span> <span class=\"kw1\">do</span><br/>    <span class=\"kw1\">signal</span> BadArgumentException<span class=\"br0\">(</span>year <span class=\"st0\">'is out of range'</span><span class=\"br0\">)</span><br/>    <span class=\"kw3\">end</span><br/>\u00a0<br/>  wk  = int<br/>  mth = int<br/>  yr  = int year<br/>  days = <span class=\"br0\">[</span>int <span class=\"nu0\">31</span>, <span class=\"nu0\">29</span>, <span class=\"nu0\">31</span>, <span class=\"nu0\">30</span>, <span class=\"nu0\">31</span>, <span class=\"nu0\">30</span>, <span class=\"nu0\">31</span>, <span class=\"nu0\">31</span>, <span class=\"nu0\">30</span>, <span class=\"nu0\">31</span>, <span class=\"nu0\">30</span>, <span class=\"nu0\">31</span><span class=\"br0\">]</span>  <span class=\"co1\">-- days in month</span><br/>  days<span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"br0\">]</span> = days<span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"br0\">]</span> - <span class=\"br0\">(</span><span class=\"br0\">(</span>yr <span class=\"sy0\">//</span> <span class=\"nu0\">4</span><span class=\"br0\">)</span> <span class=\"sy0\">|</span> <span class=\"sy0\">\\</span><span class=\"br0\">(</span>yr <span class=\"sy0\">//</span> <span class=\"nu0\">100</span><span class=\"br0\">)</span> <span class=\"sy0\">&amp;</span> <span class=\"br0\">(</span>yr <span class=\"sy0\">//</span> <span class=\"nu0\">400</span><span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"co1\">-- adjust for leap year</span><br/>\u00a0<br/>  wk = yr <span class=\"sy0\">*</span> <span class=\"nu0\">365</span> + <span class=\"br0\">(</span>yr - <span class=\"nu0\">1</span><span class=\"br0\">)</span>\u00a0% <span class=\"nu0\">4</span> - <span class=\"br0\">(</span>yr - <span class=\"nu0\">1</span><span class=\"br0\">)</span>\u00a0% <span class=\"nu0\">100</span> + <span class=\"br0\">(</span>yr - <span class=\"nu0\">1</span><span class=\"br0\">)</span>\u00a0% <span class=\"nu0\">400</span> + <span class=\"nu0\">6</span> <span class=\"co1\">-- week number</span><br/>\u00a0<br/>  <span class=\"kw1\">loop</span> mth = <span class=\"nu0\">0</span> to <span class=\"nu0\">11</span><br/>    wk = <span class=\"br0\">(</span>wk + days<span class=\"br0\">[</span>mth<span class=\"br0\">]</span><span class=\"br0\">)</span> <span class=\"sy0\">//</span> <span class=\"nu0\">7</span><br/>    wx = int<br/>    <span class=\"kw1\">if</span> wk <span class=\"sy0\">&lt;</span> <span class=\"nu0\">5</span> <span class=\"kw3\">then</span> wx = -<span class=\"nu0\">2</span><br/>              <span class=\"kw3\">else</span> wx = <span class=\"nu0\">5</span><br/>    yy = Rexx<span class=\"br0\">(</span>yr<span class=\"br0\">)</span><br/>    mm = Rexx<span class=\"br0\">(</span>mth + <span class=\"nu0\">1</span><span class=\"br0\">)</span><br/>    dd = Rexx<span class=\"br0\">(</span>days<span class=\"br0\">[</span>mth<span class=\"br0\">]</span> + wx - wk<span class=\"br0\">)</span><br/>    <span class=\"kw1\">say</span> yy.<span class=\"kw6\">right</span><span class=\"br0\">(</span><span class=\"nu0\">4</span>, <span class=\"nu0\">0</span><span class=\"br0\">)</span><span class=\"st0\">'-'</span>mm.<span class=\"kw6\">right</span><span class=\"br0\">(</span><span class=\"nu0\">2</span>, <span class=\"nu0\">0</span><span class=\"br0\">)</span><span class=\"st0\">'-'</span>dd.<span class=\"kw6\">right</span><span class=\"br0\">(</span><span class=\"nu0\">2</span>, <span class=\"nu0\">0</span><span class=\"br0\">)</span><br/>    <span class=\"kw3\">end</span> mth<br/>  <span class=\"kw1\">return</span><br/>\u00a0<br/><span class=\"co1\">-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br/>method runSample<span class=\"br0\">(</span>arg<span class=\"br0\">)</span> <span class=\"kw2\">private</span> <span class=\"kw2\">static</span><br/>  <span class=\"kw1\">do</span><br/>    <span class=\"kw1\">parse</span> arg year .<br/>    <span class=\"kw1\">if</span> year = <span class=\"st0\">''</span> <span class=\"sy0\">|</span> year = <span class=\"st0\">'.'</span> <span class=\"kw3\">then</span> year = <span class=\"nu0\">2012</span><br/>    dlm = <span class=\"st0\">'-'</span><br/>    dlm = dlm.<span class=\"kw6\">left</span><span class=\"br0\">(</span><span class=\"nu0\">60</span>, dlm<span class=\"br0\">)</span><br/>    <span class=\"kw1\">say</span><br/>    <span class=\"kw1\">say</span> <span class=\"st0\">'Using Java calendar libraries'</span><br/>    <span class=\"kw1\">say</span> dlm<br/>    lastFridayByLib<span class=\"br0\">(</span>year<span class=\"br0\">)</span><br/>    <span class=\"kw1\">say</span><br/>    <span class=\"kw1\">say</span> <span class=\"st0\">'Calculated'</span><br/>    <span class=\"kw1\">say</span> dlm<br/>    lastFridayCalc<span class=\"br0\">(</span>year<span class=\"br0\">)</span><br/>  <span class=\"kw3\">catch</span> ex = Exception<br/>    ex.<span class=\"me0\">printStackTrace</span><br/>  <span class=\"kw3\">end</span><br/>  <span class=\"kw1\">return</span><br/>\u00a0</pre>"}, {"lang": "Nim", "loc": 12, "block": "<pre class=\"text highlighted_source\">import times, os, strutils<br/>\u00a0<br/>var timeinfo = getLocalTime getTime()<br/>timeinfo.year = paramStr(1).parseInt<br/>for month in mJan .. mDec:<br/>  timeinfo.month = month<br/>  for day in countdown(31, 1):<br/>    timeinfo.monthday = day<br/>    let t = getLocalTime(timeInfoToTime timeinfo)<br/>    if t.month == month and t.weekday == dFri:<br/>      echo t.format \"yyyy-MM-dd\"<br/>      break</pre>"}, {"lang": "OCaml", "loc": 36, "block": "<pre class=\"ocaml highlighted_source\"><span class=\"sy0\">#</span>load <span class=\"st0\">\"unix.cma\"</span><br/><span class=\"kw1\">open</span> <a href=\"http://caml.inria.fr/pub/docs/manual-ocaml/libref/Unix.html\"><span class=\"kw2\">Unix</span></a><br/>\u00a0<br/><span class=\"kw1\">let</span> usage<span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"sy0\">=</span><br/>  <a href=\"http://caml.inria.fr/pub/docs/manual-ocaml/libref/Printf.html\"><span class=\"kw2\">Printf</span></a><span class=\"sy0\">.</span>eprintf <span class=\"st0\">\"%s &lt;year&gt;\\n\"</span> <a href=\"http://caml.inria.fr/pub/docs/manual-ocaml/libref/Sys.html\"><span class=\"kw2\">Sys</span></a><span class=\"sy0\">.</span>argv<span class=\"sy0\">.</span><span class=\"br0\">(</span><span class=\"nu0\">0</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>  <a href=\"http://caml.inria.fr/pub/docs/manual-ocaml/libref/Pervasives.html#VALexit\"><span class=\"kw3\">exit</span></a> <span class=\"nu0\">1</span><br/>\u00a0<br/><span class=\"kw1\">let</span> print_date t <span class=\"sy0\">=</span><br/>  <a href=\"http://caml.inria.fr/pub/docs/manual-ocaml/libref/Printf.html\"><span class=\"kw2\">Printf</span></a><span class=\"sy0\">.</span>printf <span class=\"st0\">\"%d-%02d-%02d\\n\"</span> <span class=\"br0\">(</span>t<span class=\"sy0\">.</span>tm_year <span class=\"sy0\">+</span> <span class=\"nu0\">1900</span><span class=\"br0\">)</span> <span class=\"br0\">(</span>t<span class=\"sy0\">.</span>tm_mon <span class=\"sy0\">+</span> <span class=\"nu0\">1</span><span class=\"br0\">)</span> t<span class=\"sy0\">.</span>tm_mday<br/>\u00a0<br/><span class=\"kw1\">let</span> is_date_ok tm t <span class=\"sy0\">=</span><br/>  <span class=\"br0\">(</span>tm<span class=\"sy0\">.</span>tm_year <span class=\"sy0\">=</span> t<span class=\"sy0\">.</span>tm_year <span class=\"sy0\">&amp;&amp;</span><br/>   tm<span class=\"sy0\">.</span>tm_mon  <span class=\"sy0\">=</span> t<span class=\"sy0\">.</span>tm_mon  <span class=\"sy0\">&amp;&amp;</span><br/>   tm<span class=\"sy0\">.</span>tm_mday <span class=\"sy0\">=</span> t<span class=\"sy0\">.</span>tm_mday<span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"kw1\">let</span> <span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"sy0\">=</span><br/>  <span class=\"kw1\">let</span> _year <span class=\"sy0\">=</span><br/>    <span class=\"kw1\">try</span> <a href=\"http://caml.inria.fr/pub/docs/manual-ocaml/libref/Pervasives.html#VALint_of_string\"><span class=\"kw3\">int_of_string</span></a> <a href=\"http://caml.inria.fr/pub/docs/manual-ocaml/libref/Sys.html\"><span class=\"kw2\">Sys</span></a><span class=\"sy0\">.</span>argv<span class=\"sy0\">.</span><span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"br0\">)</span><br/>    <span class=\"kw1\">with</span> _ <span class=\"sy0\">-&gt;</span> usage<span class=\"br0\">(</span><span class=\"br0\">)</span><br/>  <span class=\"kw1\">in</span><br/>  <span class=\"kw1\">let</span> year <span class=\"sy0\">=</span> _year <span class=\"sy0\">-</span> <span class=\"nu0\">1900</span> <span class=\"kw1\">in</span><br/>  <span class=\"kw1\">let</span> fridays <span class=\"sy0\">=</span> <a href=\"http://caml.inria.fr/pub/docs/manual-ocaml/libref/Array.html\"><span class=\"kw2\">Array</span></a><span class=\"sy0\">.</span>make <span class=\"nu0\">12</span> <span class=\"br0\">(</span><a href=\"http://caml.inria.fr/pub/docs/manual-ocaml/libref/Unix.html\"><span class=\"kw2\">Unix</span></a><span class=\"sy0\">.</span>gmtime <span class=\"nu0\">0.0</span><span class=\"br0\">)</span> <span class=\"kw1\">in</span><br/>  <span class=\"kw1\">for</span> month <span class=\"sy0\">=</span> <span class=\"nu0\">0</span> <span class=\"kw1\">to</span> <span class=\"nu0\">11</span> <span class=\"kw1\">do</span><br/>    <span class=\"kw1\">for</span> day_of_month <span class=\"sy0\">=</span> <span class=\"nu0\">1</span> <span class=\"kw1\">to</span> <span class=\"nu0\">31</span> <span class=\"kw1\">do</span><br/>      <span class=\"kw1\">let</span> tm <span class=\"sy0\">=</span> <span class=\"br0\">{</span> <span class=\"br0\">(</span><a href=\"http://caml.inria.fr/pub/docs/manual-ocaml/libref/Unix.html\"><span class=\"kw2\">Unix</span></a><span class=\"sy0\">.</span>gmtime <span class=\"nu0\">0.0</span><span class=\"br0\">)</span> <span class=\"kw1\">with</span> <br/>        tm_year <span class=\"sy0\">=</span> year<span class=\"sy0\">;</span><br/>        tm_mon <span class=\"sy0\">=</span> month<span class=\"sy0\">;</span><br/>        tm_mday <span class=\"sy0\">=</span> day_of_month<span class=\"sy0\">;</span><br/>      <span class=\"br0\">}</span> <span class=\"kw1\">in</span><br/>      <span class=\"kw1\">let</span> _, t <span class=\"sy0\">=</span> <a href=\"http://caml.inria.fr/pub/docs/manual-ocaml/libref/Unix.html\"><span class=\"kw2\">Unix</span></a><span class=\"sy0\">.</span>mktime tm <span class=\"kw1\">in</span><br/>      <span class=\"kw1\">if</span> is_date_ok tm t  <span class=\"co1\">(* check for months that have less than 31 days *)</span><br/>      <span class=\"sy0\">&amp;&amp;</span> t<span class=\"sy0\">.</span>tm_wday <span class=\"sy0\">=</span> <span class=\"nu0\">5</span>  <span class=\"co1\">(* is a friday *)</span><br/>      <span class=\"kw1\">then</span> fridays<span class=\"sy0\">.</span><span class=\"br0\">(</span>month<span class=\"br0\">)</span> <span class=\"sy0\">&lt;-</span> t<br/>    <span class=\"kw1\">done</span><span class=\"sy0\">;</span><br/>  <span class=\"kw1\">done</span><span class=\"sy0\">;</span><br/>  <a href=\"http://caml.inria.fr/pub/docs/manual-ocaml/libref/Array.html\"><span class=\"kw2\">Array</span></a><span class=\"sy0\">.</span>iter print_date fridays</pre>"}, {"lang": "Oforth", "loc": 9, "block": "<pre class=\"text highlighted_source\">import: date<br/>\u00a0<br/>: lastFridays(y)<br/>| m |<br/>   Date.JANUARY Date.DECEMBER for: m [<br/>      Date newDate(y, m, Date.DaysInMonth(y, m))<br/>      while(dup dayOfWeek Date.FRIDAY &lt;&gt;) [ addDays(-1) ]<br/>      println<br/>      ]\u00a0;</pre>"}, {"lang": "PARI/GP", "loc": 27, "block": "<pre class=\"parigp highlighted_source\"><span class=\"co1\">\\\\ Normalized Julian Day Number from date</span><br/>njd<span class=\"br0\">(</span>D<span class=\"br0\">)</span> <span class=\"sy0\">=</span><br/><span class=\"br0\">{</span><br/>  my <span class=\"br0\">(</span>m <span class=\"sy0\">=</span> D<span class=\"br0\">[</span><span class=\"nu1\">2</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> y <span class=\"sy0\">=</span> D<span class=\"br0\">[</span><span class=\"nu1\">1</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>\u00a0<br/>  <span class=\"kw1\">if</span> <span class=\"br0\">(</span>D<span class=\"br0\">[</span><span class=\"nu1\">2</span><span class=\"br0\">]</span> <span class=\"sy0\">&gt;</span> <span class=\"nu1\">2</span><span class=\"sy0\">,</span> m<span class=\"sy0\">++,</span> y<span class=\"sy0\">--;</span> m <span class=\"sy0\">+=</span> <span class=\"nu1\">13</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>\u00a0<br/>  <span class=\"br0\">(</span><span class=\"nu1\">1461</span> <span class=\"sy0\">*</span> y<span class=\"br0\">)</span> <span class=\"sy0\">\\</span> <span class=\"nu1\">4</span> <span class=\"sy0\">+</span> <span class=\"br0\">(</span><span class=\"nu1\">306001</span> <span class=\"sy0\">*</span> m<span class=\"br0\">)</span> <span class=\"sy0\">\\</span> <span class=\"nu1\">10000</span> <span class=\"sy0\">+</span> D<span class=\"br0\">[</span><span class=\"nu1\">3</span><span class=\"br0\">]</span> <span class=\"sy0\">-</span> <span class=\"nu1\">694024</span> <span class=\"sy0\">+</span> <span class=\"nu1\">2</span> <span class=\"sy0\">-</span> y <span class=\"sy0\">\\</span> <span class=\"nu1\">100</span> <span class=\"sy0\">+</span> y <span class=\"sy0\">\\</span> <span class=\"nu1\">400</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"co1\">\\\\ Date from Normalized Julian Day Number</span><br/>njdate<span class=\"br0\">(</span>J<span class=\"br0\">)</span> <span class=\"sy0\">=</span><br/><span class=\"br0\">{</span><br/>  my <span class=\"br0\">(</span>a <span class=\"sy0\">=</span> J <span class=\"sy0\">+</span> <span class=\"nu1\">2415019</span><span class=\"sy0\">,</span> b <span class=\"sy0\">=</span> <span class=\"br0\">(</span><span class=\"nu1\">4</span> <span class=\"sy0\">*</span> a <span class=\"sy0\">-</span> <span class=\"nu1\">7468865</span><span class=\"br0\">)</span> <span class=\"sy0\">\\</span> <span class=\"nu1\">146097</span><span class=\"sy0\">,</span> c<span class=\"sy0\">,</span> d<span class=\"sy0\">,</span> m<span class=\"sy0\">,</span> y<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>\u00a0<br/>  a <span class=\"sy0\">+=</span> <span class=\"nu1\">1</span> <span class=\"sy0\">+</span> b <span class=\"sy0\">-</span> b <span class=\"sy0\">\\</span> <span class=\"nu1\">4</span> <span class=\"sy0\">+</span> <span class=\"nu1\">1524</span><span class=\"sy0\">;</span><br/>  b <span class=\"sy0\">=</span> <span class=\"br0\">(</span><span class=\"nu1\">20</span> <span class=\"sy0\">*</span> a <span class=\"sy0\">-</span> <span class=\"nu1\">2442</span><span class=\"br0\">)</span> <span class=\"sy0\">\\</span> <span class=\"nu1\">7305</span><span class=\"sy0\">;</span><br/>  c <span class=\"sy0\">=</span> <span class=\"br0\">(</span><span class=\"nu1\">1461</span> <span class=\"sy0\">*</span> b<span class=\"br0\">)</span> <span class=\"sy0\">\\</span> <span class=\"nu1\">4</span><span class=\"sy0\">;</span><br/>  d <span class=\"sy0\">=</span> <span class=\"br0\">(</span><span class=\"br0\">(</span>a <span class=\"sy0\">-</span> c<span class=\"br0\">)</span> <span class=\"sy0\">*</span> <span class=\"nu1\">10000</span><span class=\"br0\">)</span> <span class=\"sy0\">\\</span> <span class=\"nu1\">306001</span><span class=\"sy0\">;</span><br/>  m <span class=\"sy0\">=</span> d <span class=\"sy0\">-</span> <span class=\"nu1\">1</span> <span class=\"sy0\">-</span> <span class=\"nu1\">12</span> <span class=\"sy0\">*</span> <span class=\"br0\">(</span>d <span class=\"sy0\">&gt;</span> <span class=\"nu1\">13</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>  y <span class=\"sy0\">=</span> b <span class=\"sy0\">-</span> <span class=\"nu1\">4715</span> <span class=\"sy0\">-</span> <span class=\"br0\">(</span>m <span class=\"sy0\">&gt;</span> <span class=\"nu1\">2</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>  d <span class=\"sy0\">=</span> a <span class=\"sy0\">-</span> c <span class=\"sy0\">-</span> <span class=\"br0\">(</span><span class=\"nu1\">306001</span> <span class=\"sy0\">*</span> d<span class=\"br0\">)</span> <span class=\"sy0\">\\</span> <span class=\"nu1\">10000</span><span class=\"sy0\">;</span><br/>\u00a0<br/>  <span class=\"br0\">[</span>y<span class=\"sy0\">,</span> m<span class=\"sy0\">,</span> d<span class=\"br0\">]</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"kw1\">for</span> <span class=\"br0\">(</span>m<span class=\"sy0\">=</span><span class=\"nu1\">1</span><span class=\"sy0\">,</span> <span class=\"nu1\">12</span><span class=\"sy0\">,</span> a<span class=\"sy0\">=</span>njd<span class=\"br0\">(</span><span class=\"br0\">[</span><span class=\"nu1\">2012</span><span class=\"sy0\">,</span>m<span class=\"sy0\">+</span><span class=\"nu1\">1</span><span class=\"sy0\">,</span><span class=\"nu1\">0</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span> <span class=\"kw1\">print</span><span class=\"br0\">(</span>njdate<span class=\"br0\">(</span>a<span class=\"sy0\">-</span><span class=\"br0\">(</span>a<span class=\"sy0\">+</span><span class=\"nu1\">1</span><span class=\"br0\">)</span><span class=\"sy0\">%</span><span class=\"nu2\">7</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span></pre>"}, {"lang": "Perl", "loc": 12, "block": "<pre class=\"perl highlighted_source\"><span class=\"co1\">#!/usr/bin/perl -w</span><br/><span class=\"kw2\">use</span> strict <span class=\"sy0\">;</span><br/><span class=\"kw2\">use</span> DateTime <span class=\"sy0\">;</span><br/><span class=\"kw2\">use</span> feature <a href=\"http://perldoc.perl.org/functions/qw.html\"><span class=\"kw3\">qw</span></a><span class=\"br0\">(</span> say <span class=\"br0\">)</span> <span class=\"sy0\">;</span><br/>\u00a0<br/><span class=\"kw1\">foreach</span> <span class=\"kw1\">my</span> <span class=\"re0\">$month</span> <span class=\"br0\">(</span> <span class=\"nu0\">1</span><span class=\"sy0\">..</span><span class=\"nu0\">12</span> <span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>   <span class=\"kw1\">my</span> <span class=\"re0\">$dt</span> <span class=\"sy0\">=</span> DateTime<span class=\"sy0\">-&gt;</span><span class=\"me1\">last_day_of_month</span><span class=\"br0\">(</span> year <span class=\"sy0\">=&gt;</span> <span class=\"re0\">$ARGV</span><span class=\"br0\">[</span> <span class=\"nu0\">0</span> <span class=\"br0\">]</span> <span class=\"sy0\">,</span> month <span class=\"sy0\">=&gt;</span> <span class=\"re0\">$month</span> <span class=\"br0\">)</span> <span class=\"sy0\">;</span><br/>   <span class=\"kw1\">while</span> <span class=\"br0\">(</span> <span class=\"re0\">$dt</span><span class=\"sy0\">-&gt;</span><span class=\"me1\">day_of_week</span> <span class=\"sy0\">!=</span> <span class=\"nu0\">5</span> <span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>      <span class=\"re0\">$dt</span><span class=\"sy0\">-&gt;</span><span class=\"me1\">subtract</span><span class=\"br0\">(</span> days <span class=\"sy0\">=&gt;</span> <span class=\"nu0\">1</span> <span class=\"br0\">)</span> <span class=\"sy0\">;</span><br/>   <span class=\"br0\">}</span><br/>   say <span class=\"re0\">$dt</span><span class=\"sy0\">-&gt;</span><span class=\"me1\">ymd</span> <span class=\"sy0\">;</span><br/><span class=\"br0\">}</span></pre>"}, {"lang": "Perl 6", "loc": 7, "block": "<pre class=\"perl6 highlighted_source\"><span class=\"kw2\">sub</span> MAIN <span class=\"br0\">(</span>Int <span class=\"re0\">$year</span> <span class=\"sy0\">=</span> Date<span class=\"sy0\">.</span><span class=\"me1\">today</span><span class=\"sy0\">.</span><span class=\"me1\">year</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>    <span class=\"kw1\">my</span> <span class=\"re0\">@fri</span><span class=\"sy0\">;</span><br/>    <span class=\"kw1\">for</span> Date<span class=\"sy0\">.</span><span class=\"kw2\">new</span><span class=\"br0\">(</span><span class=\"st0\">\"$year-01-01\"</span><span class=\"br0\">)</span> <span class=\"sy0\">..</span> <span class=\"me1\">Date</span><span class=\"sy0\">.</span><span class=\"kw2\">new</span><span class=\"br0\">(</span><span class=\"st0\">\"$year-12-31\"</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>        <span class=\"re0\">@fri</span><span class=\"br0\">[</span><span class=\"sy0\">.</span><span class=\"me1\">month</span><span class=\"br0\">]</span> <span class=\"sy0\">=</span> <span class=\"sy0\">.</span><span class=\"me1\">Str</span> <span class=\"kw1\">if</span> <span class=\"sy0\">.</span><span class=\"me1\">day</span><span class=\"sy0\">-</span>of<span class=\"sy0\">-</span>week <span class=\"sy0\">==</span> <span class=\"nu0\">5</span><span class=\"sy0\">;</span><br/>    <span class=\"br0\">}</span><br/>    <span class=\"sy0\">.</span><span class=\"kw3\">say</span> <span class=\"kw1\">for</span> <span class=\"re0\">@fri</span><span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"sy0\">..</span><span class=\"nu0\">12</span><span class=\"br0\">]</span><span class=\"sy0\">;</span><br/><span class=\"br0\">}</span></pre>"}, {"lang": "Phix", "loc": 24, "block": "<pre class=\"text highlighted_source\">include timedate.e<br/>\u00a0<br/>constant FRIDAY=6<br/>\u00a0<br/>procedure showlast(integer dow, integer doy, timedate td)<br/>    td = adjust_timedate(td,timedelta(days:=doy-1))<br/>    integer {year,month,day} = td<br/>    while day_of_week(year,month,day)!=dow do day-=1 end while<br/>    printf(1,\"%4d-%02d-%02d\\n\",{year,month,day})<br/>end procedure<br/>\u00a0<br/>procedure last_day_of_month(integer year, integer dow)<br/>integer doy<br/>timedate first = {year,1,1,0,0,0,0,0}<br/>    -- start by finding the 1st of the next month, less 1<br/>    for i=1 to 11 do<br/>        doy = day_of_year(year,i+1,1)-1<br/>        showlast(dow,doy,first)<br/>    end for<br/>    -- do December separately, as 1st would be next year<br/>    doy = day_of_year(year,12,31)<br/>    showlast(dow,doy,first)<br/>end procedure<br/>last_day_of_month(2012,FRIDAY)</pre>"}, {"lang": "PHP", "loc": 22, "block": "<pre class=\"php highlighted_source\"><span class=\"kw2\">&lt;?php</span><br/><span class=\"kw2\">function</span> last_friday_of_month<span class=\"br0\">(</span><span class=\"re0\">$year</span><span class=\"sy0\">,</span> <span class=\"re0\">$month</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>  <span class=\"re0\">$day</span> <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span><br/>  <span class=\"kw1\">while</span><span class=\"br0\">(</span><span class=\"kw4\">True</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>    <span class=\"re0\">$last_day</span> <span class=\"sy0\">=</span> <a href=\"http://www.php.net/mktime\"><span class=\"kw3\">mktime</span></a><span class=\"br0\">(</span><span class=\"nu0\">0</span><span class=\"sy0\">,</span> <span class=\"nu0\">0</span><span class=\"sy0\">,</span> <span class=\"nu0\">0</span><span class=\"sy0\">,</span> <span class=\"re0\">$month</span><span class=\"sy0\">+</span><span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"re0\">$day</span><span class=\"sy0\">,</span> <span class=\"re0\">$year</span><span class=\"br0\">)</span><span class=\"sy0\">;</span> <br/>    <span class=\"kw1\">if</span> <span class=\"br0\">(</span><a href=\"http://www.php.net/date\"><span class=\"kw3\">date</span></a><span class=\"br0\">(</span><span class=\"st0\">\"w\"</span><span class=\"sy0\">,</span> <span class=\"re0\">$last_day</span><span class=\"br0\">)</span> <span class=\"sy0\">==</span> <span class=\"nu0\">5</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>      <span class=\"kw1\">return</span> <a href=\"http://www.php.net/date\"><span class=\"kw3\">date</span></a><span class=\"br0\">(</span><span class=\"st0\">\"Y-m-d\"</span><span class=\"sy0\">,</span> <span class=\"re0\">$last_day</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>    <span class=\"br0\">}</span><br/>    <span class=\"re0\">$day</span> <span class=\"sy0\">-=</span> <span class=\"nu0\">1</span><span class=\"sy0\">;</span><br/>  <span class=\"br0\">}</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"kw2\">function</span> print_last_fridays_of_month<span class=\"br0\">(</span><span class=\"re0\">$year</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>  <span class=\"kw1\">foreach</span><span class=\"br0\">(</span><a href=\"http://www.php.net/range\"><span class=\"kw3\">range</span></a><span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">12</span><span class=\"br0\">)</span> <span class=\"kw1\">as</span> <span class=\"re0\">$month</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>    <span class=\"kw1\">echo</span> last_friday_of_month<span class=\"br0\">(</span><span class=\"re0\">$year</span><span class=\"sy0\">,</span> <span class=\"re0\">$month</span><span class=\"br0\">)</span><span class=\"sy0\">,</span> <span class=\"st0\">\"&lt;br&gt;\"</span><span class=\"sy0\">;</span><br/>  <span class=\"br0\">}</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><a href=\"http://www.php.net/date_default_timezone_set\"><span class=\"kw3\">date_default_timezone_set</span></a><span class=\"br0\">(</span><span class=\"st0\">\"GMT\"</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/><span class=\"re0\">$year</span> <span class=\"sy0\">=</span> <span class=\"nu0\">2012</span><span class=\"sy0\">;</span><br/>print_last_fridays_of_month<span class=\"br0\">(</span><span class=\"re0\">$year</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/><span class=\"sy1\">?&gt;</span></pre>"}, {"lang": "PicoLisp", "loc": 7, "block": "<pre class=\"text highlighted_source\">(de lastFridays (Y)<br/>   (for M 12<br/>      (prinl<br/>         (dat$<br/>            (find '((D) (= \"Friday\" (day D)))<br/>               (mapcar '((D) (date Y M D)) `(range 31 22)) )<br/>            \"-\" ) ) ) )</pre>"}, {"lang": "Pike", "loc": 12, "block": "<pre class=\"pike highlighted_source\">int<span class=\"br0\">(</span><span class=\"nu0\">0</span>..<span class=\"nu0\">1</span><span class=\"br0\">)</span> last_friday<span class=\"br0\">(</span>object day<span class=\"br0\">)</span><br/><span class=\"br0\">{</span> <br/>   <span class=\"kw1\">return</span> day<span class=\"sy0\">-</span>&gt;week_day<span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"sy0\">==</span> <span class=\"nu0\">5</span> <span class=\"sy0\">&amp;&amp;</span> <br/>          day<span class=\"sy0\">-</span>&gt;month_day<span class=\"br0\">(</span><span class=\"br0\">)</span> &gt; day<span class=\"sy0\">-</span>&gt;month<span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"sy0\">-</span>&gt;number_of_days<span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"sy0\">-</span><span class=\"nu0\">7</span><span class=\"sy0\">;</span> <br/><span class=\"br0\">}</span><br/>\u00a0<br/>int main<span class=\"br0\">(</span>int argc, array argv<span class=\"br0\">)</span><br/><span class=\"br0\">{</span><br/>    array days <span class=\"sy0\">=</span> filter<span class=\"br0\">(</span>Calendar.<span class=\"me1\">Year</span><span class=\"br0\">(</span><span class=\"br0\">(</span>int<span class=\"br0\">)</span>argv<span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">-</span>&gt;months<span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"sy0\">-</span>&gt;days<span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"br0\">[</span><span class=\"sy0\">*</span><span class=\"br0\">]</span>, last_friday<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>    write<span class=\"br0\">(</span><span class=\"st0\">\"%{%s<span class=\"es0\">\\n</span>%}\"</span>, days<span class=\"sy0\">-</span>&gt;format_ymd<span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>    <span class=\"kw1\">return</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span><br/><span class=\"br0\">}</span></pre>"}, {"lang": "PL/I", "loc": 24, "block": "<pre class=\"text highlighted_source\">\u00a0<br/>Fridays: procedure (year) options (main); /* 8 January 2013 */<br/>   declare year character (4) varying;<br/>   declare start fixed binary (31);<br/>   declare months fixed decimal (2) initial (0);<br/>   declare (current_month, month_one_week_hence) character (2);<br/>\u00a0<br/>   put list ('Last Fridays in each month for the year ' || year || ':' );<br/>   start = days('0101' || year, 'DDMMYYYY');<br/>   /* Find first Friday */<br/>   do while (weekday(start) ^= 6); start = start + 1; end;<br/>\u00a0<br/>   do until (months=12);<br/>      current_month = substr (daystodate(start, 'MMDDYYYY'), 1, 2 );<br/>      month_one_week_hence = substr (daystodate(start+7, 'MMDDYYYY'), 1, 2 );<br/>      if current_month ^= month_one_week_hence then<br/>         do;<br/>            months = months + 1;<br/>            put skip list (daystodate(start, 'DDMmmYYYY'));<br/>         end;<br/>      start = start + 7;<br/>   end;<br/>end Fridays;<br/>\u00a0</pre>"}, {"lang": "PowerShell", "loc": 15, "block": "<pre class=\"powershell highlighted_source\">\u00a0<br/><span class=\"kw3\">function</span> last<span class=\"sy0\">-</span>dayofweek <span class=\"br0\">{</span><br/>    <span class=\"kw3\">param</span><span class=\"br0\">(</span><br/>     <span class=\"br0\">[</span><span class=\"re3\">Int</span><span class=\"br0\">]</span><span class=\"br0\">[</span>ValidatePattern<span class=\"br0\">(</span><span class=\"st0\">\"[1-9][0-9][0-9][0-9]\"</span><span class=\"br0\">)</span><span class=\"br0\">]</span><span class=\"re0\">$year</span><span class=\"sy0\">,</span><br/>     <span class=\"br0\">[</span><span class=\"re3\">String</span><span class=\"br0\">]</span><span class=\"br0\">[</span>validateset<span class=\"br0\">(</span><span class=\"st0\">'Sunday'</span><span class=\"sy0\">,</span><span class=\"st0\">'Monday'</span><span class=\"sy0\">,</span><span class=\"st0\">'Tuesday'</span><span class=\"sy0\">,</span><span class=\"st0\">'Wednesday'</span><span class=\"sy0\">,</span><span class=\"st0\">'Thursday'</span><span class=\"sy0\">,</span><span class=\"st0\">'Friday'</span><span class=\"sy0\">,</span><span class=\"st0\">'Saturday'</span><span class=\"br0\">)</span><span class=\"br0\">]</span><span class=\"re0\">$dayofweek</span><br/>    <span class=\"br0\">)</span><br/>    <span class=\"re0\">$date</span> <span class=\"sy0\">=</span> <span class=\"br0\">(</span><span class=\"kw1\">Get-Date</span> <span class=\"kw5\">-Year</span> <span class=\"re0\">$year</span> <span class=\"kw5\">-Month</span> <span class=\"nu0\">1</span> <span class=\"kw5\">-Day</span> <span class=\"nu0\">1</span><span class=\"br0\">)</span><br/>    <span class=\"kw3\">while</span><span class=\"br0\">(</span><span class=\"re0\">$date</span>.DayOfWeek <span class=\"kw4\">-ne</span> <span class=\"re0\">$dayofweek</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><span class=\"re0\">$date</span> <span class=\"sy0\">=</span> <span class=\"re0\">$date</span>.AddDays<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"br0\">}</span><br/>    <span class=\"kw3\">while</span><span class=\"br0\">(</span><span class=\"re0\">$date</span>.year <span class=\"kw4\">-eq</span> <span class=\"re0\">$year</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>        <span class=\"kw3\">if</span><span class=\"br0\">(</span><span class=\"re0\">$date</span>.Month <span class=\"kw4\">-ne</span> <span class=\"re0\">$date</span>.AddDays<span class=\"br0\">(</span><span class=\"nu0\">7</span><span class=\"br0\">)</span>.Month<span class=\"br0\">)</span> <span class=\"br0\">{</span><span class=\"re0\">$date</span>.ToString<span class=\"br0\">(</span><span class=\"st0\">\"yyyy-dd-MM\"</span><span class=\"br0\">)</span><span class=\"br0\">}</span><br/>        <span class=\"re0\">$date</span> <span class=\"sy0\">=</span> <span class=\"re0\">$date</span>.AddDays<span class=\"br0\">(</span><span class=\"nu0\">7</span><span class=\"br0\">)</span><br/>    <span class=\"br0\">}</span><br/><span class=\"br0\">}</span><br/>last<span class=\"sy0\">-</span>dayofweek <span class=\"nu0\">2012</span> <span class=\"st0\">\"Friday\"</span><br/>\u00a0</pre>"}, {"lang": "PureBasic", "loc": 34, "block": "<pre class=\"purebasic highlighted_source\"><span class=\"kw1\">Procedure</span> LastFridayOfEachMonth<span class=\"br0\">(</span>yyyy.i,List lfem.i<span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>  <span class=\"kw1\">Define</span> dv.i<span class=\"sy0\">=</span><span class=\"kw2\">ParseDate</span><span class=\"br0\">(</span><span class=\"st0\">\"%yyyy\"</span>,<span class=\"kw2\">Str</span><span class=\"br0\">(</span>yyyy<span class=\"br0\">)</span><span class=\"br0\">)</span>, mv.i<span class=\"sy0\">=</span><span class=\"nu0\">1</span><br/>  <span class=\"kw1\">NewList</span> d.i<span class=\"br0\">(</span><span class=\"br0\">)</span><br/>  <span class=\"kw1\">For</span> d<span class=\"sy0\">=</span><span class=\"nu0\">1</span> <span class=\"kw1\">To</span> <span class=\"nu0\">365</span> <br/>    dv<span class=\"sy0\">=</span><span class=\"kw2\">AddDate</span><span class=\"br0\">(</span>dv,#PB_Date_Day,<span class=\"nu0\">1</span><span class=\"br0\">)</span><br/>    <span class=\"kw1\">If</span> <span class=\"kw2\">DayOfWeek</span><span class=\"br0\">(</span>dv<span class=\"br0\">)</span><span class=\"sy0\">=</span><span class=\"nu0\">5</span><br/>      <span class=\"kw2\">AddElement</span><span class=\"br0\">(</span>d<span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"br0\">)</span>\u00a0: d<span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"sy0\">=</span>dv<br/>    <span class=\"kw1\">EndIf</span>    <br/>  <span class=\"kw1\">Next</span> <br/>  dv<span class=\"sy0\">=</span><span class=\"nu0\">0</span><br/>  <span class=\"kw1\">For</span> mv<span class=\"sy0\">=</span><span class=\"nu0\">1</span> <span class=\"kw1\">To</span> <span class=\"nu0\">12</span><br/>    <span class=\"kw1\">ForEach</span> d<span class=\"br0\">(</span><span class=\"br0\">)</span><br/>      <span class=\"kw1\">If</span> dv<span class=\"sy0\">&lt;</span>d<span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"kw1\">And</span> <span class=\"kw2\">Month</span><span class=\"br0\">(</span>d<span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"sy0\">=</span>mv<br/>        dv<span class=\"sy0\">=</span>d<span class=\"br0\">(</span><span class=\"br0\">)</span><br/>      <span class=\"kw1\">EndIf</span><br/>    <span class=\"kw1\">Next</span><br/>    <span class=\"kw2\">AddElement</span><span class=\"br0\">(</span>lfem<span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"br0\">)</span>\u00a0: lfem<span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"sy0\">=</span>dv<br/>  <span class=\"kw1\">Next</span><br/><span class=\"kw1\">EndProcedure</span><br/>\u00a0<br/><span class=\"kw1\">NewList</span> lf.i<span class=\"br0\">(</span><span class=\"br0\">)</span><br/><span class=\"kw1\">Define</span> y.i<br/><span class=\"kw2\">OpenConsole</span><span class=\"br0\">(</span><span class=\"st0\">\"Last Friday of each month\"</span><span class=\"br0\">)</span><br/><span class=\"kw2\">Print</span><span class=\"br0\">(</span><span class=\"st0\">\"Input Year [ 1971 &lt; y &lt; 2038 ]: \"</span><span class=\"br0\">)</span><br/>y<span class=\"sy0\">=</span><span class=\"kw2\">Val</span><span class=\"br0\">(</span><span class=\"kw2\">Input</span><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/><span class=\"kw1\">If</span> y<span class=\"sy0\">&gt;</span><span class=\"nu0\">1971</span> <span class=\"kw1\">And</span> y<span class=\"sy0\">&lt;</span><span class=\"nu0\">2038</span><br/>  <span class=\"kw2\">PrintN</span><span class=\"br0\">(</span><span class=\"st0\">\"Last Friday of each month...\"</span><span class=\"br0\">)</span><br/>  LastFridayOfEachMonth<span class=\"br0\">(</span>y,lf<span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>  <span class=\"kw1\">ForEach</span> lf<span class=\"br0\">(</span><span class=\"br0\">)</span><br/>    <span class=\"kw2\">PrintN</span><span class=\"br0\">(</span><span class=\"kw2\">FormatDate</span><span class=\"br0\">(</span><span class=\"st0\">\"%dd.%mm.%yyyy\"</span>,lf<span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>  <span class=\"kw1\">Next</span><br/><span class=\"kw1\">EndIf</span><br/><span class=\"kw2\">Print</span><span class=\"br0\">(</span><span class=\"st0\">\"...End\"</span><span class=\"br0\">)</span><br/><span class=\"kw2\">Input</span><span class=\"br0\">(</span><span class=\"br0\">)</span></pre>"}, {"lang": "Python", "loc": 7, "block": "<pre class=\"python highlighted_source\"><span class=\"kw1\">import</span> <span class=\"kw3\">calendar</span><br/>\u00a0<br/><span class=\"kw1\">def</span> last_fridays<span class=\"br0\">(</span>year<span class=\"br0\">)</span>:<br/>    <span class=\"kw1\">for</span> month <span class=\"kw1\">in</span> <span class=\"kw2\">range</span><span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">13</span><span class=\"br0\">)</span>:<br/>        last_friday <span class=\"sy0\">=</span> <span class=\"kw2\">max</span><span class=\"br0\">(</span>week<span class=\"br0\">[</span><span class=\"kw3\">calendar</span>.<span class=\"me1\">FRIDAY</span><span class=\"br0\">]</span><br/>            <span class=\"kw1\">for</span> week <span class=\"kw1\">in</span> <span class=\"kw3\">calendar</span>.<span class=\"me1\">monthcalendar</span><span class=\"br0\">(</span>year<span class=\"sy0\">,</span> month<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>        <span class=\"kw1\">print</span><span class=\"br0\">(</span><span class=\"st0\">'{:4d}-{:02d}-{:02d}'</span>.<span class=\"me1\">format</span><span class=\"br0\">(</span>year<span class=\"sy0\">,</span> month<span class=\"sy0\">,</span> last_friday<span class=\"br0\">)</span><span class=\"br0\">)</span></pre>"}, {"lang": "R", "loc": 7, "block": "<pre class=\"rsplus highlighted_source\">year <span class=\"sy0\">=</span> <a href=\"http://stat.ethz.ch/R-manual/R-devel/library/base/html/commandArgs.html\"><span class=\"kw2\">commandArgs</span></a><span class=\"br0\">(</span><a href=\"http://stat.ethz.ch/R-manual/R-devel/library/base/html/T.html\"><span class=\"kw2\">T</span></a><span class=\"br0\">)</span><br/>d <span class=\"sy0\">=</span> <a href=\"http://stat.ethz.ch/R-manual/R-devel/library/base/html/as.Date.html\"><span class=\"kw2\">as.<span class=\"me1\">Date</span></span></a><span class=\"br0\">(</span>paste0<span class=\"br0\">(</span>year, <span class=\"st0\">\"-01-01\"</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>fridays <span class=\"sy0\">=</span> d <span class=\"sy0\">+</span> <a href=\"http://stat.ethz.ch/R-manual/R-devel/library/base/html/seq.html\"><span class=\"kw2\">seq</span></a><span class=\"br0\">(</span><a href=\"http://stat.ethz.ch/R-manual/R-devel/library/base/html/by.html\"><span class=\"kw2\">by</span></a> <span class=\"sy0\">=</span> <span class=\"nu0\">7</span>,<br/>    <span class=\"br0\">(</span><span class=\"nu0\">5</span> <span class=\"sy0\">-</span> <a href=\"http://stat.ethz.ch/R-manual/R-devel/library/base/html/as.POSIXlt.html\"><span class=\"kw2\">as.<span class=\"me1\">POSIXlt</span></span></a><span class=\"br0\">(</span>d<span class=\"br0\">)</span>$wday<span class=\"br0\">)</span> <span class=\"sy0\">%%</span> <span class=\"nu0\">7</span>,<br/>    <span class=\"nu0\">364</span> <span class=\"sy0\">+</span> <span class=\"br0\">(</span><a href=\"http://stat.ethz.ch/R-manual/R-devel/library/base/html/months.html\"><span class=\"kw2\">months</span></a><span class=\"br0\">(</span>d <span class=\"sy0\">+</span> <span class=\"nu0\">30</span> <span class=\"sy0\">+</span> <span class=\"nu0\">29</span><span class=\"br0\">)</span> <span class=\"sy0\">==</span> <span class=\"st0\">\"February\"</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/><a href=\"http://stat.ethz.ch/R-manual/R-devel/library/base/html/message.html\"><span class=\"kw2\">message</span></a><span class=\"br0\">(</span><a href=\"http://stat.ethz.ch/R-manual/R-devel/library/base/html/paste.html\"><span class=\"kw2\">paste</span></a><span class=\"br0\">(</span>collapse <span class=\"sy0\">=</span> <span class=\"st0\">\"<span class=\"es0\">\\n</span>\"</span>, fridays<span class=\"br0\">[</span><a href=\"http://stat.ethz.ch/R-manual/R-devel/library/base/html/tapply.html\"><span class=\"kw2\">tapply</span></a><span class=\"br0\">(</span><br/>    <a href=\"http://stat.ethz.ch/R-manual/R-devel/library/base/html/seq_along.html\"><span class=\"kw2\">seq_along</span></a><span class=\"br0\">(</span>fridays<span class=\"br0\">)</span>, <a href=\"http://stat.ethz.ch/R-manual/R-devel/library/base/html/as.POSIXlt.html\"><span class=\"kw2\">as.<span class=\"me1\">POSIXlt</span></span></a><span class=\"br0\">(</span>fridays<span class=\"br0\">)</span>$mon, <a href=\"http://stat.ethz.ch/R-manual/R-devel/library/base/html/max.html\"><span class=\"kw2\">max</span></a><span class=\"br0\">)</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"br0\">)</span></pre>"}, {"lang": "Racket", "loc": 43, "block": "<pre class=\"text highlighted_source\">\u00a0<br/>#lang racket<br/>(require srfi/19 math)<br/>\u00a0<br/>(define (days-in-month m y)<br/>  (define lengths #(0 31 #f 31 30 31 30 31 31 30 31 30 31))<br/>  (define d (vector-ref lengths m))<br/>  (or d (days-in-feb y)))<br/>\u00a0<br/>(define (leap-year? y)<br/>  (and (divides? 4 y)<br/>       (or (not (divides? 100 y))<br/>           (divides? 400 y))))<br/>\u00a0<br/>(define (days-in-feb y)<br/>  (if (leap-year? y) 29 28))<br/>\u00a0<br/>(define (last-day-in-month m y)<br/>  (make-date 0 0 0 0 (days-in-month m y) m y 0))<br/>\u00a0<br/>(define (week-day date)<br/>  (define days #(sun mon tue wed thu fri sat))<br/>  (vector-ref days (date-week-day date)))<br/>\u00a0<br/>(define (last-fridays y)<br/>  (for/list ([m (in-range 1 13)])<br/>    (prev-friday (last-day-in-month m y))))<br/>\u00a0<br/>(define 24hours (make-time time-duration 0 (* 24 60 60)))<br/>\u00a0<br/>(define (prev-day d)<br/>  (time-utc-&gt;date<br/>   (subtract-duration <br/>    (date-&gt;time-utc d) 24hours)))<br/>\u00a0<br/>(define (prev-friday d)<br/>  (if (eq? (week-day d) 'fri)<br/>      d<br/>      (prev-friday (prev-day d))))<br/>\u00a0<br/>(for ([d (last-fridays 2012)])<br/>  (displayln (~a (date-&gt;string d \"~a ~d ~b ~Y\"))))<br/>\u00a0</pre>"}, {"lang": "REBOL", "loc": 23, "block": "<pre class=\"rebol highlighted_source\">leap-year?:  <span class=\"kw2\">function</span> <span class=\"br0\">[</span>year<span class=\"br0\">]</span> <span class=\"br0\">[</span><span class=\"kw3\">to-logic</span> <span class=\"kw2\">attempt</span> <span class=\"br0\">[</span><span class=\"kw3\">to-date</span> <span class=\"kw2\">reduce</span> <span class=\"br0\">[</span><span class=\"nu0\">29</span> <span class=\"nu0\">2</span> year<span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"br0\">]</span><br/>\u00a0<br/>days-in-feb: <span class=\"kw2\">function</span> <span class=\"br0\">[</span>year<span class=\"br0\">]</span> <span class=\"br0\">[</span><span class=\"kw2\">either</span> leap-year? year <span class=\"br0\">[</span><span class=\"nu0\">29</span><span class=\"br0\">]</span> <span class=\"br0\">[</span><span class=\"nu0\">28</span><span class=\"br0\">]</span><span class=\"br0\">]</span><br/>\u00a0<br/>days-in-month: <span class=\"kw2\">function</span> <span class=\"br0\">[</span>month year<span class=\"br0\">]</span> <span class=\"br0\">[</span><br/>    <span class=\"kw2\">do</span> <span class=\"kw3\">pick</span> <span class=\"br0\">[</span><span class=\"nu0\">31</span> <span class=\"br0\">(</span>days-in-feb year<span class=\"br0\">)</span> <span class=\"nu0\">31</span> <span class=\"nu0\">30</span> <span class=\"nu0\">31</span> <span class=\"nu0\">30</span> <span class=\"nu0\">31</span> <span class=\"nu0\">31</span> <span class=\"nu0\">30</span> <span class=\"nu0\">31</span> <span class=\"nu0\">30</span> <span class=\"nu0\">31</span><span class=\"br0\">]</span> month<br/><span class=\"br0\">]</span><br/>\u00a0<br/>last-day-of-month: <span class=\"kw2\">function</span> <span class=\"br0\">[</span>month year<span class=\"br0\">]</span> <span class=\"br0\">[</span><br/>    <span class=\"kw3\">to-date</span> <span class=\"kw2\">reduce</span> <span class=\"br0\">[</span>year month  days-in-month month year<span class=\"br0\">]</span><br/><span class=\"br0\">]</span><br/>\u00a0<br/>last-weekday-of-month: <span class=\"kw2\">function</span> <span class=\"br0\">[</span>weekday month year<span class=\"br0\">]</span> <span class=\"br0\">[</span><br/>    d: last-day-of-month month year<br/>    <span class=\"kw2\">while</span> <span class=\"br0\">[</span>d<span class=\"sy0\">/</span>weekday <span class=\"sy0\">!</span>= weekday<span class=\"br0\">]</span> <span class=\"br0\">[</span>d<span class=\"sy0\">/</span>day: d<span class=\"sy0\">/</span>day - <span class=\"nu0\">1</span><span class=\"br0\">]</span><br/>    d<br/><span class=\"br0\">]</span><br/>\u00a0<br/>last-friday-of-month: <span class=\"kw2\">function</span> <span class=\"br0\">[</span>month year<span class=\"br0\">]</span> <span class=\"br0\">[</span>last-weekday-of-month <span class=\"nu0\">5</span> month year<span class=\"br0\">]</span><br/>\u00a0<br/>year: <span class=\"kw3\">to-integer</span> <span class=\"kw3\">input</span><br/><span class=\"kw2\">repeat</span> month <span class=\"nu0\">12</span> <span class=\"br0\">[</span><span class=\"kw3\">print</span> last-friday-of-month month year<span class=\"br0\">]</span><br/>\u00a0</pre>"}, {"lang": "REXX", "loc": 1, "block": "<pre>      \u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\n      \u2551 lastDOW:  procedure to return the date of the  last day\u2500of\u2500week of \u2551\n      \u2551           any particular month  of any particular year.            \u2551\n      \u2551                                                                    \u2551\n      \u2551 The  day\u2500of\u2500week  must be specified (it can be in any case,        \u2551\n      \u2551 (lower\u2500/mixed\u2500/upper\u2500case)  as an English name of the spelled day  \u2551\n      \u2551 of the week,   with a minimum length that causes no ambiguity.     \u2551\n      \u2551 I.E.:   W  for Wednesday,   Sa  for Saturday,   Su  for Sunday ... \u2551\n      \u2551                                                                    \u2551\n      \u2551 The month can be specified as an integer   1 \u2500\u2500\u25ba 12                \u2551\n      \u2551    1=January     2=February     3=March     ...     12=December    \u2551\n      \u2551 or the English  name  of the month,  with a minimum length that    \u2551\n      \u2551 causes no ambiguity.    I.E.:  Jun  for June,   D  for December.   \u2551\n      \u2551 If omitted  [or an asterisk(*)],  the current month is used.       \u2551\n      \u2551                                                                    \u2551\n      \u2551 The year is specified as an integer or just the last two digits    \u2551\n      \u2551 (two digit years are assumed to be in the current century,  and    \u2551\n      \u2551 there is no windowing for a two\u2500digit year).                       \u2551\n      \u2551 If omitted  [or an asterisk(*)],  the current year is used.        \u2551\n      \u2551 Years &lt; 100   must be specified with  (at least 2)  leading zeroes.\u2551\n      \u2551                                                                    \u2551\n      \u2551 Method used:  find the \"day number\" of the 1st of the next month   \u2551\n      \u2551 then subtract one  (this gives the \"day number\" of the last day of \u2551\n      \u2551 the month,  bypassing the leapday mess).   The last day\u2500of\u2500week is \u2551\n      \u2551 then obtained straightforwardly,   or  via subtraction.            \u2551\n      \u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\n</pre>"}, {"lang": "Ring", "loc": 23, "block": "<pre class=\"text highlighted_source\">\u00a0<br/>see \"What year to calculate (yyyy)\u00a0: \" <br/>give year<br/>see \"Last Friday in \" + year + \" are on\u00a0:\" + nl<br/>month = list(12)<br/>mo = [4,0,0,3,5,1,3,6,2,4,0,2]<br/>mon = [31,28,31,30,31,30,31,31,30,31,30,31]<br/>if year &lt; 2100 leap = year - 1900 else leap = year - 1904 ok<br/>m = ((year-1900)%7) + floor(leap/4)\u00a0% 7<br/>for n = 1 to 12<br/>    month[n] = (mo[n] + m)\u00a0% 7<br/>next<br/>for n = 1 to 12<br/>     for i = (mon[n] - 6) to mon[n]<br/>         if year%4 = 0 and n&lt;3<br/>            x = (month[n] + i)\u00a0% 7 - 1<br/>         else x = (month[n] + i)\u00a0% 7 ok<br/>         if  n &lt; 10 strn = \"0\" + string(n) else strn = string(n) ok<br/>         if x = 2 see year + \"-\" + strn + \"-\" + string(i) + nl ok<br/>     next<br/>next<br/>\u00a0<br/>\u00a0</pre>"}, {"lang": "Ruby", "loc": 10, "block": "<pre class=\"ruby highlighted_source\"><span class=\"kw3\">require</span> <span class=\"st0\">'date'</span><br/>\u00a0<br/><span class=\"kw1\">def</span> last_friday<span class=\"br0\">(</span>year, month<span class=\"br0\">)</span><br/>  <span class=\"co1\"># Last day of month: Date.new interprets a negative number as a relative month/day from the end of year/month.</span><br/>  d = <span class=\"kw4\">Date</span>.<span class=\"me1\">new</span><span class=\"br0\">(</span>year, month, <span class=\"sy0\">-</span><span class=\"nu0\">1</span><span class=\"br0\">)</span><br/>  d <span class=\"sy0\">-</span>= <span class=\"br0\">(</span>d.<span class=\"me1\">wday</span> <span class=\"sy0\">-</span> <span class=\"nu0\">5</span><span class=\"br0\">)</span> <span class=\"sy0\">%</span> <span class=\"nu0\">7</span>  <span class=\"co1\"># Subtract days after Friday.</span><br/><span class=\"kw1\">end</span><br/>\u00a0<br/>year = <span class=\"kw3\">Integer</span><span class=\"br0\">(</span>ARGV.<span class=\"me1\">shift</span><span class=\"br0\">)</span><br/><span class=\"br0\">(</span><span class=\"nu0\">1</span>..<span class=\"nu0\">12</span><span class=\"br0\">)</span>.<span class=\"me1\">each</span> <span class=\"br0\">{</span><span class=\"sy0\">|</span>month<span class=\"sy0\">|</span> <span class=\"kw3\">puts</span> last_friday<span class=\"br0\">(</span>year, month<span class=\"br0\">)</span><span class=\"br0\">}</span></pre>"}, {"lang": "Run BASIC", "loc": 15, "block": "<pre class=\"text highlighted_source\">input \"Year:\";yr<br/>dayOne$ = \"01-01-\";yr<br/>n1\t= date$(dayOne$)<br/>for i = 1 to 12<br/>  n1  = n1 + 26<br/>  m1$ = left$(date$(n1),2)<br/>  while  m1$ = left$(date$(n1),2) ' find end of month<br/>    n1 = n1 + 1<br/>  wend<br/>  n1 = n1 -1<br/>  while (n1 Mod 7) &lt;&gt; 3 \t  ' find Friday<br/>    n1 = n1 - 1<br/>  wend<br/>  print date$(n1)\t\t  ' print last Friday's date<br/>next i</pre>"}, {"lang": "Scala", "loc": 24, "block": "<pre class=\"scala highlighted_source\"><a href=\"http://scala-lang.org\"><span class=\"kw1\">import</span></a> java.<span class=\"me1\">util</span>.<span class=\"me1\">Calendar</span><br/><a href=\"http://scala-lang.org\"><span class=\"kw1\">import</span></a> java.<span class=\"me1\">text</span>.<span class=\"me1\">SimpleDateFormat</span><br/>\u00a0<br/><a href=\"http://scala-lang.org\"><span class=\"kw1\">object</span></a> Fridays <span class=\"br0\">{</span><br/>\u00a0<br/>  <a href=\"http://scala-lang.org\"><span class=\"kw1\">def</span></a> lastFridayOfMonth<span class=\"br0\">(</span>year<span class=\"sy0\">:</span>Int, month<span class=\"sy0\">:</span>Int<span class=\"br0\">)</span><span class=\"sy0\">=</span><span class=\"br0\">{</span><br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> cal<span class=\"sy0\">=</span>Calendar.<span class=\"me1\">getInstance</span><br/>    cal.<span class=\"me1\">set</span><span class=\"br0\">(</span>Calendar.<span class=\"me1\">YEAR</span>, year<span class=\"br0\">)</span><br/>    cal.<span class=\"me1\">set</span><span class=\"br0\">(</span>Calendar.<span class=\"me1\">MONTH</span>, month<span class=\"br0\">)</span><br/>    cal.<span class=\"me1\">set</span><span class=\"br0\">(</span>Calendar.<span class=\"me1\">DAY_OF_WEEK</span>, Calendar.<span class=\"me1\">FRIDAY</span><span class=\"br0\">)</span><br/>    cal.<span class=\"me1\">set</span><span class=\"br0\">(</span>Calendar.<span class=\"me1\">DAY_OF_WEEK_IN_MONTH</span>, -<span class=\"nu0\">1</span><span class=\"br0\">)</span><br/>    cal.<span class=\"me1\">getTime</span><br/>  <span class=\"br0\">}</span><br/>\u00a0<br/>  <a href=\"http://scala-lang.org\"><span class=\"kw1\">def</span></a> fridaysOfYear<span class=\"br0\">(</span>year<span class=\"sy0\">:</span>Int<span class=\"br0\">)</span><span class=\"sy0\">=</span><a href=\"http://scala-lang.org\"><span class=\"kw1\">for</span></a><span class=\"br0\">(</span>month <span class=\"sy0\">&lt;</span>- <span class=\"nu0\">0</span> to <span class=\"nu0\">11</span><span class=\"br0\">)</span> <a href=\"http://scala-lang.org\"><span class=\"kw1\">yield</span></a> lastFridayOfMonth<span class=\"br0\">(</span>year, month<span class=\"br0\">)</span><br/>\u00a0<br/>  <a href=\"http://scala-lang.org\"><span class=\"kw1\">def</span></a> main<span class=\"br0\">(</span>args<span class=\"sy0\">:</span>Array<span class=\"br0\">[</span>String<span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"br0\">{</span><br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> year<span class=\"sy0\">=</span>args<span class=\"br0\">(</span><span class=\"nu0\">0</span><span class=\"br0\">)</span>.<span class=\"me1\">toInt</span><br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> formatter<span class=\"sy0\">=</span><a href=\"http://scala-lang.org\"><span class=\"kw1\">new</span></a> SimpleDateFormat<span class=\"br0\">(</span><span class=\"st0\">\"yyyy-MMM-dd\"</span><span class=\"br0\">)</span><br/>    fridaysOfYear<span class=\"br0\">(</span>year<span class=\"br0\">)</span>.<span class=\"me1\">foreach</span><span class=\"br0\">{</span>date<span class=\"sy0\">=&gt;</span><br/>      println<span class=\"br0\">(</span>formatter.<span class=\"me1\">format</span><span class=\"br0\">(</span>date<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>    <span class=\"br0\">}</span><br/>  <span class=\"br0\">}</span><br/><span class=\"br0\">}</span></pre>"}, {"lang": "Seed7", "loc": 30, "block": "<pre class=\"text highlighted_source\">$ include \"seed7_05.s7i\";<br/>  include \"time.s7i\";<br/>  include \"duration.s7i\";<br/>\u00a0<br/>const proc: main is func<br/>  local<br/>    var integer: weekday is 1; # 1 for monday, 2 for tuesday, and so on up to 7 for sunday.<br/>    var integer: year is 0;<br/>    var integer: month is 1;<br/>    var time: aDate is time.value;<br/>    var time: selected is time.value;<br/>  begin<br/>    if length(argv(PROGRAM)) &lt;&gt; 2 then<br/>      writeln(\"usage: lastWeekdayInMonth weekday year\");<br/>      writeln(\"  weekday: 1 for monday, 2 for tuesday, and so on up to 7 for sunday.\");<br/>    else<br/>      weekday\u00a0:= integer parse (argv(PROGRAM)[1]);<br/>      year\u00a0:= integer parse (argv(PROGRAM)[2]);<br/>      for month range 1 to 12 do<br/>        aDate\u00a0:= date(year, month, 1);<br/>        while aDate.month = month do<br/>          if dayOfWeek(aDate) = weekday then<br/>            selected\u00a0:= aDate;<br/>          end if;<br/>          aDate +:= 1 . DAYS;<br/>        end while;<br/>        writeln(strDate(selected));<br/>      end for;<br/>    end if;<br/>  end func;</pre>"}, {"lang": "Sidef", "loc": 10, "block": "<pre class=\"ruby highlighted_source\"><span class=\"kw3\">require</span><span class=\"br0\">(</span><span class=\"st0\">'DateTime'</span><span class=\"br0\">)</span><br/>var <span class=\"br0\">(</span>year=<span class=\"nu0\">2016</span><span class=\"br0\">)</span> = ARGV.<span class=\"me1\">map</span><span class=\"br0\">{</span>.<span class=\"me1\">to_i</span><span class=\"br0\">}</span>...<br/>\u00a0<br/><span class=\"kw1\">for</span> month <span class=\"br0\">(</span><span class=\"nu0\">1</span>..<span class=\"nu0\">12</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>   var dt = <span class=\"sy0\">%</span>O<span class=\"sy0\">&lt;</span>DateTime<span class=\"sy0\">&gt;</span>.<span class=\"me1\">last_day_of_month</span><span class=\"br0\">(</span>year <span class=\"sy0\">=&gt;</span> year, month <span class=\"sy0\">=&gt;</span> month<span class=\"br0\">)</span><br/>   <span class=\"kw1\">while</span> <span class=\"br0\">(</span>dt.<span class=\"me1\">day_of_week</span>\u00a0!= <span class=\"nu0\">5</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>      dt.<span class=\"me1\">subtract</span><span class=\"br0\">(</span>days <span class=\"sy0\">=&gt;</span> <span class=\"nu0\">1</span><span class=\"br0\">)</span><br/>   <span class=\"br0\">}</span><br/>   say dt.<span class=\"me1\">ymd</span><br/><span class=\"br0\">}</span></pre>"}, {"lang": "Smalltalk", "loc": 11, "block": "<pre class=\"smalltalk highlighted_source\">\u00a0<br/><span class=\"re0\">Pharo</span> <span class=\"re0\">Smalltalk</span><br/>\u00a0<br/><span class=\"br0\">[</span>\u00a0:<span class=\"re5\">yr</span> | | firstDay firstFriday |<br/>  <span class=\"re6\">firstDay</span> <span class=\"sy0\">:=</span> <span class=\"re0\">Date</span> year: <span class=\"re5\">yr</span> month: <span class=\"re5\">1</span> day: <span class=\"re5\">1</span>.<br/>  <span class=\"re5\">firstFriday</span> <span class=\"sy0\">:=</span> <span class=\"re5\">firstDay</span> addDays: <span class=\"br0\">(</span><span class=\"re5\">6</span> - <span class=\"re5\">firstDay</span> dayOfWeek<span class=\"br0\">)</span>.<br/>  <span class=\"br0\">(</span><span class=\"re5\">0</span> to: <span class=\"re5\">53</span><span class=\"br0\">)</span> <br/>    collect: <span class=\"br0\">[</span>\u00a0:<span class=\"re5\">each</span> | firstFriday addDays: <span class=\"br0\">(</span><span class=\"re5\">each</span> * <span class=\"re5\">7</span><span class=\"br0\">)</span> <span class=\"br0\">]</span><br/>    thenSelect: <span class=\"br0\">[</span>\u00a0:<span class=\"re5\">each</span> | <br/>      <span class=\"br0\">(</span><span class=\"br0\">(</span><span class=\"br0\">(</span><span class=\"re0\">Date</span> daysInMonth: <span class=\"re5\">each</span> monthIndex forYear: <span class=\"re5\">yr</span><span class=\"br0\">)</span> - <span class=\"re5\">each</span> dayOfMonth<span class=\"br0\">)</span> &lt;<span class=\"sy0\">=</span> <span class=\"re5\">6</span><span class=\"br0\">)</span> and: <span class=\"br0\">[</span>\t<span class=\"re5\">each</span> year <span class=\"sy0\">=</span> <span class=\"re5\">yr</span> <span class=\"br0\">]</span> <span class=\"br0\">]</span> <span class=\"br0\">]</span><br/>\u00a0</pre>"}, {"lang": "SQL", "loc": 6, "block": "<pre class=\"sql highlighted_source\">\u00a0<br/><span class=\"kw1\">SELECT</span> to_char<span class=\"br0\">(</span> next_day<span class=\"br0\">(</span> last_day<span class=\"br0\">(</span> add_months<span class=\"br0\">(</span> to_date<span class=\"br0\">(</span><br/>       \u00a0:yr<span class=\"sy0\">||</span><span class=\"st0\">'01'</span><span class=\"sy0\">,</span><span class=\"st0\">'yyyymm'</span> <span class=\"br0\">)</span><span class=\"sy0\">,</span>level<span class=\"sy0\">-</span><span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"sy0\">-</span><span class=\"nu0\">7</span><span class=\"sy0\">,</span><span class=\"st0\">'Fri'</span><span class=\"br0\">)</span> <span class=\"sy0\">,</span><span class=\"st0\">'yyyy-mm-dd Dy'</span><span class=\"br0\">)</span> lastfriday<br/><span class=\"kw1\">FROM</span> dual<br/><span class=\"kw1\">CONNECT</span> <span class=\"kw1\">BY</span> level <span class=\"sy0\">&lt;=</span> <span class=\"nu0\">12</span>;<br/>\u00a0</pre>"}, {"lang": "Stata", "loc": 27, "block": "<pre class=\"text highlighted_source\">program last_fridays<br/>\targs year<br/>\tclear<br/>\tqui set obs 12<br/>\tgen day=dofm(mofd(mdy(_n,1,`year'))+1)-1<br/>\tqui replace day=day-mod(dow(day)-5,7)<br/>\tformat\u00a0%td day<br/>\tlist, noobs noheader sep(6)<br/>end<br/>\u00a0<br/>last_fridays 2012<br/>\u00a0<br/>  +-----------+<br/>  | 27jan2012 |<br/>  | 24feb2012 |<br/>  | 30mar2012 |<br/>  | 27apr2012 |<br/>  | 25may2012 |<br/>  | 29jun2012 |<br/>  |-----------|<br/>  | 27jul2012 |<br/>  | 31aug2012 |<br/>  | 28sep2012 |<br/>  | 26oct2012 |<br/>  | 30nov2012 |<br/>  | 28dec2012 |<br/>  +-----------+</pre>"}, {"lang": "Swift", "loc": 50, "block": "<pre class=\"text highlighted_source\">\u00a0<br/>import Foundation<br/>\u00a0<br/>func lastFridays(of year: Int) -&gt; [Date] {<br/>\u00a0<br/>\tlet calendar = Calendar.current<br/>\tvar dates = [Date]()<br/>\u00a0<br/>\tfor month in 2...13 {<br/>\u00a0<br/>\t\tlet lastDayOfMonth = DateComponents(calendar: calendar,<br/>\t\t                                    year: year,<br/>\t\t                                    month: month,<br/>\t\t                                    day: 0,<br/>\t\t                                    hour: 12)<br/>\u00a0<br/>\t\tlet date = calendar.date(from: lastDayOfMonth)!<br/>\u00a0<br/>\t\tlet isFriday = calendar.component(.weekday, from: date) == 6<br/>\u00a0<br/>\t\tif isFriday {<br/>\u00a0<br/>\t\t\tdates.append(calendar.date(from: lastDayOfMonth)!)<br/>\u00a0<br/>\t\t} else {<br/>\u00a0<br/>\t\t\tlet lastWeekofMonth = calendar.ordinality(of: .weekOfMonth,<br/>\t\t\t                                          in: .month,<br/>\t\t\t                                          for: date)!<br/>\u00a0<br/>\t\t\tlet lastWithFriday = lastWeekofMonth - (calendar.component(.weekday, from: date) &gt; 6\u00a0? 0\u00a0: 1)<br/>\u00a0<br/>\t\t\tlet lastFridayOfMonth = DateComponents(calendar: calendar,<br/>\t\t\t                                       year: year,<br/>\t\t\t                                       month: month - 1,<br/>\t\t\t                                       hour: 12,<br/>\t\t\t                                       weekday: 6,<br/>\t\t\t                                       weekOfMonth: lastWithFriday)<br/>\u00a0<br/>\t\t\tdates.append(calendar.date(from: lastFridayOfMonth)!)<br/>\t\t}<br/>\t}<br/>\treturn dates<br/>}<br/>\u00a0<br/>var dateFormatter = DateFormatter()<br/>dateFormatter.dateStyle = .short<br/>\u00a0<br/>print(lastFridays(of: 2013).map(dateFormatter.string).joined(separator: \"\\n\"))<br/>\u00a0</pre>"}, {"lang": "Tcl", "loc": 8, "block": "<pre class=\"tcl highlighted_source\"><span class=\"kw2\">package</span> require Tcl <span class=\"nu0\">8.5</span><br/><span class=\"kw1\">set</span> year <span class=\"br0\">[</span><span class=\"kw2\">lindex</span> <span class=\"kw2\"><span class=\"re0\">$argv</span></span> <span class=\"nu0\">0</span><span class=\"br0\">]</span><br/><span class=\"kw1\">foreach</span> dm <span class=\"br0\">{</span>02/<span class=\"nu0\">1</span> 03/<span class=\"nu0\">1</span> 04/<span class=\"nu0\">1</span> 05/<span class=\"nu0\">1</span> 06/<span class=\"nu0\">1</span> 07/<span class=\"nu0\">1</span> 08/<span class=\"nu0\">1</span> 09/<span class=\"nu0\">1</span> <span class=\"nu0\">10</span>/<span class=\"nu0\">1</span> <span class=\"nu0\">11</span>/<span class=\"nu0\">1</span> <span class=\"nu0\">12</span>/<span class=\"nu0\">1</span> <span class=\"nu0\">12</span>/<span class=\"nu0\">32</span><span class=\"br0\">}</span> <span class=\"br0\">{</span><br/>    <span class=\"co1\"># The [clock scan] code is unhealthily clever; use it for our own evil purposes</span><br/>    <span class=\"kw1\">set</span> t <span class=\"br0\">[</span><span class=\"kw2\">clock</span> <span class=\"kw2\">scan</span> <span class=\"st0\">\"last friday\"</span> -base <span class=\"br0\">[</span><span class=\"kw2\">clock</span> <span class=\"kw2\">scan</span> <span class=\"re0\">$dm</span>/<span class=\"re0\">$year</span> -gmt <span class=\"nu0\">1</span><span class=\"br0\">]</span> -gmt <span class=\"nu0\">1</span><span class=\"br0\">]</span><br/>    <span class=\"co1\"># Print the interesting part</span><br/>    <span class=\"kw2\">puts</span> <span class=\"br0\">[</span><span class=\"kw2\">clock</span> <span class=\"kw2\">format</span> <span class=\"re0\">$t</span> -<span class=\"kw2\">format</span> <span class=\"st0\">\"%Y-%m-%d\"</span> -gmt <span class=\"nu0\">1</span><span class=\"br0\">]</span><br/><span class=\"br0\">}</span></pre>"}, {"lang": "TUSCRIPT", "loc": 13, "block": "<pre class=\"text highlighted_source\">\u00a0<br/>$$ MODE TUSCRIPT<br/>year=2012<br/>LOOP month=1,12<br/> LOOP day=31,22,-1<br/>  dayofweek=DATE (number,day,month,year,nummer)<br/>  IF (dayofweek==5) THEN<br/>  PRINT year,\"-\",month,\"-\",day<br/>  EXIT<br/>  ENDIF<br/> ENDLOOP<br/>ENDLOOP<br/>\u00a0</pre>"}, {"lang": "UNIX Shell", "loc": 9, "block": "<pre class=\"bash highlighted_source\"><span class=\"co0\">#!/bin/sh</span><br/>\u00a0<br/><span class=\"kw1\">if</span> <span class=\"br0\">[</span> <span class=\"re5\">-z</span> <span class=\"re4\">$1</span> <span class=\"br0\">]</span>; <span class=\"kw1\">then</span> <span class=\"kw3\">exit</span> <span class=\"nu0\">1</span>; <span class=\"kw1\">fi</span><br/>\u00a0<br/><span class=\"co0\"># weed out multiple erros due to bad year</span><br/>ncal <span class=\"nu0\">1</span> <span class=\"re4\">$1</span> <span class=\"sy0\">&gt;</span> <span class=\"sy0\">/</span>dev<span class=\"sy0\">/</span>null <span class=\"sy0\">&amp;&amp;</span> \\<br/><span class=\"kw1\">for</span> m <span class=\"kw1\">in</span> 01 02 03 04 05 06 07 08 09 <span class=\"nu0\">10</span> <span class=\"nu0\">11</span> <span class=\"nu0\">12</span>; <span class=\"kw1\">do</span><br/>\t<span class=\"kw3\">echo</span> <span class=\"re4\">$1</span>-<span class=\"re1\">$m</span>-<span class=\"sy0\">`</span>ncal <span class=\"re1\">$m</span> <span class=\"re4\">$1</span> <span class=\"sy0\">|</span> <span class=\"kw2\">grep</span> Fr <span class=\"sy0\">|</span> <span class=\"kw2\">sed</span> <span class=\"st_h\">'s/.* \\([0-9]\\)/\\1/'</span><span class=\"sy0\">`</span><br/><span class=\"kw1\">done</span></pre>"}, {"lang": "Visual FoxPro", "loc": 36, "block": "<pre class=\"text highlighted_source\">\u00a0<br/>*!* OOP implementaion<br/>LOCAL lnYear As Integer, oCalc As fricalc<br/>CLEAR<br/>lnYear = VAL(INPUTBOX(\"Year\", \"Year\"))<br/>oCalc = NEWOBJECT(\"fricalc\")<br/>oCalc.LastFriday(lnYear)<br/>\u00a0<br/>DEFINE CLASS fricalc As Session<br/>DataSession = 2\t&amp;&amp; Private<br/>\u00a0<br/>PROCEDURE Init<br/>*!* These date settings are private to this class<br/>SET DATE YMD<br/>SET CENTURY ON<br/>SET MARK TO \"-\"<br/>ENDPROC<br/>\u00a0<br/>FUNCTION LastFriday(tnYear As Integer) As VOID<br/>LOCAL i As Integer, ldDate As Date<br/>CLEAR<br/>? \"Last Fridays in the year \" + TRANSFORM(tnYear)<br/>FOR i = 1 TO 12<br/>\tldDate = DATE(tnYear, i, 1)\t&amp;&amp; 1st of month<br/>\tldDate = GOMONTH(ldDate, 1) - 1\t&amp;&amp; last day of month<br/>\t*!* Use the built in function to return the day of the week<br/>\t*!* 6 is Friday<br/>\tDO WHILE DOW(ldDate) # 6<br/>\t\tldDate = ldDate - 1 <br/>\tENDDO<br/>\t? ldDate<br/>ENDFOR<br/>ENDFUNC<br/>\u00a0<br/>ENDDEFINE <br/>\u00a0</pre>"}, {"lang": "XPL0", "loc": 23, "block": "<pre class=\"text highlighted_source\">include c:\\cxpl\\codes; \\intrinsic 'code' declarations<br/>\u00a0<br/>func WeekDay(Year, Month, Day);   \\Return day of week (0=Sun, 1=Mon ... 6=Sat)<br/>int  Year, Month, Day;            \\works for years from 1583 onward<br/>[if Month&lt;=2 then [Month:= Month+12;  Year:= Year-1];<br/>return rem((Day-1 + (Month+1)*26/10 + Year + Year/4 + Year/100*6 + Year/400)/7);<br/>];<br/>\u00a0<br/>int Year, Month, LastDay, WD;<br/>[Year:= IntIn(8);               \\from command line<br/>for Month:= 1 to 12 do<br/>    [LastDay:= WeekDay(Year, Month+1, 1) - WeekDay(Year, Month, 28);<br/>    if LastDay &lt; 0 then LastDay:= LastDay + 7;<br/>    LastDay:= LastDay + 27;     \\ = number of days in Month<br/>    WD:= WeekDay(Year, Month, LastDay);<br/>    WD:= WD - 5;<br/>    if WD &lt; 0 then WD:= WD + 7;<br/>    LastDay:= LastDay - WD;<br/>    IntOut(0, Year);  ChOut(0, ^-);<br/>    if Month &lt; 10 then ChOut(0, ^0);  IntOut(0, Month);  ChOut(0, ^-);<br/>    IntOut(0, LastDay);  CrLf(0);<br/>    ];<br/>]</pre>"}, {"lang": "zkl", "loc": 10, "block": "<pre class=\"text highlighted_source\">var [const] D=Time.Date;<br/>fcn lastDay(y,d){<br/>   [1..12].pump(List,'wrap(m){  // 12 months, closure for y &amp; d<br/>      [D.daysInMonth(y,m)..1,-1].pump(Void,'wrap(_d){  // work backwards<br/>         D.weekDay(y,m,_d)\u00a0:<br/>         if (_==d) return(Void.Stop,D.toYMDString(y,m,_d))<br/>      })<br/>   })<br/>}<br/>lastDay(2012,D.Friday).concat(\"\\n\").println();</pre>"}]}