{"task": "Check_Machin-like_formulas", "blocks": [{"lang": "Clojure", "loc": 53, "block": "<pre class=\"lisp highlighted_source\"><span class=\"br0\">(</span>ns tanevaulator<br/>  <span class=\"br0\">(</span><span class=\"sy0\">:</span><span class=\"me1\">gen-class</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"co1\">;; Notation: [a b c] -&gt; a x arctan(a/b)</span><br/><span class=\"br0\">(</span>def test-cases   <span class=\"br0\">[</span><br/>                          <span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">2</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">3</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><br/>                          <span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"nu0\">2</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">3</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">7</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><br/>                          <span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"nu0\">4</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">5</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span>-<span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">239</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><br/>                          <span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"nu0\">5</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">7</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">2</span><span class=\"sy0\">,</span> <span class=\"nu0\">3</span><span class=\"sy0\">,</span> <span class=\"nu0\">79</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><br/>                          <span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">2</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">5</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">8</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><br/>                          <span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"nu0\">4</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">5</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span>-<span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">70</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">99</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><br/>                          <span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"nu0\">5</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">7</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">4</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">53</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">2</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">4443</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><br/>                          <span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"nu0\">6</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">8</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">2</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">57</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">239</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><br/>                          <span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"nu0\">8</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">10</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span>-<span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">239</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span>-<span class=\"nu0\">4</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">515</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><br/>                          <span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"nu0\">12</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">18</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">8</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">57</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span>-<span class=\"nu0\">5</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">239</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><br/>                          <span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"nu0\">16</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">21</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">3</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">239</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">4</span><span class=\"sy0\">,</span> <span class=\"nu0\">3</span><span class=\"sy0\">,</span> <span class=\"nu0\">1042</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><br/>                          <span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"nu0\">22</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">28</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">2</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">443</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span>-<span class=\"nu0\">5</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">1393</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span>-<span class=\"nu0\">10</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">11018</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><br/>                          <span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"nu0\">22</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">38</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">17</span><span class=\"sy0\">,</span> <span class=\"nu0\">7</span><span class=\"sy0\">,</span> <span class=\"nu0\">601</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">10</span><span class=\"sy0\">,</span> <span class=\"nu0\">7</span><span class=\"sy0\">,</span> <span class=\"nu0\">8149</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><br/>                          <span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"nu0\">44</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">57</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">7</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">239</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span>-<span class=\"nu0\">12</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">682</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">24</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">12943</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><br/>                          <span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"nu0\">88</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">172</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">51</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">239</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">32</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">682</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">44</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">5357</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">68</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">12943</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><br/>                          <span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"nu0\">88</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">172</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">51</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">239</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">32</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">682</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">44</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">5357</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">68</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">12944</span><span class=\"br0\">]</span><span class=\"br0\">]</span><br/>                  <span class=\"br0\">]</span><span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"br0\">(</span>defn tan-sum <span class=\"br0\">[</span>a b<span class=\"br0\">]</span><br/>  <span class=\"st0\">\" tan (a + b) \"</span><br/>  <span class=\"br0\">(</span>/ <span class=\"br0\">(</span>+ a b<span class=\"br0\">)</span> <span class=\"br0\">(</span>- <span class=\"nu0\">1</span> <span class=\"br0\">(</span>* a b<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"br0\">(</span>defn tan-<span class=\"kw1\">eval</span> <span class=\"br0\">[</span>m<span class=\"br0\">]</span><br/>  <span class=\"st0\">\" Evaluates tan of a triplet (e.g. [1, 1, 2])\"</span><br/>  <span class=\"br0\">(</span><span class=\"kw1\">let</span> <span class=\"br0\">[</span>coef <span class=\"br0\">(</span>first m<span class=\"br0\">)</span><br/>        rat <span class=\"br0\">(</span>/ <span class=\"br0\">(</span><span class=\"kw1\">nth</span> m <span class=\"nu0\">1</span><span class=\"br0\">)</span> <span class=\"br0\">(</span><span class=\"kw1\">nth</span> m <span class=\"nu0\">2</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">]</span><br/>  <span class=\"br0\">(</span><span class=\"kw1\">cond</span><br/>    <span class=\"br0\">(</span><span class=\"sy0\">=</span> <span class=\"nu0\">1</span>  coef<span class=\"br0\">)</span> rat<br/>    <span class=\"br0\">(</span>neg? coef<span class=\"br0\">)</span> <span class=\"br0\">(</span>tan-<span class=\"kw1\">eval</span> <span class=\"br0\">[</span><span class=\"br0\">(</span>- <span class=\"br0\">(</span><span class=\"kw1\">nth</span> m <span class=\"nu0\">0</span><span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"br0\">(</span>- <span class=\"br0\">(</span><span class=\"kw1\">nth</span> m <span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"br0\">(</span><span class=\"kw1\">nth</span> m <span class=\"nu0\">2</span><span class=\"br0\">)</span><span class=\"br0\">]</span><span class=\"br0\">)</span><br/>    <span class=\"sy0\">:</span><span class=\"me1\">else</span> <span class=\"br0\">(</span><span class=\"kw1\">let</span> <span class=\"br0\">[</span><br/>                ca <span class=\"br0\">(</span>quot coef <span class=\"nu0\">2</span><span class=\"br0\">)</span><br/>                cb <span class=\"br0\">(</span>- coef ca<span class=\"br0\">)</span><br/>                a <span class=\"br0\">(</span>tan-<span class=\"kw1\">eval</span> <span class=\"br0\">[</span>ca <span class=\"br0\">(</span><span class=\"kw1\">nth</span> m <span class=\"nu0\">1</span><span class=\"br0\">)</span> <span class=\"br0\">(</span><span class=\"kw1\">nth</span> m <span class=\"nu0\">2</span><span class=\"br0\">)</span><span class=\"br0\">]</span><span class=\"br0\">)</span><br/>                b <span class=\"br0\">(</span>tan-<span class=\"kw1\">eval</span> <span class=\"br0\">[</span>cb <span class=\"br0\">(</span><span class=\"kw1\">nth</span> m <span class=\"nu0\">1</span><span class=\"br0\">)</span> <span class=\"br0\">(</span><span class=\"kw1\">nth</span> m <span class=\"nu0\">2</span><span class=\"br0\">)</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"br0\">]</span><br/>            <span class=\"br0\">(</span>tan-sum a b<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"br0\">(</span>defn tans <span class=\"br0\">[</span>m<span class=\"br0\">]</span><br/>  <span class=\"st0\">\" Evaluates tan of set of triplets (e.g. [[1, 1, 2], [1, 1, 3]])\"</span><br/>  <span class=\"br0\">(</span><span class=\"kw1\">if</span> <span class=\"br0\">(</span><span class=\"sy0\">=</span> <span class=\"nu0\">1</span> <span class=\"br0\">(</span>count m<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>    <span class=\"br0\">(</span>tan-<span class=\"kw1\">eval</span> <span class=\"br0\">(</span><span class=\"kw1\">nth</span> m <span class=\"nu0\">0</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>    <span class=\"br0\">(</span><span class=\"kw1\">let</span> <span class=\"br0\">[</span>a <span class=\"br0\">(</span>tan-<span class=\"kw1\">eval</span> <span class=\"br0\">(</span>first m<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>          b <span class=\"br0\">(</span>tans <span class=\"br0\">(</span>rest m<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">]</span><br/>      <span class=\"br0\">(</span>tan-sum a b<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"br0\">(</span>doseq <span class=\"br0\">[</span>q test-cases<span class=\"br0\">]</span><br/>  <span class=\"st0\">\" Display results \"</span><br/>  <span class=\"br0\">(</span>println <span class=\"st0\">\"tan \"</span> q <span class=\"st0\">\" = \"</span><span class=\"br0\">(</span>tans q<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\u00a0</pre>"}, {"lang": "D", "loc": 71, "block": "<pre class=\"d highlighted_source\"><span class=\"kw2\">import</span> std.<span class=\"me1\">stdio</span><span class=\"sy0\">,</span> std.<span class=\"me1\">regex</span><span class=\"sy0\">,</span> std.<span class=\"me1\">conv</span><span class=\"sy0\">,</span> std.<span class=\"kw4\">string</span><span class=\"sy0\">,</span> std.<span class=\"me1\">range</span><span class=\"sy0\">,</span><br/>       arithmetic_rational<span class=\"sy0\">;</span><br/>\u00a0<br/><span class=\"kw4\">struct</span> Pair <span class=\"br0\">{</span> <span class=\"kw4\">int</span> x<span class=\"sy0\">;</span> Rational r<span class=\"sy0\">;</span> <span class=\"br0\">}</span><br/>\u00a0<br/>Pair<span class=\"br0\">[</span><span class=\"br0\">]</span><span class=\"br0\">[</span><span class=\"br0\">]</span> parseEquations<span class=\"br0\">(</span><span class=\"kw2\">in</span> <span class=\"kw4\">string</span> text<span class=\"br0\">)</span> <span class=\"coMULTI\">/*pure nothrow*/</span> <span class=\"br0\">{</span><br/>    <span class=\"kw4\">auto</span> r <span class=\"sy0\">=</span> regex<span class=\"br0\">(</span><span class=\"co4\">r\"\\s*(?P&lt;sign&gt;[+-])?\\s*(?:(?P&lt;mul&gt;\\d+)\\s*\\*)?\\s*\"</span> <span class=\"sy0\">~</span><br/>                   <span class=\"co4\">r\"arctan\\((?P&lt;num&gt;\\d+)/(?P&lt;denom&gt;\\d+)\\)\"</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>    Pair<span class=\"br0\">[</span><span class=\"br0\">]</span><span class=\"br0\">[</span><span class=\"br0\">]</span> machins<span class=\"sy0\">;</span><br/>    <span class=\"kw1\">foreach</span> <span class=\"br0\">(</span><span class=\"kw4\">const</span> line<span class=\"sy0\">;</span> text.<span class=\"me1\">splitLines</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>        Pair<span class=\"br0\">[</span><span class=\"br0\">]</span> formula<span class=\"sy0\">;</span><br/>        <span class=\"kw1\">foreach</span> <span class=\"br0\">(</span>part<span class=\"sy0\">;</span> line.<span class=\"me1\">split</span><span class=\"br0\">(</span><span class=\"st0\">\"=\"</span><span class=\"br0\">)</span><span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"br0\">]</span>.<span class=\"me1\">matchAll</span><span class=\"br0\">(</span>r<span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>            <span class=\"kw4\">immutable</span> mul <span class=\"sy0\">=</span> part<span class=\"br0\">[</span><span class=\"st0\">\"mul\"</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><br/>                      num <span class=\"sy0\">=</span> part<span class=\"br0\">[</span><span class=\"st0\">\"num\"</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><br/>                      denom <span class=\"sy0\">=</span> part<span class=\"br0\">[</span><span class=\"st0\">\"denom\"</span><span class=\"br0\">]</span><span class=\"sy0\">;</span><br/>            formula <span class=\"sy0\">~=</span> Pair<span class=\"br0\">(</span><span class=\"br0\">(</span>part<span class=\"br0\">[</span><span class=\"st0\">\"sign\"</span><span class=\"br0\">]</span> <span class=\"sy0\">==</span> <span class=\"st0\">\"-\"</span> <span class=\"sy0\">?</span> <span class=\"sy0\">-</span><span class=\"nu0\">1</span> <span class=\"sy0\">:</span> <span class=\"nu0\">1</span><span class=\"br0\">)</span> <span class=\"sy0\">*</span><br/>                            <span class=\"br0\">(</span>mul.<span class=\"me1\">empty</span> <span class=\"sy0\">?</span> <span class=\"nu0\">1</span> <span class=\"sy0\">:</span> mul.<span class=\"me1\">to</span><span class=\"sy0\">!</span><span class=\"kw4\">int</span><span class=\"br0\">)</span><span class=\"sy0\">,</span><br/>                            Rational<span class=\"br0\">(</span>num.<span class=\"me1\">to</span><span class=\"sy0\">!</span><span class=\"kw4\">int</span><span class=\"sy0\">,</span><br/>                                     denom.<span class=\"me1\">empty</span> <span class=\"sy0\">?</span> <span class=\"nu0\">1</span> <span class=\"sy0\">:</span> denom.<span class=\"me1\">to</span><span class=\"sy0\">!</span><span class=\"kw4\">int</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        <span class=\"br0\">}</span><br/>        machins <span class=\"sy0\">~=</span> formula<span class=\"sy0\">;</span><br/>    <span class=\"br0\">}</span><br/>    <span class=\"kw1\">return</span> machins<span class=\"sy0\">;</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/>\u00a0<br/>Rational tans<span class=\"br0\">(</span><span class=\"kw2\">in</span> Pair<span class=\"br0\">[</span><span class=\"br0\">]</span> xs<span class=\"br0\">)</span> <span class=\"kw4\">pure</span> <span class=\"kw4\">nothrow</span> <span class=\"br0\">{</span><br/>    <span class=\"kw4\">static</span> Rational tanEval<span class=\"br0\">(</span><span class=\"kw2\">in</span> <span class=\"kw4\">int</span> coef<span class=\"sy0\">,</span> <span class=\"kw2\">in</span> Rational f<span class=\"br0\">)</span><br/>    <span class=\"kw4\">pure</span> <span class=\"kw4\">nothrow</span> <span class=\"br0\">{</span><br/>        <span class=\"kw1\">if</span> <span class=\"br0\">(</span>coef <span class=\"sy0\">==</span> <span class=\"nu0\">1</span><span class=\"br0\">)</span><br/>            <span class=\"kw1\">return</span> f<span class=\"sy0\">;</span><br/>        <span class=\"kw1\">if</span> <span class=\"br0\">(</span>coef <span class=\"sy0\">&lt;</span> <span class=\"nu0\">0</span><span class=\"br0\">)</span><br/>            <span class=\"kw1\">return</span> <span class=\"sy0\">-</span>tanEval<span class=\"br0\">(</span><span class=\"sy0\">-</span>coef<span class=\"sy0\">,</span> f<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        <span class=\"kw4\">immutable</span> a <span class=\"sy0\">=</span> tanEval<span class=\"br0\">(</span>coef <span class=\"sy0\">/</span> <span class=\"nu0\">2</span><span class=\"sy0\">,</span> f<span class=\"br0\">)</span><span class=\"sy0\">,</span><br/>                  b <span class=\"sy0\">=</span> tanEval<span class=\"br0\">(</span>coef <span class=\"sy0\">-</span> coef <span class=\"sy0\">/</span> <span class=\"nu0\">2</span><span class=\"sy0\">,</span> f<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        <span class=\"kw1\">return</span> <span class=\"br0\">(</span>a <span class=\"sy0\">+</span> b<span class=\"br0\">)</span> <span class=\"sy0\">/</span> <span class=\"br0\">(</span><span class=\"nu0\">1</span> <span class=\"sy0\">-</span> a <span class=\"sy0\">*</span> b<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>    <span class=\"br0\">}</span><br/>\u00a0<br/>    <span class=\"kw1\">if</span> <span class=\"br0\">(</span>xs.<span class=\"me1\">length</span> <span class=\"sy0\">==</span> <span class=\"nu0\">1</span><span class=\"br0\">)</span><br/>        <span class=\"kw1\">return</span> tanEval<span class=\"br0\">(</span>xs<span class=\"br0\">[</span><span class=\"nu0\">0</span><span class=\"br0\">]</span>.<span class=\"me1\">tupleof</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>    <span class=\"kw4\">immutable</span> a <span class=\"sy0\">=</span> xs<span class=\"br0\">[</span><span class=\"nu0\">0</span> <span class=\"sy0\">..</span> $ <span class=\"sy0\">/</span> <span class=\"nu0\">2</span><span class=\"br0\">]</span>.<span class=\"me1\">tans</span><span class=\"sy0\">,</span><br/>              b <span class=\"sy0\">=</span> xs<span class=\"br0\">[</span>$ <span class=\"sy0\">/</span> <span class=\"nu0\">2</span> <span class=\"sy0\">..</span> $<span class=\"br0\">]</span>.<span class=\"me1\">tans</span><span class=\"sy0\">;</span><br/>    <span class=\"kw1\">return</span> <span class=\"br0\">(</span>a <span class=\"sy0\">+</span> b<span class=\"br0\">)</span> <span class=\"sy0\">/</span> <span class=\"br0\">(</span><span class=\"nu0\">1</span> <span class=\"sy0\">-</span> a <span class=\"sy0\">*</span> b<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"kw4\">void</span> main<span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>    <span class=\"kw4\">immutable</span> equationText <span class=\"sy0\">=</span><br/><span class=\"st0\">\"pi/4 = arctan(1/2) + arctan(1/3)<br/>pi/4 = 2*arctan(1/3) + arctan(1/7)<br/>pi/4 = 4*arctan(1/5) - arctan(1/239)<br/>pi/4 = 5*arctan(1/7) + 2*arctan(3/79)<br/>pi/4 = 5*arctan(29/278) + 7*arctan(3/79)<br/>pi/4 = arctan(1/2) + arctan(1/5) + arctan(1/8)<br/>pi/4 = 4*arctan(1/5) - arctan(1/70) + arctan(1/99)<br/>pi/4 = 5*arctan(1/7) + 4*arctan(1/53) + 2*arctan(1/4443)<br/>pi/4 = 6*arctan(1/8) + 2*arctan(1/57) + arctan(1/239)<br/>pi/4 = 8*arctan(1/10) - arctan(1/239) - 4*arctan(1/515)<br/>pi/4 = 12*arctan(1/18) + 8*arctan(1/57) - 5*arctan(1/239)<br/>pi/4 = 16*arctan(1/21) + 3*arctan(1/239) + 4*arctan(3/1042)<br/>pi/4 = 22*arctan(1/28) + 2*arctan(1/443) - 5*arctan(1/1393) - 10*arctan(1/11018)<br/>pi/4 = 22*arctan(1/38) + 17*arctan(7/601) + 10*arctan(7/8149)<br/>pi/4 = 44*arctan(1/57) + 7*arctan(1/239) - 12*arctan(1/682) + 24*arctan(1/12943)<br/>pi/4 = 88*arctan(1/172) + 51*arctan(1/239) + 32*arctan(1/682) + 44*arctan(1/5357) + 68*arctan(1/12943)<br/>pi/4 = 88*arctan(1/172) + 51*arctan(1/239) + 32*arctan(1/682) + 44*arctan(1/5357) + 68*arctan(1/12944)\"</span><span class=\"sy0\">;</span><br/>\u00a0<br/>    <span class=\"kw4\">const</span> machins <span class=\"sy0\">=</span> equationText.<span class=\"me1\">parseEquations</span><span class=\"sy0\">;</span><br/>    <span class=\"kw1\">foreach</span> <span class=\"br0\">(</span><span class=\"kw4\">const</span> machin<span class=\"sy0\">,</span> <span class=\"kw4\">const</span> eqn<span class=\"sy0\">;</span> machins.<span class=\"me1\">zip</span><span class=\"br0\">(</span>equationText.<span class=\"me1\">splitLines</span><span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>        <span class=\"kw4\">immutable</span> ans <span class=\"sy0\">=</span> machin.<span class=\"me1\">tans</span><span class=\"sy0\">;</span><br/>        writefln<span class=\"br0\">(</span><span class=\"st0\">\"%5s:\u00a0%s\"</span><span class=\"sy0\">,</span> ans <span class=\"sy0\">==</span> <span class=\"nu0\">1</span> <span class=\"sy0\">?</span> <span class=\"st0\">\"OK\"</span> <span class=\"sy0\">:</span> <span class=\"st0\">\"ERROR\"</span><span class=\"sy0\">,</span> eqn<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>    <span class=\"br0\">}</span><br/><span class=\"br0\">}</span></pre>"}, {"lang": "EchoLisp", "loc": 60, "block": "<pre class=\"scheme highlighted_source\">\u00a0<br/><span class=\"br0\">(</span>lib 'math<span class=\"br0\">)</span><br/><span class=\"br0\">(</span>lib 'match<span class=\"br0\">)</span><br/><span class=\"br0\">(</span>math<span class=\"sy0\">-</span>precision 1.e<span class=\"sy0\">-</span>10<span class=\"br0\">)</span> <br/>\u00a0<br/><span class=\"co1\">;; formally derive (tan ..) expressions</span><br/><span class=\"co1\">;; copied from Racket </span><br/><span class=\"co1\">;; adapted and improved for performance</span><br/>\u00a0<br/><span class=\"br0\">(</span><span class=\"kw1\">define</span> <span class=\"br0\">(</span>reduce <span class=\"kw1\">e</span><span class=\"br0\">)</span><br/><span class=\"co1\">;; (set! rcount (1+ rcount))\u00a0;; # of calls</span><br/>  <span class=\"br0\">(</span>match <span class=\"kw1\">e</span><br/>    <span class=\"br0\">[</span><span class=\"br0\">(</span>? <span class=\"kw1\">number?</span> a<span class=\"br0\">)</span>                         a<span class=\"br0\">]</span><br/>    <span class=\"br0\">[</span><span class=\"br0\">(</span>'<span class=\"sy0\">+</span> <span class=\"br0\">(</span>? <span class=\"kw1\">number?</span> a<span class=\"br0\">)</span> <span class=\"br0\">(</span>? <span class=\"kw1\">number?</span> b<span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"br0\">(</span><span class=\"sy0\">+</span> a b<span class=\"br0\">)</span><span class=\"br0\">]</span><br/>    <span class=\"br0\">[</span><span class=\"br0\">(</span>'<span class=\"sy0\">-</span> <span class=\"br0\">(</span>? <span class=\"kw1\">number?</span> a<span class=\"br0\">)</span> <span class=\"br0\">(</span>? <span class=\"kw1\">number?</span> b<span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"br0\">(</span><span class=\"sy0\">-</span> a b<span class=\"br0\">)</span><span class=\"br0\">]</span><br/>    <span class=\"br0\">[</span><span class=\"br0\">(</span>'<span class=\"sy0\">-</span> <span class=\"br0\">(</span>? <span class=\"kw1\">number?</span> a<span class=\"br0\">)</span><span class=\"br0\">)</span>               <span class=\"br0\">(</span><span class=\"sy0\">-</span> a<span class=\"br0\">)</span><span class=\"br0\">]</span><br/>    <span class=\"br0\">[</span><span class=\"br0\">(</span>'<span class=\"sy0\">*</span> <span class=\"br0\">(</span>? <span class=\"kw1\">number?</span> a<span class=\"br0\">)</span> <span class=\"br0\">(</span>? <span class=\"kw1\">number?</span> b<span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"br0\">(</span><span class=\"sy0\">*</span> a b<span class=\"br0\">)</span><span class=\"br0\">]</span><br/>    <span class=\"br0\">[</span><span class=\"br0\">(</span>'<span class=\"sy0\">/</span> <span class=\"br0\">(</span>? <span class=\"kw1\">number?</span> a<span class=\"br0\">)</span> <span class=\"br0\">(</span>? <span class=\"kw1\">number?</span> b<span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"br0\">(</span><span class=\"sy0\">/</span> a b<span class=\"br0\">)</span><span class=\"br0\">]</span> <span class=\"co1\">; patch</span><br/>\u00a0<br/>    <span class=\"br0\">[</span><span class=\"br0\">(</span> '<span class=\"sy0\">+</span> a b<span class=\"br0\">)</span>                         <span class=\"br0\">(</span>reduce `<span class=\"br0\">(</span><span class=\"sy0\">+</span> ,<span class=\"br0\">(</span>reduce a<span class=\"br0\">)</span> ,<span class=\"br0\">(</span>reduce b<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">]</span><br/>    <span class=\"br0\">[</span><span class=\"br0\">(</span> '<span class=\"sy0\">-</span> a b<span class=\"br0\">)</span>                         <span class=\"br0\">(</span>reduce `<span class=\"br0\">(</span><span class=\"sy0\">-</span> ,<span class=\"br0\">(</span>reduce a<span class=\"br0\">)</span> ,<span class=\"br0\">(</span>reduce b<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">]</span><br/>    <span class=\"br0\">[</span><span class=\"br0\">(</span> '<span class=\"sy0\">-</span> a<span class=\"br0\">)</span>                           <span class=\"br0\">(</span>reduce `<span class=\"br0\">(</span><span class=\"sy0\">-</span> ,<span class=\"br0\">(</span>reduce a<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">]</span><br/>    <span class=\"br0\">[</span><span class=\"br0\">(</span> '<span class=\"sy0\">*</span> a b<span class=\"br0\">)</span>                         <span class=\"br0\">(</span>reduce `<span class=\"br0\">(</span><span class=\"sy0\">*</span> ,<span class=\"br0\">(</span>reduce a<span class=\"br0\">)</span> ,<span class=\"br0\">(</span>reduce b<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">]</span><br/>    <span class=\"br0\">[</span><span class=\"br0\">(</span> '<span class=\"sy0\">/</span> a b<span class=\"br0\">)</span>                         <span class=\"br0\">(</span>reduce `<span class=\"br0\">(</span><span class=\"sy0\">/</span> ,<span class=\"br0\">(</span>reduce a<span class=\"br0\">)</span> ,<span class=\"br0\">(</span>reduce b<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">]</span><br/>\u00a0<br/>    <span class=\"br0\">[</span><span class=\"br0\">(</span> '<span class=\"kw1\">tan</span> <span class=\"br0\">(</span>'arctan a<span class=\"br0\">)</span><span class=\"br0\">)</span>           <span class=\"br0\">(</span>reduce a<span class=\"br0\">)</span><span class=\"br0\">]</span><br/>    <span class=\"br0\">[</span><span class=\"br0\">(</span> '<span class=\"kw1\">tan</span> <span class=\"br0\">(</span> '<span class=\"sy0\">-</span> a<span class=\"br0\">)</span><span class=\"br0\">)</span>               <span class=\"br0\">(</span>reduce `<span class=\"br0\">(</span><span class=\"sy0\">-</span> <span class=\"br0\">(</span><span class=\"kw1\">tan</span> ,a<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">]</span><br/>\u00a0<br/>    <span class=\"co1\">;; x 100 # calls reduction\u00a0: derive (tan ,a) only once</span><br/>    <span class=\"br0\">[</span><span class=\"br0\">(</span> '<span class=\"kw1\">tan</span> <span class=\"br0\">(</span> '<span class=\"sy0\">+</span> a b<span class=\"br0\">)</span><span class=\"br0\">)</span>            <br/>          <span class=\"br0\">(</span><span class=\"kw1\">let</span> <span class=\"br0\">(</span><span class=\"br0\">(</span>alpha <span class=\"br0\">(</span>reduce  `<span class=\"br0\">(</span><span class=\"kw1\">tan</span> ,a<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"br0\">(</span>beta <span class=\"br0\">(</span>reduce  `<span class=\"br0\">(</span><span class=\"kw1\">tan</span> ,b<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>    \t  <span class=\"br0\">(</span>reduce `<span class=\"br0\">(</span><span class=\"sy0\">/</span> <span class=\"br0\">(</span><span class=\"sy0\">+</span> ,alpha ,beta<span class=\"br0\">)</span> <span class=\"br0\">(</span><span class=\"sy0\">-</span> <span class=\"nu0\">1</span> <span class=\"br0\">(</span><span class=\"sy0\">*</span> ,alpha ,beta<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">]</span><br/>\u00a0<br/>    <span class=\"br0\">[</span><span class=\"br0\">(</span> '<span class=\"kw1\">tan</span> <span class=\"br0\">(</span> '<span class=\"sy0\">+</span> a b c ...<span class=\"br0\">)</span><span class=\"br0\">)</span>       <span class=\"br0\">(</span>reduce `<span class=\"br0\">(</span><span class=\"kw1\">tan</span> <span class=\"br0\">(</span><span class=\"sy0\">+</span> ,a <span class=\"br0\">(</span><span class=\"sy0\">+</span> ,b ,@c<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">]</span><br/>\u00a0<br/>    <span class=\"br0\">[</span><span class=\"br0\">(</span> '<span class=\"kw1\">tan</span> <span class=\"br0\">(</span> '<span class=\"sy0\">-</span> a b<span class=\"br0\">)</span><span class=\"br0\">)</span>            <br/>                <span class=\"br0\">(</span><span class=\"kw1\">let</span> <span class=\"br0\">(</span><span class=\"br0\">(</span>alpha <span class=\"br0\">(</span>reduce  `<span class=\"br0\">(</span><span class=\"kw1\">tan</span> ,a<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"br0\">(</span>beta <span class=\"br0\">(</span>reduce  `<span class=\"br0\">(</span><span class=\"kw1\">tan</span> ,b<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>    \t\t<span class=\"br0\">(</span>reduce `<span class=\"br0\">(</span><span class=\"sy0\">/</span> <span class=\"br0\">(</span><span class=\"sy0\">-</span> ,alpha ,beta<span class=\"br0\">)</span> <span class=\"br0\">(</span><span class=\"sy0\">+</span> <span class=\"nu0\">1</span> <span class=\"br0\">(</span><span class=\"sy0\">*</span> ,alpha ,beta<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">]</span><br/>\u00a0<br/>    <span class=\"co1\">;; add formula for (tan 2 (arctan a)) = 2 a / (1 - a^2))</span><br/>    <span class=\"br0\">[</span><span class=\"br0\">(</span> '<span class=\"kw1\">tan</span> <span class=\"br0\">(</span> '<span class=\"sy0\">*</span> <span class=\"nu0\">2</span> <span class=\"br0\">(</span>'arctan a<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span>   <span class=\"br0\">(</span>reduce `<span class=\"br0\">(</span><span class=\"sy0\">/</span> <span class=\"br0\">(</span><span class=\"sy0\">*</span> <span class=\"nu0\">2</span> ,a<span class=\"br0\">)</span> <span class=\"br0\">(</span><span class=\"sy0\">-</span> <span class=\"nu0\">1</span> <span class=\"br0\">(</span><span class=\"sy0\">*</span> ,a ,a<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">]</span> <br/>    <span class=\"br0\">[</span><span class=\"br0\">(</span> '<span class=\"kw1\">tan</span> <span class=\"br0\">(</span> '<span class=\"sy0\">*</span> <span class=\"nu0\">1</span> <span class=\"br0\">(</span>'arctan a<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span>   <span class=\"br0\">(</span>reduce a<span class=\"br0\">)</span><span class=\"br0\">]</span> <span class=\"co1\">; added</span><br/>\u00a0<br/>    <span class=\"br0\">[</span><span class=\"br0\">(</span> '<span class=\"kw1\">tan</span> <span class=\"br0\">(</span> '<span class=\"sy0\">*</span> <span class=\"br0\">(</span>? <span class=\"kw1\">number?</span> n<span class=\"br0\">)</span> a<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>     <span class=\"br0\">(</span><span class=\"kw1\">cond</span> <span class=\"br0\">[</span><span class=\"br0\">(</span><span class=\"sy0\">&lt;</span> n <span class=\"nu0\">0</span><span class=\"br0\">)</span> <span class=\"br0\">(</span>reduce `<span class=\"br0\">(</span><span class=\"sy0\">-</span> <span class=\"br0\">(</span><span class=\"kw1\">tan</span> <span class=\"br0\">(</span><span class=\"sy0\">*</span> ,<span class=\"br0\">(</span><span class=\"sy0\">-</span> n<span class=\"br0\">)</span> ,a<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">]</span><br/>           <span class=\"br0\">[</span><span class=\"br0\">(</span><span class=\"sy0\">=</span> n <span class=\"nu0\">0</span><span class=\"br0\">)</span> <span class=\"nu0\">0</span><span class=\"br0\">]</span><br/>           <span class=\"br0\">[</span><span class=\"br0\">(</span><span class=\"sy0\">=</span> n <span class=\"nu0\">1</span><span class=\"br0\">)</span>    <span class=\"br0\">(</span>reduce `<span class=\"br0\">(</span><span class=\"kw1\">tan</span> ,a<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">]</span><br/>           <span class=\"br0\">[</span><span class=\"br0\">(</span><span class=\"kw1\">even?</span> n<span class=\"br0\">)</span>  <br/>              <span class=\"br0\">(</span><span class=\"kw1\">let</span> <span class=\"br0\">(</span><span class=\"br0\">(</span>alpha <span class=\"br0\">(</span>reduce  `<span class=\"br0\">(</span><span class=\"kw1\">tan</span> <span class=\"br0\">(</span><span class=\"sy0\">*</span> ,<span class=\"br0\">(</span><span class=\"sy0\">/</span> n <span class=\"nu0\">2</span><span class=\"br0\">)</span> ,a<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"co1\">;; # calls reduction</span><br/>    \t      <span class=\"br0\">(</span>reduce `<span class=\"br0\">(</span><span class=\"sy0\">/</span> <span class=\"br0\">(</span><span class=\"sy0\">*</span> <span class=\"nu0\">2</span> ,alpha<span class=\"br0\">)</span> <span class=\"br0\">(</span><span class=\"sy0\">-</span> <span class=\"nu0\">1</span> <span class=\"br0\">(</span><span class=\"sy0\">*</span> ,alpha ,alpha<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">]</span><br/>           <span class=\"br0\">[</span><span class=\"kw1\">else</span>      <span class=\"br0\">(</span>reduce `<span class=\"br0\">(</span><span class=\"kw1\">tan</span> <span class=\"br0\">(</span><span class=\"sy0\">+</span> ,a  <span class=\"br0\">(</span><span class=\"sy0\">*</span> ,<span class=\"br0\">(</span><span class=\"sy0\">-</span> n <span class=\"nu0\">1</span><span class=\"br0\">)</span> ,a<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"br0\">]</span><br/>    <span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"br0\">(</span><span class=\"kw1\">define</span> <span class=\"br0\">(</span>task<span class=\"br0\">)</span><br/>\t<span class=\"br0\">(</span>for <span class=\"br0\">(</span><span class=\"br0\">(</span><span class=\"kw1\">f</span> machins<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\t<span class=\"br0\">(</span><span class=\"kw1\">if</span> <span class=\"br0\">(</span>~<span class=\"sy0\">=</span> <span class=\"nu0\">1</span> <span class=\"br0\">(</span>reduce <span class=\"kw1\">f</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\t\t<span class=\"br0\">(</span>writeln '\ud83d\udc4d <span class=\"kw1\">f</span>  '\u27fe <span class=\"nu0\">1</span> <span class=\"br0\">)</span><br/>\t\t<span class=\"br0\">(</span>writeln '\u274c <span class=\"kw1\">f</span> '\u27bd <span class=\"br0\">(</span>reduce <span class=\"kw1\">f</span><span class=\"br0\">)</span> <span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\u00a0<br/>\u00a0</pre>"}, {"lang": "FreeBASIC", "loc": 153, "block": "<pre class=\"freebasic highlighted_source\"><span class=\"co1\">' version 07-04-2018</span><br/><span class=\"co1\">' compile with: fbc -s console</span><br/>\u00a0<br/><span class=\"co2\">#Include \"gmp.bi\"</span><br/>\u00a0<br/><span class=\"co2\">#Define _a(Q) (@(Q)-&gt;_mp_num)  'a</span><br/><span class=\"co2\">#Define _b(Q) (@(Q)-&gt;_mp_den)  'b</span><br/>\u00a0<br/><span class=\"kw1\">Data</span> <span class=\"st0\">\"[1, 1, 2] [1, 1, 3]\"</span><br/><span class=\"kw1\">Data</span> <span class=\"st0\">\"[2, 1, 3] [1, 1, 7]\"</span><br/><span class=\"kw1\">Data</span> <span class=\"st0\">\"[4, 1, 5] [-1, 1, 239]\"</span><br/><span class=\"kw1\">Data</span> <span class=\"st0\">\"[5, 1, 7] [2, 3, 79]\"</span><br/><span class=\"kw1\">Data</span> <span class=\"st0\">\"[1, 1, 2] [1, 1, 5] [1, 1, 8]\"</span><br/><span class=\"kw1\">Data</span> <span class=\"st0\">\"[4, 1, 5] [-1, 1, 70] [1, 1, 99]\"</span><br/><span class=\"kw1\">Data</span> <span class=\"st0\">\"[5, 1, 7] [4, 1, 53] [2, 1, 4443]\"</span><br/><span class=\"kw1\">Data</span> <span class=\"st0\">\"[6, 1, 8] [2, 1, 57] [1, 1, 239]\"</span><br/><span class=\"kw1\">Data</span> <span class=\"st0\">\"[8, 1, 10] [-1, 1, 239] [-4, 1, 515]\"</span><br/><span class=\"kw1\">Data</span> <span class=\"st0\">\"[12, 1, 18] [8, 1, 57] [-5, 1, 239]\"</span><br/><span class=\"kw1\">Data</span> <span class=\"st0\">\"[16, 1, 21] [3, 1, 239] [4, 3, 1042]\"</span><br/><span class=\"kw1\">Data</span> <span class=\"st0\">\"[22, 1, 28] [2, 1, 443] [-5, 1, 1393] [-10, 1, 11018]\"</span><br/><span class=\"kw1\">Data</span> <span class=\"st0\">\"[22, 1, 38] [17, 7, 601] [10, 7, 8149]\"</span><br/><span class=\"kw1\">Data</span> <span class=\"st0\">\"[44, 1, 57] [7, 1, 239] [-12, 1, 682] [24, 1, 12943]\"</span><br/><span class=\"kw1\">Data</span> <span class=\"st0\">\"[88, 1, 172] [51, 1, 239] [32, 1, 682] [44, 1, 5357] [68, 1, 12943]\"</span><br/><span class=\"kw1\">Data</span> <span class=\"st0\">\"[88, 1, 172] [51, 1, 239] [32, 1, 682] [44, 1, 5357] [68, 1, 12944]\"</span><br/><span class=\"kw1\">Data</span> <span class=\"st0\">\"\"</span><br/>\u00a0<br/><span class=\"kw1\">Sub</span> work2do <span class=\"br0\">(</span><span class=\"kw1\">ByRef</span> a <span class=\"kw1\">As</span> <span class=\"kw1\">LongInt</span>, f1 <span class=\"kw1\">As</span> mpq_ptr<span class=\"br0\">)</span><br/>\u00a0<br/>    <span class=\"kw1\">Dim</span> <span class=\"kw1\">As</span> <span class=\"kw1\">LongInt</span> flag = -<span class=\"nu0\">1</span><br/>\u00a0<br/>    <span class=\"kw1\">Dim</span> <span class=\"kw1\">As</span> Mpq_ptr x, y, z<br/>    x = Allocate<span class=\"br0\">(</span><span class=\"kw1\">Len</span><span class=\"br0\">(</span>__mpq_struct<span class=\"br0\">)</span><span class=\"br0\">)</span>\u00a0: Mpq_init<span class=\"br0\">(</span>x<span class=\"br0\">)</span><br/>    y = Allocate<span class=\"br0\">(</span><span class=\"kw1\">Len</span><span class=\"br0\">(</span>__mpq_struct<span class=\"br0\">)</span><span class=\"br0\">)</span>\u00a0: Mpq_init<span class=\"br0\">(</span>y<span class=\"br0\">)</span><br/>    z = Allocate<span class=\"br0\">(</span><span class=\"kw1\">Len</span><span class=\"br0\">(</span>__mpq_struct<span class=\"br0\">)</span><span class=\"br0\">)</span>\u00a0: Mpq_init<span class=\"br0\">(</span>z<span class=\"br0\">)</span><br/>\u00a0<br/>    <span class=\"kw1\">Dim</span> <span class=\"kw1\">As</span> Mpz_ptr temp1, temp2<br/>    temp1 = Allocate<span class=\"br0\">(</span><span class=\"kw1\">Len</span><span class=\"br0\">(</span>__Mpz_struct<span class=\"br0\">)</span><span class=\"br0\">)</span>\u00a0: Mpz_init<span class=\"br0\">(</span>temp1<span class=\"br0\">)</span><br/>    temp2 = Allocate<span class=\"br0\">(</span><span class=\"kw1\">Len</span><span class=\"br0\">(</span>__Mpz_struct<span class=\"br0\">)</span><span class=\"br0\">)</span>\u00a0: Mpz_init<span class=\"br0\">(</span>temp2<span class=\"br0\">)</span><br/>\u00a0<br/>    mpq_set<span class=\"br0\">(</span>y, f1<span class=\"br0\">)</span><br/>\u00a0<br/>    <span class=\"kw1\">While</span> a &gt; <span class=\"nu0\">0</span><br/>        <span class=\"kw1\">If</span> <span class=\"br0\">(</span>a And <span class=\"nu0\">1</span><span class=\"br0\">)</span> = <span class=\"nu0\">1</span> <span class=\"kw1\">Then</span><br/>            <span class=\"kw1\">If</span> flag = -<span class=\"nu0\">1</span> <span class=\"kw1\">Then</span><br/>                mpq_set<span class=\"br0\">(</span>x, y<span class=\"br0\">)</span><br/>                flag = <span class=\"nu0\">0</span><br/>            <span class=\"kw1\">Else</span><br/>                Mpz_mul<span class=\"br0\">(</span>temp1, _a<span class=\"br0\">(</span>x<span class=\"br0\">)</span>, _b<span class=\"br0\">(</span>y<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>                Mpz_mul<span class=\"br0\">(</span>temp2, _b<span class=\"br0\">(</span>x<span class=\"br0\">)</span>, _a<span class=\"br0\">(</span>y<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>                Mpz_add<span class=\"br0\">(</span>_a<span class=\"br0\">(</span>z<span class=\"br0\">)</span>, temp1, temp2<span class=\"br0\">)</span><br/>                Mpz_mul<span class=\"br0\">(</span>temp1, _b<span class=\"br0\">(</span>x<span class=\"br0\">)</span>, _b<span class=\"br0\">(</span>y<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>                Mpz_mul<span class=\"br0\">(</span>temp2, _a<span class=\"br0\">(</span>x<span class=\"br0\">)</span>, _a<span class=\"br0\">(</span>y<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>                Mpz_sub<span class=\"br0\">(</span>_b<span class=\"br0\">(</span>z<span class=\"br0\">)</span>, temp1, temp2<span class=\"br0\">)</span><br/>                mpq_canonicalize<span class=\"br0\">(</span>z<span class=\"br0\">)</span><br/>                mpq_set<span class=\"br0\">(</span>x, z<span class=\"br0\">)</span><br/>            <span class=\"kw1\">End</span> <span class=\"kw1\">If</span><br/>        <span class=\"kw1\">End</span> <span class=\"kw1\">If</span><br/>\u00a0<br/>        Mpz_mul<span class=\"br0\">(</span>temp1, _a<span class=\"br0\">(</span>y<span class=\"br0\">)</span>, _b<span class=\"br0\">(</span>y<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>        Mpz_mul<span class=\"br0\">(</span>temp2, _b<span class=\"br0\">(</span>y<span class=\"br0\">)</span>, _a<span class=\"br0\">(</span>y<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>        Mpz_add<span class=\"br0\">(</span>_a<span class=\"br0\">(</span>z<span class=\"br0\">)</span>, temp1, temp2<span class=\"br0\">)</span><br/>        Mpz_mul<span class=\"br0\">(</span>temp1, _b<span class=\"br0\">(</span>y<span class=\"br0\">)</span>, _b<span class=\"br0\">(</span>y<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>        Mpz_mul<span class=\"br0\">(</span>temp2, _a<span class=\"br0\">(</span>y<span class=\"br0\">)</span>, _a<span class=\"br0\">(</span>y<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>        Mpz_sub<span class=\"br0\">(</span>_b<span class=\"br0\">(</span>z<span class=\"br0\">)</span>, temp1, temp2<span class=\"br0\">)</span><br/>        mpq_canonicalize<span class=\"br0\">(</span>z<span class=\"br0\">)</span><br/>        mpq_set<span class=\"br0\">(</span>y, z<span class=\"br0\">)</span><br/>\u00a0<br/>        a = a <span class=\"kw1\">Shr</span> <span class=\"nu0\">1</span><br/>    <span class=\"kw1\">Wend</span><br/>\u00a0<br/>    mpq_set<span class=\"br0\">(</span>f1, x<span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"kw1\">End</span> <span class=\"kw1\">Sub</span><br/>\u00a0<br/><span class=\"co1\">' ------=&lt; MAIN &gt;=------</span><br/>\u00a0<br/><span class=\"kw1\">Dim</span> <span class=\"kw1\">As</span> Mpq_ptr f1, f2, f3<br/>f1 = Allocate<span class=\"br0\">(</span><span class=\"kw1\">Len</span><span class=\"br0\">(</span>__mpq_struct<span class=\"br0\">)</span><span class=\"br0\">)</span>\u00a0: Mpq_init<span class=\"br0\">(</span>f1<span class=\"br0\">)</span><br/>f2 = Allocate<span class=\"br0\">(</span><span class=\"kw1\">Len</span><span class=\"br0\">(</span>__mpq_struct<span class=\"br0\">)</span><span class=\"br0\">)</span>\u00a0: Mpq_init<span class=\"br0\">(</span>f2<span class=\"br0\">)</span><br/>f3 = Allocate<span class=\"br0\">(</span><span class=\"kw1\">Len</span><span class=\"br0\">(</span>__mpq_struct<span class=\"br0\">)</span><span class=\"br0\">)</span>\u00a0: Mpq_init<span class=\"br0\">(</span>f3<span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"kw1\">Dim</span> <span class=\"kw1\">As</span> Mpz_ptr temp1, temp2<br/>temp1 = Allocate<span class=\"br0\">(</span><span class=\"kw1\">Len</span><span class=\"br0\">(</span>__Mpz_struct<span class=\"br0\">)</span><span class=\"br0\">)</span>\u00a0: Mpz_init<span class=\"br0\">(</span>temp1<span class=\"br0\">)</span><br/>temp2 = Allocate<span class=\"br0\">(</span><span class=\"kw1\">Len</span><span class=\"br0\">(</span>__Mpz_struct<span class=\"br0\">)</span><span class=\"br0\">)</span>\u00a0: Mpz_init<span class=\"br0\">(</span>temp2<span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"kw1\">Dim</span> <span class=\"kw1\">As</span> mpf_ptr float<br/>float = Allocate<span class=\"br0\">(</span><span class=\"kw1\">Len</span><span class=\"br0\">(</span>__mpf_struct<span class=\"br0\">)</span><span class=\"br0\">)</span>\u00a0: Mpf_init<span class=\"br0\">(</span>float<span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"kw1\">Dim</span> <span class=\"kw1\">As</span> <span class=\"kw1\">LongInt</span> m1, a1, b1, flag, t1, t2, t3, t4<br/><span class=\"kw1\">Dim</span> <span class=\"kw1\">As</span> <span class=\"kw1\">String</span> s, s1, s2, s3, sign<br/><span class=\"kw1\">Dim</span> <span class=\"kw1\">As</span> <span class=\"kw1\">ZString</span> <span class=\"kw1\">Ptr</span> zstr<br/>\u00a0<br/><span class=\"kw1\">Do</span><br/>\u00a0<br/>    <span class=\"kw1\">Read</span> s<br/>    <span class=\"kw1\">If</span> s = <span class=\"st0\">\"\"</span> <span class=\"kw1\">Then</span> <span class=\"kw1\">Exit</span> <span class=\"kw1\">Do</span><br/>    flag = -<span class=\"nu0\">1</span><br/>\u00a0<br/>    <span class=\"kw1\">While</span> s &lt;&gt; <span class=\"st0\">\"\"</span><br/>        t1 = <span class=\"kw1\">InStr</span><span class=\"br0\">(</span>s, <span class=\"st0\">\"[\"</span><span class=\"br0\">)</span> +<span class=\"nu0\">1</span><br/>        t2 = <span class=\"kw1\">InStr</span><span class=\"br0\">(</span>t1, s, <span class=\"st0\">\",\"</span><span class=\"br0\">)</span> +<span class=\"nu0\">1</span><br/>        t3 = <span class=\"kw1\">InStr</span><span class=\"br0\">(</span>t2, s, <span class=\"st0\">\",\"</span><span class=\"br0\">)</span> +<span class=\"nu0\">1</span><br/>        t4 = <span class=\"kw1\">InStr</span><span class=\"br0\">(</span>t3, s, <span class=\"st0\">\"]\"</span><span class=\"br0\">)</span><br/>        s1 = <span class=\"kw1\">Trim</span><span class=\"br0\">(</span><span class=\"kw1\">Mid</span><span class=\"br0\">(</span>s, t1, t2 - t1 -<span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>        s2 = <span class=\"kw1\">Trim</span><span class=\"br0\">(</span><span class=\"kw1\">Mid</span><span class=\"br0\">(</span>s, t2, t3 - t2 -<span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>        s3 = <span class=\"kw1\">Trim</span><span class=\"br0\">(</span><span class=\"kw1\">Mid</span><span class=\"br0\">(</span>s, t3, t4 - t3<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>        m1 = <span class=\"kw1\">Val</span><span class=\"br0\">(</span>s1<span class=\"br0\">)</span><br/>        a1 = <span class=\"kw1\">Val</span><span class=\"br0\">(</span>s2<span class=\"br0\">)</span><br/>        b1 = <span class=\"kw1\">Val</span><span class=\"br0\">(</span>s3<span class=\"br0\">)</span><br/>\u00a0<br/>        sign = <span class=\"kw1\">IIf</span><span class=\"br0\">(</span>m1 &lt; <span class=\"nu0\">0</span>, <span class=\"st0\">\" - \"</span>, <span class=\"st0\">\" + \"</span><span class=\"br0\">)</span><br/>        <span class=\"kw1\">If</span> m1 &lt; <span class=\"nu0\">0</span> <span class=\"kw1\">Then</span> a1 = -a1\u00a0: m1 = Abs<span class=\"br0\">(</span>m1<span class=\"br0\">)</span><br/>        s = <span class=\"kw1\">Mid</span><span class=\"br0\">(</span>s, t4 +<span class=\"nu0\">1</span><span class=\"br0\">)</span><br/>        <span class=\"kw1\">Print</span> <span class=\"kw1\">IIf</span><span class=\"br0\">(</span>flag = <span class=\"nu0\">0</span>, sign, <span class=\"st0\">\"\"</span><span class=\"br0\">)</span>; <span class=\"kw1\">IIf</span><span class=\"br0\">(</span>m1 = <span class=\"nu0\">1</span>, <span class=\"st0\">\"\"</span>, <span class=\"kw1\">Str</span><span class=\"br0\">(</span>m1<span class=\"br0\">)</span><span class=\"br0\">)</span>;<br/>        <span class=\"kw1\">Print</span> <span class=\"st0\">\"Atn(\"</span>; s2; <span class=\"st0\">\"/\"</span>\u00a0;s3; <span class=\"st0\">\")\"</span>;<br/>\u00a0<br/>        <span class=\"kw1\">If</span> flag = -<span class=\"nu0\">1</span> <span class=\"kw1\">Then</span><br/>            flag = <span class=\"nu0\">0</span><br/>            Mpz_set_si<span class=\"br0\">(</span>_a<span class=\"br0\">(</span>f1<span class=\"br0\">)</span>, a1<span class=\"br0\">)</span><br/>            Mpz_set_si<span class=\"br0\">(</span>_b<span class=\"br0\">(</span>f1<span class=\"br0\">)</span>, b1<span class=\"br0\">)</span><br/>            <span class=\"kw1\">If</span> m1 &gt; <span class=\"nu0\">1</span> <span class=\"kw1\">Then</span> work2do<span class=\"br0\">(</span>m1, f1<span class=\"br0\">)</span><br/>            <span class=\"kw1\">Continue</span> <span class=\"kw1\">While</span><br/>        <span class=\"kw1\">End</span> <span class=\"kw1\">If</span><br/>\u00a0<br/>        Mpz_set_si<span class=\"br0\">(</span>_a<span class=\"br0\">(</span>f2<span class=\"br0\">)</span>, a1<span class=\"br0\">)</span><br/>        Mpz_set_si<span class=\"br0\">(</span>_b<span class=\"br0\">(</span>f2<span class=\"br0\">)</span>, b1<span class=\"br0\">)</span><br/>        <span class=\"kw1\">If</span> m1 &gt; <span class=\"nu0\">1</span> <span class=\"kw1\">Then</span> work2do<span class=\"br0\">(</span>m1, f2<span class=\"br0\">)</span><br/>\u00a0<br/>        Mpz_mul<span class=\"br0\">(</span>temp1, _a<span class=\"br0\">(</span>f1<span class=\"br0\">)</span>, _b<span class=\"br0\">(</span>f2<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>        Mpz_mul<span class=\"br0\">(</span>temp2, _b<span class=\"br0\">(</span>f1<span class=\"br0\">)</span>, _a<span class=\"br0\">(</span>f2<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>        Mpz_add<span class=\"br0\">(</span>_a<span class=\"br0\">(</span>f3<span class=\"br0\">)</span>, temp1, temp2<span class=\"br0\">)</span><br/>        Mpz_mul<span class=\"br0\">(</span>temp1, _b<span class=\"br0\">(</span>f1<span class=\"br0\">)</span>, _b<span class=\"br0\">(</span>f2<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>        Mpz_mul<span class=\"br0\">(</span>temp2, _a<span class=\"br0\">(</span>f1<span class=\"br0\">)</span>, _a<span class=\"br0\">(</span>f2<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>        Mpz_sub<span class=\"br0\">(</span>_b<span class=\"br0\">(</span>f3<span class=\"br0\">)</span>, temp1, temp2<span class=\"br0\">)</span><br/>        mpq_canonicalize<span class=\"br0\">(</span>f3<span class=\"br0\">)</span><br/>        mpq_set<span class=\"br0\">(</span>f1, f3<span class=\"br0\">)</span><br/>\u00a0<br/>    <span class=\"kw1\">Wend</span><br/>\u00a0<br/>    <span class=\"kw1\">If</span> Mpz_cmp_ui<span class=\"br0\">(</span>_b<span class=\"br0\">(</span>f1<span class=\"br0\">)</span>, <span class=\"nu0\">1</span><span class=\"br0\">)</span> = <span class=\"nu0\">0</span> AndAlso Mpz_cmp<span class=\"br0\">(</span>_a<span class=\"br0\">(</span>f1<span class=\"br0\">)</span>, _b<span class=\"br0\">(</span>f1<span class=\"br0\">)</span><span class=\"br0\">)</span> = <span class=\"nu0\">0</span> <span class=\"kw1\">Then</span><br/>        <span class=\"kw1\">Print</span> <span class=\"st0\">\" = 1\"</span><br/>    <span class=\"kw1\">Else</span><br/>        Mpf_set_q<span class=\"br0\">(</span>float, f1<span class=\"br0\">)</span><br/>        gmp_printf<span class=\"br0\">(</span>!<span class=\"st0\">\" =\u00a0%.*Ff<span class=\"es0\">\\n</span>\"</span>, <span class=\"nu0\">15</span>, float<span class=\"br0\">)</span><br/>    <span class=\"kw1\">End</span> <span class=\"kw1\">If</span><br/>\u00a0<br/><span class=\"kw1\">Loop</span><br/>\u00a0<br/><span class=\"co1\">' empty keyboard buffer</span><br/><span class=\"kw1\">While</span> <span class=\"kw1\">InKey</span> &lt;&gt; <span class=\"st0\">\"\"</span>\u00a0: <span class=\"kw1\">Wend</span><br/><span class=\"kw1\">Print</span>\u00a0: <span class=\"kw1\">Print</span> <span class=\"st0\">\"hit any key to end program\"</span><br/><span class=\"kw1\">Sleep</span><br/><span class=\"kw1\">End</span></pre>"}, {"lang": "GAP", "loc": 44, "block": "<pre class=\"text highlighted_source\">TanPlus\u00a0:= function(a, b)<br/>    return (a + b) / (1 - a * b);<br/>end;<br/>\u00a0<br/>TanTimes\u00a0:= function(n, a)<br/>    local x;<br/>    x\u00a0:= 0;<br/>    while n &gt; 0 do<br/>        if IsOddInt(n) then<br/>            x\u00a0:= TanPlus(x, a);<br/>        fi;<br/>        a\u00a0:= TanPlus(a, a);<br/>        n\u00a0:= QuoInt(n, 2);<br/>    od;<br/>    return x;<br/>end;<br/>\u00a0<br/>Check\u00a0:= function(a)<br/>    local x, p;<br/>    x\u00a0:= 0;<br/>    for p in a do<br/>        x\u00a0:= TanPlus(x, SignInt(p[1]) * TanTimes(AbsInt(p[1]), p[2]));<br/>    od;<br/>    return x = 1;<br/>end;<br/>\u00a0<br/>ForAll([<br/>    [[1, 1/2], [1, 1/3]],<br/>    [[2, 1/3], [1, 1/7]],<br/>    [[4, 1/5], [-1, 1/239]],<br/>    [[5, 1/7], [2, 3/79]],<br/>    [[5, 29/278], [7, 3/79]],<br/>    [[1, 1/2], [1, 1/5], [1, 1/8]],<br/>    [[5, 1/7], [4, 1/53], [2, 1/4443]],<br/>    [[6, 1/8], [2, 1/57], [1, 1/239]],<br/>    [[8, 1/10], [-1, 1/239], [-4, 1/515]],<br/>    [[12, 1/18], [8, 1/57], [-5, 1/239]],<br/>    [[16, 1/21], [3, 1/239], [4, 3/1042]],<br/>    [[22, 1/28], [2, 1/443], [-5, 1/1393], [-10, 1/11018]],<br/>    [[22, 1/38], [17, 7/601], [10, 7/8149]],<br/>    [[44, 1/57], [7, 1/239], [-12, 1/682], [24, 1/12943]],<br/>    [[88, 1/172], [51, 1/239], [32, 1/682], [44, 1/5357], [68, 1/12943]]], Check);<br/>\u00a0<br/>Check([[88, 1/172], [51, 1/239], [32, 1/682], [44, 1/5357], [68, 1/12944]]);</pre>"}, {"lang": "Go", "loc": 64, "block": "<pre class=\"go highlighted_source\"><span class=\"kw1\">package</span> main<br/>\u00a0<br/><span class=\"kw1\">import</span> <span class=\"sy1\">(</span><br/>    <span class=\"st0\">\"fmt\"</span><br/>    <span class=\"st0\">\"math/big\"</span><br/><span class=\"sy1\">)</span><br/>\u00a0<br/><span class=\"kw1\">type</span> mTerm <span class=\"kw4\">struct</span> <span class=\"sy1\">{</span><br/>    a<span class=\"sy1\">,</span> n<span class=\"sy1\">,</span> d <span class=\"kw4\">int64</span><br/><span class=\"sy1\">}</span><br/>\u00a0<br/><span class=\"kw1\">var</span> testCases <span class=\"sy2\">=</span> <span class=\"sy1\">[][]</span>mTerm<span class=\"sy1\">{</span><br/>    <span class=\"sy1\">{{</span><span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">2</span><span class=\"sy1\">},</span> <span class=\"sy1\">{</span><span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">3</span><span class=\"sy1\">}},</span><br/>    <span class=\"sy1\">{{</span><span class=\"nu0\">2</span><span class=\"sy1\">,</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">3</span><span class=\"sy1\">},</span> <span class=\"sy1\">{</span><span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">7</span><span class=\"sy1\">}},</span><br/>    <span class=\"sy1\">{{</span><span class=\"nu0\">4</span><span class=\"sy1\">,</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">5</span><span class=\"sy1\">},</span> <span class=\"sy1\">{</span><span class=\"sy3\">-</span><span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">239</span><span class=\"sy1\">}},</span><br/>    <span class=\"sy1\">{{</span><span class=\"nu0\">5</span><span class=\"sy1\">,</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">7</span><span class=\"sy1\">},</span> <span class=\"sy1\">{</span><span class=\"nu0\">2</span><span class=\"sy1\">,</span> <span class=\"nu0\">3</span><span class=\"sy1\">,</span> <span class=\"nu0\">79</span><span class=\"sy1\">}},</span><br/>    <span class=\"sy1\">{{</span><span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">2</span><span class=\"sy1\">},</span> <span class=\"sy1\">{</span><span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">5</span><span class=\"sy1\">},</span> <span class=\"sy1\">{</span><span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">8</span><span class=\"sy1\">}},</span><br/>    <span class=\"sy1\">{{</span><span class=\"nu0\">4</span><span class=\"sy1\">,</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">5</span><span class=\"sy1\">},</span> <span class=\"sy1\">{</span><span class=\"sy3\">-</span><span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">70</span><span class=\"sy1\">},</span> <span class=\"sy1\">{</span><span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">99</span><span class=\"sy1\">}},</span><br/>    <span class=\"sy1\">{{</span><span class=\"nu0\">5</span><span class=\"sy1\">,</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">7</span><span class=\"sy1\">},</span> <span class=\"sy1\">{</span><span class=\"nu0\">4</span><span class=\"sy1\">,</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">53</span><span class=\"sy1\">},</span> <span class=\"sy1\">{</span><span class=\"nu0\">2</span><span class=\"sy1\">,</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">4443</span><span class=\"sy1\">}},</span><br/>    <span class=\"sy1\">{{</span><span class=\"nu0\">6</span><span class=\"sy1\">,</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">8</span><span class=\"sy1\">},</span> <span class=\"sy1\">{</span><span class=\"nu0\">2</span><span class=\"sy1\">,</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">57</span><span class=\"sy1\">},</span> <span class=\"sy1\">{</span><span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">239</span><span class=\"sy1\">}},</span><br/>    <span class=\"sy1\">{{</span><span class=\"nu0\">8</span><span class=\"sy1\">,</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">10</span><span class=\"sy1\">},</span> <span class=\"sy1\">{</span><span class=\"sy3\">-</span><span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">239</span><span class=\"sy1\">},</span> <span class=\"sy1\">{</span><span class=\"sy3\">-</span><span class=\"nu0\">4</span><span class=\"sy1\">,</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">515</span><span class=\"sy1\">}},</span><br/>    <span class=\"sy1\">{{</span><span class=\"nu0\">12</span><span class=\"sy1\">,</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">18</span><span class=\"sy1\">},</span> <span class=\"sy1\">{</span><span class=\"nu0\">8</span><span class=\"sy1\">,</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">57</span><span class=\"sy1\">},</span> <span class=\"sy1\">{</span><span class=\"sy3\">-</span><span class=\"nu0\">5</span><span class=\"sy1\">,</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">239</span><span class=\"sy1\">}},</span><br/>    <span class=\"sy1\">{{</span><span class=\"nu0\">16</span><span class=\"sy1\">,</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">21</span><span class=\"sy1\">},</span> <span class=\"sy1\">{</span><span class=\"nu0\">3</span><span class=\"sy1\">,</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">239</span><span class=\"sy1\">},</span> <span class=\"sy1\">{</span><span class=\"nu0\">4</span><span class=\"sy1\">,</span> <span class=\"nu0\">3</span><span class=\"sy1\">,</span> <span class=\"nu0\">1042</span><span class=\"sy1\">}},</span><br/>    <span class=\"sy1\">{{</span><span class=\"nu0\">22</span><span class=\"sy1\">,</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">28</span><span class=\"sy1\">},</span> <span class=\"sy1\">{</span><span class=\"nu0\">2</span><span class=\"sy1\">,</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">443</span><span class=\"sy1\">},</span> <span class=\"sy1\">{</span><span class=\"sy3\">-</span><span class=\"nu0\">5</span><span class=\"sy1\">,</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">1393</span><span class=\"sy1\">},</span> <span class=\"sy1\">{</span><span class=\"sy3\">-</span><span class=\"nu0\">10</span><span class=\"sy1\">,</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">11018</span><span class=\"sy1\">}},</span><br/>    <span class=\"sy1\">{{</span><span class=\"nu0\">22</span><span class=\"sy1\">,</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">38</span><span class=\"sy1\">},</span> <span class=\"sy1\">{</span><span class=\"nu0\">17</span><span class=\"sy1\">,</span> <span class=\"nu0\">7</span><span class=\"sy1\">,</span> <span class=\"nu0\">601</span><span class=\"sy1\">},</span> <span class=\"sy1\">{</span><span class=\"nu0\">10</span><span class=\"sy1\">,</span> <span class=\"nu0\">7</span><span class=\"sy1\">,</span> <span class=\"nu0\">8149</span><span class=\"sy1\">}},</span><br/>    <span class=\"sy1\">{{</span><span class=\"nu0\">44</span><span class=\"sy1\">,</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">57</span><span class=\"sy1\">},</span> <span class=\"sy1\">{</span><span class=\"nu0\">7</span><span class=\"sy1\">,</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">239</span><span class=\"sy1\">},</span> <span class=\"sy1\">{</span><span class=\"sy3\">-</span><span class=\"nu0\">12</span><span class=\"sy1\">,</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">682</span><span class=\"sy1\">},</span> <span class=\"sy1\">{</span><span class=\"nu0\">24</span><span class=\"sy1\">,</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">12943</span><span class=\"sy1\">}},</span><br/>    <span class=\"sy1\">{{</span><span class=\"nu0\">88</span><span class=\"sy1\">,</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">172</span><span class=\"sy1\">},</span> <span class=\"sy1\">{</span><span class=\"nu0\">51</span><span class=\"sy1\">,</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">239</span><span class=\"sy1\">},</span> <span class=\"sy1\">{</span><span class=\"nu0\">32</span><span class=\"sy1\">,</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">682</span><span class=\"sy1\">},</span> <span class=\"sy1\">{</span><span class=\"nu0\">44</span><span class=\"sy1\">,</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">5357</span><span class=\"sy1\">},</span> <span class=\"sy1\">{</span><span class=\"nu0\">68</span><span class=\"sy1\">,</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">12943</span><span class=\"sy1\">}},</span><br/>    <span class=\"sy1\">{{</span><span class=\"nu0\">88</span><span class=\"sy1\">,</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">172</span><span class=\"sy1\">},</span> <span class=\"sy1\">{</span><span class=\"nu0\">51</span><span class=\"sy1\">,</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">239</span><span class=\"sy1\">},</span> <span class=\"sy1\">{</span><span class=\"nu0\">32</span><span class=\"sy1\">,</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">682</span><span class=\"sy1\">},</span> <span class=\"sy1\">{</span><span class=\"nu0\">44</span><span class=\"sy1\">,</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">5357</span><span class=\"sy1\">},</span> <span class=\"sy1\">{</span><span class=\"nu0\">68</span><span class=\"sy1\">,</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">12944</span><span class=\"sy1\">}},</span><br/><span class=\"sy1\">}</span><br/>\u00a0<br/><span class=\"kw4\">func</span> main<span class=\"sy1\">()</span> <span class=\"sy1\">{</span><br/>    <span class=\"kw1\">for</span> _<span class=\"sy1\">,</span> m <span class=\"sy2\">:=</span> <span class=\"kw1\">range</span> testCases <span class=\"sy1\">{</span><br/>        fmt<span class=\"sy3\">.</span>Printf<span class=\"sy1\">(</span><span class=\"st0\">\"tan\u00a0%v =\u00a0%v<span class=\"es1\">\\n</span>\"</span><span class=\"sy1\">,</span> m<span class=\"sy1\">,</span> tans<span class=\"sy1\">(</span>m<span class=\"sy1\">))</span><br/>    <span class=\"sy1\">}</span><br/><span class=\"sy1\">}</span><br/>\u00a0<br/><span class=\"kw1\">var</span> one <span class=\"sy2\">=</span> big<span class=\"sy3\">.</span>NewRat<span class=\"sy1\">(</span><span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"nu0\">1</span><span class=\"sy1\">)</span><br/>\u00a0<br/><span class=\"kw4\">func</span> tans<span class=\"sy1\">(</span>m <span class=\"sy1\">[]</span>mTerm<span class=\"sy1\">)</span> <span class=\"sy3\">*</span>big<span class=\"sy3\">.</span>Rat <span class=\"sy1\">{</span><br/>    <span class=\"kw1\">if</span> <span class=\"kw3\">len</span><span class=\"sy1\">(</span>m<span class=\"sy1\">)</span> <span class=\"sy3\">==</span> <span class=\"nu0\">1</span> <span class=\"sy1\">{</span><br/>        <span class=\"kw1\">return</span> tanEval<span class=\"sy1\">(</span>m<span class=\"sy1\">[</span><span class=\"nu0\">0</span><span class=\"sy1\">]</span><span class=\"sy3\">.</span>a<span class=\"sy1\">,</span> big<span class=\"sy3\">.</span>NewRat<span class=\"sy1\">(</span>m<span class=\"sy1\">[</span><span class=\"nu0\">0</span><span class=\"sy1\">]</span><span class=\"sy3\">.</span>n<span class=\"sy1\">,</span> m<span class=\"sy1\">[</span><span class=\"nu0\">0</span><span class=\"sy1\">]</span><span class=\"sy3\">.</span>d<span class=\"sy1\">))</span><br/>    <span class=\"sy1\">}</span><br/>    half <span class=\"sy2\">:=</span> <span class=\"kw3\">len</span><span class=\"sy1\">(</span>m<span class=\"sy1\">)</span> <span class=\"sy3\">/</span> <span class=\"nu0\">2</span><br/>    a <span class=\"sy2\">:=</span> tans<span class=\"sy1\">(</span>m<span class=\"sy1\">[:</span>half<span class=\"sy1\">])</span><br/>    b <span class=\"sy2\">:=</span> tans<span class=\"sy1\">(</span>m<span class=\"sy1\">[</span>half<span class=\"sy1\">:])</span><br/>    r <span class=\"sy2\">:=</span> <span class=\"kw3\">new</span><span class=\"sy1\">(</span>big<span class=\"sy3\">.</span>Rat<span class=\"sy1\">)</span><br/>    <span class=\"kw1\">return</span> r<span class=\"sy3\">.</span>Quo<span class=\"sy1\">(</span><span class=\"kw3\">new</span><span class=\"sy1\">(</span>big<span class=\"sy3\">.</span>Rat<span class=\"sy1\">)</span><span class=\"sy3\">.</span>Add<span class=\"sy1\">(</span>a<span class=\"sy1\">,</span> b<span class=\"sy1\">),</span> r<span class=\"sy3\">.</span>Sub<span class=\"sy1\">(</span>one<span class=\"sy1\">,</span> r<span class=\"sy3\">.</span>Mul<span class=\"sy1\">(</span>a<span class=\"sy1\">,</span> b<span class=\"sy1\">)))</span><br/><span class=\"sy1\">}</span><br/>\u00a0<br/><span class=\"kw4\">func</span> tanEval<span class=\"sy1\">(</span>coef <span class=\"kw4\">int64</span><span class=\"sy1\">,</span> f <span class=\"sy3\">*</span>big<span class=\"sy3\">.</span>Rat<span class=\"sy1\">)</span> <span class=\"sy3\">*</span>big<span class=\"sy3\">.</span>Rat <span class=\"sy1\">{</span><br/>    <span class=\"kw1\">if</span> coef <span class=\"sy3\">==</span> <span class=\"nu0\">1</span> <span class=\"sy1\">{</span><br/>        <span class=\"kw1\">return</span> f<br/>    <span class=\"sy1\">}</span><br/>    <span class=\"kw1\">if</span> coef &lt; <span class=\"nu0\">0</span> <span class=\"sy1\">{</span><br/>        r <span class=\"sy2\">:=</span> tanEval<span class=\"sy1\">(</span><span class=\"sy3\">-</span>coef<span class=\"sy1\">,</span> f<span class=\"sy1\">)</span><br/>        <span class=\"kw1\">return</span> r<span class=\"sy3\">.</span>Neg<span class=\"sy1\">(</span>r<span class=\"sy1\">)</span><br/>    <span class=\"sy1\">}</span><br/>    ca <span class=\"sy2\">:=</span> coef <span class=\"sy3\">/</span> <span class=\"nu0\">2</span><br/>    cb <span class=\"sy2\">:=</span> coef <span class=\"sy3\">-</span> ca<br/>    a <span class=\"sy2\">:=</span> tanEval<span class=\"sy1\">(</span>ca<span class=\"sy1\">,</span> f<span class=\"sy1\">)</span><br/>    b <span class=\"sy2\">:=</span> tanEval<span class=\"sy1\">(</span>cb<span class=\"sy1\">,</span> f<span class=\"sy1\">)</span><br/>    r <span class=\"sy2\">:=</span> <span class=\"kw3\">new</span><span class=\"sy1\">(</span>big<span class=\"sy3\">.</span>Rat<span class=\"sy1\">)</span><br/>    <span class=\"kw1\">return</span> r<span class=\"sy3\">.</span>Quo<span class=\"sy1\">(</span><span class=\"kw3\">new</span><span class=\"sy1\">(</span>big<span class=\"sy3\">.</span>Rat<span class=\"sy1\">)</span><span class=\"sy3\">.</span>Add<span class=\"sy1\">(</span>a<span class=\"sy1\">,</span> b<span class=\"sy1\">),</span> r<span class=\"sy3\">.</span>Sub<span class=\"sy1\">(</span>one<span class=\"sy1\">,</span> r<span class=\"sy3\">.</span>Mul<span class=\"sy1\">(</span>a<span class=\"sy1\">,</span> b<span class=\"sy1\">)))</span><br/><span class=\"sy1\">}</span></pre>"}, {"lang": "Haskell", "loc": 31, "block": "<pre class=\"haskell highlighted_source\"><span class=\"kw1\">import</span> Data<span class=\"sy0\">.</span>Ratio<br/><span class=\"kw1\">import</span> Data<span class=\"sy0\">.</span>List <span class=\"br0\">(</span><a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:foldl\"><span class=\"kw3\">foldl</span></a><span class=\"st0\">')<br/>\u00a0<br/>tanPlus\u00a0:: Fractional a =&gt; a -&gt; a -&gt; a<br/>tanPlus a b = (a + b) / (1 - a * b)<br/>\u00a0<br/>tanEval\u00a0:: (Integral a, Fractional b) =&gt; (a, b) -&gt; b<br/>tanEval (0,_) = 0<br/>tanEval (coef,f)<br/>\t| coef &lt; 0 = -tanEval (-coef, f)<br/>\t| odd coef = tanPlus f $ tanEval (coef - 1, f)<br/>\t| otherwise = tanPlus a a<br/>\t\twhere a = tanEval (coef `div` 2, f)<br/>\u00a0<br/>tans\u00a0:: (Integral a, Fractional b) =&gt; [(a, b)] -&gt; b<br/>tans = foldl'</span> tanPlus <span class=\"nu0\">0</span> <span class=\"sy0\">.</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:map\"><span class=\"kw3\">map</span></a> tanEval<br/>\u00a0<br/>machins <span class=\"sy0\">=</span> <span class=\"br0\">[</span><br/>\t<span class=\"br0\">[</span><span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">%</span>2<span class=\"br0\">)</span><span class=\"sy0\">,</span> <span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">%</span>3<span class=\"br0\">)</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><br/>\t<span class=\"br0\">[</span><span class=\"br0\">(</span><span class=\"nu0\">2</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">%</span>3<span class=\"br0\">)</span><span class=\"sy0\">,</span> <span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">%</span>7<span class=\"br0\">)</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><br/>\t<span class=\"br0\">[</span><span class=\"br0\">(</span><span class=\"nu0\">12</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">%</span>18<span class=\"br0\">)</span><span class=\"sy0\">,</span> <span class=\"br0\">(</span><span class=\"nu0\">8</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">%</span>57<span class=\"br0\">)</span><span class=\"sy0\">,</span> <span class=\"br0\">(</span><span class=\"sy0\">-</span><span class=\"nu0\">5</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">%</span>239<span class=\"br0\">)</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><br/>\t<span class=\"br0\">[</span><span class=\"br0\">(</span><span class=\"nu0\">88</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">%</span>172<span class=\"br0\">)</span><span class=\"sy0\">,</span> <span class=\"br0\">(</span><span class=\"nu0\">51</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">%</span>239<span class=\"br0\">)</span><span class=\"sy0\">,</span> <span class=\"br0\">(</span><span class=\"nu0\">32</span> <span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">%</span>682<span class=\"br0\">)</span><span class=\"sy0\">,</span> <span class=\"br0\">(</span><span class=\"nu0\">44</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">%</span>5357<span class=\"br0\">)</span><span class=\"sy0\">,</span> <span class=\"br0\">(</span><span class=\"nu0\">68</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">%</span>12943<span class=\"br0\">)</span><span class=\"br0\">]</span><span class=\"br0\">]</span><br/>\u00a0<br/>not<span class=\"sy0\">_</span>machin <span class=\"sy0\">=</span> <span class=\"br0\">[</span><span class=\"br0\">(</span><span class=\"nu0\">88</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">%</span>172<span class=\"br0\">)</span><span class=\"sy0\">,</span> <span class=\"br0\">(</span><span class=\"nu0\">51</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">%</span>239<span class=\"br0\">)</span><span class=\"sy0\">,</span> <span class=\"br0\">(</span><span class=\"nu0\">32</span> <span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">%</span>682<span class=\"br0\">)</span><span class=\"sy0\">,</span> <span class=\"br0\">(</span><span class=\"nu0\">44</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">%</span>5357<span class=\"br0\">)</span><span class=\"sy0\">,</span> <span class=\"br0\">(</span><span class=\"nu0\">68</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">%</span>12944<span class=\"br0\">)</span><span class=\"br0\">]</span><br/>\u00a0<br/>main <span class=\"sy0\">=</span> <span class=\"kw1\">do</span><br/>\t<a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:putStrLn\"><span class=\"kw3\">putStrLn</span></a> <span class=\"st0\">\"Machins:\"</span><br/>\t<a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:mapM_\"><span class=\"kw3\">mapM_</span></a> <span class=\"br0\">(</span>\\x <span class=\"sy0\">-&gt;</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:putStrLn\"><span class=\"kw3\">putStrLn</span></a> <span class=\"sy0\">$</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:show\"><span class=\"kw3\">show</span></a> <span class=\"br0\">(</span>tans x<span class=\"br0\">)</span> <span class=\"sy0\">++</span> <span class=\"st0\">\" &lt;-- \"</span> <span class=\"sy0\">++</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:show\"><span class=\"kw3\">show</span></a> x<span class=\"br0\">)</span> machins<br/>\u00a0<br/>\t<a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:putStr\"><span class=\"kw3\">putStr</span></a> <span class=\"st0\">\"<span class=\"es0\">\\n</span>not Machin: \"</span>; <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:print\"><span class=\"kw3\">print</span></a> not<span class=\"sy0\">_</span>machin<br/>\t<a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:print\"><span class=\"kw3\">print</span></a> <span class=\"br0\">(</span>tans not<span class=\"sy0\">_</span>machin<span class=\"br0\">)</span></pre>"}, {"lang": "J", "loc": 1, "block": "<pre class=\"j highlighted_source\">   machin =: <span class=\"nu0\">1r4p1</span> = [: +/ <span class=\"sy0\">(</span>{. * <span class=\"nu0\">_3</span> o.\u00a0%/@:}.<span class=\"sy0\">)</span>\"<span class=\"nu0\">1</span>@:x:</pre>"}, {"lang": "Kotlin", "loc": 132, "block": "<pre class=\"scala highlighted_source\"><span class=\"co1\">// version 1.1.3</span><br/>\u00a0<br/><a href=\"http://scala-lang.org\"><span class=\"kw1\">import</span></a> java.<span class=\"me1\">math</span>.<span class=\"me1\">BigInteger</span><br/>\u00a0<br/><a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> bigZero <span class=\"sy0\">=</span> BigInteger.<span class=\"me1\">ZERO</span><br/><a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> bigOne <span class=\"sy0\">=</span> BigInteger.<span class=\"me1\">ONE</span><br/>\u00a0<br/><a href=\"http://scala-lang.org\"><span class=\"kw1\">class</span></a> BigRational <span class=\"sy0\">:</span> Comparable<span class=\"sy0\">&lt;</span>BigRational<span class=\"sy0\">&gt;</span> <span class=\"br0\">{</span><br/>\u00a0<br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> num<span class=\"sy0\">:</span> BigInteger<br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> denom<span class=\"sy0\">:</span> BigInteger<br/>\u00a0<br/>    constructor<span class=\"br0\">(</span>n<span class=\"sy0\">:</span> BigInteger, d<span class=\"sy0\">:</span> BigInteger<span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>        require<span class=\"br0\">(</span>d <span class=\"sy0\">!=</span> bigZero<span class=\"br0\">)</span><br/>        <a href=\"http://scala-lang.org\"><span class=\"kw1\">var</span></a> nn <span class=\"sy0\">=</span> n<br/>        <a href=\"http://scala-lang.org\"><span class=\"kw1\">var</span></a> dd <span class=\"sy0\">=</span> d<br/>        <a href=\"http://scala-lang.org\"><span class=\"kw1\">if</span></a> <span class=\"br0\">(</span>nn <span class=\"sy0\">==</span> bigZero<span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>            dd <span class=\"sy0\">=</span> bigOne<br/>        <span class=\"br0\">}</span><br/>        <a href=\"http://scala-lang.org\"><span class=\"kw1\">else</span></a> <a href=\"http://scala-lang.org\"><span class=\"kw1\">if</span></a> <span class=\"br0\">(</span>dd <span class=\"sy0\">&lt;</span> bigZero<span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>            nn <span class=\"sy0\">=</span> -nn<br/>            dd <span class=\"sy0\">=</span> -dd<br/>        <span class=\"br0\">}</span> <br/>        <a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> g <span class=\"sy0\">=</span> nn.<span class=\"me1\">gcd</span><span class=\"br0\">(</span>dd<span class=\"br0\">)</span><br/>        <a href=\"http://scala-lang.org\"><span class=\"kw1\">if</span></a> <span class=\"br0\">(</span>g <span class=\"sy0\">&gt;</span> bigOne<span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>            nn /<span class=\"sy0\">=</span> g<br/>            dd /<span class=\"sy0\">=</span> g<br/>        <span class=\"br0\">}</span><br/>        num <span class=\"sy0\">=</span> nn<br/>        denom <span class=\"sy0\">=</span> dd<br/>    <span class=\"br0\">}</span><br/>\u00a0<br/>    constructor<span class=\"br0\">(</span>n<span class=\"sy0\">:</span> Long, d<span class=\"sy0\">:</span> Long<span class=\"br0\">)</span> <span class=\"sy0\">:</span> <a href=\"http://scala-lang.org\"><span class=\"kw1\">this</span></a><span class=\"br0\">(</span>BigInteger.<span class=\"me1\">valueOf</span><span class=\"br0\">(</span>n<span class=\"br0\">)</span>, BigInteger.<span class=\"me1\">valueOf</span><span class=\"br0\">(</span>d<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\u00a0<br/>    operator fun plus<span class=\"br0\">(</span>other<span class=\"sy0\">:</span> BigRational<span class=\"br0\">)</span> <span class=\"sy0\">=</span> <br/>        BigRational<span class=\"br0\">(</span>num <span class=\"sy0\">*</span> other.<span class=\"me1\">denom</span> + denom <span class=\"sy0\">*</span> other.<span class=\"me1\">num</span>, other.<span class=\"me1\">denom</span> <span class=\"sy0\">*</span> denom<span class=\"br0\">)</span><br/>\u00a0<br/>    operator fun unaryMinus<span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"sy0\">=</span> BigRational<span class=\"br0\">(</span>-num, denom<span class=\"br0\">)</span><br/>\u00a0<br/>    operator fun minus<span class=\"br0\">(</span>other<span class=\"sy0\">:</span> BigRational<span class=\"br0\">)</span> <span class=\"sy0\">=</span> <a href=\"http://scala-lang.org\"><span class=\"kw1\">this</span></a> + <span class=\"br0\">(</span>-other<span class=\"br0\">)</span><br/>\u00a0<br/>    operator fun times<span class=\"br0\">(</span>other<span class=\"sy0\">:</span> BigRational<span class=\"br0\">)</span> <span class=\"sy0\">=</span> BigRational<span class=\"br0\">(</span><a href=\"http://scala-lang.org\"><span class=\"kw1\">this</span></a>.<span class=\"me1\">num</span> <span class=\"sy0\">*</span> other.<span class=\"me1\">num</span>, <a href=\"http://scala-lang.org\"><span class=\"kw1\">this</span></a>.<span class=\"me1\">denom</span> <span class=\"sy0\">*</span> other.<span class=\"me1\">denom</span><span class=\"br0\">)</span><br/>\u00a0<br/>    fun inverse<span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"sy0\">:</span> BigRational <span class=\"br0\">{</span><br/>        require<span class=\"br0\">(</span>num <span class=\"sy0\">!=</span> bigZero<span class=\"br0\">)</span><br/>        <a href=\"http://scala-lang.org\"><span class=\"kw1\">return</span></a> BigRational<span class=\"br0\">(</span>denom, num<span class=\"br0\">)</span><br/>    <span class=\"br0\">}</span><br/>\u00a0<br/>    operator fun div<span class=\"br0\">(</span>other<span class=\"sy0\">:</span> BigRational<span class=\"br0\">)</span> <span class=\"sy0\">=</span> <a href=\"http://scala-lang.org\"><span class=\"kw1\">this</span></a> <span class=\"sy0\">*</span> other.<span class=\"me1\">inverse</span><span class=\"br0\">(</span><span class=\"br0\">)</span><br/>\u00a0<br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">override</span></a> fun compareTo<span class=\"br0\">(</span>other<span class=\"sy0\">:</span> BigRational<span class=\"br0\">)</span><span class=\"sy0\">:</span> Int <span class=\"br0\">{</span><br/>        <a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> diff <span class=\"sy0\">=</span> <a href=\"http://scala-lang.org\"><span class=\"kw1\">this</span></a> - other<br/>        <a href=\"http://scala-lang.org\"><span class=\"kw1\">return</span></a> when <span class=\"br0\">{</span><br/>            diff.<span class=\"me1\">num</span> <span class=\"sy0\">&lt;</span> bigZero -<span class=\"sy0\">&gt;</span> -<span class=\"nu0\">1</span><br/>            diff.<span class=\"me1\">num</span> <span class=\"sy0\">&gt;</span> bigZero -<span class=\"sy0\">&gt;</span> +<span class=\"nu0\">1</span><br/>            <a href=\"http://scala-lang.org\"><span class=\"kw1\">else</span></a>               -<span class=\"sy0\">&gt;</span>  <span class=\"nu0\">0</span><br/>        <span class=\"br0\">}</span> <br/>    <span class=\"br0\">}</span><br/>\u00a0<br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">override</span></a> fun equals<span class=\"br0\">(</span>other<span class=\"sy0\">:</span> Any<span class=\"sy0\">?</span><span class=\"br0\">)</span><span class=\"sy0\">:</span> Boolean <span class=\"br0\">{</span><br/>       <a href=\"http://scala-lang.org\"><span class=\"kw1\">if</span></a> <span class=\"br0\">(</span>other <span class=\"sy0\">==</span> <a href=\"http://scala-lang.org\"><span class=\"kw1\">null</span></a> || other <span class=\"sy0\">!</span>is BigRational<span class=\"br0\">)</span> <a href=\"http://scala-lang.org\"><span class=\"kw1\">return</span></a> <a href=\"http://scala-lang.org\"><span class=\"kw1\">false</span></a> <br/>       <a href=\"http://scala-lang.org\"><span class=\"kw1\">return</span></a> <a href=\"http://scala-lang.org\"><span class=\"kw1\">this</span></a>.<span class=\"me1\">compareTo</span><span class=\"br0\">(</span>other<span class=\"br0\">)</span> <span class=\"sy0\">==</span> <span class=\"nu0\">0</span><br/>    <span class=\"br0\">}</span><br/>\u00a0<br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">override</span></a> fun toString<span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"sy0\">=</span> <a href=\"http://scala-lang.org\"><span class=\"kw1\">if</span></a> <span class=\"br0\">(</span>denom <span class=\"sy0\">==</span> bigOne<span class=\"br0\">)</span> <span class=\"st0\">\"$num\"</span> <a href=\"http://scala-lang.org\"><span class=\"kw1\">else</span></a> <span class=\"st0\">\"$num/$denom\"</span><br/>\u00a0<br/>    companion <a href=\"http://scala-lang.org\"><span class=\"kw1\">object</span></a> <span class=\"br0\">{</span><br/>        <a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> ZERO <span class=\"sy0\">=</span> BigRational<span class=\"br0\">(</span>bigZero, bigOne<span class=\"br0\">)</span><br/>        <a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> ONE  <span class=\"sy0\">=</span> BigRational<span class=\"br0\">(</span>bigOne, bigOne<span class=\"br0\">)</span><br/>    <span class=\"br0\">}</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"coMULTI\">/** represents a term of the form: c * atan(n / d) */</span><br/><a href=\"http://scala-lang.org\"><span class=\"kw1\">class</span></a> Term<span class=\"br0\">(</span><a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> c<span class=\"sy0\">:</span> Long, <a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> n<span class=\"sy0\">:</span> Long, <a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> d<span class=\"sy0\">:</span> Long<span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>\u00a0<br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">override</span></a> fun toString<span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"sy0\">=</span> when <span class=\"br0\">{</span><br/>        c <span class=\"sy0\">==</span>  1L   -<span class=\"sy0\">&gt;</span> <span class=\"st0\">\" + \"</span><br/>        c <span class=\"sy0\">==</span> -1L   -<span class=\"sy0\">&gt;</span> <span class=\"st0\">\" - \"</span><br/>        c <span class=\"sy0\">&lt;</span>   0L   -<span class=\"sy0\">&gt;</span> <span class=\"st0\">\" - ${-c}*\"</span><br/>        <a href=\"http://scala-lang.org\"><span class=\"kw1\">else</span></a>       -<span class=\"sy0\">&gt;</span> <span class=\"st0\">\" + $c*\"</span><br/>    <span class=\"br0\">}</span> + <span class=\"st0\">\"atan($n/$d)\"</span>  <br/><span class=\"br0\">}</span><br/>\u00a0<br/><a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> one <span class=\"sy0\">=</span> BigRational.<span class=\"me1\">ONE</span><br/>\u00a0<br/>fun tanSum<span class=\"br0\">(</span>terms<span class=\"sy0\">:</span> List<span class=\"sy0\">&lt;</span>Term<span class=\"sy0\">&gt;</span><span class=\"br0\">)</span><span class=\"sy0\">:</span> BigRational <span class=\"br0\">{</span><br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">if</span></a> <span class=\"br0\">(</span>terms.<span class=\"me1\">size</span> <span class=\"sy0\">==</span> <span class=\"nu0\">1</span><span class=\"br0\">)</span> <a href=\"http://scala-lang.org\"><span class=\"kw1\">return</span></a> tanEval<span class=\"br0\">(</span>terms<span class=\"br0\">[</span><span class=\"nu0\">0</span><span class=\"br0\">]</span>.<span class=\"me1\">c</span>, BigRational<span class=\"br0\">(</span>terms<span class=\"br0\">[</span><span class=\"nu0\">0</span><span class=\"br0\">]</span>.<span class=\"me1\">n</span>, terms<span class=\"br0\">[</span><span class=\"nu0\">0</span><span class=\"br0\">]</span>.<span class=\"me1\">d</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> half <span class=\"sy0\">=</span> terms.<span class=\"me1\">size</span> / <span class=\"nu0\">2</span><br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> a <span class=\"sy0\">=</span> tanSum<span class=\"br0\">(</span>terms.<span class=\"me1\">take</span><span class=\"br0\">(</span>half<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> b <span class=\"sy0\">=</span> tanSum<span class=\"br0\">(</span>terms.<span class=\"me1\">drop</span><span class=\"br0\">(</span>half<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">return</span></a> <span class=\"br0\">(</span>a + b<span class=\"br0\">)</span> / <span class=\"br0\">(</span>one - <span class=\"br0\">(</span>a <span class=\"sy0\">*</span> b<span class=\"br0\">)</span><span class=\"br0\">)</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/>fun tanEval<span class=\"br0\">(</span>c<span class=\"sy0\">:</span> Long, f<span class=\"sy0\">:</span> BigRational<span class=\"br0\">)</span><span class=\"sy0\">:</span> BigRational <span class=\"br0\">{</span><br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">if</span></a> <span class=\"br0\">(</span>c <span class=\"sy0\">==</span> 1L<span class=\"br0\">)</span>  <a href=\"http://scala-lang.org\"><span class=\"kw1\">return</span></a> f<br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">if</span></a> <span class=\"br0\">(</span>c <span class=\"sy0\">&lt;</span> 0L<span class=\"br0\">)</span> <a href=\"http://scala-lang.org\"><span class=\"kw1\">return</span></a> -tanEval<span class=\"br0\">(</span>-c, f<span class=\"br0\">)</span><br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> ca <span class=\"sy0\">=</span> c / <span class=\"nu0\">2</span><br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> cb <span class=\"sy0\">=</span> c - ca<br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> a <span class=\"sy0\">=</span> tanEval<span class=\"br0\">(</span>ca, f<span class=\"br0\">)</span><br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> b <span class=\"sy0\">=</span> tanEval<span class=\"br0\">(</span>cb, f<span class=\"br0\">)</span><br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">return</span></a> <span class=\"br0\">(</span>a + b<span class=\"br0\">)</span> / <span class=\"br0\">(</span>one - <span class=\"br0\">(</span>a <span class=\"sy0\">*</span> b<span class=\"br0\">)</span><span class=\"br0\">)</span><br/><span class=\"br0\">}</span>    <br/>\u00a0<br/>fun main<span class=\"br0\">(</span>args<span class=\"sy0\">:</span> Array<span class=\"sy0\">&lt;</span>String<span class=\"sy0\">&gt;</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> termsList <span class=\"sy0\">=</span> listOf<span class=\"br0\">(</span><br/>        listOf<span class=\"br0\">(</span>Term<span class=\"br0\">(</span><span class=\"nu0\">1</span>, <span class=\"nu0\">1</span>, <span class=\"nu0\">2</span><span class=\"br0\">)</span>, Term<span class=\"br0\">(</span><span class=\"nu0\">1</span>, <span class=\"nu0\">1</span>, <span class=\"nu0\">3</span><span class=\"br0\">)</span><span class=\"br0\">)</span>,<br/>        listOf<span class=\"br0\">(</span>Term<span class=\"br0\">(</span><span class=\"nu0\">2</span>, <span class=\"nu0\">1</span>, <span class=\"nu0\">3</span><span class=\"br0\">)</span>, Term<span class=\"br0\">(</span><span class=\"nu0\">1</span>, <span class=\"nu0\">1</span>, <span class=\"nu0\">7</span><span class=\"br0\">)</span><span class=\"br0\">)</span>,<br/>        listOf<span class=\"br0\">(</span>Term<span class=\"br0\">(</span><span class=\"nu0\">4</span>, <span class=\"nu0\">1</span>, <span class=\"nu0\">5</span><span class=\"br0\">)</span>, Term<span class=\"br0\">(</span>-<span class=\"nu0\">1</span>, <span class=\"nu0\">1</span>, <span class=\"nu0\">239</span><span class=\"br0\">)</span><span class=\"br0\">)</span>,<br/>        listOf<span class=\"br0\">(</span>Term<span class=\"br0\">(</span><span class=\"nu0\">5</span>, <span class=\"nu0\">1</span>, <span class=\"nu0\">7</span><span class=\"br0\">)</span>, Term<span class=\"br0\">(</span><span class=\"nu0\">2</span>, <span class=\"nu0\">3</span>, <span class=\"nu0\">79</span><span class=\"br0\">)</span><span class=\"br0\">)</span>,<br/>        listOf<span class=\"br0\">(</span>Term<span class=\"br0\">(</span><span class=\"nu0\">5</span>, <span class=\"nu0\">29</span>, <span class=\"nu0\">278</span><span class=\"br0\">)</span>, Term<span class=\"br0\">(</span><span class=\"nu0\">7</span>, <span class=\"nu0\">3</span>, <span class=\"nu0\">79</span><span class=\"br0\">)</span><span class=\"br0\">)</span>,<br/>        listOf<span class=\"br0\">(</span>Term<span class=\"br0\">(</span><span class=\"nu0\">1</span>, <span class=\"nu0\">1</span>, <span class=\"nu0\">2</span><span class=\"br0\">)</span>, Term<span class=\"br0\">(</span><span class=\"nu0\">1</span>, <span class=\"nu0\">1</span>, <span class=\"nu0\">5</span><span class=\"br0\">)</span>, Term<span class=\"br0\">(</span><span class=\"nu0\">1</span>, <span class=\"nu0\">1</span>, <span class=\"nu0\">8</span><span class=\"br0\">)</span><span class=\"br0\">)</span>,<br/>        listOf<span class=\"br0\">(</span>Term<span class=\"br0\">(</span><span class=\"nu0\">4</span>, <span class=\"nu0\">1</span>, <span class=\"nu0\">5</span><span class=\"br0\">)</span>, Term<span class=\"br0\">(</span>-<span class=\"nu0\">1</span>, <span class=\"nu0\">1</span>, <span class=\"nu0\">70</span><span class=\"br0\">)</span>, Term<span class=\"br0\">(</span><span class=\"nu0\">1</span>, <span class=\"nu0\">1</span>, <span class=\"nu0\">99</span><span class=\"br0\">)</span><span class=\"br0\">)</span>,<br/>        listOf<span class=\"br0\">(</span>Term<span class=\"br0\">(</span><span class=\"nu0\">5</span>, <span class=\"nu0\">1</span>, <span class=\"nu0\">7</span><span class=\"br0\">)</span>, Term<span class=\"br0\">(</span><span class=\"nu0\">4</span>, <span class=\"nu0\">1</span>, <span class=\"nu0\">53</span><span class=\"br0\">)</span>, Term<span class=\"br0\">(</span><span class=\"nu0\">2</span>, <span class=\"nu0\">1</span>, <span class=\"nu0\">4443</span><span class=\"br0\">)</span><span class=\"br0\">)</span>,<br/>        listOf<span class=\"br0\">(</span>Term<span class=\"br0\">(</span><span class=\"nu0\">6</span>, <span class=\"nu0\">1</span>, <span class=\"nu0\">8</span><span class=\"br0\">)</span>, Term<span class=\"br0\">(</span><span class=\"nu0\">2</span>, <span class=\"nu0\">1</span>, <span class=\"nu0\">57</span><span class=\"br0\">)</span>, Term<span class=\"br0\">(</span><span class=\"nu0\">1</span>, <span class=\"nu0\">1</span>, <span class=\"nu0\">239</span><span class=\"br0\">)</span><span class=\"br0\">)</span>,<br/>        listOf<span class=\"br0\">(</span>Term<span class=\"br0\">(</span><span class=\"nu0\">8</span>, <span class=\"nu0\">1</span>, <span class=\"nu0\">10</span><span class=\"br0\">)</span>, Term<span class=\"br0\">(</span>-<span class=\"nu0\">1</span>, <span class=\"nu0\">1</span>, <span class=\"nu0\">239</span><span class=\"br0\">)</span>, Term<span class=\"br0\">(</span>-<span class=\"nu0\">4</span>, <span class=\"nu0\">1</span>, <span class=\"nu0\">515</span><span class=\"br0\">)</span><span class=\"br0\">)</span>,<br/>        listOf<span class=\"br0\">(</span>Term<span class=\"br0\">(</span><span class=\"nu0\">12</span>, <span class=\"nu0\">1</span>, <span class=\"nu0\">18</span><span class=\"br0\">)</span>, Term<span class=\"br0\">(</span><span class=\"nu0\">8</span>, <span class=\"nu0\">1</span>, <span class=\"nu0\">57</span><span class=\"br0\">)</span>, Term<span class=\"br0\">(</span>-<span class=\"nu0\">5</span>, <span class=\"nu0\">1</span>, <span class=\"nu0\">239</span><span class=\"br0\">)</span><span class=\"br0\">)</span>,<br/>        listOf<span class=\"br0\">(</span>Term<span class=\"br0\">(</span><span class=\"nu0\">16</span>, <span class=\"nu0\">1</span>, <span class=\"nu0\">21</span><span class=\"br0\">)</span>, Term<span class=\"br0\">(</span><span class=\"nu0\">3</span>, <span class=\"nu0\">1</span>, <span class=\"nu0\">239</span><span class=\"br0\">)</span>, Term<span class=\"br0\">(</span><span class=\"nu0\">4</span>, <span class=\"nu0\">3</span>, <span class=\"nu0\">1042</span><span class=\"br0\">)</span><span class=\"br0\">)</span>,<br/>        listOf<span class=\"br0\">(</span>Term<span class=\"br0\">(</span><span class=\"nu0\">22</span>, <span class=\"nu0\">1</span>, <span class=\"nu0\">28</span><span class=\"br0\">)</span>, Term<span class=\"br0\">(</span><span class=\"nu0\">2</span>, <span class=\"nu0\">1</span>, <span class=\"nu0\">443</span><span class=\"br0\">)</span>, Term<span class=\"br0\">(</span>-<span class=\"nu0\">5</span>, <span class=\"nu0\">1</span>, <span class=\"nu0\">1393</span><span class=\"br0\">)</span>, Term<span class=\"br0\">(</span>-<span class=\"nu0\">10</span>, <span class=\"nu0\">1</span>, <span class=\"nu0\">11018</span><span class=\"br0\">)</span><span class=\"br0\">)</span>,<br/>        listOf<span class=\"br0\">(</span>Term<span class=\"br0\">(</span><span class=\"nu0\">22</span>, <span class=\"nu0\">1</span>, <span class=\"nu0\">38</span><span class=\"br0\">)</span>, Term<span class=\"br0\">(</span><span class=\"nu0\">17</span>, <span class=\"nu0\">7</span>, <span class=\"nu0\">601</span><span class=\"br0\">)</span>, Term<span class=\"br0\">(</span><span class=\"nu0\">10</span>, <span class=\"nu0\">7</span>, <span class=\"nu0\">8149</span><span class=\"br0\">)</span><span class=\"br0\">)</span>,<br/>        listOf<span class=\"br0\">(</span>Term<span class=\"br0\">(</span><span class=\"nu0\">44</span>, <span class=\"nu0\">1</span>, <span class=\"nu0\">57</span><span class=\"br0\">)</span>, Term<span class=\"br0\">(</span><span class=\"nu0\">7</span>, <span class=\"nu0\">1</span>, <span class=\"nu0\">239</span><span class=\"br0\">)</span>, Term<span class=\"br0\">(</span>-<span class=\"nu0\">12</span>, <span class=\"nu0\">1</span>, <span class=\"nu0\">682</span><span class=\"br0\">)</span>, Term<span class=\"br0\">(</span><span class=\"nu0\">24</span>, <span class=\"nu0\">1</span>, <span class=\"nu0\">12943</span><span class=\"br0\">)</span><span class=\"br0\">)</span>,<br/>        listOf<span class=\"br0\">(</span>Term<span class=\"br0\">(</span><span class=\"nu0\">88</span>, <span class=\"nu0\">1</span>, <span class=\"nu0\">172</span><span class=\"br0\">)</span>, Term<span class=\"br0\">(</span><span class=\"nu0\">51</span>, <span class=\"nu0\">1</span>, <span class=\"nu0\">239</span><span class=\"br0\">)</span>, Term<span class=\"br0\">(</span><span class=\"nu0\">32</span>, <span class=\"nu0\">1</span>, <span class=\"nu0\">682</span><span class=\"br0\">)</span>, Term<span class=\"br0\">(</span><span class=\"nu0\">44</span>, <span class=\"nu0\">1</span>, <span class=\"nu0\">5357</span><span class=\"br0\">)</span>, Term<span class=\"br0\">(</span><span class=\"nu0\">68</span>, <span class=\"nu0\">1</span>, <span class=\"nu0\">12943</span><span class=\"br0\">)</span><span class=\"br0\">)</span>,<br/>        listOf<span class=\"br0\">(</span>Term<span class=\"br0\">(</span><span class=\"nu0\">88</span>, <span class=\"nu0\">1</span>, <span class=\"nu0\">172</span><span class=\"br0\">)</span>, Term<span class=\"br0\">(</span><span class=\"nu0\">51</span>, <span class=\"nu0\">1</span>, <span class=\"nu0\">239</span><span class=\"br0\">)</span>, Term<span class=\"br0\">(</span><span class=\"nu0\">32</span>, <span class=\"nu0\">1</span>, <span class=\"nu0\">682</span><span class=\"br0\">)</span>, Term<span class=\"br0\">(</span><span class=\"nu0\">44</span>, <span class=\"nu0\">1</span>, <span class=\"nu0\">5357</span><span class=\"br0\">)</span>, Term<span class=\"br0\">(</span><span class=\"nu0\">68</span>, <span class=\"nu0\">1</span>, <span class=\"nu0\">12944</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>    <span class=\"br0\">)</span><br/>\u00a0<br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">for</span></a> <span class=\"br0\">(</span>terms in termsList<span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>        <a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> f <span class=\"sy0\">=</span> String.<span class=\"me1\">format</span><span class=\"br0\">(</span><span class=\"st0\">\"%-5s &lt;&lt; 1 == tan(\"</span>, tanSum<span class=\"br0\">(</span>terms<span class=\"br0\">)</span> <span class=\"sy0\">==</span> one<span class=\"br0\">)</span><br/>        print<span class=\"br0\">(</span>f<span class=\"br0\">)</span><br/>        print<span class=\"br0\">(</span>terms<span class=\"br0\">[</span><span class=\"nu0\">0</span><span class=\"br0\">]</span>.<span class=\"me1\">toString</span><span class=\"br0\">(</span><span class=\"br0\">)</span>.<span class=\"me1\">drop</span><span class=\"br0\">(</span><span class=\"nu0\">3</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>        <a href=\"http://scala-lang.org\"><span class=\"kw1\">for</span></a> <span class=\"br0\">(</span>i in <span class=\"nu0\">1</span> until terms.<span class=\"me1\">size</span><span class=\"br0\">)</span> print<span class=\"br0\">(</span>terms<span class=\"br0\">[</span>i<span class=\"br0\">]</span><span class=\"br0\">)</span><br/>        println<span class=\"br0\">(</span><span class=\"st0\">\")\"</span><span class=\"br0\">)</span>     <br/>    <span class=\"br0\">}</span><br/><span class=\"br0\">}</span></pre>"}, {"lang": "Mathematica / Wolfram Language", "loc": 21, "block": "<pre class=\"text highlighted_source\">Tan[ArcTan[1/2] + ArcTan[1/3]] == 1<br/>Tan[2 ArcTan[1/3] + ArcTan[1/7]] == 1<br/>Tan[4 ArcTan[1/5] - ArcTan[1/239]] == 1<br/>Tan[5 ArcTan[1/7] + 2 ArcTan[3/79]] == 1<br/>Tan[5 ArcTan[29/278] + 7 ArcTan[3/79]] == 1<br/>Tan[ArcTan[1/2] + ArcTan[1/5] + ArcTan[1/8]] == 1<br/>Tan[4 ArcTan[1/5] - ArcTan[1/70] + ArcTan[1/99]] == 1<br/>Tan[5 ArcTan[1/7] + 4 ArcTan[1/53] + 2 ArcTan[1/4443]] == 1<br/>Tan[6 ArcTan[1/8] + 2 ArcTan[1/57] + ArcTan[1/239]] == 1<br/>Tan[8 ArcTan[1/10] - ArcTan[1/239] - 4 ArcTan[1/515]] == 1<br/>Tan[12 ArcTan[1/18] + 8 ArcTan[1/57] - 5 ArcTan[1/239]] == 1<br/>Tan[16 ArcTan[1/21] + 3 ArcTan[1/239] + 4 ArcTan[3/1042]] == 1<br/>Tan[22 ArcTan[1/28] + 2 ArcTan[1/443] - 5 ArcTan[1/1393] - <br/>   10 ArcTan[1/11018]] == 1<br/>Tan[22 ArcTan[1/38] + 17 ArcTan[7/601] + 10 ArcTan[7/8149]] == 1<br/>Tan[44 ArcTan[1/57] + 7 ArcTan[1/239] - 12 ArcTan[1/682] + <br/>   24 ArcTan[1/12943]] == 1<br/>Tan[88 ArcTan[1/172] + 51 ArcTan[1/239] + 32 ArcTan[1/682] + <br/>   44 ArcTan[1/5357] + 68 ArcTan[1/12943]] == 1<br/>Tan[88 ArcTan[1/172] + 51 ArcTan[1/239] + 32 ArcTan[1/682] + <br/>   44 ArcTan[1/5357] + 68 ArcTan[1/12944]] == 1</pre>"}, {"lang": "Maxima", "loc": 18, "block": "<pre class=\"text highlighted_source\">trigexpand:true$<br/>is(tan(atan(1/2)+atan(1/3))=1);<br/>is(tan(2*atan(1/3)+atan(1/7))=1);<br/>is(tan(4*atan(1/5)-atan(1/239))=1);<br/>is(tan(5*atan(1/7)+2*atan(3/79))=1);<br/>is(tan(5*atan(29/278)+7*atan(3/79))=1);<br/>is(tan(atan(1/2)+atan(1/5)+atan(1/8))=1);<br/>is(tan(4*atan(1/5)-atan(1/70)+atan(1/99))=1);<br/>is(tan(5*atan(1/7)+4*atan(1/53)+2*atan(1/4443))=1);<br/>is(tan(6*atan(1/8)+2*atan(1/57)+atan(1/239))=1);<br/>is(tan(8*atan(1/10)-atan(1/239)-4*atan(1/515))=1);<br/>is(tan(12*atan(1/18)+8*atan(1/57)-5*atan(1/239))=1);<br/>is(tan(16*atan(1/21)+3*atan(1/239)+4*atan(3/1042))=1);<br/>is(tan(22*atan(1/28)+2*atan(1/443)-5*atan(1/1393)-10*atan(1/11018))=1);<br/>is(tan(22*atan(1/38)+17*atan(7/601)+10*atan(7/8149))=1);<br/>is(tan(44*atan(1/57)+7*atan(1/239)-12*atan(1/682)+24*atan(1/12943))=1);<br/>is(tan(88*atan(1/172)+51*atan(1/239)+32*atan(1/682)+44*atan(1/5357)+68*atan(1/12943))=1);<br/>is(tan(88*atan(1/172)+51*atan(1/239)+32*atan(1/682)+44*atan(1/5357)+68*atan(1/12944))=1);</pre>"}, {"lang": "OCaml", "loc": 51, "block": "<pre class=\"ocaml highlighted_source\"><span class=\"kw1\">open</span> <a href=\"http://caml.inria.fr/pub/docs/manual-ocaml/libref/Num.html\"><span class=\"kw2\">Num</span></a><span class=\"sy0\">;;</span> <span class=\"co1\">(* use exact rationals for results *)</span><br/>\u00a0<br/><span class=\"kw1\">let</span> tadd p q <span class=\"sy0\">=</span> <span class=\"br0\">(</span>p <span class=\"sy0\">+/</span> q<span class=\"br0\">)</span> <span class=\"sy0\">//</span> <span class=\"br0\">(</span><span class=\"br0\">(</span>Int <span class=\"nu0\">1</span><span class=\"br0\">)</span> <span class=\"sy0\">-/</span> <span class=\"br0\">(</span>p <span class=\"sy0\">*/</span> q<span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"kw1\">in</span><br/>\u00a0<br/><span class=\"co1\">(* tan(n*arctan(a/b)) *)</span><br/><span class=\"kw1\">let</span> <span class=\"kw1\">rec</span> tan_expr <span class=\"br0\">(</span>n,a,b<span class=\"br0\">)</span> <span class=\"sy0\">=</span><br/>  <span class=\"kw1\">if</span> n <span class=\"sy0\">=</span> <span class=\"nu0\">1</span> <span class=\"kw1\">then</span> <span class=\"br0\">(</span>Int a<span class=\"br0\">)</span><span class=\"sy0\">//</span><span class=\"br0\">(</span>Int b<span class=\"br0\">)</span> <span class=\"kw1\">else</span><br/>  <span class=\"kw1\">if</span> n <span class=\"sy0\">=</span> <span class=\"sy0\">-</span><span class=\"nu0\">1</span> <span class=\"kw1\">then</span> <span class=\"br0\">(</span>Int <span class=\"br0\">(</span><span class=\"sy0\">-</span>a<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"sy0\">//</span><span class=\"br0\">(</span>Int b<span class=\"br0\">)</span> <span class=\"kw1\">else</span><br/>    <span class=\"kw1\">let</span> m <span class=\"sy0\">=</span> n<span class=\"sy0\">/</span><span class=\"nu0\">2</span> <span class=\"kw1\">in</span><br/>    <span class=\"kw1\">let</span> tm <span class=\"sy0\">=</span> tan_expr <span class=\"br0\">(</span>m,a,b<span class=\"br0\">)</span> <span class=\"kw1\">in</span><br/>    <span class=\"kw1\">let</span> m2 <span class=\"sy0\">=</span> tadd tm tm <span class=\"kw1\">and</span> k <span class=\"sy0\">=</span> n<span class=\"sy0\">-</span>m<span class=\"sy0\">-</span>m <span class=\"kw1\">in</span><br/>    <span class=\"kw1\">if</span> k <span class=\"sy0\">=</span> <span class=\"nu0\">0</span> <span class=\"kw1\">then</span> m2 <span class=\"kw1\">else</span> tadd <span class=\"br0\">(</span>tan_expr <span class=\"br0\">(</span>k,a,b<span class=\"br0\">)</span><span class=\"br0\">)</span> m2 <span class=\"kw1\">in</span><br/>\u00a0<br/><span class=\"kw1\">let</span> verify <span class=\"br0\">(</span>k, tlist<span class=\"br0\">)</span> <span class=\"sy0\">=</span><br/>  <a href=\"http://caml.inria.fr/pub/docs/manual-ocaml/libref/Printf.html\"><span class=\"kw2\">Printf</span></a><span class=\"sy0\">.</span>printf <span class=\"st0\">\"Testing: pi/%d = \"</span> k<span class=\"sy0\">;</span><br/>  <span class=\"kw1\">let</span> t_str <span class=\"sy0\">=</span> <a href=\"http://caml.inria.fr/pub/docs/manual-ocaml/libref/List.html\"><span class=\"kw2\">List</span></a><span class=\"sy0\">.</span>map <span class=\"br0\">(</span><span class=\"kw1\">fun</span> <span class=\"br0\">(</span>x,y,z<span class=\"br0\">)</span> <span class=\"sy0\">-&gt;</span> <a href=\"http://caml.inria.fr/pub/docs/manual-ocaml/libref/Printf.html\"><span class=\"kw2\">Printf</span></a><span class=\"sy0\">.</span>sprintf <span class=\"st0\">\"%d*atan(%d/%d)\"</span> x y z<span class=\"br0\">)</span> tlist <span class=\"kw1\">in</span><br/>  <a href=\"http://caml.inria.fr/pub/docs/manual-ocaml/libref/Pervasives.html#VALprint_endline\"><span class=\"kw3\">print_endline</span></a> <span class=\"br0\">(</span><a href=\"http://caml.inria.fr/pub/docs/manual-ocaml/libref/String.html\"><span class=\"kw2\">String</span></a><span class=\"sy0\">.</span>concat <span class=\"st0\">\" + \"</span> t_str<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>  <span class=\"kw1\">let</span> ans_terms <span class=\"sy0\">=</span> <a href=\"http://caml.inria.fr/pub/docs/manual-ocaml/libref/List.html\"><span class=\"kw2\">List</span></a><span class=\"sy0\">.</span>map tan_expr tlist <span class=\"kw1\">in</span><br/>  <span class=\"kw1\">let</span> answer <span class=\"sy0\">=</span> <a href=\"http://caml.inria.fr/pub/docs/manual-ocaml/libref/List.html\"><span class=\"kw2\">List</span></a><span class=\"sy0\">.</span>fold_left tadd <span class=\"br0\">(</span>Int <span class=\"nu0\">0</span><span class=\"br0\">)</span> ans_terms <span class=\"kw1\">in</span><br/>  <a href=\"http://caml.inria.fr/pub/docs/manual-ocaml/libref/Printf.html\"><span class=\"kw2\">Printf</span></a><span class=\"sy0\">.</span>printf <span class=\"st0\">\"  tan(RHS) is\u00a0%s\\n\"</span> <span class=\"br0\">(</span><span class=\"kw1\">if</span> answer <span class=\"sy0\">=</span> <span class=\"br0\">(</span>Int <span class=\"nu0\">1</span><span class=\"br0\">)</span> <span class=\"kw1\">then</span> <span class=\"st0\">\"one\"</span> <span class=\"kw1\">else</span> <span class=\"st0\">\"not one\"</span><span class=\"br0\">)</span> <span class=\"kw1\">in</span><br/>\u00a0<br/><span class=\"co1\">(* example: prog 4 5 29 278 7 3 79 represents pi/4 = 5*atan(29/278) + 7*atan(3/79) *)</span><br/><span class=\"kw1\">let</span> args <span class=\"sy0\">=</span> <a href=\"http://caml.inria.fr/pub/docs/manual-ocaml/libref/Sys.html\"><span class=\"kw2\">Sys</span></a><span class=\"sy0\">.</span>argv <span class=\"kw1\">in</span><br/><span class=\"kw1\">let</span> nargs <span class=\"sy0\">=</span> <a href=\"http://caml.inria.fr/pub/docs/manual-ocaml/libref/Array.html\"><span class=\"kw2\">Array</span></a><span class=\"sy0\">.</span>length args <span class=\"kw1\">in</span><br/><span class=\"kw1\">let</span> v k <span class=\"sy0\">=</span> <a href=\"http://caml.inria.fr/pub/docs/manual-ocaml/libref/Pervasives.html#VALint_of_string\"><span class=\"kw3\">int_of_string</span></a> args<span class=\"sy0\">.</span><span class=\"br0\">(</span>k<span class=\"br0\">)</span> <span class=\"kw1\">in</span><br/><span class=\"kw1\">let</span> <span class=\"kw1\">rec</span> triples n <span class=\"sy0\">=</span><br/>  <span class=\"kw1\">if</span> n<span class=\"sy0\">+</span><span class=\"nu0\">2</span> <span class=\"sy0\">&gt;</span> nargs<span class=\"sy0\">-</span><span class=\"nu0\">1</span> <span class=\"kw1\">then</span> <span class=\"br0\">[</span><span class=\"br0\">]</span><br/>  <span class=\"kw1\">else</span> <span class=\"br0\">(</span>v n, v <span class=\"br0\">(</span>n<span class=\"sy0\">+</span><span class=\"nu0\">1</span><span class=\"br0\">)</span>, v <span class=\"br0\">(</span>n<span class=\"sy0\">+</span><span class=\"nu0\">2</span><span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"sy0\">::</span> triples <span class=\"br0\">(</span>n<span class=\"sy0\">+</span><span class=\"nu0\">3</span><span class=\"br0\">)</span> <span class=\"kw1\">in</span><br/><span class=\"kw1\">if</span> nargs <span class=\"sy0\">&gt;</span> <span class=\"nu0\">4</span> <span class=\"kw1\">then</span><br/><span class=\"kw1\">let</span> dat <span class=\"sy0\">=</span> <span class=\"br0\">(</span>v <span class=\"nu0\">1</span>, triples <span class=\"nu0\">2</span><span class=\"br0\">)</span> <span class=\"kw1\">in</span><br/>verify dat<br/><span class=\"kw1\">else</span><br/><a href=\"http://caml.inria.fr/pub/docs/manual-ocaml/libref/List.html\"><span class=\"kw2\">List</span></a><span class=\"sy0\">.</span>iter verify <span class=\"br0\">[</span><br/>  <span class=\"br0\">(</span><span class=\"nu0\">4</span>,<span class=\"br0\">[</span><span class=\"br0\">(</span><span class=\"nu0\">1</span>,<span class=\"nu0\">1</span>,<span class=\"nu0\">2</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><span class=\"br0\">(</span><span class=\"nu0\">1</span>,<span class=\"nu0\">1</span>,<span class=\"nu0\">3</span><span class=\"br0\">)</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>  <span class=\"br0\">(</span><span class=\"nu0\">4</span>,<span class=\"br0\">[</span><span class=\"br0\">(</span><span class=\"nu0\">2</span>,<span class=\"nu0\">1</span>,<span class=\"nu0\">3</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><span class=\"br0\">(</span><span class=\"nu0\">1</span>,<span class=\"nu0\">1</span>,<span class=\"nu0\">7</span><span class=\"br0\">)</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>  <span class=\"br0\">(</span><span class=\"nu0\">4</span>,<span class=\"br0\">[</span><span class=\"br0\">(</span><span class=\"nu0\">4</span>,<span class=\"nu0\">1</span>,<span class=\"nu0\">5</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><span class=\"br0\">(</span><span class=\"sy0\">-</span><span class=\"nu0\">1</span>,<span class=\"nu0\">1</span>,<span class=\"nu0\">239</span><span class=\"br0\">)</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>  <span class=\"br0\">(</span><span class=\"nu0\">4</span>,<span class=\"br0\">[</span><span class=\"br0\">(</span><span class=\"nu0\">5</span>,<span class=\"nu0\">1</span>,<span class=\"nu0\">7</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><span class=\"br0\">(</span><span class=\"nu0\">2</span>,<span class=\"nu0\">3</span>,<span class=\"nu0\">79</span><span class=\"br0\">)</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>  <span class=\"br0\">(</span><span class=\"nu0\">4</span>,<span class=\"br0\">[</span><span class=\"br0\">(</span><span class=\"nu0\">5</span>,<span class=\"nu0\">29</span>,<span class=\"nu0\">278</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><span class=\"br0\">(</span><span class=\"nu0\">7</span>,<span class=\"nu0\">3</span>,<span class=\"nu0\">79</span><span class=\"br0\">)</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>  <span class=\"br0\">(</span><span class=\"nu0\">4</span>,<span class=\"br0\">[</span><span class=\"br0\">(</span><span class=\"nu0\">1</span>,<span class=\"nu0\">1</span>,<span class=\"nu0\">2</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><span class=\"br0\">(</span><span class=\"nu0\">1</span>,<span class=\"nu0\">1</span>,<span class=\"nu0\">5</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><span class=\"br0\">(</span><span class=\"nu0\">1</span>,<span class=\"nu0\">1</span>,<span class=\"nu0\">8</span><span class=\"br0\">)</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>  <span class=\"br0\">(</span><span class=\"nu0\">4</span>,<span class=\"br0\">[</span><span class=\"br0\">(</span><span class=\"nu0\">4</span>,<span class=\"nu0\">1</span>,<span class=\"nu0\">5</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><span class=\"br0\">(</span><span class=\"sy0\">-</span><span class=\"nu0\">1</span>,<span class=\"nu0\">1</span>,<span class=\"nu0\">70</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><span class=\"br0\">(</span><span class=\"nu0\">1</span>,<span class=\"nu0\">1</span>,<span class=\"nu0\">99</span><span class=\"br0\">)</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>  <span class=\"br0\">(</span><span class=\"nu0\">4</span>,<span class=\"br0\">[</span><span class=\"br0\">(</span><span class=\"nu0\">5</span>,<span class=\"nu0\">1</span>,<span class=\"nu0\">7</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><span class=\"br0\">(</span><span class=\"nu0\">4</span>,<span class=\"nu0\">1</span>,<span class=\"nu0\">53</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><span class=\"br0\">(</span><span class=\"nu0\">2</span>,<span class=\"nu0\">1</span>,<span class=\"nu0\">4443</span><span class=\"br0\">)</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>  <span class=\"br0\">(</span><span class=\"nu0\">4</span>,<span class=\"br0\">[</span><span class=\"br0\">(</span><span class=\"nu0\">6</span>,<span class=\"nu0\">1</span>,<span class=\"nu0\">8</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><span class=\"br0\">(</span><span class=\"nu0\">2</span>,<span class=\"nu0\">1</span>,<span class=\"nu0\">57</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><span class=\"br0\">(</span><span class=\"nu0\">1</span>,<span class=\"nu0\">1</span>,<span class=\"nu0\">239</span><span class=\"br0\">)</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>  <span class=\"br0\">(</span><span class=\"nu0\">4</span>,<span class=\"br0\">[</span><span class=\"br0\">(</span><span class=\"nu0\">8</span>,<span class=\"nu0\">1</span>,<span class=\"nu0\">10</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><span class=\"br0\">(</span><span class=\"sy0\">-</span><span class=\"nu0\">1</span>,<span class=\"nu0\">1</span>,<span class=\"nu0\">239</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><span class=\"br0\">(</span><span class=\"sy0\">-</span><span class=\"nu0\">4</span>,<span class=\"nu0\">1</span>,<span class=\"nu0\">515</span><span class=\"br0\">)</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>  <span class=\"br0\">(</span><span class=\"nu0\">4</span>,<span class=\"br0\">[</span><span class=\"br0\">(</span><span class=\"nu0\">12</span>,<span class=\"nu0\">1</span>,<span class=\"nu0\">18</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><span class=\"br0\">(</span><span class=\"nu0\">8</span>,<span class=\"nu0\">1</span>,<span class=\"nu0\">57</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><span class=\"br0\">(</span><span class=\"sy0\">-</span><span class=\"nu0\">5</span>,<span class=\"nu0\">1</span>,<span class=\"nu0\">239</span><span class=\"br0\">)</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>  <span class=\"br0\">(</span><span class=\"nu0\">4</span>,<span class=\"br0\">[</span><span class=\"br0\">(</span><span class=\"nu0\">16</span>,<span class=\"nu0\">1</span>,<span class=\"nu0\">21</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><span class=\"br0\">(</span><span class=\"nu0\">3</span>,<span class=\"nu0\">1</span>,<span class=\"nu0\">239</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><span class=\"br0\">(</span><span class=\"nu0\">4</span>,<span class=\"nu0\">3</span>,<span class=\"nu0\">1042</span><span class=\"br0\">)</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>  <span class=\"br0\">(</span><span class=\"nu0\">4</span>,<span class=\"br0\">[</span><span class=\"br0\">(</span><span class=\"nu0\">22</span>,<span class=\"nu0\">1</span>,<span class=\"nu0\">28</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><span class=\"br0\">(</span><span class=\"nu0\">2</span>,<span class=\"nu0\">1</span>,<span class=\"nu0\">443</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><span class=\"br0\">(</span><span class=\"sy0\">-</span><span class=\"nu0\">5</span>,<span class=\"nu0\">1</span>,<span class=\"nu0\">1393</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><span class=\"br0\">(</span><span class=\"sy0\">-</span><span class=\"nu0\">10</span>,<span class=\"nu0\">1</span>,<span class=\"nu0\">11018</span><span class=\"br0\">)</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>  <span class=\"br0\">(</span><span class=\"nu0\">4</span>,<span class=\"br0\">[</span><span class=\"br0\">(</span><span class=\"nu0\">22</span>,<span class=\"nu0\">1</span>,<span class=\"nu0\">38</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><span class=\"br0\">(</span><span class=\"nu0\">17</span>,<span class=\"nu0\">7</span>,<span class=\"nu0\">601</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><span class=\"br0\">(</span><span class=\"nu0\">10</span>,<span class=\"nu0\">7</span>,<span class=\"nu0\">8149</span><span class=\"br0\">)</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>  <span class=\"br0\">(</span><span class=\"nu0\">4</span>,<span class=\"br0\">[</span><span class=\"br0\">(</span><span class=\"nu0\">44</span>,<span class=\"nu0\">1</span>,<span class=\"nu0\">57</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><span class=\"br0\">(</span><span class=\"nu0\">7</span>,<span class=\"nu0\">1</span>,<span class=\"nu0\">239</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><span class=\"br0\">(</span><span class=\"sy0\">-</span><span class=\"nu0\">12</span>,<span class=\"nu0\">1</span>,<span class=\"nu0\">682</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><span class=\"br0\">(</span><span class=\"nu0\">24</span>,<span class=\"nu0\">1</span>,<span class=\"nu0\">12943</span><span class=\"br0\">)</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>  <span class=\"br0\">(</span><span class=\"nu0\">4</span>,<span class=\"br0\">[</span><span class=\"br0\">(</span><span class=\"nu0\">88</span>,<span class=\"nu0\">1</span>,<span class=\"nu0\">172</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><span class=\"br0\">(</span><span class=\"nu0\">51</span>,<span class=\"nu0\">1</span>,<span class=\"nu0\">239</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><span class=\"br0\">(</span><span class=\"nu0\">32</span>,<span class=\"nu0\">1</span>,<span class=\"nu0\">682</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><span class=\"br0\">(</span><span class=\"nu0\">44</span>,<span class=\"nu0\">1</span>,<span class=\"nu0\">5357</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><span class=\"br0\">(</span><span class=\"nu0\">68</span>,<span class=\"nu0\">1</span>,<span class=\"nu0\">12943</span><span class=\"br0\">)</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>  <span class=\"br0\">(</span><span class=\"nu0\">4</span>,<span class=\"br0\">[</span><span class=\"br0\">(</span><span class=\"nu0\">88</span>,<span class=\"nu0\">1</span>,<span class=\"nu0\">172</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><span class=\"br0\">(</span><span class=\"nu0\">51</span>,<span class=\"nu0\">1</span>,<span class=\"nu0\">239</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><span class=\"br0\">(</span><span class=\"nu0\">32</span>,<span class=\"nu0\">1</span>,<span class=\"nu0\">682</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><span class=\"br0\">(</span><span class=\"nu0\">44</span>,<span class=\"nu0\">1</span>,<span class=\"nu0\">5357</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><span class=\"br0\">(</span><span class=\"nu0\">68</span>,<span class=\"nu0\">1</span>,<span class=\"nu0\">12944</span><span class=\"br0\">)</span><span class=\"br0\">]</span><span class=\"br0\">)</span><br/><span class=\"br0\">]</span></pre>"}, {"lang": "ooRexx", "loc": 29, "block": "<pre class=\"oorexx highlighted_source\"><span class=\"coMULTI\">/*REXX ----------------------------------------------------------------<br/>* 09.04.2014 Walter Pachl  the REXX solution adapted for ooRexx<br/>*                          which provides a function package rxMath<br/>*--------------------------------------------------------------------*/</span><br/><span class=\"kw1\">Numeric</span> <span class=\"kw2\">Digits</span> <span class=\"nu0\">16</span><br/><span class=\"kw1\">Numeric</span> <span class=\"kw2\">Fuzz</span>   <span class=\"nu0\">3</span>;    pi=rxCalcpi<span class=\"br0\">(</span><span class=\"br0\">)</span>;  a<span class=\"sy0\">.</span>=<span class=\"st0\">''</span><br/> a<span class=\"sy0\">.</span>1 = <span class=\"st0\">'pi/4 =    rxCalcarctan(1/2,16,'</span>R<span class=\"st0\">')    +    rxCalcarctan(1/3,16,'</span>R<span class=\"st0\">')'</span><br/> a<span class=\"sy0\">.</span>2 = <span class=\"st0\">'pi/4 =  2*rxCalcarctan(1/3,16,'</span>R<span class=\"st0\">')    +    rxCalcarctan(1/7,16,'</span>R<span class=\"st0\">')'</span><br/> a<span class=\"sy0\">.</span>3 = <span class=\"st0\">'pi/4 =  4*rxCalcarctan(1/5,16,'</span>R<span class=\"st0\">')    -    rxCalcarctan(1/239,16,'</span>R<span class=\"st0\">')'</span><br/> a<span class=\"sy0\">.</span>4 = <span class=\"st0\">'pi/4 =  5*rxCalcarctan(1/7,16,'</span>R<span class=\"st0\">')    +  2*rxCalcarctan(3/79,16,'</span>R<span class=\"st0\">')'</span><br/> a<span class=\"sy0\">.</span>5 = <span class=\"st0\">'pi/4 =  5*rxCalcarctan(29/278,16,'</span>R<span class=\"st0\">') +  7*rxCalcarctan(3/79,16,'</span>R<span class=\"st0\">')'</span><br/> a<span class=\"sy0\">.</span>6 = <span class=\"st0\">'pi/4 =  rxCalcarctan(1/2,16,'</span>R<span class=\"st0\">')      +    rxCalcarctan(1/5,16,'</span>R<span class=\"st0\">')   +    rxCalcarctan(1/8,16,'</span>R<span class=\"st0\">')'</span><br/> a<span class=\"sy0\">.</span>7 = <span class=\"st0\">'pi/4 =  4*rxCalcarctan(1/5,16,'</span>R<span class=\"st0\">')    -    rxCalcarctan(1/70,16,'</span>R<span class=\"st0\">')  +    rxCalcarctan(1/99,16,'</span>R<span class=\"st0\">')'</span><br/> a<span class=\"sy0\">.</span>8 = <span class=\"st0\">'pi/4 =  5*rxCalcarctan(1/7,16,'</span>R<span class=\"st0\">')    +  4*rxCalcarctan(1/53,16,'</span>R<span class=\"st0\">')  +  2*rxCalcarctan(1/4443,16,'</span>R<span class=\"st0\">')'</span><br/> a<span class=\"sy0\">.</span>9 = <span class=\"st0\">'pi/4 =  6*rxCalcarctan(1/8,16,'</span>R<span class=\"st0\">')    +  2*rxCalcarctan(1/57,16,'</span>R<span class=\"st0\">')  +    rxCalcarctan(1/239,16,'</span>R<span class=\"st0\">')'</span><br/>a<span class=\"sy0\">.</span>10 = <span class=\"st0\">'pi/4 =  8*rxCalcarctan(1/10,16,'</span>R<span class=\"st0\">')   -    rxCalcarctan(1/239,16,'</span>R<span class=\"st0\">') -  4*rxCalcarctan(1/515,16,'</span>R<span class=\"st0\">')'</span><br/>a<span class=\"sy0\">.</span>11 = <span class=\"st0\">'pi/4 = 12*rxCalcarctan(1/18,16,'</span>R<span class=\"st0\">')   +  8*rxCalcarctan(1/57,16,'</span>R<span class=\"st0\">')  -  5*rxCalcarctan(1/239,16,'</span>R<span class=\"st0\">')'</span><br/>a<span class=\"sy0\">.</span>12 = <span class=\"st0\">'pi/4 = 16*rxCalcarctan(1/21,16,'</span>R<span class=\"st0\">')   +  3*rxCalcarctan(1/239,16,'</span>R<span class=\"st0\">') +  4*rxCalcarctan(3/1042,16,'</span>R<span class=\"st0\">')'</span><br/>a<span class=\"sy0\">.</span>13 = <span class=\"st0\">'pi/4 = 22*rxCalcarctan(1/28,16,'</span>R<span class=\"st0\">')   +  2*rxCalcarctan(1/443,16,'</span>R<span class=\"st0\">') -  5*rxCalcarctan(1/1393,16,'</span>R<span class=\"st0\">') - 10*rxCalcarctan(1/11018,16,'</span>R<span class=\"st0\">')'</span><br/>a<span class=\"sy0\">.</span>14 = <span class=\"st0\">'pi/4 = 22*rxCalcarctan(1/38,16,'</span>R<span class=\"st0\">')   + 17*rxCalcarctan(7/601,16,'</span>R<span class=\"st0\">') + 10*rxCalcarctan(7/8149,16,'</span>R<span class=\"st0\">')'</span><br/>a<span class=\"sy0\">.</span>15 = <span class=\"st0\">'pi/4 = 44*rxCalcarctan(1/57,16,'</span>R<span class=\"st0\">')   +  7*rxCalcarctan(1/239,16,'</span>R<span class=\"st0\">') - 12*rxCalcarctan(1/682,16,'</span>R<span class=\"st0\">')  + 24*rxCalcarctan(1/12943,16,'</span>R<span class=\"st0\">')'</span><br/>a<span class=\"sy0\">.</span>16 = <span class=\"st0\">'pi/4 = 88*rxCalcarctan(1/172,16,'</span>R<span class=\"st0\">')  + 51*rxCalcarctan(1/239,16,'</span>R<span class=\"st0\">') + 32*rxCalcarctan(1/682,16,'</span>R<span class=\"st0\">')  + 44*rxCalcarctan(1/5357,16,'</span>R<span class=\"st0\">')  + 68*rxCalcarctan(1/12943,16,'</span>R<span class=\"st0\">')'</span><br/>a<span class=\"sy0\">.</span>17 = <span class=\"st0\">'pi/4 = 88*rxCalcarctan(1/172,16,'</span>R<span class=\"st0\">')  + 51*rxCalcarctan(1/239,16,'</span>R<span class=\"st0\">') + 32*rxCalcarctan(1/682,16,'</span>R<span class=\"st0\">')  + 44*rxCalcarctan(1/5357,16,'</span>R<span class=\"st0\">')  + 68*rxCalcarctan(1/12944,16,'</span>R<span class=\"st0\">')'</span><br/>        <span class=\"kw1\">do</span> j=<span class=\"nu0\">1</span>  <span class=\"kw2\">while</span>  a<span class=\"sy0\">.</span>j<span class=\"sy0\">\\</span>==<span class=\"st0\">''</span>        <span class=\"coMULTI\">/*evaluate each of the formulas. */</span><br/>        <span class=\"kw1\">interpret</span>  <span class=\"st0\">'answer='</span>   <span class=\"st0\">\"(\"</span>   a<span class=\"sy0\">.</span>j   <span class=\"st0\">\")\"</span>      <span class=\"coMULTI\">/*the heavy lifting.*/</span><br/>        <span class=\"kw1\">say</span>  <span class=\"kw6\">right</span><span class=\"br0\">(</span><span class=\"kw6\">word</span><span class=\"br0\">(</span><span class=\"st0\">'bad OK'</span>,answer+<span class=\"nu0\">1</span><span class=\"br0\">)</span>,<span class=\"nu0\">3</span><span class=\"br0\">)</span><span class=\"st0\">\": \"</span>     <span class=\"kw6\">space</span><span class=\"br0\">(</span>a<span class=\"sy0\">.</span>j,<span class=\"nu0\">0</span><span class=\"br0\">)</span><br/>        <span class=\"kw3\">end</span>   <span class=\"coMULTI\">/*j*/</span>                    <span class=\"coMULTI\">/* [?]  show OK | bad, formula.  */</span><br/>::requires rxmath library<br/>\u00a0</pre>"}, {"lang": "PARI/GP", "loc": 31, "block": "<pre class=\"parigp highlighted_source\">tanEval<span class=\"br0\">(</span>coef<span class=\"sy0\">,</span> f<span class=\"br0\">)</span><span class=\"sy0\">=</span><span class=\"br0\">{</span><br/>\t<span class=\"kw1\">if</span> <span class=\"br0\">(</span>coef <span class=\"sy0\">&lt;=</span> <span class=\"nu1\">1</span><span class=\"sy0\">,</span> <span class=\"kw1\">return</span><span class=\"br0\">(</span><span class=\"kw1\">if</span><span class=\"br0\">(</span>coef<span class=\"sy0\">&lt;</span><span class=\"nu1\">1</span><span class=\"sy0\">,-</span>tanEval<span class=\"br0\">(</span><span class=\"sy0\">-</span>coef<span class=\"sy0\">,</span> f<span class=\"br0\">)</span><span class=\"sy0\">,</span>f<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>\tmy<span class=\"br0\">(</span>a<span class=\"sy0\">=</span>tanEval<span class=\"br0\">(</span>coef<span class=\"sy0\">\\</span><span class=\"nu1\">2</span><span class=\"sy0\">,</span> f<span class=\"br0\">)</span><span class=\"sy0\">,</span> b<span class=\"sy0\">=</span>tanEval<span class=\"br0\">(</span>coef<span class=\"sy0\">-</span>coef<span class=\"sy0\">\\</span><span class=\"nu1\">2</span><span class=\"sy0\">,</span> f<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>\t<span class=\"br0\">(</span>a <span class=\"sy0\">+</span> b<span class=\"br0\">)</span><span class=\"sy0\">/</span><span class=\"br0\">(</span><span class=\"nu1\">1</span> <span class=\"sy0\">-</span> a<span class=\"sy0\">*</span>b<span class=\"br0\">)</span><br/><span class=\"br0\">}</span><span class=\"sy0\">;</span><br/>tans<span class=\"br0\">(</span>xs<span class=\"br0\">)</span><span class=\"sy0\">=</span><span class=\"br0\">{</span><br/>\t<span class=\"kw1\">if</span> <span class=\"br0\">(</span>#xs <span class=\"sy0\">==</span> <span class=\"nu1\">1</span><span class=\"sy0\">,</span> <span class=\"kw1\">return</span><span class=\"br0\">(</span>tanEval<span class=\"br0\">(</span>xs<span class=\"br0\">[</span><span class=\"nu1\">1</span><span class=\"br0\">]</span><span class=\"br0\">[</span><span class=\"nu1\">1</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> xs<span class=\"br0\">[</span><span class=\"nu1\">1</span><span class=\"br0\">]</span><span class=\"br0\">[</span><span class=\"nu1\">2</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>\tmy<span class=\"br0\">(</span>a<span class=\"sy0\">=</span>tans<span class=\"br0\">(</span>xs<span class=\"br0\">[</span><span class=\"nu1\">1</span>..#xs<span class=\"sy0\">\\</span><span class=\"nu1\">2</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">,</span>b<span class=\"sy0\">=</span>tans<span class=\"br0\">(</span>xs<span class=\"br0\">[</span>#xs<span class=\"sy0\">\\</span><span class=\"nu1\">2</span><span class=\"sy0\">+</span><span class=\"nu1\">1</span>..#xs<span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>\t<span class=\"br0\">(</span>a <span class=\"sy0\">+</span> b<span class=\"br0\">)</span><span class=\"sy0\">/</span><span class=\"br0\">(</span><span class=\"nu1\">1</span> <span class=\"sy0\">-</span> a<span class=\"sy0\">*</span>b<span class=\"br0\">)</span><br/><span class=\"br0\">}</span><span class=\"sy0\">;</span><br/>test<span class=\"br0\">(</span>v<span class=\"br0\">)</span><span class=\"sy0\">=</span><span class=\"br0\">{</span><br/>\tmy<span class=\"br0\">(</span>t<span class=\"sy0\">=</span>tans<span class=\"br0\">(</span>v<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>\t<span class=\"kw1\">if</span><span class=\"br0\">(</span>t<span class=\"sy0\">==</span><span class=\"nu1\">1</span><span class=\"sy0\">,</span><span class=\"kw1\">print</span><span class=\"br0\">(</span><span class=\"st0\">\"OK\"</span><span class=\"br0\">)</span><span class=\"sy0\">,</span><span class=\"kw1\">print</span><span class=\"br0\">(</span><span class=\"st0\">\"Error: \"</span>v<span class=\"br0\">)</span><span class=\"br0\">)</span><br/><span class=\"br0\">}</span><span class=\"sy0\">;</span><br/>test<span class=\"br0\">(</span><span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"nu1\">1</span><span class=\"sy0\">,</span><span class=\"nu1\">1</span><span class=\"sy0\">/</span><span class=\"nu1\">2</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu1\">1</span><span class=\"sy0\">,</span><span class=\"nu1\">1</span><span class=\"sy0\">/</span><span class=\"nu1\">3</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>test<span class=\"br0\">(</span><span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"nu1\">2</span><span class=\"sy0\">,</span><span class=\"nu1\">1</span><span class=\"sy0\">/</span><span class=\"nu1\">3</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu1\">1</span><span class=\"sy0\">,</span><span class=\"nu1\">1</span><span class=\"sy0\">/</span><span class=\"nu1\">7</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>test<span class=\"br0\">(</span><span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"nu1\">4</span><span class=\"sy0\">,</span><span class=\"nu1\">1</span><span class=\"sy0\">/</span><span class=\"nu1\">5</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"sy0\">-</span><span class=\"nu1\">1</span><span class=\"sy0\">,</span><span class=\"nu1\">1</span><span class=\"sy0\">/</span><span class=\"nu1\">239</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>test<span class=\"br0\">(</span><span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"nu1\">5</span><span class=\"sy0\">,</span><span class=\"nu1\">1</span><span class=\"sy0\">/</span><span class=\"nu1\">7</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu1\">2</span><span class=\"sy0\">,</span><span class=\"nu1\">3</span><span class=\"sy0\">/</span><span class=\"nu1\">79</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>test<span class=\"br0\">(</span><span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"nu1\">5</span><span class=\"sy0\">,</span><span class=\"nu1\">29</span><span class=\"sy0\">/</span><span class=\"nu1\">278</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu1\">7</span><span class=\"sy0\">,</span><span class=\"nu1\">3</span><span class=\"sy0\">/</span><span class=\"nu1\">79</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>test<span class=\"br0\">(</span><span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"nu1\">1</span><span class=\"sy0\">,</span><span class=\"nu1\">1</span><span class=\"sy0\">/</span><span class=\"nu1\">2</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu1\">1</span><span class=\"sy0\">,</span><span class=\"nu1\">1</span><span class=\"sy0\">/</span><span class=\"nu1\">5</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu1\">1</span><span class=\"sy0\">,</span><span class=\"nu1\">1</span><span class=\"sy0\">/</span><span class=\"nu1\">8</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>test<span class=\"br0\">(</span><span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"nu1\">4</span><span class=\"sy0\">,</span><span class=\"nu1\">1</span><span class=\"sy0\">/</span><span class=\"nu1\">5</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"sy0\">-</span><span class=\"nu1\">1</span><span class=\"sy0\">,</span><span class=\"nu1\">1</span><span class=\"sy0\">/</span><span class=\"nu1\">70</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu1\">1</span><span class=\"sy0\">,</span><span class=\"nu1\">1</span><span class=\"sy0\">/</span><span class=\"nu1\">99</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>test<span class=\"br0\">(</span><span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"nu1\">5</span><span class=\"sy0\">,</span><span class=\"nu1\">1</span><span class=\"sy0\">/</span><span class=\"nu1\">7</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu1\">4</span><span class=\"sy0\">,</span><span class=\"nu1\">1</span><span class=\"sy0\">/</span><span class=\"nu1\">53</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu1\">2</span><span class=\"sy0\">,</span><span class=\"nu1\">1</span><span class=\"sy0\">/</span><span class=\"nu1\">4443</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>test<span class=\"br0\">(</span><span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"nu1\">6</span><span class=\"sy0\">,</span><span class=\"nu1\">1</span><span class=\"sy0\">/</span><span class=\"nu1\">8</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu1\">2</span><span class=\"sy0\">,</span><span class=\"nu1\">1</span><span class=\"sy0\">/</span><span class=\"nu1\">57</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu1\">1</span><span class=\"sy0\">,</span><span class=\"nu1\">1</span><span class=\"sy0\">/</span><span class=\"nu1\">239</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>test<span class=\"br0\">(</span><span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"nu1\">8</span><span class=\"sy0\">,</span><span class=\"nu1\">1</span><span class=\"sy0\">/</span><span class=\"nu1\">10</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"sy0\">-</span><span class=\"nu1\">1</span><span class=\"sy0\">,</span><span class=\"nu1\">1</span><span class=\"sy0\">/</span><span class=\"nu1\">239</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"sy0\">-</span><span class=\"nu1\">4</span><span class=\"sy0\">,</span><span class=\"nu1\">1</span><span class=\"sy0\">/</span><span class=\"nu1\">515</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>test<span class=\"br0\">(</span><span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"nu1\">12</span><span class=\"sy0\">,</span><span class=\"nu1\">1</span><span class=\"sy0\">/</span><span class=\"nu1\">18</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu1\">8</span><span class=\"sy0\">,</span><span class=\"nu1\">1</span><span class=\"sy0\">/</span><span class=\"nu1\">57</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"sy0\">-</span><span class=\"nu1\">5</span><span class=\"sy0\">,</span><span class=\"nu1\">1</span><span class=\"sy0\">/</span><span class=\"nu1\">239</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>test<span class=\"br0\">(</span><span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"nu1\">16</span><span class=\"sy0\">,</span><span class=\"nu1\">1</span><span class=\"sy0\">/</span><span class=\"nu1\">21</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu1\">3</span><span class=\"sy0\">,</span><span class=\"nu1\">1</span><span class=\"sy0\">/</span><span class=\"nu1\">239</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu1\">4</span><span class=\"sy0\">,</span><span class=\"nu1\">3</span><span class=\"sy0\">/</span><span class=\"nu1\">1042</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>test<span class=\"br0\">(</span><span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"nu1\">22</span><span class=\"sy0\">,</span><span class=\"nu1\">1</span><span class=\"sy0\">/</span><span class=\"nu1\">28</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu1\">2</span><span class=\"sy0\">,</span><span class=\"nu1\">1</span><span class=\"sy0\">/</span><span class=\"nu1\">443</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"sy0\">-</span><span class=\"nu1\">5</span><span class=\"sy0\">,</span><span class=\"nu1\">1</span><span class=\"sy0\">/</span><span class=\"nu1\">1393</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"sy0\">-</span><span class=\"nu1\">10</span><span class=\"sy0\">,</span><span class=\"nu1\">1</span><span class=\"sy0\">/</span><span class=\"nu1\">11018</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>test<span class=\"br0\">(</span><span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"nu1\">22</span><span class=\"sy0\">,</span><span class=\"nu1\">1</span><span class=\"sy0\">/</span><span class=\"nu1\">38</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu1\">17</span><span class=\"sy0\">,</span><span class=\"nu1\">7</span><span class=\"sy0\">/</span><span class=\"nu1\">601</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu1\">10</span><span class=\"sy0\">,</span><span class=\"nu1\">7</span><span class=\"sy0\">/</span><span class=\"nu1\">8149</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>test<span class=\"br0\">(</span><span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"nu1\">44</span><span class=\"sy0\">,</span><span class=\"nu1\">1</span><span class=\"sy0\">/</span><span class=\"nu1\">57</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu1\">7</span><span class=\"sy0\">,</span><span class=\"nu1\">1</span><span class=\"sy0\">/</span><span class=\"nu1\">239</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"sy0\">-</span><span class=\"nu1\">12</span><span class=\"sy0\">,</span><span class=\"nu1\">1</span><span class=\"sy0\">/</span><span class=\"nu1\">682</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu1\">24</span><span class=\"sy0\">,</span><span class=\"nu1\">1</span><span class=\"sy0\">/</span><span class=\"nu1\">12943</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>test<span class=\"br0\">(</span><span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"nu1\">88</span><span class=\"sy0\">,</span><span class=\"nu1\">1</span><span class=\"sy0\">/</span><span class=\"nu1\">172</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu1\">51</span><span class=\"sy0\">,</span><span class=\"nu1\">1</span><span class=\"sy0\">/</span><span class=\"nu1\">239</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu1\">32</span><span class=\"sy0\">,</span><span class=\"nu1\">1</span><span class=\"sy0\">/</span><span class=\"nu1\">682</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu1\">44</span><span class=\"sy0\">,</span><span class=\"nu1\">1</span><span class=\"sy0\">/</span><span class=\"nu1\">5357</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu1\">68</span><span class=\"sy0\">,</span><span class=\"nu1\">1</span><span class=\"sy0\">/</span><span class=\"nu1\">12943</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>test<span class=\"br0\">(</span><span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"nu1\">88</span><span class=\"sy0\">,</span><span class=\"nu1\">1</span><span class=\"sy0\">/</span><span class=\"nu1\">172</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu1\">51</span><span class=\"sy0\">,</span><span class=\"nu1\">1</span><span class=\"sy0\">/</span><span class=\"nu1\">239</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu1\">32</span><span class=\"sy0\">,</span><span class=\"nu1\">1</span><span class=\"sy0\">/</span><span class=\"nu1\">682</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu1\">44</span><span class=\"sy0\">,</span><span class=\"nu1\">1</span><span class=\"sy0\">/</span><span class=\"nu1\">5357</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu1\">68</span><span class=\"sy0\">,</span><span class=\"nu1\">1</span><span class=\"sy0\">/</span><span class=\"nu1\">12944</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span></pre>"}, {"lang": "Perl", "loc": 40, "block": "<pre class=\"perl highlighted_source\"><span class=\"kw2\">use</span> Math<span class=\"sy0\">::</span><span class=\"me2\">BigRat</span> try<span class=\"sy0\">=&gt;</span><span class=\"st0\">\"GMP\"</span><span class=\"sy0\">;</span><br/>\u00a0<br/><span class=\"kw2\">sub</span> taneval <span class=\"br0\">{</span><br/>  <span class=\"kw1\">my</span><span class=\"br0\">(</span><span class=\"re0\">$coef</span><span class=\"sy0\">,</span><span class=\"re0\">$f</span><span class=\"br0\">)</span> <span class=\"sy0\">=</span> <span class=\"co5\">@_</span><span class=\"sy0\">;</span><br/>  <span class=\"re0\">$f</span> <span class=\"sy0\">=</span> Math<span class=\"sy0\">::</span><span class=\"me2\">BigRat</span><span class=\"sy0\">-&gt;</span><span class=\"kw2\">new</span><span class=\"br0\">(</span><span class=\"re0\">$f</span><span class=\"br0\">)</span> <span class=\"kw1\">unless</span> <a href=\"http://perldoc.perl.org/functions/ref.html\"><span class=\"kw3\">ref</span></a><span class=\"br0\">(</span><span class=\"re0\">$f</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>  <a href=\"http://perldoc.perl.org/functions/return.html\"><span class=\"kw3\">return</span></a> <span class=\"nu0\">0</span> <span class=\"kw1\">if</span> <span class=\"re0\">$coef</span> <span class=\"sy0\">==</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span><br/>  <a href=\"http://perldoc.perl.org/functions/return.html\"><span class=\"kw3\">return</span></a> <span class=\"re0\">$f</span> <span class=\"kw1\">if</span> <span class=\"re0\">$coef</span> <span class=\"sy0\">==</span> <span class=\"nu0\">1</span><span class=\"sy0\">;</span><br/>  <a href=\"http://perldoc.perl.org/functions/return.html\"><span class=\"kw3\">return</span></a> <span class=\"sy0\">-</span>taneval<span class=\"br0\">(</span><span class=\"sy0\">-</span><span class=\"re0\">$coef</span><span class=\"sy0\">,</span> <span class=\"re0\">$f</span><span class=\"br0\">)</span> <span class=\"kw1\">if</span> <span class=\"re0\">$coef</span> <span class=\"sy0\">&lt;</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span><br/>  <span class=\"kw1\">my</span><span class=\"br0\">(</span><span class=\"re0\">$a</span><span class=\"sy0\">,</span><span class=\"re0\">$b</span><span class=\"br0\">)</span> <span class=\"sy0\">=</span> <span class=\"br0\">(</span> taneval<span class=\"br0\">(</span><span class=\"re0\">$coef</span><span class=\"sy0\">&gt;&gt;</span><span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"re0\">$f</span><span class=\"br0\">)</span><span class=\"sy0\">,</span> taneval<span class=\"br0\">(</span><span class=\"re0\">$coef</span><span class=\"sy0\">-</span><span class=\"br0\">(</span><span class=\"re0\">$coef</span><span class=\"sy0\">&gt;&gt;</span><span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"sy0\">,</span><span class=\"re0\">$f</span><span class=\"br0\">)</span> <span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>  <span class=\"br0\">(</span><span class=\"re0\">$a</span><span class=\"sy0\">+</span><span class=\"re0\">$b</span><span class=\"br0\">)</span><span class=\"sy0\">/</span><span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">-</span><span class=\"re0\">$a</span><span class=\"re0\">*$b</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"kw2\">sub</span> tans <span class=\"br0\">{</span><br/>  <span class=\"kw1\">my</span> <span class=\"re0\">@xs</span><span class=\"sy0\">=</span><span class=\"co5\">@_</span><span class=\"sy0\">;</span><br/>  <a href=\"http://perldoc.perl.org/functions/return.html\"><span class=\"kw3\">return</span></a> taneval<span class=\"br0\">(</span><span class=\"sy0\">@</span><span class=\"br0\">{</span><span class=\"re0\">$xs</span><span class=\"br0\">[</span><span class=\"nu0\">0</span><span class=\"br0\">]</span><span class=\"br0\">}</span><span class=\"br0\">)</span> <span class=\"kw1\">if</span> <a href=\"http://perldoc.perl.org/functions/scalar.html\"><span class=\"kw3\">scalar</span></a><span class=\"br0\">(</span><span class=\"re0\">@xs</span><span class=\"br0\">)</span><span class=\"sy0\">==</span><span class=\"nu0\">1</span><span class=\"sy0\">;</span><br/>  <span class=\"kw1\">my</span><span class=\"br0\">(</span><span class=\"re0\">$a</span><span class=\"sy0\">,</span><span class=\"re0\">$b</span><span class=\"br0\">)</span> <span class=\"sy0\">=</span> <span class=\"br0\">(</span> tans<span class=\"br0\">(</span><span class=\"re0\">@xs</span><span class=\"br0\">[</span><span class=\"nu0\">0</span><span class=\"sy0\">..</span><span class=\"br0\">(</span><span class=\"re0\">$#xs</span><span class=\"sy0\">&gt;&gt;</span><span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">,</span> tans<span class=\"br0\">(</span><span class=\"re0\">@xs</span><span class=\"br0\">[</span><span class=\"br0\">(</span><span class=\"re0\">$#xs</span><span class=\"sy0\">&gt;&gt;</span><span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"sy0\">+</span><span class=\"nu0\">1</span><span class=\"sy0\">..</span><span class=\"re0\">$#xs</span><span class=\"br0\">]</span><span class=\"br0\">)</span> <span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>  <span class=\"br0\">(</span><span class=\"re0\">$a</span><span class=\"sy0\">+</span><span class=\"re0\">$b</span><span class=\"br0\">)</span><span class=\"sy0\">/</span><span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">-</span><span class=\"re0\">$a</span><span class=\"re0\">*$b</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"kw2\">sub</span> test <span class=\"br0\">{</span><br/>  <a href=\"http://perldoc.perl.org/functions/printf.html\"><span class=\"kw3\">printf</span></a> <span class=\"st0\">\"%5s (%s)<span class=\"es0\">\\n</span>\"</span><span class=\"sy0\">,</span> <span class=\"br0\">(</span>tans<span class=\"br0\">(</span><span class=\"co5\">@_</span><span class=\"br0\">)</span><span class=\"sy0\">==</span><span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"sy0\">?</span><span class=\"st0\">\"OK\"</span><span class=\"sy0\">:</span><span class=\"st0\">\"Error\"</span><span class=\"sy0\">,</span> <a href=\"http://perldoc.perl.org/functions/join.html\"><span class=\"kw3\">join</span></a><span class=\"br0\">(</span><span class=\"st0\">\" \"</span><span class=\"sy0\">,</span><a href=\"http://perldoc.perl.org/functions/map.html\"><span class=\"kw3\">map</span></a><span class=\"br0\">{</span><span class=\"st0\">\"[@$_]\"</span><span class=\"br0\">}</span> <span class=\"co5\">@_</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/>test<span class=\"br0\">(</span><span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"sy0\">,</span><span class=\"st_h\">'1/2'</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"sy0\">,</span><span class=\"st_h\">'1/3'</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>test<span class=\"br0\">(</span><span class=\"br0\">[</span><span class=\"nu0\">2</span><span class=\"sy0\">,</span><span class=\"st_h\">'1/3'</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"sy0\">,</span><span class=\"st_h\">'1/7'</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>test<span class=\"br0\">(</span><span class=\"br0\">[</span><span class=\"nu0\">4</span><span class=\"sy0\">,</span><span class=\"st_h\">'1/5'</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"sy0\">-</span><span class=\"nu0\">1</span><span class=\"sy0\">,</span><span class=\"st_h\">'1/239'</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>test<span class=\"br0\">(</span><span class=\"br0\">[</span><span class=\"nu0\">5</span><span class=\"sy0\">,</span><span class=\"st_h\">'1/7'</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu0\">2</span><span class=\"sy0\">,</span><span class=\"st_h\">'3/79'</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>test<span class=\"br0\">(</span><span class=\"br0\">[</span><span class=\"nu0\">5</span><span class=\"sy0\">,</span><span class=\"st_h\">'29/278'</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu0\">7</span><span class=\"sy0\">,</span><span class=\"st_h\">'3/79'</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>test<span class=\"br0\">(</span><span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"sy0\">,</span><span class=\"st_h\">'1/2'</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"sy0\">,</span><span class=\"st_h\">'1/5'</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"sy0\">,</span><span class=\"st_h\">'1/8'</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>test<span class=\"br0\">(</span><span class=\"br0\">[</span><span class=\"nu0\">4</span><span class=\"sy0\">,</span><span class=\"st_h\">'1/5'</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"sy0\">-</span><span class=\"nu0\">1</span><span class=\"sy0\">,</span><span class=\"st_h\">'1/70'</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"sy0\">,</span><span class=\"st_h\">'1/99'</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>test<span class=\"br0\">(</span><span class=\"br0\">[</span><span class=\"nu0\">5</span><span class=\"sy0\">,</span><span class=\"st_h\">'1/7'</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu0\">4</span><span class=\"sy0\">,</span><span class=\"st_h\">'1/53'</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu0\">2</span><span class=\"sy0\">,</span><span class=\"st_h\">'1/4443'</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>test<span class=\"br0\">(</span><span class=\"br0\">[</span><span class=\"nu0\">6</span><span class=\"sy0\">,</span><span class=\"st_h\">'1/8'</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu0\">2</span><span class=\"sy0\">,</span><span class=\"st_h\">'1/57'</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"sy0\">,</span><span class=\"st_h\">'1/239'</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>test<span class=\"br0\">(</span><span class=\"br0\">[</span><span class=\"nu0\">8</span><span class=\"sy0\">,</span><span class=\"st_h\">'1/10'</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"sy0\">-</span><span class=\"nu0\">1</span><span class=\"sy0\">,</span><span class=\"st_h\">'1/239'</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"sy0\">-</span><span class=\"nu0\">4</span><span class=\"sy0\">,</span><span class=\"st_h\">'1/515'</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>test<span class=\"br0\">(</span><span class=\"br0\">[</span><span class=\"nu0\">12</span><span class=\"sy0\">,</span><span class=\"st_h\">'1/18'</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu0\">8</span><span class=\"sy0\">,</span><span class=\"st_h\">'1/57'</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"sy0\">-</span><span class=\"nu0\">5</span><span class=\"sy0\">,</span><span class=\"st_h\">'1/239'</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>test<span class=\"br0\">(</span><span class=\"br0\">[</span><span class=\"nu0\">16</span><span class=\"sy0\">,</span><span class=\"st_h\">'1/21'</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu0\">3</span><span class=\"sy0\">,</span><span class=\"st_h\">'1/239'</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu0\">4</span><span class=\"sy0\">,</span><span class=\"st_h\">'3/1042'</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>test<span class=\"br0\">(</span><span class=\"br0\">[</span><span class=\"nu0\">22</span><span class=\"sy0\">,</span><span class=\"st_h\">'1/28'</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu0\">2</span><span class=\"sy0\">,</span><span class=\"st_h\">'1/443'</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"sy0\">-</span><span class=\"nu0\">5</span><span class=\"sy0\">,</span><span class=\"st_h\">'1/1393'</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"sy0\">-</span><span class=\"nu0\">10</span><span class=\"sy0\">,</span><span class=\"st_h\">'1/11018'</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>test<span class=\"br0\">(</span><span class=\"br0\">[</span><span class=\"nu0\">22</span><span class=\"sy0\">,</span><span class=\"st_h\">'1/38'</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu0\">17</span><span class=\"sy0\">,</span><span class=\"st_h\">'7/601'</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu0\">10</span><span class=\"sy0\">,</span><span class=\"st_h\">'7/8149'</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>test<span class=\"br0\">(</span><span class=\"br0\">[</span><span class=\"nu0\">44</span><span class=\"sy0\">,</span><span class=\"st_h\">'1/57'</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu0\">7</span><span class=\"sy0\">,</span><span class=\"st_h\">'1/239'</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"sy0\">-</span><span class=\"nu0\">12</span><span class=\"sy0\">,</span><span class=\"st_h\">'1/682'</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu0\">24</span><span class=\"sy0\">,</span><span class=\"st_h\">'1/12943'</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>test<span class=\"br0\">(</span><span class=\"br0\">[</span><span class=\"nu0\">88</span><span class=\"sy0\">,</span><span class=\"st_h\">'1/172'</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu0\">51</span><span class=\"sy0\">,</span><span class=\"st_h\">'1/239'</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu0\">32</span><span class=\"sy0\">,</span><span class=\"st_h\">'1/682'</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu0\">44</span><span class=\"sy0\">,</span><span class=\"st_h\">'1/5357'</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu0\">68</span><span class=\"sy0\">,</span><span class=\"st_h\">'1/12943'</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>test<span class=\"br0\">(</span><span class=\"br0\">[</span><span class=\"nu0\">88</span><span class=\"sy0\">,</span><span class=\"st_h\">'1/172'</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu0\">51</span><span class=\"sy0\">,</span><span class=\"st_h\">'1/239'</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu0\">32</span><span class=\"sy0\">,</span><span class=\"st_h\">'1/682'</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu0\">44</span><span class=\"sy0\">,</span><span class=\"st_h\">'1/5357'</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu0\">68</span><span class=\"sy0\">,</span><span class=\"st_h\">'1/12944'</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span></pre>"}, {"lang": "Perl 6", "loc": 42, "block": "<pre class=\"perl6 highlighted_source\"><span class=\"kw2\">sub</span> taneval <span class=\"br0\">(</span><span class=\"re0\">$coef</span><span class=\"sy0\">,</span> <span class=\"re0\">$f</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>  <span class=\"kw1\">return</span> <span class=\"nu0\">0</span> <span class=\"kw1\">if</span> <span class=\"re0\">$coef</span> <span class=\"sy0\">==</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span><br/>  <span class=\"kw1\">return</span> <span class=\"re0\">$f</span> <span class=\"kw1\">if</span> <span class=\"re0\">$coef</span> <span class=\"sy0\">==</span> <span class=\"nu0\">1</span><span class=\"sy0\">;</span><br/>  <span class=\"kw1\">return</span> <span class=\"sy0\">-</span>taneval<span class=\"br0\">(</span><span class=\"sy0\">-</span><span class=\"re0\">$coef</span><span class=\"sy0\">,</span> <span class=\"re0\">$f</span><span class=\"br0\">)</span> <span class=\"kw1\">if</span> <span class=\"re0\">$coef</span> <span class=\"sy0\">&lt;</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span><br/>\u00a0<br/>  <span class=\"kw1\">my</span> <span class=\"re0\">$a</span> <span class=\"sy0\">=</span> taneval<span class=\"br0\">(</span><span class=\"re0\">$coef</span><span class=\"sy0\">+&gt;</span><span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"re0\">$f</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>  <span class=\"kw1\">my</span> <span class=\"re0\">$b</span> <span class=\"sy0\">=</span> taneval<span class=\"br0\">(</span><span class=\"re0\">$coef</span> <span class=\"sy0\">-</span> <span class=\"re0\">$coef</span><span class=\"sy0\">+&gt;</span><span class=\"nu0\">1</span><span class=\"sy0\">,</span> <span class=\"re0\">$f</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>  <span class=\"br0\">(</span><span class=\"re0\">$a</span><span class=\"sy0\">+</span><span class=\"re0\">$b</span><span class=\"br0\">)</span><span class=\"sy0\">/</span><span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">-</span><span class=\"re0\">$a</span><span class=\"sy0\">*</span><span class=\"re0\">$b</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"kw2\">sub</span> tans <span class=\"br0\">(</span><span class=\"re0\">@xs</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>  <span class=\"kw1\">return</span> taneval<span class=\"br0\">(</span><span class=\"re0\">@xs</span><span class=\"br0\">[</span><span class=\"nu0\">0</span><span class=\"sy0\">;</span><span class=\"nu0\">0</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"re0\">@xs</span><span class=\"br0\">[</span><span class=\"nu0\">0</span><span class=\"sy0\">;</span><span class=\"nu0\">1</span><span class=\"br0\">]</span><span class=\"sy0\">.</span><span class=\"me1\">FatRat</span><span class=\"br0\">)</span> <span class=\"kw1\">if</span> <span class=\"re0\">@xs</span> <span class=\"sy0\">==</span> <span class=\"nu0\">1</span><span class=\"sy0\">;</span><br/>\u00a0<br/>  <span class=\"kw1\">my</span> <span class=\"re0\">$a</span> <span class=\"sy0\">=</span> tans<span class=\"br0\">(</span><span class=\"re0\">@xs</span><span class=\"br0\">[</span><span class=\"nu0\">0</span> <span class=\"sy0\">..</span> <span class=\"br0\">(</span><span class=\"sy0\">-</span><span class=\"nu0\">1</span><span class=\"sy0\">+</span><span class=\"re0\">@xs</span><span class=\"sy0\">+&gt;</span><span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>  <span class=\"kw1\">my</span> <span class=\"re0\">$b</span> <span class=\"sy0\">=</span> tans<span class=\"br0\">(</span><span class=\"re0\">@xs</span><span class=\"br0\">[</span><span class=\"br0\">(</span><span class=\"sy0\">-</span><span class=\"nu0\">1</span><span class=\"sy0\">+</span><span class=\"re0\">@xs</span><span class=\"sy0\">+&gt;</span><span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"sy0\">+</span><span class=\"nu0\">1</span> <span class=\"sy0\">..</span> <span class=\"sy0\">-</span><span class=\"nu0\">1</span><span class=\"sy0\">+</span><span class=\"re0\">@xs</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>  <span class=\"br0\">(</span><span class=\"re0\">$a</span><span class=\"sy0\">+</span><span class=\"re0\">$b</span><span class=\"br0\">)</span><span class=\"sy0\">/</span><span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">-</span><span class=\"re0\">$a</span><span class=\"sy0\">*</span><span class=\"re0\">$b</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"kw2\">sub</span> verify <span class=\"br0\">(</span><span class=\"re0\">@eqn</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>  <span class=\"kw3\">printf</span> <span class=\"st0\">\"%5s (%s)<span class=\"es0\">\\n</span>\"</span><span class=\"sy0\">,</span> <span class=\"br0\">(</span>tans<span class=\"br0\">(</span><span class=\"re0\">@eqn</span><span class=\"br0\">)</span> <span class=\"sy0\">==</span> <span class=\"nu0\">1</span><span class=\"br0\">)</span> <span class=\"sy0\">??</span> <span class=\"st0\">\"OK\"</span> <span class=\"sy0\">!!</span> <span class=\"st0\">\"Error\"</span><span class=\"sy0\">,</span><br/>    <span class=\"br0\">(</span><span class=\"kw3\">map</span> <span class=\"br0\">{</span> <span class=\"st0\">\"[{.[0]} {.[1].nude.join('/')}]\"</span> <span class=\"br0\">}</span><span class=\"sy0\">,</span> <span class=\"re0\">@eqn</span><span class=\"br0\">)</span><span class=\"sy0\">.</span><span class=\"kw3\">join</span><span class=\"br0\">(</span><span class=\"st_h\">' '</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/>verify<span class=\"br0\">(</span><span class=\"re0\">$_</span><span class=\"br0\">)</span> <span class=\"kw1\">for</span><br/>   <span class=\"br0\">(</span><span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"sy0\">,</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">2</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"sy0\">,</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">3</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><br/>    <span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"nu0\">2</span><span class=\"sy0\">,</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">3</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"sy0\">,</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">7</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><br/>    <span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"nu0\">4</span><span class=\"sy0\">,</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">5</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"sy0\">-</span><span class=\"nu0\">1</span><span class=\"sy0\">,</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">239</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><br/>    <span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"nu0\">5</span><span class=\"sy0\">,</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">7</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">2</span><span class=\"sy0\">,</span><span class=\"nu0\">3</span><span class=\"sy0\">/</span><span class=\"nu0\">79</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><br/>    <span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"nu0\">5</span><span class=\"sy0\">,</span><span class=\"nu0\">29</span><span class=\"sy0\">/</span><span class=\"nu0\">278</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">7</span><span class=\"sy0\">,</span><span class=\"nu0\">3</span><span class=\"sy0\">/</span><span class=\"nu0\">79</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><br/>    <span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"sy0\">,</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">2</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"sy0\">,</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">5</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"sy0\">,</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">8</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><br/>    <span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"nu0\">4</span><span class=\"sy0\">,</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">5</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"sy0\">-</span><span class=\"nu0\">1</span><span class=\"sy0\">,</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">70</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"sy0\">,</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">99</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><br/>    <span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"nu0\">5</span><span class=\"sy0\">,</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">7</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">4</span><span class=\"sy0\">,</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">53</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">2</span><span class=\"sy0\">,</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">4443</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><br/>    <span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"nu0\">6</span><span class=\"sy0\">,</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">8</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">2</span><span class=\"sy0\">,</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">57</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"sy0\">,</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">239</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><br/>    <span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"nu0\">8</span><span class=\"sy0\">,</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">10</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"sy0\">-</span><span class=\"nu0\">1</span><span class=\"sy0\">,</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">239</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"sy0\">-</span><span class=\"nu0\">4</span><span class=\"sy0\">,</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">515</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><br/>    <span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"nu0\">12</span><span class=\"sy0\">,</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">18</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">8</span><span class=\"sy0\">,</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">57</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"sy0\">-</span><span class=\"nu0\">5</span><span class=\"sy0\">,</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">239</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><br/>    <span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"nu0\">16</span><span class=\"sy0\">,</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">21</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">3</span><span class=\"sy0\">,</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">239</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">4</span><span class=\"sy0\">,</span><span class=\"nu0\">3</span><span class=\"sy0\">/</span><span class=\"nu0\">1042</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><br/>    <span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"nu0\">22</span><span class=\"sy0\">,</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">28</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">2</span><span class=\"sy0\">,</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">443</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"sy0\">-</span><span class=\"nu0\">5</span><span class=\"sy0\">,</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">1393</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"sy0\">-</span><span class=\"nu0\">10</span><span class=\"sy0\">,</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">11018</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><br/>    <span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"nu0\">22</span><span class=\"sy0\">,</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">38</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">17</span><span class=\"sy0\">,</span><span class=\"nu0\">7</span><span class=\"sy0\">/</span><span class=\"nu0\">601</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">10</span><span class=\"sy0\">,</span><span class=\"nu0\">7</span><span class=\"sy0\">/</span><span class=\"nu0\">8149</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><br/>    <span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"nu0\">44</span><span class=\"sy0\">,</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">57</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">7</span><span class=\"sy0\">,</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">239</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"sy0\">-</span><span class=\"nu0\">12</span><span class=\"sy0\">,</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">682</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">24</span><span class=\"sy0\">,</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">12943</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><br/>    <span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"nu0\">88</span><span class=\"sy0\">,</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">172</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">51</span><span class=\"sy0\">,</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">239</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">32</span><span class=\"sy0\">,</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">682</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">44</span><span class=\"sy0\">,</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">5357</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">68</span><span class=\"sy0\">,</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">12943</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><br/>    <span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"nu0\">88</span><span class=\"sy0\">,</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">172</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">51</span><span class=\"sy0\">,</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">239</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">32</span><span class=\"sy0\">,</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">682</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">44</span><span class=\"sy0\">,</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">5357</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">68</span><span class=\"sy0\">,</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">21944</span><span class=\"br0\">]</span><span class=\"br0\">]</span><br/>    <span class=\"br0\">)</span><span class=\"sy0\">;</span></pre>"}, {"lang": "Python", "loc": 71, "block": "<pre class=\"python highlighted_source\"><span class=\"kw1\">import</span> <span class=\"kw3\">re</span><br/><span class=\"kw1\">from</span> fractions <span class=\"kw1\">import</span> Fraction<br/><span class=\"kw1\">from</span> <span class=\"kw3\">pprint</span> <span class=\"kw1\">import</span> <span class=\"kw3\">pprint</span> <span class=\"kw1\">as</span> pp<br/>\u00a0<br/>\u00a0<br/>equationtext <span class=\"sy0\">=</span> <span class=\"st0\">'''<span class=\"es0\">\\</span><br/>  pi/4 = arctan(1/2) + arctan(1/3) <br/>  pi/4 = 2*arctan(1/3) + arctan(1/7)<br/>  pi/4 = 4*arctan(1/5) - arctan(1/239)<br/>  pi/4 = 5*arctan(1/7) + 2*arctan(3/79)<br/>  pi/4 = 5*arctan(29/278) + 7*arctan(3/79)<br/>  pi/4 = arctan(1/2) + arctan(1/5) + arctan(1/8) <br/>  pi/4 = 4*arctan(1/5) - arctan(1/70) + arctan(1/99) <br/>  pi/4 = 5*arctan(1/7) + 4*arctan(1/53) + 2*arctan(1/4443)<br/>  pi/4 = 6*arctan(1/8) + 2*arctan(1/57) + arctan(1/239)<br/>  pi/4 = 8*arctan(1/10) - arctan(1/239) - 4*arctan(1/515)<br/>  pi/4 = 12*arctan(1/18) + 8*arctan(1/57) - 5*arctan(1/239)<br/>  pi/4 = 16*arctan(1/21) + 3*arctan(1/239) + 4*arctan(3/1042)<br/>  pi/4 = 22*arctan(1/28) + 2*arctan(1/443) - 5*arctan(1/1393) - 10*arctan(1/11018)<br/>  pi/4 = 22*arctan(1/38) + 17*arctan(7/601) + 10*arctan(7/8149)<br/>  pi/4 = 44*arctan(1/57) + 7*arctan(1/239) - 12*arctan(1/682) + 24*arctan(1/12943)<br/>  pi/4 = 88*arctan(1/172) + 51*arctan(1/239) + 32*arctan(1/682) + 44*arctan(1/5357) + 68*arctan(1/12943)<br/>  pi/4 = 88*arctan(1/172) + 51*arctan(1/239) + 32*arctan(1/682) + 44*arctan(1/5357) + 68*arctan(1/12944)<br/>'''</span><br/>\u00a0<br/><span class=\"kw1\">def</span> parse_eqn<span class=\"br0\">(</span>equationtext<span class=\"sy0\">=</span>equationtext<span class=\"br0\">)</span>:<br/>    eqn_re <span class=\"sy0\">=</span> <span class=\"kw3\">re</span>.<span class=\"kw2\">compile</span><span class=\"br0\">(</span>r<span class=\"st0\">\"\"\"(?mx)<br/>    (?P&lt;lhs&gt; ^ <span class=\"es0\">\\s</span>* pi/4 <span class=\"es0\">\\s</span>* = <span class=\"es0\">\\s</span>*)?             # LHS of equation<br/>    (?:                                         # RHS<br/>        <span class=\"es0\">\\s</span>* (?P&lt;sign&gt; [+-])? <span class=\"es0\">\\s</span>* <br/>        (?: (?P&lt;mult&gt; <span class=\"es0\">\\d</span>+) <span class=\"es0\">\\s</span>* <span class=\"es0\">\\*</span>)? <br/>        <span class=\"es0\">\\s</span>* arctan<span class=\"es0\">\\(</span> (?P&lt;numer&gt; <span class=\"es0\">\\d</span>+) / (?P&lt;denom&gt; <span class=\"es0\">\\d</span>+)<br/>    )\"\"\"</span><span class=\"br0\">)</span><br/>\u00a0<br/>    found <span class=\"sy0\">=</span> eqn_re.<span class=\"me1\">findall</span><span class=\"br0\">(</span>equationtext<span class=\"br0\">)</span><br/>    machins<span class=\"sy0\">,</span> part <span class=\"sy0\">=</span> <span class=\"br0\">[</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"br0\">[</span><span class=\"br0\">]</span><br/>    <span class=\"kw1\">for</span> lhs<span class=\"sy0\">,</span> sign<span class=\"sy0\">,</span> mult<span class=\"sy0\">,</span> numer<span class=\"sy0\">,</span> denom <span class=\"kw1\">in</span> eqn_re.<span class=\"me1\">findall</span><span class=\"br0\">(</span>equationtext<span class=\"br0\">)</span>:<br/>        <span class=\"kw1\">if</span> lhs <span class=\"kw1\">and</span> part:<br/>            machins.<span class=\"me1\">append</span><span class=\"br0\">(</span>part<span class=\"br0\">)</span><br/>            part <span class=\"sy0\">=</span> <span class=\"br0\">[</span><span class=\"br0\">]</span><br/>        part.<span class=\"me1\">append</span><span class=\"br0\">(</span> <span class=\"br0\">(</span> <span class=\"br0\">(</span>-<span class=\"nu0\">1</span> <span class=\"kw1\">if</span> sign <span class=\"sy0\">==</span> <span class=\"st0\">'-'</span> <span class=\"kw1\">else</span> <span class=\"nu0\">1</span><span class=\"br0\">)</span> * <span class=\"br0\">(</span> <span class=\"kw2\">int</span><span class=\"br0\">(</span>mult<span class=\"br0\">)</span> <span class=\"kw1\">if</span> mult <span class=\"kw1\">else</span> <span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"sy0\">,</span><br/>                       Fraction<span class=\"br0\">(</span><span class=\"kw2\">int</span><span class=\"br0\">(</span>numer<span class=\"br0\">)</span><span class=\"sy0\">,</span> <span class=\"br0\">(</span><span class=\"kw2\">int</span><span class=\"br0\">(</span>denom<span class=\"br0\">)</span> <span class=\"kw1\">if</span> denom <span class=\"kw1\">else</span> <span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"br0\">)</span> <span class=\"br0\">)</span><br/>    machins.<span class=\"me1\">append</span><span class=\"br0\">(</span>part<span class=\"br0\">)</span><br/>    <span class=\"kw1\">return</span> machins<br/>\u00a0<br/>\u00a0<br/><span class=\"kw1\">def</span> tans<span class=\"br0\">(</span>xs<span class=\"br0\">)</span>:<br/>    xslen <span class=\"sy0\">=</span> <span class=\"kw2\">len</span><span class=\"br0\">(</span>xs<span class=\"br0\">)</span><br/>    <span class=\"kw1\">if</span> xslen <span class=\"sy0\">==</span> <span class=\"nu0\">1</span>:<br/>        <span class=\"kw1\">return</span> tanEval<span class=\"br0\">(</span>*xs<span class=\"br0\">[</span><span class=\"nu0\">0</span><span class=\"br0\">]</span><span class=\"br0\">)</span><br/>    aa<span class=\"sy0\">,</span> bb <span class=\"sy0\">=</span> xs<span class=\"br0\">[</span>:xslen//<span class=\"nu0\">2</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> xs<span class=\"br0\">[</span>xslen//<span class=\"nu0\">2</span>:<span class=\"br0\">]</span><br/>    a<span class=\"sy0\">,</span> b <span class=\"sy0\">=</span> tans<span class=\"br0\">(</span>aa<span class=\"br0\">)</span><span class=\"sy0\">,</span> tans<span class=\"br0\">(</span>bb<span class=\"br0\">)</span><br/>    <span class=\"kw1\">return</span> <span class=\"br0\">(</span>a + b<span class=\"br0\">)</span> / <span class=\"br0\">(</span><span class=\"nu0\">1</span> - a * b<span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"kw1\">def</span> tanEval<span class=\"br0\">(</span>coef<span class=\"sy0\">,</span> f<span class=\"br0\">)</span>:<br/>    <span class=\"kw1\">if</span> coef <span class=\"sy0\">==</span> <span class=\"nu0\">1</span>:<br/>        <span class=\"kw1\">return</span> f<br/>    <span class=\"kw1\">if</span> coef <span class=\"sy0\">&lt;</span> <span class=\"nu0\">0</span>:<br/>        <span class=\"kw1\">return</span> -tanEval<span class=\"br0\">(</span>-coef<span class=\"sy0\">,</span> f<span class=\"br0\">)</span><br/>    ca <span class=\"sy0\">=</span> coef // <span class=\"nu0\">2</span><br/>    cb <span class=\"sy0\">=</span> coef - ca<br/>    a<span class=\"sy0\">,</span> b <span class=\"sy0\">=</span> tanEval<span class=\"br0\">(</span>ca<span class=\"sy0\">,</span> f<span class=\"br0\">)</span><span class=\"sy0\">,</span> tanEval<span class=\"br0\">(</span>cb<span class=\"sy0\">,</span> f<span class=\"br0\">)</span><br/>    <span class=\"kw1\">return</span> <span class=\"br0\">(</span>a + b<span class=\"br0\">)</span> / <span class=\"br0\">(</span><span class=\"nu0\">1</span> - a * b<span class=\"br0\">)</span><br/>\u00a0<br/>\u00a0<br/><span class=\"kw1\">if</span> __name__ <span class=\"sy0\">==</span> <span class=\"st0\">'__main__'</span>:<br/>    machins <span class=\"sy0\">=</span> parse_eqn<span class=\"br0\">(</span><span class=\"br0\">)</span><br/>    <span class=\"co1\">#pp(machins, width=160)</span><br/>    <span class=\"kw1\">for</span> machin<span class=\"sy0\">,</span> eqn <span class=\"kw1\">in</span> <span class=\"kw2\">zip</span><span class=\"br0\">(</span>machins<span class=\"sy0\">,</span> equationtext.<span class=\"me1\">split</span><span class=\"br0\">(</span><span class=\"st0\">'<span class=\"es0\">\\n</span>'</span><span class=\"br0\">)</span><span class=\"br0\">)</span>:<br/>        ans <span class=\"sy0\">=</span> tans<span class=\"br0\">(</span>machin<span class=\"br0\">)</span><br/>        <span class=\"kw1\">print</span><span class=\"br0\">(</span><span class=\"st0\">'%5s:\u00a0%s'</span>\u00a0% <span class=\"br0\">(</span> <span class=\"br0\">(</span><span class=\"st0\">'OK'</span> <span class=\"kw1\">if</span> ans <span class=\"sy0\">==</span> <span class=\"nu0\">1</span> <span class=\"kw1\">else</span> <span class=\"st0\">'ERROR'</span><span class=\"br0\">)</span><span class=\"sy0\">,</span> eqn<span class=\"br0\">)</span><span class=\"br0\">)</span></pre>"}, {"lang": "Racket", "loc": 58, "block": "<pre class=\"text highlighted_source\">\u00a0<br/>#lang racket<br/>(define (reduce e)<br/>  (match e<br/>    [(? number? a)                         a]<br/>    [(list '+ (? number? a) (? number? b)) (+ a b)]<br/>    [(list '- (? number? a) (? number? b)) (- a b)]<br/>    [(list '- (? number? a))               (- a)]<br/>    [(list '* (? number? a) (? number? b)) (* a b)]<br/>    [(list '/ (? number? a) (? number? b)) (/ a b)]<br/>    [(list '+ a b)                         (reduce `(+ ,(reduce a) ,(reduce b)))]<br/>    [(list '- a b)                         (reduce `(- ,(reduce a) ,(reduce b)))]<br/>    [(list '- a)                           (reduce `(- ,(reduce a)))]<br/>    [(list '* a b)                         (reduce `(* ,(reduce a) ,(reduce b)))]<br/>    [(list '/ a b)                         (reduce `(/ ,(reduce a) ,(reduce b)))]<br/>    [(list 'tan (list 'arctan a))          (reduce a)]<br/>    [(list 'tan (list '- a))               (reduce `(- ,(reduce `(tan ,a))))]<br/>    [(list 'tan (list '+ a b))             (reduce `(/ (+ (tan ,a) (tan ,b))<br/>                                                       (- 1 (* (tan ,a) (tan ,b)))))]<br/>    [(list 'tan (list '+ a b c ...))       (reduce `(tan (+ ,a (+ ,b ,@c))))]<br/>    [(list 'tan (list '- a b))             (reduce `(/ (+ (tan ,a) (tan (- ,b)))<br/>                                                       (- 1 (* (tan ,a) (tan (- ,b))))))]<br/>    [(list 'tan (list '* 1 a))             (reduce `(tan ,a))]<br/>    [(list 'tan (list '* (? number? n) a))<br/>     (cond [(&lt; n 0) (reduce `(- (tan (* ,(- n) ,a))))]<br/>           [(= n 0) 0]<br/>           [(even? n) (reduce `(tan (+ (* ,(/ n 2) ,a) (* ,(/ n 2) ,a))))]<br/>           [else      (reduce `(tan (+ ,a  (* ,(- n 1) ,a))))])]))<br/>\u00a0<br/>(define correct-formulas<br/>  '((tan (+ (arctan 1/2) (arctan 1/3)))<br/>    (tan (+ (* 2 (arctan 1/3)) (arctan 1/7)))<br/>    (tan (- (* 4 (arctan 1/5)) (arctan 1/239)))<br/>    (tan (+ (* 5 (arctan 1/7)) (* 2 (arctan 3/79))))<br/>    (tan (+ (* 5 (arctan 29/278)) (* 7 (arctan 3/79))))<br/>    (tan (+ (arctan 1/2) (arctan 1/5) (arctan 1/8)))<br/>    (tan (+ (* 4 (arctan 1/5)) (* -1 (arctan 1/70)) (arctan 1/99)))<br/>    (tan (+ (* 5 (arctan 1/7)) (* 4 (arctan 1/53)) (* 2 (arctan 1/4443))))<br/>    (tan (+ (* 6 (arctan 1/8)) (* 2 (arctan 1/57)) (arctan 1/239)))<br/>    (tan (+ (* 8 (arctan 1/10)) (* -1 (arctan 1/239)) (* -4 (arctan 1/515))))<br/>    (tan (+ (* 12 (arctan 1/18)) (* 8 (arctan 1/57)) (* -5 (arctan 1/239))))<br/>    (tan (+ (* 16 (arctan 1/21)) (* 3 (arctan 1/239)) (* 4 (arctan 3/1042))))<br/>    (tan (+ (* 22 (arctan 1/28)) (* 2 (arctan 1/443)) (* -5 (arctan 1/1393)) (* -10 (arctan 1/11018))))<br/>    (tan (+ (* 22 (arctan 1/38)) (* 17 (arctan 7/601)) (* 10 (arctan 7/8149))))<br/>    (tan (+ (* 44 (arctan 1/57)) (* 7 (arctan 1/239)) (* -12 (arctan 1/682)) (* 24 (arctan 1/12943))))<br/>    (tan (+ (* 88 (arctan 1/172)) (* 51 (arctan 1/239)) (* 32 (arctan 1/682)) <br/>            (* 44 (arctan 1/5357)) (* 68 (arctan 1/12943))))))<br/>\u00a0<br/>(define wrong-formula<br/>  '(tan (+ (* 88 (arctan 1/172)) (* 51 (arctan 1/239)) (* 32 (arctan 1/682)) <br/>           (* 44 (arctan 1/5357)) (* 68 (arctan 1/12944)))))<br/>\u00a0<br/>(displayln \"Do all correct formulas reduce to 1?\")<br/>(for/and ([f correct-formulas]) (= 1 (reduce f)))<br/>\u00a0<br/>(displayln \"The incorrect formula reduces to:\")<br/>(reduce wrong-formula)<br/>\u00a0</pre>"}, {"lang": "REXX", "loc": 38, "block": "<pre class=\"rexx highlighted_source\"><span class=\"coMULTI\">/*REXX program  evaluates  some  Machin\u2500like  formulas  and  verifies  their veracity.  */</span><br/>       <span class=\"kw1\">numeric</span> <span class=\"kw2\">fuzz</span> <span class=\"nu0\">3</span>;      pi=pi<span class=\"br0\">(</span><span class=\"br0\">)</span>;          @<span class=\"sy0\">.</span>=<br/> @<span class=\"sy0\">.</span>1= <span class=\"st0\">'pi/4 =    atan(1/2)    +    atan(1/3)'</span><br/> @<span class=\"sy0\">.</span>2= <span class=\"st0\">'pi/4 =  2*atan(1/3)    +    atan(1/7)'</span><br/> @<span class=\"sy0\">.</span>3= <span class=\"st0\">'pi/4 =  4*atan(1/5)    -    atan(1/239)'</span><br/> @<span class=\"sy0\">.</span>4= <span class=\"st0\">'pi/4 =  5*atan(1/7)    +  2*atan(3/79)'</span><br/> @<span class=\"sy0\">.</span>5= <span class=\"st0\">'pi/4 =  5*atan(29/278) +  7*atan(3/79)'</span><br/> @<span class=\"sy0\">.</span>6= <span class=\"st0\">'pi/4 =    atan(1/2)    +    atan(1/5)   +    atan(1/8)'</span><br/> @<span class=\"sy0\">.</span>7= <span class=\"st0\">'pi/4 =  4*atan(1/5)    -    atan(1/70)  +    atan(1/99)'</span><br/> @<span class=\"sy0\">.</span>8= <span class=\"st0\">'pi/4 =  5*atan(1/7)    +  4*atan(1/53)  +  2*atan(1/4443)'</span><br/> @<span class=\"sy0\">.</span>9= <span class=\"st0\">'pi/4 =  6*atan(1/8)    +  2*atan(1/57)  +    atan(1/239)'</span><br/>@<span class=\"sy0\">.</span>10= <span class=\"st0\">'pi/4 =  8*atan(1/10)   -    atan(1/239) -  4*atan(1/515)'</span><br/>@<span class=\"sy0\">.</span>11= <span class=\"st0\">'pi/4 = 12*atan(1/18)   +  8*atan(1/57)  -  5*atan(1/239)'</span><br/>@<span class=\"sy0\">.</span>12= <span class=\"st0\">'pi/4 = 16*atan(1/21)   +  3*atan(1/239) +  4*atan(3/1042)'</span><br/>@<span class=\"sy0\">.</span>13= <span class=\"st0\">'pi/4 = 22*atan(1/28)   +  2*atan(1/443) -  5*atan(1/1393) - 10*atan(1/11018)'</span><br/>@<span class=\"sy0\">.</span>14= <span class=\"st0\">'pi/4 = 22*atan(1/38)   + 17*atan(7/601) + 10*atan(7/8149)'</span><br/>@<span class=\"sy0\">.</span>15= <span class=\"st0\">'pi/4 = 44*atan(1/57)   +  7*atan(1/239) - 12*atan(1/682)  + 24*atan(1/12943)'</span><br/>@<span class=\"sy0\">.</span>16= <span class=\"st0\">'pi/4 = 88*atan(1/172)  + 51*atan(1/239) + 32*atan(1/682)  + 44*atan(1/5357)  + 68*atan(1/12943)'</span><br/>@<span class=\"sy0\">.</span>17= <span class=\"st0\">'pi/4 = 88*atan(1/172)  + 51*atan(1/239) + 32*atan(1/682)  + 44*atan(1/5357)  + 68*atan(1/12944)'</span><br/>\u00a0<br/>        <span class=\"kw1\">do</span> j=<span class=\"nu0\">1</span>  <span class=\"kw2\">while</span>  @<span class=\"sy0\">.</span>j<span class=\"sy0\">\\</span>==<span class=\"st0\">''</span>                  <span class=\"coMULTI\">/*evaluate each \"Machin\u2500like\" formulas.*/</span><br/>        <span class=\"kw1\">interpret</span>  <span class=\"st0\">'answer='</span>   <span class=\"st0\">\"(\"</span>   @<span class=\"sy0\">.</span>j   <span class=\"st0\">')'</span>   <span class=\"coMULTI\">/*where REXX does the heavy lifting.   */</span><br/>        <span class=\"kw1\">say</span>  <span class=\"kw6\">right</span><span class=\"br0\">(</span> <span class=\"kw6\">word</span><span class=\"br0\">(</span> <span class=\"st0\">'bad OK'</span>, answer+<span class=\"nu0\">1</span><span class=\"br0\">)</span>, <span class=\"nu0\">3</span><span class=\"br0\">)</span><span class=\"st0\">\": \"</span>                   @<span class=\"sy0\">.</span>j<br/>        <span class=\"kw3\">end</span>   <span class=\"coMULTI\">/*j*/</span><br/><span class=\"kw1\">exit</span>                                             <span class=\"coMULTI\">/*stick a fork in it,  we're all done. */</span><br/><span class=\"coMULTI\">/*\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500*/</span><br/>pi:   <span class=\"kw1\">return</span> <span class=\"nu0\">3.141592653589793238462643383279502884197169399375105820974944592307816406186</span><br/>Acos: <span class=\"kw1\">procedure</span>; <span class=\"kw1\">parse</span> <span class=\"kw1\">arg</span> x;            <span class=\"kw1\">return</span> pi<span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"sy0\">*.</span>5-Asin<span class=\"br0\">(</span>x<span class=\"br0\">)</span><br/>Atan: <span class=\"kw1\">procedure</span>; <span class=\"kw1\">arg</span> x; <span class=\"kw1\">if</span> <span class=\"kw6\">abs</span><span class=\"br0\">(</span>x<span class=\"br0\">)</span>=<span class=\"nu0\">1</span> <span class=\"kw3\">then</span> <span class=\"kw1\">return</span> pi<span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"sy0\">/</span><span class=\"nu0\">4</span><span class=\"sy0\">*</span><span class=\"kw6\">sign</span><span class=\"br0\">(</span>x<span class=\"br0\">)</span>; <span class=\"kw1\">return</span> Asin<span class=\"br0\">(</span>x<span class=\"sy0\">/</span>sqrt<span class=\"br0\">(</span><span class=\"nu0\">1</span>+x<span class=\"sy0\">*</span>x<span class=\"br0\">)</span><span class=\"br0\">)</span><br/><span class=\"coMULTI\">/*\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500*/</span><br/>Asin: <span class=\"kw1\">procedure</span>; <span class=\"kw1\">parse</span> <span class=\"kw1\">arg</span> x <span class=\"nu0\">1</span> z <span class=\"nu0\">1</span> o <span class=\"nu0\">1</span> p;   a=<span class=\"kw6\">abs</span><span class=\"br0\">(</span>x<span class=\"br0\">)</span>;   aa=a<span class=\"sy0\">*</span>a<br/>      <span class=\"kw1\">if</span> a<span class=\"sy0\">&gt;</span>=sqrt<span class=\"br0\">(</span><span class=\"nu0\">2</span><span class=\"br0\">)</span><span class=\"sy0\">*.</span>5  <span class=\"kw3\">then</span>  <span class=\"kw1\">return</span> <span class=\"kw6\">sign</span><span class=\"br0\">(</span>x<span class=\"br0\">)</span>  <span class=\"sy0\">*</span>  Acos<span class=\"br0\">(</span> sqrt<span class=\"br0\">(</span><span class=\"nu0\">1</span> - aa<span class=\"br0\">)</span> <span class=\"br0\">)</span><br/>          <span class=\"kw1\">do</span> j=<span class=\"nu0\">2</span> <span class=\"kw2\">by</span> <span class=\"nu0\">2</span> <span class=\"kw2\">until</span> p=z;  p=z;  o=o<span class=\"sy0\">*</span>aa<span class=\"sy0\">*</span><span class=\"br0\">(</span>j-<span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"sy0\">/</span>j;  z=z+o<span class=\"sy0\">/</span><span class=\"br0\">(</span>j+<span class=\"nu0\">1</span><span class=\"br0\">)</span>; <span class=\"kw3\">end</span> <span class=\"coMULTI\">/*j*/</span>;  <span class=\"kw1\">return</span> z<br/><span class=\"coMULTI\">/*\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500*/</span><br/>sqrt: <span class=\"kw1\">procedure</span>; <span class=\"kw1\">parse</span> <span class=\"kw1\">arg</span> x; <span class=\"kw1\">if</span> x=<span class=\"nu0\">0</span>  <span class=\"kw3\">then</span> <span class=\"kw1\">return</span> <span class=\"nu0\">0</span>; d=<span class=\"kw2\">digits</span><span class=\"br0\">(</span><span class=\"br0\">)</span>; m<span class=\"sy0\">.</span>=<span class=\"nu0\">9</span>; h=d+<span class=\"nu0\">6</span>; <span class=\"kw1\">numeric</span> <span class=\"kw2\">form</span><br/>      <span class=\"kw1\">numeric</span> <span class=\"kw2\">digits</span>; <span class=\"kw1\">parse</span> <span class=\"kw2\">value</span> <span class=\"kw6\">format</span><span class=\"br0\">(</span>x,<span class=\"nu0\">2</span>,<span class=\"nu0\">1</span>,,<span class=\"nu0\">0</span><span class=\"br0\">)</span> <span class=\"st0\">'E0'</span>  <span class=\"kw2\">with</span>  g <span class=\"st0\">'E'</span> _ <span class=\"sy0\">.</span>;  g=g <span class=\"sy0\">*.</span>5<span class=\"st0\">'e'</span>_\u00a0% <span class=\"nu0\">2</span><br/>           <span class=\"kw1\">do</span> j=<span class=\"nu0\">0</span>  <span class=\"kw2\">while</span> h<span class=\"sy0\">&gt;</span><span class=\"nu0\">9</span>;      m<span class=\"sy0\">.</span>j=h;              h=h%2+<span class=\"nu0\">1</span>;       <span class=\"kw3\">end</span> <span class=\"coMULTI\">/*j*/</span><br/>           <span class=\"kw1\">do</span> k=j+<span class=\"nu0\">5</span>  <span class=\"kw2\">to</span> <span class=\"nu0\">0</span>  <span class=\"kw2\">by</span> -<span class=\"nu0\">1</span>;  <span class=\"kw1\">numeric</span> <span class=\"kw2\">digits</span> m<span class=\"sy0\">.</span>k; g=<span class=\"br0\">(</span>g+x<span class=\"sy0\">/</span>g<span class=\"br0\">)</span><span class=\"sy0\">*.</span>5;  <span class=\"kw3\">end</span> <span class=\"coMULTI\">/*k*/</span>;  <span class=\"kw1\">return</span> g</pre>"}, {"lang": "Seed7", "loc": 72, "block": "<pre class=\"text highlighted_source\">$ include \"seed7_05.s7i\";<br/>  include \"bigint.s7i\";<br/>  include \"bigrat.s7i\";<br/>\u00a0<br/>const type: mTerms is array array bigInteger;<br/>\u00a0<br/>const array mTerms: testCases is [] (<br/>    [] ([] ( 1_, 1_,   2_), [] ( 1_, 1_,   3_)),<br/>    [] ([] ( 2_, 1_,   3_), [] ( 1_, 1_,   7_)),<br/>    [] ([] ( 4_, 1_,   5_), [] (-1_, 1_, 239_)),<br/>    [] ([] ( 5_, 1_,   7_), [] ( 2_, 3_,  79_)),<br/>    [] ([] ( 1_, 1_,   2_), [] ( 1_, 1_,   5_), [] (  1_, 1_,    8_)),<br/>    [] ([] ( 4_, 1_,   5_), [] (-1_, 1_,  70_), [] (  1_, 1_,   99_)),<br/>    [] ([] ( 5_, 1_,   7_), [] ( 4_, 1_,  53_), [] (  2_, 1_, 4443_)),<br/>    [] ([] ( 6_, 1_,   8_), [] ( 2_, 1_,  57_), [] (  1_, 1_,  239_)),<br/>    [] ([] ( 8_, 1_,  10_), [] (-1_, 1_, 239_), [] ( -4_, 1_,  515_)),<br/>    [] ([] (12_, 1_,  18_), [] ( 8_, 1_,  57_), [] ( -5_, 1_,  239_)),<br/>    [] ([] (16_, 1_,  21_), [] ( 3_, 1_, 239_), [] (  4_, 3_, 1042_)),<br/>    [] ([] (22_, 1_,  28_), [] ( 2_, 1_, 443_), [] ( -5_, 1_, 1393_), [] (-10_, 1_, 11018_)),<br/>    [] ([] (22_, 1_,  38_), [] (17_, 7_, 601_), [] ( 10_, 7_, 8149_)),<br/>    [] ([] (44_, 1_,  57_), [] ( 7_, 1_, 239_), [] (-12_, 1_,  682_), [] ( 24_, 1_, 12943_)),<br/>    [] ([] (88_, 1_, 172_), [] (51_, 1_, 239_), [] ( 32_, 1_,  682_), [] ( 44_, 1_,  5357_), [] (68_, 1_, 12943_)),<br/>    [] ([] (88_, 1_, 172_), [] (51_, 1_, 239_), [] ( 32_, 1_,  682_), [] ( 44_, 1_,  5357_), [] (68_, 1_, 12944_))<br/>  );<br/>\u00a0<br/>const func bigRational: tanEval (in bigInteger: coef, in bigRational: f) is func<br/>  result<br/>    var bigRational: tanEval is bigRational.value;<br/>  local<br/>    var bigRational: a is bigRational.value;<br/>    var bigRational: b is bigRational.value;<br/>  begin<br/>    if coef = 1_ then<br/>      tanEval\u00a0:= f;<br/>    elsif coef &lt; 0_ then<br/>      tanEval\u00a0:= -tanEval(-coef, f);<br/>    else<br/>      a\u00a0:= tanEval(coef div 2_, f);<br/>      b\u00a0:= tanEval(coef - coef div 2_, f);<br/>      tanEval\u00a0:= (a + b) / (1_/1_ - a * b);<br/>    end if;<br/>  end func;<br/>\u00a0<br/>const func bigRational: tans (in mTerms: terms) is func<br/>  result<br/>    var bigRational: tans is bigRational.value;<br/>  local<br/>    var bigRational: a is bigRational.value;<br/>    var bigRational: b is bigRational.value;<br/>  begin<br/>    if length(terms) = 1 then<br/>      tans\u00a0:= tanEval(terms[1][1], terms[1][2] / terms[1][3]);<br/>    else<br/>      a\u00a0:= tans(terms[.. length(terms) div 2]);<br/>      b\u00a0:= tans(terms[succ(length(terms) div 2) ..]);<br/>      tans\u00a0:= (a + b) / (1_/1_ - a * b);<br/>    end if;<br/>  end func;<br/>\u00a0<br/>const proc: main is func<br/>  local<br/>    var integer: index is 0;<br/>    var array bigInteger: term is 0 times 0_;<br/>  begin<br/>    for key index range testCases do<br/>      write(tans(testCases[index]) = 1_/1_ &lt;&amp; \": pi/4 = \");<br/>      for term range testCases[index] do<br/>        write([0] (\"+\", \"-\")[ord(term[1] &lt; 0_)] &lt;&amp; abs(term[1]) &lt;&amp; \"*arctan(\" &lt;&amp; term[2] &lt;&amp; \"/\" &lt;&amp; term[3] &lt;&amp; \")\");<br/>      end for;<br/>      writeln;<br/>    end for;<br/>  end func;</pre>"}, {"lang": "Sidef", "loc": 68, "block": "<pre class=\"ruby highlighted_source\">var equationtext = <span class=\"sy0\">&lt;&lt;</span><span class=\"st0\">'EOT'</span><br/>  pi<span class=\"sy0\">/</span><span class=\"nu0\">4</span> = arctan<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">2</span><span class=\"br0\">)</span> <span class=\"sy0\">+</span> arctan<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">3</span><span class=\"br0\">)</span><br/>  pi<span class=\"sy0\">/</span><span class=\"nu0\">4</span> = <span class=\"nu0\">2</span><span class=\"sy0\">*</span>arctan<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">3</span><span class=\"br0\">)</span> <span class=\"sy0\">+</span> arctan<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">7</span><span class=\"br0\">)</span><br/>  pi<span class=\"sy0\">/</span><span class=\"nu0\">4</span> = <span class=\"nu0\">4</span><span class=\"sy0\">*</span>arctan<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">5</span><span class=\"br0\">)</span> <span class=\"sy0\">-</span> arctan<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">239</span><span class=\"br0\">)</span><br/>  pi<span class=\"sy0\">/</span><span class=\"nu0\">4</span> = <span class=\"nu0\">5</span><span class=\"sy0\">*</span>arctan<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">7</span><span class=\"br0\">)</span> <span class=\"sy0\">+</span> <span class=\"nu0\">2</span><span class=\"sy0\">*</span>arctan<span class=\"br0\">(</span><span class=\"nu0\">3</span><span class=\"sy0\">/</span><span class=\"nu0\">79</span><span class=\"br0\">)</span><br/>  pi<span class=\"sy0\">/</span><span class=\"nu0\">4</span> = <span class=\"nu0\">5</span><span class=\"sy0\">*</span>arctan<span class=\"br0\">(</span><span class=\"nu0\">29</span><span class=\"sy0\">/</span><span class=\"nu0\">278</span><span class=\"br0\">)</span> <span class=\"sy0\">+</span> <span class=\"nu0\">7</span><span class=\"sy0\">*</span>arctan<span class=\"br0\">(</span><span class=\"nu0\">3</span><span class=\"sy0\">/</span><span class=\"nu0\">79</span><span class=\"br0\">)</span><br/>  pi<span class=\"sy0\">/</span><span class=\"nu0\">4</span> = arctan<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">2</span><span class=\"br0\">)</span> <span class=\"sy0\">+</span> arctan<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">5</span><span class=\"br0\">)</span> <span class=\"sy0\">+</span> arctan<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">8</span><span class=\"br0\">)</span><br/>  pi<span class=\"sy0\">/</span><span class=\"nu0\">4</span> = <span class=\"nu0\">4</span><span class=\"sy0\">*</span>arctan<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">5</span><span class=\"br0\">)</span> <span class=\"sy0\">-</span> arctan<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">70</span><span class=\"br0\">)</span> <span class=\"sy0\">+</span> arctan<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">99</span><span class=\"br0\">)</span><br/>  pi<span class=\"sy0\">/</span><span class=\"nu0\">4</span> = <span class=\"nu0\">5</span><span class=\"sy0\">*</span>arctan<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">7</span><span class=\"br0\">)</span> <span class=\"sy0\">+</span> <span class=\"nu0\">4</span><span class=\"sy0\">*</span>arctan<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">53</span><span class=\"br0\">)</span> <span class=\"sy0\">+</span> <span class=\"nu0\">2</span><span class=\"sy0\">*</span>arctan<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">4443</span><span class=\"br0\">)</span><br/>  pi<span class=\"sy0\">/</span><span class=\"nu0\">4</span> = <span class=\"nu0\">6</span><span class=\"sy0\">*</span>arctan<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">8</span><span class=\"br0\">)</span> <span class=\"sy0\">+</span> <span class=\"nu0\">2</span><span class=\"sy0\">*</span>arctan<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">57</span><span class=\"br0\">)</span> <span class=\"sy0\">+</span> arctan<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">239</span><span class=\"br0\">)</span><br/>  pi<span class=\"sy0\">/</span><span class=\"nu0\">4</span> = <span class=\"nu0\">8</span><span class=\"sy0\">*</span>arctan<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">10</span><span class=\"br0\">)</span> <span class=\"sy0\">-</span> arctan<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">239</span><span class=\"br0\">)</span> <span class=\"sy0\">-</span> <span class=\"nu0\">4</span><span class=\"sy0\">*</span>arctan<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">515</span><span class=\"br0\">)</span><br/>  pi<span class=\"sy0\">/</span><span class=\"nu0\">4</span> = <span class=\"nu0\">12</span><span class=\"sy0\">*</span>arctan<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">18</span><span class=\"br0\">)</span> <span class=\"sy0\">+</span> <span class=\"nu0\">8</span><span class=\"sy0\">*</span>arctan<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">57</span><span class=\"br0\">)</span> <span class=\"sy0\">-</span> <span class=\"nu0\">5</span><span class=\"sy0\">*</span>arctan<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">239</span><span class=\"br0\">)</span><br/>  pi<span class=\"sy0\">/</span><span class=\"nu0\">4</span> = <span class=\"nu0\">16</span><span class=\"sy0\">*</span>arctan<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">21</span><span class=\"br0\">)</span> <span class=\"sy0\">+</span> <span class=\"nu0\">3</span><span class=\"sy0\">*</span>arctan<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">239</span><span class=\"br0\">)</span> <span class=\"sy0\">+</span> <span class=\"nu0\">4</span><span class=\"sy0\">*</span>arctan<span class=\"br0\">(</span><span class=\"nu0\">3</span><span class=\"sy0\">/</span><span class=\"nu0\">1042</span><span class=\"br0\">)</span><br/>  pi<span class=\"sy0\">/</span><span class=\"nu0\">4</span> = <span class=\"nu0\">22</span><span class=\"sy0\">*</span>arctan<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">28</span><span class=\"br0\">)</span> <span class=\"sy0\">+</span> <span class=\"nu0\">2</span><span class=\"sy0\">*</span>arctan<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">443</span><span class=\"br0\">)</span> <span class=\"sy0\">-</span> <span class=\"nu0\">5</span><span class=\"sy0\">*</span>arctan<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">1393</span><span class=\"br0\">)</span> <span class=\"sy0\">-</span> <span class=\"nu0\">10</span><span class=\"sy0\">*</span>arctan<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">11018</span><span class=\"br0\">)</span><br/>  pi<span class=\"sy0\">/</span><span class=\"nu0\">4</span> = <span class=\"nu0\">22</span><span class=\"sy0\">*</span>arctan<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">38</span><span class=\"br0\">)</span> <span class=\"sy0\">+</span> <span class=\"nu0\">17</span><span class=\"sy0\">*</span>arctan<span class=\"br0\">(</span><span class=\"nu0\">7</span><span class=\"sy0\">/</span><span class=\"nu0\">601</span><span class=\"br0\">)</span> <span class=\"sy0\">+</span> <span class=\"nu0\">10</span><span class=\"sy0\">*</span>arctan<span class=\"br0\">(</span><span class=\"nu0\">7</span><span class=\"sy0\">/</span><span class=\"nu0\">8149</span><span class=\"br0\">)</span><br/>  pi<span class=\"sy0\">/</span><span class=\"nu0\">4</span> = <span class=\"nu0\">44</span><span class=\"sy0\">*</span>arctan<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">57</span><span class=\"br0\">)</span> <span class=\"sy0\">+</span> <span class=\"nu0\">7</span><span class=\"sy0\">*</span>arctan<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">239</span><span class=\"br0\">)</span> <span class=\"sy0\">-</span> <span class=\"nu0\">12</span><span class=\"sy0\">*</span>arctan<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">682</span><span class=\"br0\">)</span> <span class=\"sy0\">+</span> <span class=\"nu0\">24</span><span class=\"sy0\">*</span>arctan<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">12943</span><span class=\"br0\">)</span><br/>  pi<span class=\"sy0\">/</span><span class=\"nu0\">4</span> = <span class=\"nu0\">88</span><span class=\"sy0\">*</span>arctan<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">172</span><span class=\"br0\">)</span> <span class=\"sy0\">+</span> <span class=\"nu0\">51</span><span class=\"sy0\">*</span>arctan<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">239</span><span class=\"br0\">)</span> <span class=\"sy0\">+</span> <span class=\"nu0\">32</span><span class=\"sy0\">*</span>arctan<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">682</span><span class=\"br0\">)</span> <span class=\"sy0\">+</span> <span class=\"nu0\">44</span><span class=\"sy0\">*</span>arctan<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">5357</span><span class=\"br0\">)</span> <span class=\"sy0\">+</span> <span class=\"nu0\">68</span><span class=\"sy0\">*</span>arctan<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">12943</span><span class=\"br0\">)</span><br/>  pi<span class=\"sy0\">/</span><span class=\"nu0\">4</span> = <span class=\"nu0\">88</span><span class=\"sy0\">*</span>arctan<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">172</span><span class=\"br0\">)</span> <span class=\"sy0\">+</span> <span class=\"nu0\">51</span><span class=\"sy0\">*</span>arctan<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">239</span><span class=\"br0\">)</span> <span class=\"sy0\">+</span> <span class=\"nu0\">32</span><span class=\"sy0\">*</span>arctan<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">682</span><span class=\"br0\">)</span> <span class=\"sy0\">+</span> <span class=\"nu0\">44</span><span class=\"sy0\">*</span>arctan<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">5357</span><span class=\"br0\">)</span> <span class=\"sy0\">+</span> <span class=\"nu0\">68</span><span class=\"sy0\">*</span>arctan<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">/</span><span class=\"nu0\">12944</span><span class=\"br0\">)</span><br/>EOT<br/>\u00a0<br/>func parse_eqn<span class=\"br0\">(</span>equation<span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>    var eqn_re = <span class=\"sy0\">/</span><br/>    <span class=\"br0\">(</span> ^ \\s<span class=\"sy0\">*</span> pi\\<span class=\"sy0\">/</span><span class=\"nu0\">4</span> \\s<span class=\"sy0\">*</span> = \\s<span class=\"sy0\">*</span> <span class=\"br0\">)</span>?                <span class=\"co1\"># LHS of equation</span><br/>    <span class=\"br0\">(</span>?:                                       <span class=\"co1\"># RHS</span><br/>        \\s<span class=\"sy0\">*</span> <span class=\"br0\">(</span> <span class=\"br0\">[</span><span class=\"sy0\">+-</span><span class=\"br0\">]</span> <span class=\"br0\">)</span>? \\s<span class=\"sy0\">*</span><br/>        <span class=\"br0\">(</span>?: <span class=\"br0\">(</span> \\d<span class=\"sy0\">+</span> <span class=\"br0\">)</span> \\s<span class=\"sy0\">*</span> \\<span class=\"sy0\">*</span><span class=\"br0\">)</span>?<br/>        \\s<span class=\"sy0\">*</span> arctan\\<span class=\"br0\">(</span> <span class=\"br0\">(</span>\\d<span class=\"sy0\">+</span><span class=\"br0\">)</span> \\<span class=\"sy0\">/</span> <span class=\"br0\">(</span>\\d<span class=\"sy0\">+</span><span class=\"br0\">)</span> \\<span class=\"br0\">)</span><br/>    <span class=\"br0\">)</span><span class=\"sy0\">/</span>x<br/>\u00a0<br/>    gather <span class=\"br0\">{</span><br/>        <span class=\"kw1\">for</span> lhs,sign,mult,numer,denom <span class=\"kw1\">in</span> <span class=\"br0\">(</span>equation.<span class=\"me1\">findall</span><span class=\"br0\">(</span>eqn_re<span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>            take<span class=\"br0\">(</span><span class=\"br0\">[</span><br/>                <span class=\"br0\">[</span><span class=\"sy0\">+</span><span class=\"nu0\">1</span>, <span class=\"sy0\">-</span><span class=\"nu0\">1</span><span class=\"br0\">]</span><span class=\"br0\">[</span>sign == <span class=\"st0\">'-'</span><span class=\"br0\">]</span> <span class=\"sy0\">*</span> <span class=\"br0\">(</span>mult\u00a0? Num<span class=\"br0\">(</span>mult<span class=\"br0\">)</span>\u00a0: <span class=\"nu0\">1</span><span class=\"br0\">)</span>,<br/>                Num<span class=\"br0\">(</span>join<span class=\"br0\">(</span><span class=\"st0\">'/'</span>, numer, denom\u00a0? denom\u00a0: <span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>            <span class=\"br0\">]</span><span class=\"br0\">)</span><br/>        <span class=\"br0\">}</span><br/>    <span class=\"br0\">}</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/>func tanEval<span class=\"br0\">(</span><span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"br0\">)</span>, f<span class=\"br0\">)</span> <span class=\"br0\">{</span> f <span class=\"br0\">}</span><br/>\u00a0<br/>func tanEval<span class=\"br0\">(</span>coef <span class=\"br0\">{</span>.<span class=\"me1\">is_neg</span><span class=\"br0\">}</span>, f<span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>    <span class=\"sy0\">-</span>tanEval<span class=\"br0\">(</span><span class=\"sy0\">-</span>coef, f<span class=\"br0\">)</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/>func tanEval<span class=\"br0\">(</span>coef, f<span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>    var ca = coef<span class=\"sy0\">//</span><span class=\"nu0\">2</span><br/>    var cb = coef<span class=\"sy0\">-</span>ca<br/>    var <span class=\"br0\">(</span>a, b<span class=\"br0\">)</span> = <span class=\"br0\">(</span>tanEval<span class=\"br0\">(</span>ca, f<span class=\"br0\">)</span>, tanEval<span class=\"br0\">(</span>cb, f<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>    <span class=\"br0\">(</span>a <span class=\"sy0\">+</span> b<span class=\"br0\">)</span> <span class=\"sy0\">/</span> <span class=\"br0\">(</span><span class=\"nu0\">1</span> <span class=\"sy0\">-</span> a<span class=\"sy0\">*</span>b<span class=\"br0\">)</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/>func tans<span class=\"br0\">(</span>xs <span class=\"br0\">{</span>.<span class=\"me1\">len</span> == <span class=\"nu0\">1</span><span class=\"br0\">}</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>    tanEval<span class=\"br0\">(</span>xs<span class=\"br0\">[</span><span class=\"nu0\">0</span><span class=\"br0\">]</span>...<span class=\"br0\">)</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/>func tans<span class=\"br0\">(</span>xs<span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>    var <span class=\"br0\">(</span>aa, bb<span class=\"br0\">)</span> = @<span class=\"sy0\">|</span><span class=\"br0\">(</span>xs<span class=\"sy0\">/</span><span class=\"nu0\">2</span><span class=\"br0\">)</span><br/>    var <span class=\"br0\">(</span>a, b<span class=\"br0\">)</span> = <span class=\"br0\">(</span>tans<span class=\"br0\">(</span>aa<span class=\"br0\">)</span>, tans<span class=\"br0\">(</span>bb<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>    <span class=\"br0\">(</span>a <span class=\"sy0\">+</span> b<span class=\"br0\">)</span> <span class=\"sy0\">/</span> <span class=\"br0\">(</span><span class=\"nu0\">1</span> <span class=\"sy0\">-</span> a<span class=\"sy0\">*</span>b<span class=\"br0\">)</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/>var machins = equationtext.<span class=\"me1\">lines</span>.<span class=\"me1\">map</span><span class=\"br0\">(</span>parse_eqn<span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"kw1\">for</span> machin,eqn <span class=\"kw1\">in</span> <span class=\"br0\">(</span>machins ~Z equationtext.<span class=\"me1\">lines</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>    var ans = tans<span class=\"br0\">(</span>machin<span class=\"br0\">)</span><br/>    <span class=\"kw3\">printf</span><span class=\"br0\">(</span><span class=\"st0\">\"%5s:\u00a0%s<span class=\"es0\">\\n</span>\"</span>, <span class=\"br0\">(</span>ans == <span class=\"nu0\">1</span>\u00a0? <span class=\"st0\">'OK'</span>\u00a0: <span class=\"st0\">'ERROR'</span><span class=\"br0\">)</span>, eqn<span class=\"br0\">)</span><br/><span class=\"br0\">}</span></pre>"}, {"lang": "Tcl", "loc": 79, "block": "<pre class=\"tcl highlighted_source\"><span class=\"kw2\">package</span> require Tcl <span class=\"nu0\">8.5</span><br/>\u00a0<br/><span class=\"co1\"># Compute tan(atan(p)+atan(q)) using rationals</span><br/><span class=\"kw1\">proc</span> tadd <span class=\"br0\">{</span>p q<span class=\"br0\">}</span> <span class=\"br0\">{</span><br/>    lassign <span class=\"re0\">$p</span> pp pq<br/>    lassign <span class=\"re0\">$q</span> qp qq<br/>    <span class=\"kw1\">set</span> topp <span class=\"br0\">[</span><span class=\"kw1\">expr</span> <span class=\"br0\">{</span><span class=\"re0\">$pp</span><span class=\"sy0\">*</span><span class=\"re0\">$qq</span> + <span class=\"re0\">$qp</span><span class=\"sy0\">*</span><span class=\"re0\">$pq</span><span class=\"br0\">}</span><span class=\"br0\">]</span><br/>    <span class=\"kw1\">set</span> topq <span class=\"br0\">[</span><span class=\"kw1\">expr</span> <span class=\"br0\">{</span><span class=\"re0\">$pq</span><span class=\"sy0\">*</span><span class=\"re0\">$qq</span><span class=\"br0\">}</span><span class=\"br0\">]</span><br/>    <span class=\"kw1\">set</span> prodp <span class=\"br0\">[</span><span class=\"kw1\">expr</span> <span class=\"br0\">{</span><span class=\"re0\">$pp</span><span class=\"sy0\">*</span><span class=\"re0\">$qp</span><span class=\"br0\">}</span><span class=\"br0\">]</span><br/>    <span class=\"kw1\">set</span> prodq <span class=\"br0\">[</span><span class=\"kw1\">expr</span> <span class=\"br0\">{</span><span class=\"re0\">$pq</span><span class=\"sy0\">*</span><span class=\"re0\">$qq</span><span class=\"br0\">}</span><span class=\"br0\">]</span><br/>    <span class=\"kw1\">set</span> lowp <span class=\"br0\">[</span><span class=\"kw1\">expr</span> <span class=\"br0\">{</span><span class=\"re0\">$prodq</span> - <span class=\"re0\">$prodp</span><span class=\"br0\">}</span><span class=\"br0\">]</span><br/>    <span class=\"kw1\">set</span> resultp <span class=\"br0\">[</span><span class=\"kw1\">set</span> gcd1 <span class=\"br0\">[</span><span class=\"kw1\">expr</span> <span class=\"br0\">{</span><span class=\"re0\">$topp</span> <span class=\"sy0\">*</span> <span class=\"re0\">$prodq</span><span class=\"br0\">}</span><span class=\"br0\">]</span><span class=\"br0\">]</span><br/>    <span class=\"kw1\">set</span> resultq <span class=\"br0\">[</span><span class=\"kw1\">set</span> gcd2 <span class=\"br0\">[</span><span class=\"kw1\">expr</span> <span class=\"br0\">{</span><span class=\"re0\">$topq</span> <span class=\"sy0\">*</span> <span class=\"re0\">$lowp</span><span class=\"br0\">}</span><span class=\"br0\">]</span><span class=\"br0\">]</span><br/>    <span class=\"co1\"># Critical! Normalize using the GCD</span><br/>    <span class=\"kw1\">while</span> <span class=\"br0\">{</span><span class=\"re0\">$gcd2</span> <span class=\"sy0\">!</span>= <span class=\"nu0\">0</span><span class=\"br0\">}</span> <span class=\"br0\">{</span><br/>\tlassign <span class=\"br0\">[</span><span class=\"kw2\">list</span> <span class=\"re0\">$gcd2</span> <span class=\"br0\">[</span><span class=\"kw1\">expr</span> <span class=\"br0\">{</span><span class=\"re0\">$gcd1</span> <span class=\"sy0\">%</span> <span class=\"re0\">$gcd2</span><span class=\"br0\">}</span><span class=\"br0\">]</span><span class=\"br0\">]</span> gcd1 gcd2<br/>    <span class=\"br0\">}</span><br/>    <span class=\"kw2\">list</span> <span class=\"br0\">[</span><span class=\"kw1\">expr</span> <span class=\"br0\">{</span><span class=\"re0\">$resultp</span> / abs<span class=\"br0\">(</span><span class=\"re0\">$gcd1</span><span class=\"br0\">)</span><span class=\"br0\">}</span><span class=\"br0\">]</span> <span class=\"br0\">[</span><span class=\"kw1\">expr</span> <span class=\"br0\">{</span><span class=\"re0\">$resultq</span> / abs<span class=\"br0\">(</span><span class=\"re0\">$gcd1</span><span class=\"br0\">)</span><span class=\"br0\">}</span><span class=\"br0\">]</span><br/><span class=\"br0\">}</span><br/><span class=\"kw1\">proc</span> termTan <span class=\"br0\">{</span>n a b<span class=\"br0\">}</span> <span class=\"br0\">{</span><br/>    <span class=\"kw1\">if</span> <span class=\"br0\">{</span><span class=\"re0\">$n</span> <span class=\"sy0\">&lt;</span> <span class=\"nu0\">0</span><span class=\"br0\">}</span> <span class=\"br0\">{</span><br/>\t<span class=\"kw1\">set</span> n <span class=\"br0\">[</span><span class=\"kw1\">expr</span> <span class=\"br0\">{</span>-<span class=\"re0\">$n</span><span class=\"br0\">}</span><span class=\"br0\">]</span><br/>\t<span class=\"kw1\">set</span> a <span class=\"br0\">[</span><span class=\"kw1\">expr</span> <span class=\"br0\">{</span>-<span class=\"re0\">$a</span><span class=\"br0\">}</span><span class=\"br0\">]</span><br/>    <span class=\"br0\">}</span><br/>    <span class=\"kw1\">if</span> <span class=\"br0\">{</span><span class=\"re0\">$n</span> == <span class=\"nu0\">1</span><span class=\"br0\">}</span> <span class=\"br0\">{</span><br/>\t<span class=\"kw1\">return</span> <span class=\"br0\">[</span><span class=\"kw2\">list</span> <span class=\"re0\">$a</span> <span class=\"re0\">$b</span><span class=\"br0\">]</span><br/>    <span class=\"br0\">}</span><br/>    <span class=\"kw1\">set</span> k <span class=\"br0\">[</span><span class=\"kw1\">expr</span> <span class=\"br0\">{</span><span class=\"re0\">$n</span> - <span class=\"br0\">[</span><span class=\"kw1\">set</span> m <span class=\"br0\">[</span><span class=\"kw1\">expr</span> <span class=\"br0\">{</span><span class=\"re0\">$n</span> / <span class=\"nu0\">2</span><span class=\"br0\">}</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"sy0\">*</span><span class=\"nu0\">2</span><span class=\"br0\">}</span><span class=\"br0\">]</span><br/>    <span class=\"kw1\">set</span> t2 <span class=\"br0\">[</span>termTan <span class=\"re0\">$m</span> <span class=\"re0\">$a</span> <span class=\"re0\">$b</span><span class=\"br0\">]</span><br/>    <span class=\"kw1\">set</span> m2 <span class=\"br0\">[</span>tadd <span class=\"re0\">$t2</span> <span class=\"re0\">$t2</span><span class=\"br0\">]</span><br/>    <span class=\"kw1\">if</span> <span class=\"br0\">{</span><span class=\"re0\">$k</span> == <span class=\"nu0\">0</span><span class=\"br0\">}</span> <span class=\"br0\">{</span><br/>\t<span class=\"kw1\">return</span> <span class=\"re0\">$m2</span><br/>    <span class=\"br0\">}</span><br/>    <span class=\"kw1\">return</span> <span class=\"br0\">[</span>tadd <span class=\"br0\">[</span>termTan <span class=\"re0\">$k</span> <span class=\"re0\">$a</span> <span class=\"re0\">$b</span><span class=\"br0\">]</span> <span class=\"re0\">$m2</span><span class=\"br0\">]</span><br/><span class=\"br0\">}</span><br/><span class=\"kw1\">proc</span> machinTan <span class=\"br0\">{</span>terms<span class=\"br0\">}</span> <span class=\"br0\">{</span><br/>    <span class=\"kw1\">set</span> sum <span class=\"br0\">{</span><span class=\"nu0\">0</span> <span class=\"nu0\">1</span><span class=\"br0\">}</span><br/>    <span class=\"kw1\">foreach</span> term <span class=\"re0\">$terms</span> <span class=\"br0\">{</span><br/>\t<span class=\"kw1\">set</span> sum <span class=\"br0\">[</span>tadd <span class=\"re0\">$sum</span> <span class=\"br0\">[</span>termTan <span class=\"br0\">{</span><span class=\"sy0\">*</span><span class=\"br0\">}</span><span class=\"re0\">$term</span><span class=\"br0\">]</span><span class=\"br0\">]</span><br/>    <span class=\"br0\">}</span><br/>    <span class=\"kw1\">return</span> <span class=\"re0\">$sum</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"co1\"># Assumes that the formula is in the very specific form below!</span><br/><span class=\"kw1\">proc</span> parseFormula <span class=\"br0\">{</span>formula<span class=\"br0\">}</span> <span class=\"br0\">{</span><br/>    <span class=\"kw1\">set</span> RE <span class=\"br0\">{</span><span class=\"br0\">(</span>-<span class=\"sy0\">?</span>\\s<span class=\"sy0\">*</span>\\d<span class=\"sy0\">*</span>\\s<span class=\"sy0\">*</span>\\<span class=\"sy0\">*?</span><span class=\"br0\">)</span>\\s<span class=\"sy0\">*</span>arctan\\s<span class=\"sy0\">*</span>\\<span class=\"br0\">(</span>\\s<span class=\"sy0\">*</span><span class=\"br0\">(</span>-<span class=\"sy0\">?</span>\\s<span class=\"sy0\">*</span>\\d+<span class=\"br0\">)</span>\\s<span class=\"sy0\">*</span>/\\s<span class=\"sy0\">*</span><span class=\"br0\">(</span>-<span class=\"sy0\">?</span>\\s<span class=\"sy0\">*</span>\\d+<span class=\"br0\">)</span>\\s<span class=\"sy0\">*</span>\\<span class=\"br0\">)</span><span class=\"br0\">}</span><br/>    <span class=\"kw1\">set</span> nospace <span class=\"br0\">{</span><span class=\"st0\">\" \"</span> <span class=\"st0\">\"\"</span> <span class=\"st0\">\"*\"</span> <span class=\"st0\">\"\"</span><span class=\"br0\">}</span><br/>    <span class=\"kw1\">foreach</span> <span class=\"br0\">{</span>all n a b<span class=\"br0\">}</span> <span class=\"br0\">[</span><span class=\"kw2\">regexp</span> -inline -all <span class=\"re0\">$RE</span> <span class=\"re0\">$formula</span><span class=\"br0\">]</span> <span class=\"br0\">{</span><br/>\t<span class=\"kw1\">if</span> <span class=\"br0\">{</span><span class=\"sy0\">!</span><span class=\"br0\">[</span><span class=\"kw2\">regexp</span> <span class=\"br0\">{</span>\\d<span class=\"br0\">}</span> <span class=\"re0\">$n</span><span class=\"br0\">]</span><span class=\"br0\">}</span> <span class=\"br0\">{</span><span class=\"kw2\">append</span> n <span class=\"nu0\">1</span><span class=\"br0\">}</span><br/>\t<span class=\"kw2\">lappend</span> result <span class=\"br0\">[</span><span class=\"kw2\">list</span> <span class=\"br0\">[</span><span class=\"kw2\">string</span> map <span class=\"re0\">$nospace</span> <span class=\"re0\">$n</span><span class=\"br0\">]</span> <span class=\"br0\">[</span><span class=\"kw2\">string</span> map <span class=\"re0\">$nospace</span> <span class=\"re0\">$a</span><span class=\"br0\">]</span> <span class=\"br0\">[</span><span class=\"kw2\">string</span> map <span class=\"re0\">$nospace</span> <span class=\"re0\">$b</span><span class=\"br0\">]</span><span class=\"br0\">]</span><br/>    <span class=\"br0\">}</span><br/>    <span class=\"kw1\">return</span> <span class=\"re0\">$result</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"kw1\">foreach</span> formula <span class=\"br0\">{</span><br/>    <span class=\"st0\">\"pi/4 = arctan(1/2) + arctan(1/3)\"</span><br/>    <span class=\"st0\">\"pi/4 = 2*arctan(1/3) + arctan(1/7)\"</span><br/>    <span class=\"st0\">\"pi/4 = 4*arctan(1/5) - arctan(1/239)\"</span><br/>    <span class=\"st0\">\"pi/4 = 5*arctan(1/7) + 2*arctan(3/79)\"</span><br/>    <span class=\"st0\">\"pi/4 = 5*arctan(29/278) + 7*arctan(3/79)\"</span><br/>    <span class=\"st0\">\"pi/4 = arctan(1/2) + arctan(1/5) + arctan(1/8)\"</span><br/>    <span class=\"st0\">\"pi/4 = 4*arctan(1/5) - arctan(1/70) + arctan(1/99)\"</span><br/>    <span class=\"st0\">\"pi/4 = 5*arctan(1/7) + 4*arctan(1/53) + 2*arctan(1/4443)\"</span><br/>    <span class=\"st0\">\"pi/4 = 6*arctan(1/8) + 2*arctan(1/57) + arctan(1/239)\"</span><br/>    <span class=\"st0\">\"pi/4 = 8*arctan(1/10) - arctan(1/239) - 4*arctan(1/515)\"</span><br/>    <span class=\"st0\">\"pi/4 = 12*arctan(1/18) + 8*arctan(1/57) - 5*arctan(1/239)\"</span><br/>    <span class=\"st0\">\"pi/4 = 16*arctan(1/21) + 3*arctan(1/239) + 4*arctan(3/1042)\"</span><br/>    <span class=\"st0\">\"pi/4 = 22*arctan(1/28) + 2*arctan(1/443) - 5*arctan(1/1393) - 10*arctan(1/11018)\"</span><br/>    <span class=\"st0\">\"pi/4 = 22*arctan(1/38) + 17*arctan(7/601) + 10*arctan(7/8149)\"</span><br/>    <span class=\"st0\">\"pi/4 = 44*arctan(1/57) + 7*arctan(1/239) - 12*arctan(1/682) + 24*arctan(1/12943)\"</span><br/>    <span class=\"st0\">\"pi/4 = 88*arctan(1/172) + 51*arctan(1/239) + 32*arctan(1/682) + 44*arctan(1/5357) + 68*arctan(1/12943)\"</span><br/>    <span class=\"st0\">\"pi/4 = 88*arctan(1/172) + 51*arctan(1/239) + 32*arctan(1/682) + 44*arctan(1/5357) + 68*arctan(1/12944)\"</span><br/><span class=\"br0\">}</span> <span class=\"br0\">{</span><br/>    <span class=\"kw1\">if</span> <span class=\"br0\">{</span><span class=\"br0\">[</span>tcl::<span class=\"me1\">mathop</span>::== <span class=\"br0\">{</span><span class=\"sy0\">*</span><span class=\"br0\">}</span><span class=\"br0\">[</span>machinTan <span class=\"br0\">[</span>parseFormula <span class=\"re0\">$formula</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"br0\">}</span> <span class=\"br0\">{</span><br/>\t<span class=\"kw2\">puts</span> <span class=\"st0\">\"Yes! '$formula' is true\"</span><br/>    <span class=\"br0\">}</span> <span class=\"kw1\">else</span> <span class=\"br0\">{</span><br/>\t<span class=\"kw2\">puts</span> <span class=\"st0\">\"No! '$formula' not true\"</span><br/>    <span class=\"br0\">}</span><br/><span class=\"br0\">}</span></pre>"}, {"lang": "XPL0", "loc": 96, "block": "<pre class=\"text highlighted_source\">code ChOut=8, Text=12;  \\intrinsic routines<br/>int  Number(18);        \\numbers from equations<br/>def  LF=$0A;            \\ASCII line feed (end-of-line character)<br/>\u00a0<br/>func Parse(S);          \\Convert numbers in string S to binary in Number array<br/>char S;<br/>int  I, Neg;<br/>\u00a0<br/>        proc GetNum;    \\Get number from string S<br/>        int  N;<br/>        [while S(0)&lt;^0\u00a0! S(0)&gt;^9 do S:= S+1;<br/>        N:= S(0)-^0;  S:= S+1;<br/>        while S(0)&gt;=^0 &amp; S(0)&lt;=^9 do<br/>                [N:= N*10 + S(0) - ^0;  S:= S+1];<br/>        Number(I):= N;  I:= I+1;<br/>        ];<br/>\u00a0<br/>[while S(0)#^= do S:= S+1;      \\skip to \"=\"<br/>I:= 0;<br/>loop    [Neg:= false;           \\assume positive term<br/>        loop    [S:= S+1;       \\next char<br/>                case S(0) of<br/>                  LF:   [Number(I):= 0;  return S+1];   \\mark end of array<br/>                  ^-:   Neg:= true;                     \\term is negative<br/>                  ^a:   [Number(I):= 1;  I:= I+1; quit] \\no coefficient so use 1<br/>                other if S(0)&gt;=^0 &amp; S(0)&lt;=^9 then       \\if digit<br/>                        [S:= S-1;  GetNum;  quit];      \\backup and get number<br/>                ];<br/>        GetNum;                                         \\numerator<br/>        if Neg then Number(I-1):= -Number(I-1);         \\tan(-a) = -tan(a)<br/>        GetNum;                                         \\denominator<br/>        ];<br/>];<br/>\u00a0<br/>\u00a0<br/>func GCD(U, V);         \\Return the greatest common divisor of U and V<br/>int  U, V;<br/>int  T;<br/>[while V do             \\Euclid's method<br/>    [T:= U;  U:= V;  V:= rem(T/V)];<br/>return abs(U);<br/>];<br/>\u00a0<br/>proc Verify;            \\Verify that tangent of equation = 1 (i.e: E = F)<br/>int  E, F, I, J;<br/>\u00a0<br/>    proc Machin(A, B, C, D);<br/>    int  A, B, C, D;<br/>    int  Div;<br/>    \\tan(a+b) = (tan(a) + tan(b)) / (1 - tan(a)*tan(b))<br/>    \\tan(arctan(A/B) + arctan(C/D))<br/>    \\   = (tan(arctan(A/B)) + tan(arctan(C/D))) / (1 - tan(arctan(A/B))*tan(arctan(C/D)))<br/>    \\   = (A/B + C/D) / (1 - A/B*C/D)<br/>    \\   = (A*D/B*D + B*C/B*D) / (B*D/B*D - A*C/B*D)<br/>    \\   = (A*D + B*C) / (B*D - A*C)<br/>    [E:= A*D + B*C;  F:= B*D - A*C;<br/>    Div:= GCD(E, F);    \\keep integers from getting too big<br/>    E:= E/Div;  F:= F/Div;<br/>    ];<br/>\u00a0<br/>[E:= 0;  F:= 1;  I:= 0;<br/>while Number(I) do<br/>    [for J:= 1 to Number(I) do<br/>        Machin(E, F, Number(I+1), Number(I+2));<br/>    I:= I+3;<br/>    ];<br/>Text(0, if E=F then \"Yes  \" else \"No   \");<br/>];<br/>\u00a0<br/>\u00a0<br/>char S, SS;  int I;<br/>[S:= \"pi/4 = arctan(1/2) + arctan(1/3) <br/>pi/4 = 2*arctan(1/3) + arctan(1/7)<br/>pi/4 = 4*arctan(1/5) - arctan(1/239)<br/>pi/4 = 5*arctan(1/7) + 2*arctan(3/79)<br/>pi/4 = 5*arctan(29/278) + 7*arctan(3/79)<br/>pi/4 = arctan(1/2) + arctan(1/5) + arctan(1/8) <br/>pi/4 = 4*arctan(1/5) - arctan(1/70) + arctan(1/99) <br/>pi/4 = 5*arctan(1/7) + 4*arctan(1/53) + 2*arctan(1/4443)<br/>pi/4 = 6*arctan(1/8) + 2*arctan(1/57) + arctan(1/239)<br/>pi/4 = 8*arctan(1/10) - arctan(1/239) - 4*arctan(1/515)<br/>pi/4 = 12*arctan(1/18) + 8*arctan(1/57) - 5*arctan(1/239)<br/>pi/4 = 16*arctan(1/21) + 3*arctan(1/239) + 4*arctan(3/1042)<br/>pi/4 = 22*arctan(1/28) + 2*arctan(1/443) - 5*arctan(1/1393) - 10*arctan(1/11018)<br/>pi/4 = 22*arctan(1/38) + 17*arctan(7/601) + 10*arctan(7/8149)<br/>pi/4 = 44*arctan(1/57) + 7*arctan(1/239) - 12*arctan(1/682) + 24*arctan(1/12943)<br/>pi/4 = 88*arctan(1/172) + 51*arctan(1/239) + 32*arctan(1/682) + 44*arctan(1/5357) + 68*arctan(1/12943)<br/>pi/4 = 88*arctan(1/172) + 51*arctan(1/239) + 32*arctan(1/682) + 44*arctan(1/5357) + 68*arctan(1/12944)<br/> \";                             \\Python version of equations (thanks!)<br/>for I:= 1 to 17 do<br/>        [SS:= S;                \\save start of string line<br/>        S:= Parse(S);           \\returns start of next line<br/>        Verify;                 \\correct Machin equation? Yes or No<br/>        repeat ChOut(0, SS(0)); SS:= SS+1 until SS(0)=LF;  ChOut(0, LF); \\show equation<br/>        ];<br/>]</pre>"}]}