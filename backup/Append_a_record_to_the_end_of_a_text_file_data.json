{"task": "Append_a_record_to_the_end_of_a_text_file", "blocks": [{"lang": "AWK", "loc": 26, "block": "<pre class=\"awk highlighted_source\">\u00a0<br/><span class=\"co1\"># syntax: GAWK -f APPEND_A_RECORD_TO_THE_END_OF_A_TEXT_FILE.AWK</span><br/><span class=\"kw2\">BEGIN</span> <span class=\"br0\">{</span><br/>    fn = <span class=\"st0\">\"<span class=\"es0\">\\\\</span>etc<span class=\"es0\">\\\\</span>passwd\"</span><br/><span class=\"co1\"># create and populate file</span><br/>    <span class=\"kw5\">print</span><span class=\"br0\">(</span><span class=\"st0\">\"account:password:UID:GID:fullname,office,extension,homephone,email:directory:shell\"</span><span class=\"br0\">)</span> <span class=\"sy2\">&gt;</span>fn<br/>    <span class=\"kw5\">print</span><span class=\"br0\">(</span><span class=\"st0\">\"jsmith:x:1001:1000:Joe Smith,Room 1007,(234)555-8917,(234)555-0077,<a class=\"__cf_email__\" data-cfemail=\"0a607967637e624a7865796f7e7e6b69656e6f2465786d\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>:/home/jsmith:/bin/bash\"</span><span class=\"br0\">)</span> <span class=\"sy2\">&gt;</span>fn<br/>    <span class=\"kw5\">print</span><span class=\"br0\">(</span><span class=\"st0\">\"jdoe:x:1002:1000:Jane Doe,Room 1004,(234)555-8914,(234)555-0044,<a class=\"__cf_email__\" data-cfemail=\"5e343a313b1e2c312d3b2a2a3f3d313a3b70312c39\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>:/home/jdoe:/bin/bash\"</span><span class=\"br0\">)</span> <span class=\"sy2\">&gt;</span>fn<br/>    <span class=\"kw5\">close</span><span class=\"br0\">(</span>fn<span class=\"br0\">)</span><br/>    show_file<span class=\"br0\">(</span><span class=\"st0\">\"initial file\"</span><span class=\"br0\">)</span><br/><span class=\"co1\"># append record</span><br/>    <span class=\"kw5\">print</span><span class=\"br0\">(</span><span class=\"st0\">\"xyz:x:1003:1000:X Yz,Room 1003,(234)555-8913,(234)555-0033,<a class=\"__cf_email__\" data-cfemail=\"94ecedeed4e6fbe7f1e0e0f5f7fbf0f1bafbe6f3\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>:/home/xyz:/bin/bash\"</span><span class=\"br0\">)</span> <span class=\"sy2\">&gt;&gt;</span>fn<br/>    <span class=\"kw5\">close</span><span class=\"br0\">(</span>fn<span class=\"br0\">)</span><br/>    show_file<span class=\"br0\">(</span><span class=\"st0\">\"file after append\"</span><span class=\"br0\">)</span><br/>    exit<span class=\"br0\">(</span><span class=\"nu0\">0</span><span class=\"br0\">)</span><br/><span class=\"br0\">}</span><br/><span class=\"kw6\">function</span> show_file<span class=\"br0\">(</span>desc,  <span class=\"kw3\">nr</span>,rec<span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>    <span class=\"kw5\">printf</span><span class=\"br0\">(</span><span class=\"st0\">\"%s:<span class=\"es0\">\\n</span>\"</span>,desc<span class=\"br0\">)</span><br/>    <span class=\"kw1\">while</span> <span class=\"br0\">(</span><span class=\"kw5\">getline</span> rec <span class=\"sy2\">&lt;</span>fn <span class=\"sy2\">&gt;</span> <span class=\"nu0\">0</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>      <span class=\"kw3\">nr</span><span class=\"sy3\">++</span><br/>      <span class=\"kw5\">printf</span><span class=\"br0\">(</span><span class=\"st0\">\"%s<span class=\"es0\">\\n</span>\"</span>,rec<span class=\"br0\">)</span><br/>    <span class=\"br0\">}</span><br/>    <span class=\"kw5\">close</span><span class=\"br0\">(</span>fn<span class=\"br0\">)</span><br/>    <span class=\"kw5\">printf</span><span class=\"br0\">(</span><span class=\"st0\">\"%d records<span class=\"es0\">\\n</span><span class=\"es0\">\\n</span>\"</span>,<span class=\"kw3\">nr</span><span class=\"br0\">)</span><br/><span class=\"br0\">}</span><br/>\u00a0</pre>"}, {"lang": "Batch File", "loc": 18, "block": "<pre class=\"dos highlighted_source\">\u00a0<br/><span class=\"sy0\">@</span><a href=\"http://www.ss64.com/nt/echo.html\"><span class=\"kw3\">echo</span></a> off<br/>\u00a0<br/><span class=\"sy0\">(</span><br/>  <a href=\"http://www.ss64.com/nt/echo.html\"><span class=\"kw3\">echo</span></a> jsmith:x:1001:1000:Joe Smith,Room 1007,<span class=\"co3\">^(</span>234<span class=\"co3\">^)</span>555-8917,<span class=\"co3\">^(</span>234<span class=\"co3\">^)</span>555-0077,jsmith<span class=\"sy0\">@</span>rosettacode.org:/home/jsmith:/bin/bash<br/>  <a href=\"http://www.ss64.com/nt/echo.html\"><span class=\"kw3\">echo</span></a> jdoe:x:1002:1000:Jane Doe,Room 1004,<span class=\"co3\">^(</span>234<span class=\"co3\">^)</span>555-8914,<span class=\"co3\">^(</span>234<span class=\"co3\">^)</span>555-0044,jdoe<span class=\"sy0\">@</span>rosettacode.org:/home/jdoe:/bin/bash<br/><span class=\"sy0\">)</span> <span class=\"sy0\">&gt;</span> append.txt<br/>\u00a0<br/><a href=\"http://www.ss64.com/nt/echo.html\"><span class=\"kw3\">echo</span></a> Current contents of append.txt:<br/>type append.txt<br/><a href=\"http://www.ss64.com/nt/echo.html\"><span class=\"kw3\">echo</span></a>.<br/>\u00a0<br/><a href=\"http://www.ss64.com/nt/echo.html\"><span class=\"kw3\">echo</span></a> xyz:x:1003:1000:X Yz,Room 1003,<span class=\"co3\">^(</span>234<span class=\"co3\">^)</span>555-8913,<span class=\"co3\">^(</span>234<span class=\"co3\">^)</span>555-0033,xyz<span class=\"sy0\">@</span>rosettacode.org:/home/xyz:/bin/bash <span class=\"sy0\">&gt;&gt;</span> append.txt<br/>\u00a0<br/><a href=\"http://www.ss64.com/nt/echo.html\"><span class=\"kw3\">echo</span></a> New contents of append.txt:<br/>type append.txt<br/>pause<span class=\"sy0\">&gt;</span><a href=\"http://www.ss64.com/nt/nul.html\"><span class=\"kw4\">nul</span></a><br/>\u00a0</pre>"}, {"lang": "C", "loc": 53, "block": "<pre class=\"c highlighted_source\"><span class=\"co2\">#include &lt;stdio.h&gt;</span><br/><span class=\"co2\">#include &lt;string.h&gt;</span><br/><span class=\"coMULTI\">/* note that UID &amp; GID are of type \"int\" */</span><br/><span class=\"kw4\">typedef</span> <span class=\"kw4\">const</span> <span class=\"kw4\">char</span> <span class=\"sy0\">*</span>STRING<span class=\"sy0\">;</span><br/><span class=\"kw4\">typedef</span> <span class=\"kw4\">struct</span><span class=\"br0\">{</span>STRING fullname<span class=\"sy0\">,</span> office<span class=\"sy0\">,</span> extension<span class=\"sy0\">,</span> homephone<span class=\"sy0\">,</span> email<span class=\"sy0\">;</span> <span class=\"br0\">}</span> gecos_t<span class=\"sy0\">;</span><br/><span class=\"kw4\">typedef</span> <span class=\"kw4\">struct</span><span class=\"br0\">{</span>STRING account<span class=\"sy0\">,</span> password<span class=\"sy0\">;</span> <span class=\"kw4\">int</span> uid<span class=\"sy0\">,</span> gid<span class=\"sy0\">;</span> gecos_t gecos<span class=\"sy0\">;</span> STRING directory<span class=\"sy0\">,</span> shell<span class=\"sy0\">;</span> <span class=\"br0\">}</span> passwd_t<span class=\"sy0\">;</span><br/>\u00a0<br/><span class=\"co2\">#define GECOS_FMT \"%s,%s,%s,%s,%s\"</span><br/><span class=\"co2\">#define PASSWD_FMT \"%s:%s:%d:%d:\"GECOS_FMT\":%s:%s\"</span><br/>\u00a0<br/>passwd_t passwd_list<span class=\"br0\">[</span><span class=\"br0\">]</span><span class=\"sy0\">=</span><span class=\"br0\">{</span><br/>  <span class=\"br0\">{</span><span class=\"st0\">\"jsmith\"</span><span class=\"sy0\">,</span> <span class=\"st0\">\"x\"</span><span class=\"sy0\">,</span> <span class=\"nu0\">1001</span><span class=\"sy0\">,</span> <span class=\"nu0\">1000</span><span class=\"sy0\">,</span> <span class=\"coMULTI\">/* UID and GID are type int */</span><br/>    <span class=\"br0\">{</span><span class=\"st0\">\"Joe Smith\"</span><span class=\"sy0\">,</span> <span class=\"st0\">\"Room 1007\"</span><span class=\"sy0\">,</span> <span class=\"st0\">\"(234)555-8917\"</span><span class=\"sy0\">,</span> <span class=\"st0\">\"(234)555-0077\"</span><span class=\"sy0\">,</span> <span class=\"st0\">\"<a class=\"__cf_email__\" data-cfemail=\"3d574e505449557d4f524e5849495c5e52595813524f5a\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>\"</span><span class=\"br0\">}</span><span class=\"sy0\">,</span><br/>    <span class=\"st0\">\"/home/jsmith\"</span><span class=\"sy0\">,</span> <span class=\"st0\">\"/bin/bash\"</span><span class=\"br0\">}</span><span class=\"sy0\">,</span><br/>  <span class=\"br0\">{</span><span class=\"st0\">\"jdoe\"</span><span class=\"sy0\">,</span> <span class=\"st0\">\"x\"</span><span class=\"sy0\">,</span> <span class=\"nu0\">1002</span><span class=\"sy0\">,</span> <span class=\"nu0\">1000</span><span class=\"sy0\">,</span><br/>    <span class=\"br0\">{</span><span class=\"st0\">\"Jane Doe\"</span><span class=\"sy0\">,</span> <span class=\"st0\">\"Room 1004\"</span><span class=\"sy0\">,</span> <span class=\"st0\">\"(234)555-8914\"</span><span class=\"sy0\">,</span> <span class=\"st0\">\"(234)555-0044\"</span><span class=\"sy0\">,</span> <span class=\"st0\">\"<a class=\"__cf_email__\" data-cfemail=\"bfd5dbd0daffcdd0ccdacbcbdedcd0dbda91d0cdd8\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>\"</span><span class=\"br0\">}</span><span class=\"sy0\">,</span><br/>    <span class=\"st0\">\"/home/jdoe\"</span><span class=\"sy0\">,</span> <span class=\"st0\">\"/bin/bash\"</span><span class=\"br0\">}</span><br/><span class=\"br0\">}</span><span class=\"sy0\">;</span><br/>\u00a0<br/>main<span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"br0\">{</span><br/><span class=\"coMULTI\">/****************************<br/>* Create a passwd text file *<br/>****************************/</span><br/>  FILE <span class=\"sy0\">*</span>passwd_text<span class=\"sy0\">=</span><a href=\"http://www.opengroup.org/onlinepubs/009695399/functions/fopen.html\"><span class=\"kw3\">fopen</span></a><span class=\"br0\">(</span><span class=\"st0\">\"passwd.txt\"</span><span class=\"sy0\">,</span> <span class=\"st0\">\"w\"</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>  <span class=\"kw4\">int</span> rec_num<span class=\"sy0\">;</span><br/>  <span class=\"kw1\">for</span><span class=\"br0\">(</span>rec_num<span class=\"sy0\">=</span><span class=\"nu0\">0</span><span class=\"sy0\">;</span> rec_num <span class=\"sy0\">&lt;</span> <span class=\"kw4\">sizeof</span> passwd_list<span class=\"sy0\">/</span><span class=\"kw4\">sizeof</span><span class=\"br0\">(</span>passwd_t<span class=\"br0\">)</span><span class=\"sy0\">;</span> rec_num<span class=\"sy0\">++</span><span class=\"br0\">)</span><br/>    <a href=\"http://www.opengroup.org/onlinepubs/009695399/functions/fprintf.html\"><span class=\"kw3\">fprintf</span></a><span class=\"br0\">(</span>passwd_text<span class=\"sy0\">,</span> PASSWD_FMT<span class=\"st0\">\"<span class=\"es1\">\\n</span>\"</span><span class=\"sy0\">,</span> passwd_list<span class=\"br0\">[</span>rec_num<span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>  <a href=\"http://www.opengroup.org/onlinepubs/009695399/functions/fclose.html\"><span class=\"kw3\">fclose</span></a><span class=\"br0\">(</span>passwd_text<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>\u00a0<br/><span class=\"coMULTI\">/********************************<br/>* Load text ready for appending *<br/>********************************/</span><br/>  passwd_text<span class=\"sy0\">=</span><a href=\"http://www.opengroup.org/onlinepubs/009695399/functions/fopen.html\"><span class=\"kw3\">fopen</span></a><span class=\"br0\">(</span><span class=\"st0\">\"passwd.txt\"</span><span class=\"sy0\">,</span> <span class=\"st0\">\"a+\"</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>  <span class=\"kw4\">char</span> passwd_buf<span class=\"br0\">[</span>BUFSIZ<span class=\"br0\">]</span><span class=\"sy0\">;</span> <span class=\"coMULTI\">/* warning: fixed length */</span><br/>  passwd_t new_rec <span class=\"sy0\">=</span><br/>      <span class=\"br0\">{</span><span class=\"st0\">\"xyz\"</span><span class=\"sy0\">,</span> <span class=\"st0\">\"x\"</span><span class=\"sy0\">,</span> <span class=\"nu0\">1003</span><span class=\"sy0\">,</span> <span class=\"nu0\">1000</span><span class=\"sy0\">,</span> <span class=\"coMULTI\">/* UID and GID are type int */</span><br/>          <span class=\"br0\">{</span><span class=\"st0\">\"X Yz\"</span><span class=\"sy0\">,</span> <span class=\"st0\">\"Room 1003\"</span><span class=\"sy0\">,</span> <span class=\"st0\">\"(234)555-8913\"</span><span class=\"sy0\">,</span> <span class=\"st0\">\"(234)555-0033\"</span><span class=\"sy0\">,</span> <span class=\"st0\">\"<a class=\"__cf_email__\" data-cfemail=\"2a5253506a5845594f5e5e4b49454e4f0445584d\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>\"</span><span class=\"br0\">}</span><span class=\"sy0\">,</span><br/>          <span class=\"st0\">\"/home/xyz\"</span><span class=\"sy0\">,</span> <span class=\"st0\">\"/bin/bash\"</span><span class=\"br0\">}</span><span class=\"sy0\">;</span><br/>  <a href=\"http://www.opengroup.org/onlinepubs/009695399/functions/sprintf.html\"><span class=\"kw3\">sprintf</span></a><span class=\"br0\">(</span>passwd_buf<span class=\"sy0\">,</span> PASSWD_FMT<span class=\"st0\">\"<span class=\"es1\">\\n</span>\"</span><span class=\"sy0\">,</span> new_rec<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/><span class=\"coMULTI\">/* An atomic append without a file lock, <br/>   Note: wont work on some file systems, eg NFS */</span><br/>  write<span class=\"br0\">(</span>fileno<span class=\"br0\">(</span>passwd_text<span class=\"br0\">)</span><span class=\"sy0\">,</span> passwd_buf<span class=\"sy0\">,</span> <a href=\"http://www.opengroup.org/onlinepubs/009695399/functions/strlen.html\"><span class=\"kw3\">strlen</span></a><span class=\"br0\">(</span>passwd_buf<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>  close<span class=\"br0\">(</span>passwd_text<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>\u00a0<br/><span class=\"coMULTI\">/***********************************************<br/>* Finally reopen and check record was appended *<br/>***********************************************/</span><br/>  passwd_text<span class=\"sy0\">=</span><a href=\"http://www.opengroup.org/onlinepubs/009695399/functions/fopen.html\"><span class=\"kw3\">fopen</span></a><span class=\"br0\">(</span><span class=\"st0\">\"passwd.txt\"</span><span class=\"sy0\">,</span> <span class=\"st0\">\"r\"</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>  <span class=\"kw1\">while</span><span class=\"br0\">(</span><span class=\"sy0\">!</span><a href=\"http://www.opengroup.org/onlinepubs/009695399/functions/feof.html\"><span class=\"kw3\">feof</span></a><span class=\"br0\">(</span>passwd_text<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>    <a href=\"http://www.opengroup.org/onlinepubs/009695399/functions/fscanf.html\"><span class=\"kw3\">fscanf</span></a><span class=\"br0\">(</span>passwd_text<span class=\"sy0\">,</span> <span class=\"st0\">\"%[^<span class=\"es1\">\\n</span>]<span class=\"es1\">\\n</span>\"</span><span class=\"sy0\">,</span> passwd_buf<span class=\"sy0\">,</span> <span class=\"st0\">\"<span class=\"es1\">\\n</span>\"</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>  <span class=\"kw1\">if</span><span class=\"br0\">(</span><a href=\"http://www.opengroup.org/onlinepubs/009695399/functions/strstr.html\"><span class=\"kw3\">strstr</span></a><span class=\"br0\">(</span>passwd_buf<span class=\"sy0\">,</span> <span class=\"st0\">\"xyz\"</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>    <a href=\"http://www.opengroup.org/onlinepubs/009695399/functions/printf.html\"><span class=\"kw3\">printf</span></a><span class=\"br0\">(</span><span class=\"st0\">\"Appended record:\u00a0%s<span class=\"es1\">\\n</span>\"</span><span class=\"sy0\">,</span> passwd_buf<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/><span class=\"br0\">}</span></pre>"}, {"lang": "C#", "loc": 44, "block": "<pre class=\"csharp highlighted_source\"><span class=\"kw1\">using</span> <span class=\"co3\">System</span><span class=\"sy0\">;</span><br/><span class=\"kw1\">using</span> <span class=\"co3\">System.IO</span><span class=\"sy0\">;</span><br/>\u00a0<br/><span class=\"kw1\">namespace</span> AppendPwdRosetta<br/><span class=\"br0\">{</span><br/>    <span class=\"kw4\">class</span> PasswordRecord<br/>    <span class=\"br0\">{</span><br/>        <span class=\"kw1\">public</span> <span class=\"kw4\">string</span> account, password, fullname, office, extension, homephone, email, directory, shell<span class=\"sy0\">;</span><br/>        <span class=\"kw1\">public</span> <span class=\"kw4\">int</span> UID, GID<span class=\"sy0\">;</span><br/>        <span class=\"kw1\">public</span> PasswordRecord<span class=\"br0\">(</span><span class=\"kw4\">string</span> account, <span class=\"kw4\">string</span> password, <span class=\"kw4\">int</span> UID, <span class=\"kw4\">int</span> GID, <span class=\"kw4\">string</span> fullname, <span class=\"kw4\">string</span> office, <span class=\"kw4\">string</span> extension, <span class=\"kw4\">string</span> homephone, <br/>            <span class=\"kw4\">string</span> email, <span class=\"kw4\">string</span> directory, <span class=\"kw4\">string</span> shell<span class=\"br0\">)</span><br/>        <span class=\"br0\">{</span><br/>            <span class=\"kw1\">this</span><span class=\"sy0\">.</span><span class=\"me1\">account</span> <span class=\"sy0\">=</span> account<span class=\"sy0\">;</span> <span class=\"kw1\">this</span><span class=\"sy0\">.</span><span class=\"me1\">password</span> <span class=\"sy0\">=</span> password<span class=\"sy0\">;</span> <span class=\"kw1\">this</span><span class=\"sy0\">.</span><span class=\"me1\">UID</span> <span class=\"sy0\">=</span> UID<span class=\"sy0\">;</span> <span class=\"kw1\">this</span><span class=\"sy0\">.</span><span class=\"me1\">GID</span> <span class=\"sy0\">=</span> GID<span class=\"sy0\">;</span> <span class=\"kw1\">this</span><span class=\"sy0\">.</span><span class=\"me1\">fullname</span> <span class=\"sy0\">=</span> fullname<span class=\"sy0\">;</span> <span class=\"kw1\">this</span><span class=\"sy0\">.</span><span class=\"me1\">office</span> <span class=\"sy0\">=</span> office<span class=\"sy0\">;</span><br/>            <span class=\"kw1\">this</span><span class=\"sy0\">.</span><span class=\"me1\">extension</span> <span class=\"sy0\">=</span> extension<span class=\"sy0\">;</span> <span class=\"kw1\">this</span><span class=\"sy0\">.</span><span class=\"me1\">homephone</span> <span class=\"sy0\">=</span> homephone<span class=\"sy0\">;</span> <span class=\"kw1\">this</span><span class=\"sy0\">.</span><span class=\"me1\">email</span> <span class=\"sy0\">=</span> email<span class=\"sy0\">;</span> <span class=\"kw1\">this</span><span class=\"sy0\">.</span><span class=\"me1\">directory</span> <span class=\"sy0\">=</span> directory<span class=\"sy0\">;</span> <span class=\"kw1\">this</span><span class=\"sy0\">.</span><span class=\"me1\">shell</span> <span class=\"sy0\">=</span> shell<span class=\"sy0\">;</span><br/>        <span class=\"br0\">}</span><br/>        <span class=\"kw1\">public</span> <span class=\"kw1\">override</span> <span class=\"kw4\">string</span> ToString<span class=\"br0\">(</span><span class=\"br0\">)</span><br/>        <span class=\"br0\">{</span><br/>            <span class=\"kw1\">var</span> gecos <span class=\"sy0\">=</span> <span class=\"kw4\">string</span><span class=\"sy0\">.</span><span class=\"kw1\">Join</span><span class=\"br0\">(</span><span class=\"st0\">\",\"</span>, <a href=\"http://www.google.com/search?q=new+msdn.microsoft.com\"><span class=\"kw3\">new</span></a> <span class=\"kw4\">string</span><span class=\"br0\">[</span><span class=\"br0\">]</span> <span class=\"br0\">{</span> fullname, office, extension, homephone, email <span class=\"br0\">}</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>            <span class=\"kw1\">return</span> <span class=\"kw4\">string</span><span class=\"sy0\">.</span><span class=\"kw1\">Join</span><span class=\"br0\">(</span><span class=\"st0\">\":\"</span>, <a href=\"http://www.google.com/search?q=new+msdn.microsoft.com\"><span class=\"kw3\">new</span></a> <span class=\"kw4\">string</span><span class=\"br0\">[</span><span class=\"br0\">]</span> <span class=\"br0\">{</span> account, password, UID<span class=\"sy0\">.</span><span class=\"me1\">ToString</span><span class=\"br0\">(</span><span class=\"br0\">)</span>, GID<span class=\"sy0\">.</span><span class=\"me1\">ToString</span><span class=\"br0\">(</span><span class=\"br0\">)</span>, gecos, directory, shell <span class=\"br0\">}</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        <span class=\"br0\">}</span><br/>    <span class=\"br0\">}</span><br/>    <span class=\"kw4\">class</span> Program<br/>    <span class=\"br0\">{</span><br/>        <span class=\"kw1\">static</span> <span class=\"kw4\">void</span> Main<span class=\"br0\">(</span><span class=\"kw4\">string</span><span class=\"br0\">[</span><span class=\"br0\">]</span> args<span class=\"br0\">)</span><br/>        <span class=\"br0\">{</span><br/>            <span class=\"kw1\">var</span> jsmith <span class=\"sy0\">=</span> <a href=\"http://www.google.com/search?q=new+msdn.microsoft.com\"><span class=\"kw3\">new</span></a> PasswordRecord<span class=\"br0\">(</span><span class=\"st0\">\"jsmith\"</span>, <span class=\"st0\">\"x\"</span>, <span class=\"nu0\">1001</span>, <span class=\"nu0\">1000</span>, <span class=\"st0\">\"Joe Smith\"</span>, <span class=\"st0\">\"Room 1007\"</span>, <span class=\"st0\">\"(234)555-8917\"</span>, <span class=\"st0\">\"(234)555-0077\"</span>, <span class=\"st0\">\"<a class=\"__cf_email__\" data-cfemail=\"2d475e404459456d5f425e4859594c4e42494803425f4a\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>\"</span>, <br/>                <span class=\"st0\">\"/home/jsmith\"</span>, <span class=\"st0\">\"/bin/bash\"</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>            <span class=\"kw1\">var</span> jdoe <span class=\"sy0\">=</span> <a href=\"http://www.google.com/search?q=new+msdn.microsoft.com\"><span class=\"kw3\">new</span></a> PasswordRecord<span class=\"br0\">(</span><span class=\"st0\">\"jdoe\"</span>, <span class=\"st0\">\"x\"</span>, <span class=\"nu0\">1002</span>, <span class=\"nu0\">1000</span>, <span class=\"st0\">\"Jane Doe\"</span>, <span class=\"st0\">\"Room 1004\"</span>, <span class=\"st0\">\"(234)555-8914\"</span>, <span class=\"st0\">\"(234)555-0044\"</span>, <span class=\"st0\">\"<a class=\"__cf_email__\" data-cfemail=\"cda7a9a2a88dbfa2bea8b9b9acaea2a9a8e3a2bfaa\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>\"</span>, <span class=\"st0\">\"/home/jdoe\"</span>, <br/>                <span class=\"st0\">\"/bin/bash\"</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>            <span class=\"kw1\">var</span> xyz <span class=\"sy0\">=</span> <a href=\"http://www.google.com/search?q=new+msdn.microsoft.com\"><span class=\"kw3\">new</span></a> PasswordRecord<span class=\"br0\">(</span><span class=\"st0\">\"xyz\"</span>, <span class=\"st0\">\"x\"</span>, <span class=\"nu0\">1003</span>, <span class=\"nu0\">1000</span>, <span class=\"st0\">\"X Yz\"</span>, <span class=\"st0\">\"Room 1003\"</span>, <span class=\"st0\">\"(234)555-8913\"</span>, <span class=\"st0\">\"(234)555-0033\"</span>, <span class=\"st0\">\"<a class=\"__cf_email__\" data-cfemail=\"d5adacaf95a7baa6b0a1a1b4b6bab1b0fbbaa7b2\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>\"</span>, <span class=\"st0\">\"/home/xyz\"</span>, <span class=\"st0\">\"/bin/bash\"</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>\u00a0<br/>            <span class=\"co1\">// Write these records out in the typical system format. </span><br/>            File<span class=\"sy0\">.</span><span class=\"me1\">WriteAllLines</span><span class=\"br0\">(</span><span class=\"st0\">\"passwd.txt\"</span>, <a href=\"http://www.google.com/search?q=new+msdn.microsoft.com\"><span class=\"kw3\">new</span></a> <span class=\"kw4\">string</span><span class=\"br0\">[</span><span class=\"br0\">]</span> <span class=\"br0\">{</span> jsmith<span class=\"sy0\">.</span><span class=\"me1\">ToString</span><span class=\"br0\">(</span><span class=\"br0\">)</span>, jdoe<span class=\"sy0\">.</span><span class=\"me1\">ToString</span><span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"br0\">}</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>\u00a0<br/>            <span class=\"co1\">// Append a new record to the file and close the file again.</span><br/>            File<span class=\"sy0\">.</span><span class=\"me1\">AppendAllText</span><span class=\"br0\">(</span><span class=\"st0\">\"passwd.txt\"</span>, xyz<span class=\"sy0\">.</span><span class=\"me1\">ToString</span><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>\u00a0<br/>            <span class=\"co1\">// Open the file and demonstrate the new record has indeed written to the end.</span><br/>            <span class=\"kw4\">string</span><span class=\"br0\">[</span><span class=\"br0\">]</span> lines <span class=\"sy0\">=</span> File<span class=\"sy0\">.</span><span class=\"me1\">ReadAllLines</span><span class=\"br0\">(</span><span class=\"st0\">\"passwd.txt\"</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>            Console<span class=\"sy0\">.</span><span class=\"me1\">WriteLine</span><span class=\"br0\">(</span><span class=\"st0\">\"Appended record: \"</span> <span class=\"sy0\">+</span> lines<span class=\"br0\">[</span><span class=\"nu0\">2</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        <span class=\"br0\">}</span><br/>    <span class=\"br0\">}</span><br/><span class=\"br0\">}</span><br/>\u00a0</pre>"}, {"lang": "COBOL", "loc": 273, "block": "<pre class=\"cobol highlighted_source\">\u00a0<br/>      *&gt; Tectonics:<br/>      *&gt;   cobc -xj append<span class=\"sy0\">.</span>cob<br/>      *&gt;   cobc -xjd -DDEBUG append<span class=\"sy0\">.</span>cob<br/>      *&gt; ***************************************************************<br/>       <span class=\"kw3\">identification</span> <span class=\"kw3\">division</span><span class=\"sy0\">.</span><br/>       <span class=\"kw3\">program-id</span><span class=\"sy0\">.</span> append<span class=\"sy0\">.</span><br/>\u00a0<br/>       environment <span class=\"kw3\">division</span><span class=\"sy0\">.</span><br/>       <span class=\"kw3\">configuration</span> <span class=\"kw1\">section</span><span class=\"sy0\">.</span><br/>       repository<span class=\"sy0\">.</span><br/>           <span class=\"kw3\">function</span> <span class=\"kw3\">all</span> intrinsic<span class=\"sy0\">.</span><br/>\u00a0<br/>       <span class=\"kw3\">input-output</span> <span class=\"kw1\">section</span><span class=\"sy0\">.</span><br/>       <span class=\"kw3\">file-control</span><span class=\"sy0\">.</span><br/>           <span class=\"kw3\">select</span> pass-<span class=\"kw3\">file</span><br/>           <span class=\"kw3\">assign</span> <span class=\"kw2\">to</span> pass-filename<br/>           <span class=\"kw3\">organization</span> <span class=\"kw3\">is</span> <span class=\"kw3\">line</span> <span class=\"kw3\">sequential</span><br/>           <span class=\"kw3\">status</span> <span class=\"kw3\">is</span> pass-<span class=\"kw3\">status</span><span class=\"sy0\">.</span><br/>\u00a0<br/>       <span class=\"kw3\">REPLACE</span> <span class=\"sy0\">==</span>:LRECL:<span class=\"sy0\">==</span> <span class=\"kw3\">BY</span> <span class=\"sy0\">==</span><span class=\"nu0\">2048</span><span class=\"sy0\">==.</span><br/>\u00a0<br/>       <span class=\"kw3\">data</span> <span class=\"kw3\">division</span><span class=\"sy0\">.</span><br/>       <span class=\"kw3\">file</span> <span class=\"kw1\">section</span><span class=\"sy0\">.</span><br/>       <span class=\"kw3\">fd</span> pass-<span class=\"kw3\">file</span> <span class=\"kw3\">record</span> <span class=\"kw2\">varying</span> <span class=\"kw3\">depending</span> <span class=\"kw3\">on</span> pass-<span class=\"kw4\">length</span><span class=\"sy0\">.</span><br/>       <span class=\"nu0\">01</span> fd-pass-<span class=\"kw3\">record</span><span class=\"sy0\">.</span><br/>          <span class=\"nu0\">05</span> <span class=\"kw3\">filler</span> <span class=\"kw3\">pic</span> x <span class=\"kw3\">occurs</span> <span class=\"nu0\">0</span> <span class=\"kw2\">to</span>\u00a0:LRECL: <span class=\"kw2\">times</span><br/>                          <span class=\"kw3\">depending</span> <span class=\"kw3\">on</span> pass-<span class=\"kw4\">length</span><span class=\"sy0\">.</span><br/>\u00a0<br/>       <span class=\"kw3\">working-storage</span> <span class=\"kw1\">section</span><span class=\"sy0\">.</span><br/>       <span class=\"nu0\">01</span> pass-filename<span class=\"sy0\">.</span><br/>          <span class=\"nu0\">05</span> <span class=\"kw3\">filler</span>            <span class=\"kw3\">value</span> <span class=\"st0\">\"passfile\"</span><span class=\"sy0\">.</span><br/>       <span class=\"nu0\">01</span> pass-<span class=\"kw3\">status</span>          <span class=\"kw3\">pic</span> xx<span class=\"sy0\">.</span><br/>          <span class=\"nu0\">88</span> ok-<span class=\"kw3\">status</span>         <span class=\"kw3\">values</span> <span class=\"st0\">'00'</span> <span class=\"kw3\">thru</span> <span class=\"st0\">'09'</span><span class=\"sy0\">.</span><br/>          <span class=\"nu0\">88</span> eof-pass          <span class=\"kw3\">value</span> <span class=\"st0\">'10'</span><span class=\"sy0\">.</span><br/>\u00a0<br/>       <span class=\"nu0\">01</span> pass-<span class=\"kw4\">length</span>          <span class=\"kw3\">usage</span> <span class=\"kw3\">index</span><span class=\"sy0\">.</span><br/>       <span class=\"nu0\">01</span> total-<span class=\"kw4\">length</span>         <span class=\"kw3\">usage</span> <span class=\"kw3\">index</span><span class=\"sy0\">.</span><br/>\u00a0<br/>       <span class=\"nu0\">77</span> file-action          <span class=\"kw3\">pic</span> x<span class=\"br0\">(</span><span class=\"nu0\">11</span><span class=\"br0\">)</span><span class=\"sy0\">.</span><br/>\u00a0<br/>       <span class=\"nu0\">01</span> pass-<span class=\"kw3\">record</span><span class=\"sy0\">.</span><br/>          <span class=\"nu0\">05</span> account           <span class=\"kw3\">pic</span> x<span class=\"br0\">(</span><span class=\"nu0\">64</span><span class=\"br0\">)</span><span class=\"sy0\">.</span><br/>             <span class=\"nu0\">88</span> key-account    <span class=\"kw3\">value</span> <span class=\"st0\">\"xyz\"</span><span class=\"sy0\">.</span><br/>          <span class=\"nu0\">05</span> password          <span class=\"kw3\">pic</span> x<span class=\"br0\">(</span><span class=\"nu0\">64</span><span class=\"br0\">)</span><span class=\"sy0\">.</span><br/>          <span class=\"nu0\">05</span> uid               <span class=\"kw3\">pic</span> z<span class=\"br0\">(</span><span class=\"nu0\">4</span><span class=\"br0\">)</span><span class=\"nu0\">9</span><span class=\"sy0\">.</span><br/>          <span class=\"nu0\">05</span> gid               <span class=\"kw3\">pic</span> z<span class=\"br0\">(</span><span class=\"nu0\">4</span><span class=\"br0\">)</span><span class=\"nu0\">9</span><span class=\"sy0\">.</span><br/>          <span class=\"nu0\">05</span> details<span class=\"sy0\">.</span><br/>             <span class=\"nu0\">10</span> fullname       <span class=\"kw3\">pic</span> x<span class=\"br0\">(</span><span class=\"nu0\">128</span><span class=\"br0\">)</span><span class=\"sy0\">.</span><br/>             <span class=\"nu0\">10</span> office         <span class=\"kw3\">pic</span> x<span class=\"br0\">(</span><span class=\"nu0\">128</span><span class=\"br0\">)</span><span class=\"sy0\">.</span><br/>             <span class=\"nu0\">10</span> extension      <span class=\"kw3\">pic</span> x<span class=\"br0\">(</span><span class=\"nu0\">32</span><span class=\"br0\">)</span><span class=\"sy0\">.</span><br/>             <span class=\"nu0\">10</span> homephone      <span class=\"kw3\">pic</span> x<span class=\"br0\">(</span><span class=\"nu0\">32</span><span class=\"br0\">)</span><span class=\"sy0\">.</span><br/>             <span class=\"nu0\">10</span> email          <span class=\"kw3\">pic</span> x<span class=\"br0\">(</span><span class=\"nu0\">256</span><span class=\"br0\">)</span><span class=\"sy0\">.</span><br/>          <span class=\"nu0\">05</span> homedir           <span class=\"kw3\">pic</span> x<span class=\"br0\">(</span><span class=\"nu0\">256</span><span class=\"br0\">)</span><span class=\"sy0\">.</span><br/>          <span class=\"nu0\">05</span> shell             <span class=\"kw3\">pic</span> x<span class=\"br0\">(</span><span class=\"nu0\">256</span><span class=\"br0\">)</span><span class=\"sy0\">.</span><br/>\u00a0<br/>       <span class=\"nu0\">77</span> colon                <span class=\"kw3\">pic</span> x <span class=\"kw3\">value</span> <span class=\"st0\">\":\"</span><span class=\"sy0\">.</span><br/>       <span class=\"nu0\">77</span> comma-mark           <span class=\"kw3\">pic</span> x <span class=\"kw3\">value</span> <span class=\"st0\">\",\"</span><span class=\"sy0\">.</span><br/>       <span class=\"nu0\">77</span> newline              <span class=\"kw3\">pic</span> x <span class=\"kw3\">value</span> x<span class=\"st0\">\"0a\"</span><span class=\"sy0\">.</span><br/>\u00a0<br/>      *&gt; ***************************************************************<br/>       <span class=\"kw3\">procedure</span> <span class=\"kw3\">division</span><span class=\"sy0\">.</span><br/>       main-routine<span class=\"sy0\">.</span><br/>       <span class=\"kw2\">perform</span> initial-fill<br/>\u00a0<br/>       &gt;&gt;<span class=\"kw1\">IF</span> DEBUG <span class=\"kw3\">IS</span> DEFINED <br/>       <span class=\"kw2\">display</span> <span class=\"st0\">\"Initial data:\"</span><br/>       <span class=\"kw2\">perform</span> show-<span class=\"kw3\">records</span><br/>       &gt;&gt;END-<span class=\"kw1\">IF</span><br/>\u00a0<br/>       <span class=\"kw2\">perform</span> append-<span class=\"kw3\">record</span><br/>\u00a0<br/>       &gt;&gt;<span class=\"kw1\">IF</span> DEBUG <span class=\"kw3\">IS</span> DEFINED <br/>       <span class=\"kw2\">display</span> newline <span class=\"st0\">\"After append:\"</span><br/>       <span class=\"kw2\">perform</span> show-<span class=\"kw3\">records</span><br/>       &gt;&gt;END-<span class=\"kw1\">IF</span><br/>\u00a0<br/>       <span class=\"kw2\">perform</span> verify-append<br/>       goback<br/>       <span class=\"sy0\">.</span><br/>\u00a0<br/>      *&gt; ***************************************************************<br/>       initial-fill<span class=\"sy0\">.</span><br/>       <span class=\"kw2\">perform</span> open-output-pass-<span class=\"kw3\">file</span><br/>\u00a0<br/>       <span class=\"kw2\">move</span> <span class=\"st0\">\"jsmith\"</span> <span class=\"kw2\">to</span> account<br/>       <span class=\"kw2\">move</span> <span class=\"st0\">\"x\"</span> <span class=\"kw2\">to</span> password<br/>       <span class=\"kw2\">move</span> <span class=\"nu0\">1001</span> <span class=\"kw2\">to</span> uid<br/>       <span class=\"kw2\">move</span> <span class=\"nu0\">1000</span> <span class=\"kw2\">to</span> gid<br/>       <span class=\"kw2\">move</span> <span class=\"st0\">\"Joe Smith\"</span> <span class=\"kw2\">to</span> fullname<br/>       <span class=\"kw2\">move</span> <span class=\"st0\">\"Room 1007\"</span> <span class=\"kw2\">to</span> office<br/>       <span class=\"kw2\">move</span> <span class=\"st0\">\"(234)555-8917\"</span> <span class=\"kw2\">to</span> extension<br/>       <span class=\"kw2\">move</span> <span class=\"st0\">\"(234)555-0077\"</span> <span class=\"kw2\">to</span> homephone<br/>       <span class=\"kw2\">move</span> <span class=\"st0\">\"<a class=\"__cf_email__\" data-cfemail=\"bed4cdd3d7cad6feccd1cddbcacadfddd1dadb90d1ccd9\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>\"</span> <span class=\"kw2\">to</span> email<br/>       <span class=\"kw2\">move</span> <span class=\"st0\">\"/home/jsmith\"</span> <span class=\"kw2\">to</span> homedir<br/>       <span class=\"kw2\">move</span> <span class=\"st0\">\"/bin/bash\"</span> <span class=\"kw2\">to</span> shell<br/>       <span class=\"kw2\">perform</span> write-pass-<span class=\"kw3\">record</span><br/>\u00a0<br/>       <span class=\"kw2\">move</span> <span class=\"st0\">\"jdoe\"</span> <span class=\"kw2\">to</span> account<br/>       <span class=\"kw2\">move</span> <span class=\"st0\">\"x\"</span> <span class=\"kw2\">to</span> password<br/>       <span class=\"kw2\">move</span> <span class=\"nu0\">1002</span> <span class=\"kw2\">to</span> uid<br/>       <span class=\"kw2\">move</span> <span class=\"nu0\">1000</span> <span class=\"kw2\">to</span> gid<br/>       <span class=\"kw2\">move</span> <span class=\"st0\">\"Jane Doe\"</span> <span class=\"kw2\">to</span> fullname<br/>       <span class=\"kw2\">move</span> <span class=\"st0\">\"Room 1004\"</span> <span class=\"kw2\">to</span> office<br/>       <span class=\"kw2\">move</span> <span class=\"st0\">\"(234)555-8914\"</span> <span class=\"kw2\">to</span> extension<br/>       <span class=\"kw2\">move</span> <span class=\"st0\">\"(234)555-0044\"</span> <span class=\"kw2\">to</span> homephone<br/>       <span class=\"kw2\">move</span> <span class=\"st0\">\"<a class=\"__cf_email__\" data-cfemail=\"e78d838882a79588948293938684888382c9889580\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>\"</span> <span class=\"kw2\">to</span> email<br/>       <span class=\"kw2\">move</span> <span class=\"st0\">\"/home/jdoe\"</span> <span class=\"kw2\">to</span> homedir<br/>       <span class=\"kw2\">move</span> <span class=\"st0\">\"/bin/bash\"</span> <span class=\"kw2\">to</span> shell<br/>       <span class=\"kw2\">perform</span> write-pass-<span class=\"kw3\">record</span><br/>\u00a0<br/>       <span class=\"kw2\">perform</span> close-pass-<span class=\"kw3\">file</span><br/>       <span class=\"sy0\">.</span><br/>\u00a0<br/>      *&gt; **********************<br/>       check-pass-<span class=\"kw3\">file</span><span class=\"sy0\">.</span><br/>       <span class=\"kw1\">if</span> <span class=\"kw3\">not</span> ok-<span class=\"kw3\">status</span> <span class=\"kw3\">then</span><br/>           <span class=\"kw2\">perform</span> file-<span class=\"kw3\">error</span><br/>       end-<span class=\"kw1\">if</span><br/>       <span class=\"sy0\">.</span><br/>\u00a0<br/>      *&gt; **********************<br/>       check-pass-with-eof<span class=\"sy0\">.</span><br/>       <span class=\"kw1\">if</span> <span class=\"kw3\">not</span> ok-<span class=\"kw3\">status</span> <span class=\"kw3\">and</span> <span class=\"kw3\">not</span> eof-pass <span class=\"kw3\">then</span><br/>           <span class=\"kw2\">perform</span> file-<span class=\"kw3\">error</span><br/>       end-<span class=\"kw1\">if</span><br/>       <span class=\"sy0\">.</span><br/>\u00a0<br/>      *&gt; **********************<br/>       file-<span class=\"kw3\">error</span><span class=\"sy0\">.</span><br/>       <span class=\"kw2\">display</span> <span class=\"st0\">\"error \"</span> file-action <span class=\"kw3\">space</span> pass-filename<br/>               <span class=\"kw3\">space</span> pass-<span class=\"kw3\">status</span> <span class=\"kw3\">upon</span> syserr<br/>       <span class=\"kw2\">move</span> <span class=\"nu0\">1</span> <span class=\"kw2\">to</span> return-<span class=\"kw1\">code</span><br/>       goback<br/>       <span class=\"sy0\">.</span><br/>\u00a0<br/>      *&gt; **********************<br/>       append-<span class=\"kw3\">record</span><span class=\"sy0\">.</span><br/>       <span class=\"kw2\">move</span> <span class=\"st0\">\"xyz\"</span> <span class=\"kw2\">to</span> account<br/>       <span class=\"kw2\">move</span> <span class=\"st0\">\"x\"</span> <span class=\"kw2\">to</span> password<br/>       <span class=\"kw2\">move</span> <span class=\"nu0\">1003</span> <span class=\"kw2\">to</span> uid<br/>       <span class=\"kw2\">move</span> <span class=\"nu0\">1000</span> <span class=\"kw2\">to</span> gid<br/>       <span class=\"kw2\">move</span> <span class=\"st0\">\"X Yz\"</span> <span class=\"kw2\">to</span> fullname<br/>       <span class=\"kw2\">move</span> <span class=\"st0\">\"Room 1003\"</span> <span class=\"kw2\">to</span> office<br/>       <span class=\"kw2\">move</span> <span class=\"st0\">\"(234)555-8913\"</span> <span class=\"kw2\">to</span> extension<br/>       <span class=\"kw2\">move</span> <span class=\"st0\">\"(234)555-0033\"</span> <span class=\"kw2\">to</span> homephone<br/>       <span class=\"kw2\">move</span> <span class=\"st0\">\"<a class=\"__cf_email__\" data-cfemail=\"235b5a5963514c5046575742404c47460d4c5144\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>\"</span> <span class=\"kw2\">to</span> email<br/>       <span class=\"kw2\">move</span> <span class=\"st0\">\"/home/xyz\"</span> <span class=\"kw2\">to</span> homedir<br/>       <span class=\"kw2\">move</span> <span class=\"st0\">\"/bin/bash\"</span> <span class=\"kw2\">to</span> shell<br/>\u00a0<br/>       <span class=\"kw2\">perform</span> open-extend-pass-<span class=\"kw3\">file</span><br/>       <span class=\"kw2\">perform</span> write-pass-<span class=\"kw3\">record</span><br/>       <span class=\"kw2\">perform</span> close-pass-<span class=\"kw3\">file</span><br/>       <span class=\"sy0\">.</span><br/>\u00a0<br/>      *&gt; **********************<br/>       open-output-pass-<span class=\"kw3\">file</span><span class=\"sy0\">.</span><br/>       <span class=\"kw2\">open</span> <span class=\"kw3\">output</span> pass-<span class=\"kw3\">file</span> <span class=\"kw3\">with</span> <span class=\"kw3\">lock</span><br/>       <span class=\"kw2\">move</span> <span class=\"st0\">\"open output\"</span> <span class=\"kw2\">to</span> file-action<br/>       <span class=\"kw2\">perform</span> check-pass-<span class=\"kw3\">file</span><br/>       <span class=\"sy0\">.</span><br/>\u00a0<br/>      *&gt; **********************<br/>       open-extend-pass-<span class=\"kw3\">file</span><span class=\"sy0\">.</span><br/>       <span class=\"kw2\">open</span> <span class=\"kw3\">extend</span> pass-<span class=\"kw3\">file</span> <span class=\"kw3\">with</span> <span class=\"kw3\">lock</span><br/>       <span class=\"kw2\">move</span> <span class=\"st0\">\"open extend\"</span> <span class=\"kw2\">to</span> file-action<br/>       <span class=\"kw2\">perform</span> check-pass-<span class=\"kw3\">file</span><br/>       <span class=\"sy0\">.</span><br/>\u00a0<br/>      *&gt; **********************<br/>       open-input-pass-<span class=\"kw3\">file</span><span class=\"sy0\">.</span><br/>       <span class=\"kw2\">open</span> <span class=\"kw3\">input</span> pass-<span class=\"kw3\">file</span><br/>       <span class=\"kw2\">move</span> <span class=\"st0\">\"open input\"</span> <span class=\"kw2\">to</span> file-action<br/>       <span class=\"kw2\">perform</span> check-pass-<span class=\"kw3\">file</span><br/>       <span class=\"sy0\">.</span><br/>\u00a0<br/>      *&gt; **********************<br/>       close-pass-<span class=\"kw3\">file</span><span class=\"sy0\">.</span><br/>       <span class=\"kw2\">close</span> pass-<span class=\"kw3\">file</span><br/>       <span class=\"kw2\">move</span> <span class=\"st0\">\"closing\"</span> <span class=\"kw2\">to</span> file-action<br/>       <span class=\"kw2\">perform</span> check-pass-<span class=\"kw3\">file</span><br/>       <span class=\"sy0\">.</span><br/>\u00a0<br/>      *&gt; **********************<br/>       write-pass-<span class=\"kw3\">record</span><span class=\"sy0\">.</span><br/>       <span class=\"kw3\">set</span> total-<span class=\"kw4\">length</span> <span class=\"kw2\">to</span> <span class=\"nu0\">1</span><br/>       <span class=\"kw3\">set</span> pass-<span class=\"kw4\">length</span> <span class=\"kw2\">to</span>\u00a0:LRECL:<br/>       <span class=\"kw3\">string</span><br/>           account <span class=\"kw3\">delimited</span> <span class=\"kw3\">by</span> <span class=\"kw3\">space</span><br/>           colon<br/>           password <span class=\"kw3\">delimited</span> <span class=\"kw3\">by</span> <span class=\"kw3\">space</span><br/>           colon<br/>           trim<span class=\"br0\">(</span>uid <span class=\"kw3\">leading</span><span class=\"br0\">)</span> <span class=\"kw3\">delimited</span> <span class=\"kw3\">by</span> <span class=\"kw3\">size</span><br/>           colon<br/>           trim<span class=\"br0\">(</span>gid <span class=\"kw3\">leading</span><span class=\"br0\">)</span> <span class=\"kw3\">delimited</span> <span class=\"kw3\">by</span> <span class=\"kw3\">size</span><br/>           colon<br/>           trim<span class=\"br0\">(</span>fullname <span class=\"kw3\">trailing</span><span class=\"br0\">)</span> <span class=\"kw3\">delimited</span> <span class=\"kw3\">by</span> <span class=\"kw3\">size</span><br/>           comma-mark<br/>           trim<span class=\"br0\">(</span>office <span class=\"kw3\">trailing</span><span class=\"br0\">)</span> <span class=\"kw3\">delimited</span> <span class=\"kw3\">by</span> <span class=\"kw3\">size</span><br/>           comma-mark<br/>           trim<span class=\"br0\">(</span>extension <span class=\"kw3\">trailing</span><span class=\"br0\">)</span> <span class=\"kw3\">delimited</span> <span class=\"kw3\">by</span> <span class=\"kw3\">size</span><br/>           comma-mark<br/>           trim<span class=\"br0\">(</span>homephone <span class=\"kw3\">trailing</span><span class=\"br0\">)</span> <span class=\"kw3\">delimited</span> <span class=\"kw3\">by</span> <span class=\"kw3\">size</span><br/>           comma-mark<br/>           email <span class=\"kw3\">delimited</span> <span class=\"kw3\">by</span> <span class=\"kw3\">space</span><br/>           colon<br/>           trim<span class=\"br0\">(</span>homedir <span class=\"kw3\">trailing</span><span class=\"br0\">)</span> <span class=\"kw3\">delimited</span> <span class=\"kw3\">by</span> <span class=\"kw3\">size</span><br/>           colon<br/>           trim<span class=\"br0\">(</span>shell <span class=\"kw3\">trailing</span><span class=\"br0\">)</span> <span class=\"kw3\">delimited</span> <span class=\"kw3\">by</span> <span class=\"kw3\">size</span><br/>           <span class=\"kw2\">into</span> fd-pass-<span class=\"kw3\">record</span> <span class=\"kw3\">with</span> <span class=\"kw3\">pointer</span> total-<span class=\"kw4\">length</span><br/>           <span class=\"kw3\">on</span> <span class=\"kw3\">overflow</span><br/>               <span class=\"kw2\">display</span> <span class=\"st0\">\"error: fd-pass-record truncated at \"</span><br/>                       total-<span class=\"kw4\">length</span> <span class=\"kw3\">upon</span> syserr<br/>       <span class=\"kw3\">end-string</span><br/>       <span class=\"kw3\">set</span> pass-<span class=\"kw4\">length</span> <span class=\"kw2\">to</span> total-<span class=\"kw4\">length</span><br/>       <span class=\"kw3\">set</span> pass-<span class=\"kw4\">length</span> <span class=\"kw3\">down</span> <span class=\"kw3\">by</span> <span class=\"nu0\">1</span><br/>\u00a0<br/>       <span class=\"kw3\">write</span> fd-pass-<span class=\"kw3\">record</span><br/>       <span class=\"kw2\">move</span> <span class=\"st0\">\"writing\"</span> <span class=\"kw2\">to</span> file-action<br/>       <span class=\"kw2\">perform</span> check-pass-<span class=\"kw3\">file</span><br/>       <span class=\"sy0\">.</span><br/>\u00a0<br/>      *&gt; **********************<br/>       read-pass-<span class=\"kw3\">file</span><span class=\"sy0\">.</span><br/>       read pass-<span class=\"kw3\">file</span><br/>       <span class=\"kw2\">move</span> <span class=\"st0\">\"reading\"</span> <span class=\"kw2\">to</span> file-action<br/>       <span class=\"kw2\">perform</span> check-pass-with-eof<br/>       <span class=\"sy0\">.</span><br/>\u00a0<br/>      *&gt; **********************<br/>       show-<span class=\"kw3\">records</span><span class=\"sy0\">.</span><br/>       <span class=\"kw2\">perform</span> open-input-pass-<span class=\"kw3\">file</span><br/>\u00a0<br/>       <span class=\"kw2\">perform</span> read-pass-<span class=\"kw3\">file</span><br/>       <span class=\"kw2\">perform</span> <span class=\"kw2\">until</span> eof-pass<br/>           <span class=\"kw2\">perform</span> show-pass-<span class=\"kw3\">record</span><br/>           <span class=\"kw2\">perform</span> read-pass-<span class=\"kw3\">file</span><br/>       end-<span class=\"kw2\">perform</span><br/>\u00a0<br/>       <span class=\"kw2\">perform</span> close-pass-<span class=\"kw3\">file</span><br/>       <span class=\"sy0\">.</span><br/>\u00a0<br/>      *&gt; **********************<br/>       show-pass-<span class=\"kw3\">record</span><span class=\"sy0\">.</span><br/>       <span class=\"kw2\">display</span> fd-pass-<span class=\"kw3\">record</span><br/>       <span class=\"sy0\">.</span><br/>\u00a0<br/>      *&gt; **********************<br/>       verify-append<span class=\"sy0\">.</span><br/>       <span class=\"kw2\">perform</span> open-input-pass-<span class=\"kw3\">file</span><br/>\u00a0<br/>       <span class=\"kw2\">move</span> <span class=\"nu0\">0</span> <span class=\"kw2\">to</span> tally<br/>       <span class=\"kw2\">perform</span> read-pass-<span class=\"kw3\">file</span><br/>       <span class=\"kw2\">perform</span> <span class=\"kw2\">until</span> eof-pass<br/>           <span class=\"kw2\">add</span> <span class=\"nu0\">1</span> <span class=\"kw2\">to</span> tally<br/>           <span class=\"kw3\">unstring</span> fd-pass-<span class=\"kw3\">record</span> <span class=\"kw3\">delimited</span> <span class=\"kw3\">by</span> colon<br/>               <span class=\"kw2\">into</span> account<br/>           <span class=\"kw1\">if</span> key-account <span class=\"kw3\">then</span> <span class=\"kw2\">exit</span> <span class=\"kw2\">perform</span> end-<span class=\"kw1\">if</span><br/>           <span class=\"kw2\">perform</span> read-pass-<span class=\"kw3\">file</span><br/>       end-<span class=\"kw2\">perform</span><br/>       <span class=\"kw1\">if</span> <span class=\"br0\">(</span>key-account <span class=\"kw3\">and</span> tally <span class=\"kw3\">not</span> &gt; <span class=\"nu0\">2</span><span class=\"br0\">)</span> <span class=\"kw3\">or</span> <span class=\"br0\">(</span><span class=\"kw3\">not</span> key-account<span class=\"br0\">)</span> <span class=\"kw3\">then</span><br/>           <span class=\"kw2\">display</span><br/>               <span class=\"st0\">\"error: appended record not found in correct position\"</span><br/>              <span class=\"kw3\">upon</span> syserr<br/>       <span class=\"kw3\">else</span><br/>           <span class=\"kw2\">display</span> <span class=\"st0\">\"Appended record: \"</span> <span class=\"kw3\">with</span> <span class=\"kw3\">no</span> <span class=\"kw3\">advancing</span><br/>           <span class=\"kw2\">perform</span> show-pass-<span class=\"kw3\">record</span><br/>       end-<span class=\"kw1\">if</span><br/>\u00a0<br/>       <span class=\"kw2\">perform</span> close-pass-<span class=\"kw3\">file</span><br/>       <span class=\"sy0\">.</span><br/>\u00a0<br/>       <span class=\"kw3\">end</span> <span class=\"kw3\">program</span> append<span class=\"sy0\">.</span></pre>"}, {"lang": "Common Lisp", "loc": 53, "block": "<pre class=\"lisp highlighted_source\"><span class=\"br0\">(</span>defvar *initial_data*<br/>  <span class=\"br0\">(</span><span class=\"kw1\">list</span><br/>    <span class=\"br0\">(</span><span class=\"kw1\">list</span> <span class=\"st0\">\"jsmith\"</span> <span class=\"st0\">\"x\"</span> <span class=\"nu0\">1001</span> <span class=\"nu0\">1000</span><br/>      <span class=\"br0\">(</span><span class=\"kw1\">list</span> <span class=\"st0\">\"Joe Smith\"</span> <span class=\"st0\">\"Room 1007\"</span> <span class=\"st0\">\"(234)555-8917\"</span> <span class=\"st0\">\"(234)555-0077\"</span> <span class=\"st0\">\"<a class=\"__cf_email__\" data-cfemail=\"2b415846425f436b5944584e5f5f4a48444f4e0544594c\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>\"</span><span class=\"br0\">)</span><br/>      <span class=\"st0\">\"/home/jsmith\"</span> <span class=\"st0\">\"/bin/bash\"</span><span class=\"br0\">)</span><br/>    <span class=\"br0\">(</span><span class=\"kw1\">list</span> <span class=\"st0\">\"jdoe\"</span> <span class=\"st0\">\"x\"</span> <span class=\"nu0\">1002</span> <span class=\"nu0\">1000</span><br/>      <span class=\"br0\">(</span><span class=\"kw1\">list</span> <span class=\"st0\">\"Jane Doe\"</span> <span class=\"st0\">\"Room 1004\"</span> <span class=\"st0\">\"(234)555-8914\"</span> <span class=\"st0\">\"(234)555-0044\"</span> <span class=\"st0\">\"<a class=\"__cf_email__\" data-cfemail=\"d2b8b6bdb792a0bda1b7a6a6b3b1bdb6b7fcbda0b5\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>\"</span><span class=\"br0\">)</span><br/>      <span class=\"st0\">\"/home/jdoe\"</span> <span class=\"st0\">\"/bin/bash\"</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"br0\">(</span>defvar *insert*<br/>  <span class=\"br0\">(</span><span class=\"kw1\">list</span> <span class=\"st0\">\"xyz\"</span> <span class=\"st0\">\"x\"</span> <span class=\"nu0\">1003</span> <span class=\"nu0\">1000</span><br/>    <span class=\"br0\">(</span><span class=\"kw1\">list</span> <span class=\"st0\">\"X Yz\"</span> <span class=\"st0\">\"Room 1003\"</span> <span class=\"st0\">\"(234)555-8913\"</span> <span class=\"st0\">\"(234)555-0033\"</span> <span class=\"st0\">\"<a class=\"__cf_email__\" data-cfemail=\"5129282b11233e2234252530323e35347f3e2336\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>\"</span><span class=\"br0\">)</span><br/>    <span class=\"st0\">\"/home/xyz\"</span> <span class=\"st0\">\"/bin/bash\"</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\u00a0<br/>\u00a0<br/><span class=\"br0\">(</span><span class=\"kw1\">defun</span> serialize <span class=\"br0\">(</span>record delim<span class=\"br0\">)</span><br/>  <span class=\"br0\">(</span>string-right-trim delim <span class=\"co1\">;; Remove trailing delimiter</span><br/>    <span class=\"br0\">(</span>reduce <span class=\"br0\">(</span><span class=\"kw1\">lambda</span> <span class=\"br0\">(</span>a b<span class=\"br0\">)</span><br/>      <span class=\"br0\">(</span>typecase b<br/>        <span class=\"br0\">(</span><span class=\"kw1\">list</span> <span class=\"br0\">(</span>concatenate 'string a <span class=\"br0\">(</span>serialize b <span class=\"st0\">\",\"</span><span class=\"br0\">)</span> delim<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>        <span class=\"br0\">(</span>t <span class=\"br0\">(</span>concatenate 'string a<br/>          <span class=\"br0\">(</span>typecase b<br/>            <span class=\"br0\">(</span><span class=\"kw1\">integer</span> <span class=\"br0\">(</span>write-to-string b<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>            <span class=\"br0\">(</span>t b<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>          delim<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>  record <span class=\"sy0\">:</span><span class=\"me1\">initial-</span><span class=\"kw1\">value</span> <span class=\"st0\">\"\"</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\u00a0<br/>\u00a0<br/><span class=\"br0\">(</span><span class=\"kw1\">defun</span> main <span class=\"br0\">(</span><span class=\"br0\">)</span><br/>  <span class=\"co1\">;; Write initial values to file</span><br/>  <span class=\"br0\">(</span>with-open-file <span class=\"br0\">(</span>stream <span class=\"st0\">\"./passwd\"</span><br/>                  <span class=\"sy0\">:</span><span class=\"me1\">direction</span> <span class=\"sy0\">:</span><span class=\"me1\">output</span><br/>                  <span class=\"sy0\">:</span><span class=\"me1\">if-exists</span> <span class=\"sy0\">:</span><span class=\"me1\">supersede</span><br/>                  <span class=\"sy0\">:</span><span class=\"me1\">if-does-not-exist</span> <span class=\"sy0\">:</span><span class=\"me1\">create</span><span class=\"br0\">)</span><br/>    <span class=\"br0\">(</span>loop for x in *initial_data* <span class=\"kw1\">do</span><br/>      <span class=\"br0\">(</span>format stream <span class=\"br0\">(</span>concatenate 'string <span class=\"br0\">(</span>serialize x <span class=\"st0\">\":\"</span><span class=\"br0\">)</span> <span class=\"st0\">\"~%\"</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\u00a0<br/>  <span class=\"co1\">;; Reopen file, append insert value</span><br/>  <span class=\"br0\">(</span>with-open-file <span class=\"br0\">(</span>stream <span class=\"st0\">\"./passwd\"</span><br/>                  <span class=\"sy0\">:</span><span class=\"me1\">direction</span> <span class=\"sy0\">:</span><span class=\"me1\">output</span><br/>                  <span class=\"sy0\">:</span><span class=\"me1\">if-exists</span> <span class=\"sy0\">:</span><span class=\"kw1\">append</span><span class=\"br0\">)</span><br/>    <span class=\"br0\">(</span>format stream <span class=\"br0\">(</span>concatenate 'string <span class=\"br0\">(</span>serialize *insert* <span class=\"st0\">\":\"</span><span class=\"br0\">)</span> <span class=\"st0\">\"~%\"</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\u00a0<br/>  <span class=\"co1\">;; Reopen file, search for new record</span><br/>  <span class=\"br0\">(</span>with-open-file <span class=\"br0\">(</span>stream <span class=\"st0\">\"./passwd\"</span><span class=\"br0\">)</span><br/>    <span class=\"br0\">(</span><span class=\"kw1\">when</span> stream<br/>      <span class=\"br0\">(</span>loop for line <span class=\"sy0\">=</span> <span class=\"br0\">(</span>read-line stream <span class=\"kw1\">nil</span><span class=\"br0\">)</span><br/>        while line <span class=\"kw1\">do</span> <br/>          <span class=\"br0\">(</span><span class=\"kw1\">if</span> <span class=\"br0\">(</span>search <span class=\"st0\">\"xyz\"</span> line<span class=\"br0\">)</span><br/>            <span class=\"br0\">(</span>format t <span class=\"st0\">\"Appended record: ~a~%\"</span> line<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"br0\">(</span>main<span class=\"br0\">)</span><br/>\u00a0</pre>"}, {"lang": "D", "loc": 93, "block": "<pre class=\"d highlighted_source\"><span class=\"kw4\">class</span> Record <span class=\"br0\">{</span><br/>    <span class=\"kw4\">private</span> <span class=\"kw4\">const</span> <span class=\"kw4\">string</span> account<span class=\"sy0\">;</span><br/>    <span class=\"kw4\">private</span> <span class=\"kw4\">const</span> <span class=\"kw4\">string</span> password<span class=\"sy0\">;</span><br/>    <span class=\"kw4\">private</span> <span class=\"kw4\">const</span> <span class=\"kw4\">int</span> uid<span class=\"sy0\">;</span><br/>    <span class=\"kw4\">private</span> <span class=\"kw4\">const</span> <span class=\"kw4\">int</span> gid<span class=\"sy0\">;</span><br/>    <span class=\"kw4\">private</span> <span class=\"kw4\">const</span> <span class=\"kw4\">string</span><span class=\"br0\">[</span><span class=\"br0\">]</span> gecos<span class=\"sy0\">;</span><br/>    <span class=\"kw4\">private</span> <span class=\"kw4\">const</span> <span class=\"kw4\">string</span> directory<span class=\"sy0\">;</span><br/>    <span class=\"kw4\">private</span> <span class=\"kw4\">const</span> <span class=\"kw4\">string</span> shell<span class=\"sy0\">;</span><br/>\u00a0<br/>    <span class=\"kw4\">public</span> <span class=\"kw2\">this</span><span class=\"br0\">(</span><span class=\"kw4\">string</span> account<span class=\"sy0\">,</span> <span class=\"kw4\">string</span> password<span class=\"sy0\">,</span> <span class=\"kw4\">int</span> uid<span class=\"sy0\">,</span> <span class=\"kw4\">int</span> gid<span class=\"sy0\">,</span> <span class=\"kw4\">string</span><span class=\"br0\">[</span><span class=\"br0\">]</span> gecos<span class=\"sy0\">,</span> <span class=\"kw4\">string</span> directory<span class=\"sy0\">,</span> <span class=\"kw4\">string</span> shell<span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>        <span class=\"kw2\">import</span> std.<span class=\"me1\">exception</span><span class=\"sy0\">;</span><br/>        <span class=\"kw2\">this</span>.<span class=\"me1\">account</span> <span class=\"sy0\">=</span> enforce<span class=\"br0\">(</span>account<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        <span class=\"kw2\">this</span>.<span class=\"me1\">password</span> <span class=\"sy0\">=</span> enforce<span class=\"br0\">(</span>password<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        <span class=\"kw2\">this</span>.<span class=\"me1\">uid</span> <span class=\"sy0\">=</span> uid<span class=\"sy0\">;</span><br/>        <span class=\"kw2\">this</span>.<span class=\"me1\">gid</span> <span class=\"sy0\">=</span> gid<span class=\"sy0\">;</span><br/>        <span class=\"kw2\">this</span>.<span class=\"me1\">gecos</span> <span class=\"sy0\">=</span> enforce<span class=\"br0\">(</span>gecos<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        <span class=\"kw2\">this</span>.<span class=\"me1\">directory</span> <span class=\"sy0\">=</span> enforce<span class=\"br0\">(</span>directory<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        <span class=\"kw2\">this</span>.<span class=\"me1\">shell</span> <span class=\"sy0\">=</span> enforce<span class=\"br0\">(</span>shell<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>    <span class=\"br0\">}</span><br/>\u00a0<br/>    <span class=\"kw4\">public</span> <span class=\"kw4\">void</span> toString<span class=\"br0\">(</span><span class=\"kw2\">scope</span> <span class=\"kw4\">void</span> <span class=\"kw2\">delegate</span><span class=\"br0\">(</span><span class=\"kw4\">const</span><span class=\"br0\">(</span><span class=\"kw4\">char</span><span class=\"br0\">)</span><span class=\"br0\">[</span><span class=\"br0\">]</span><span class=\"br0\">)</span> sink<span class=\"br0\">)</span> <span class=\"kw4\">const</span> <span class=\"br0\">{</span><br/>        <span class=\"kw2\">import</span> std.<span class=\"me1\">conv</span>   <span class=\"sy0\">:</span> toTextRange<span class=\"sy0\">;</span><br/>        <span class=\"kw2\">import</span> std.<span class=\"me1\">format</span> <span class=\"sy0\">:</span> formattedWrite<span class=\"sy0\">;</span><br/>        <span class=\"kw2\">import</span> std.<span class=\"me1\">range</span>  <span class=\"sy0\">:</span> put<span class=\"sy0\">;</span><br/>\u00a0<br/>        sink<span class=\"br0\">(</span>account<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        put<span class=\"br0\">(</span>sink<span class=\"sy0\">,</span> <span class=\"st0\">':'</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        sink<span class=\"br0\">(</span>password<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        put<span class=\"br0\">(</span>sink<span class=\"sy0\">,</span> <span class=\"st0\">':'</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        toTextRange<span class=\"br0\">(</span>uid<span class=\"sy0\">,</span> sink<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        put<span class=\"br0\">(</span>sink<span class=\"sy0\">,</span> <span class=\"st0\">':'</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        toTextRange<span class=\"br0\">(</span>gid<span class=\"sy0\">,</span> sink<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        put<span class=\"br0\">(</span>sink<span class=\"sy0\">,</span> <span class=\"st0\">':'</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        formattedWrite<span class=\"br0\">(</span>sink<span class=\"sy0\">,</span> <span class=\"st0\">\"%-(%s,%)\"</span><span class=\"sy0\">,</span> gecos<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        put<span class=\"br0\">(</span>sink<span class=\"sy0\">,</span> <span class=\"st0\">':'</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        sink<span class=\"br0\">(</span>directory<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        put<span class=\"br0\">(</span>sink<span class=\"sy0\">,</span> <span class=\"st0\">':'</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        sink<span class=\"br0\">(</span>shell<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>    <span class=\"br0\">}</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"kw4\">public</span> Record parse<span class=\"br0\">(</span><span class=\"kw4\">string</span> text<span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>    <span class=\"kw2\">import</span> std.<span class=\"me1\">array</span>  <span class=\"sy0\">:</span> split<span class=\"sy0\">;</span><br/>    <span class=\"kw2\">import</span> std.<span class=\"me1\">conv</span>   <span class=\"sy0\">:</span> to<span class=\"sy0\">;</span><br/>    <span class=\"kw2\">import</span> std.<span class=\"kw4\">string</span> <span class=\"sy0\">:</span> chomp<span class=\"sy0\">;</span><br/>\u00a0<br/>    <span class=\"kw4\">string</span><span class=\"br0\">[</span><span class=\"br0\">]</span> tokens <span class=\"sy0\">=</span> text.<span class=\"me1\">chomp</span>.<span class=\"me1\">split</span><span class=\"br0\">(</span><span class=\"st0\">':'</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>    <span class=\"kw1\">return</span> <span class=\"kw2\">new</span> Record<span class=\"br0\">(</span><br/>            tokens<span class=\"br0\">[</span><span class=\"nu0\">0</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><br/>            tokens<span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><br/>            to<span class=\"sy0\">!</span><span class=\"kw4\">int</span><span class=\"br0\">(</span>tokens<span class=\"br0\">[</span><span class=\"nu0\">2</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">,</span><br/>            to<span class=\"sy0\">!</span><span class=\"kw4\">int</span><span class=\"br0\">(</span>tokens<span class=\"br0\">[</span><span class=\"nu0\">3</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">,</span><br/>            tokens<span class=\"br0\">[</span><span class=\"nu0\">4</span><span class=\"br0\">]</span>.<span class=\"me1\">split</span><span class=\"br0\">(</span><span class=\"st0\">','</span><span class=\"br0\">)</span><span class=\"sy0\">,</span><br/>            tokens<span class=\"br0\">[</span><span class=\"nu0\">5</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><br/>            tokens<span class=\"br0\">[</span><span class=\"nu0\">6</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"kw4\">void</span> main<span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>    <span class=\"kw2\">import</span> std.<span class=\"me1\">algorithm</span> <span class=\"sy0\">:</span> map<span class=\"sy0\">;</span><br/>    <span class=\"kw2\">import</span> std.<span class=\"me1\">file</span>      <span class=\"sy0\">:</span> exists<span class=\"sy0\">,</span> mkdir<span class=\"sy0\">;</span><br/>    <span class=\"kw2\">import</span> std.<span class=\"me1\">stdio</span><span class=\"sy0\">;</span><br/>\u00a0<br/>    <span class=\"kw4\">auto</span> rawData <span class=\"sy0\">=</span> <span class=\"br0\">[</span><br/>        <span class=\"st0\">\"jsmith:x:1001:1000:Joe Smith,Room 1007,(234)555-8917,(234)555-0077,<a class=\"__cf_email__\" data-cfemail=\"85eff6e8ecf1edc5f7eaf6e0f1f1e4e6eae1e0abeaf7e2\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>:/home/jsmith:/bin/bash\"</span><span class=\"sy0\">,</span><br/>        <span class=\"st0\">\"jdoe:x:1002:1000:Jane Doe,Room 1004,(234)555-8914,(234)555-0044,<a class=\"__cf_email__\" data-cfemail=\"1e747a717b5e6c716d7b6a6a7f7d717a7b30716c79\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>:/home/jdoe:/bin/bash\"</span><span class=\"sy0\">,</span><br/>        <span class=\"st0\">\"xyz:x:1003:1000:X Yz,Room 1003,(234)555-8913,(234)555-0033,<a class=\"__cf_email__\" data-cfemail=\"8af2f3f0caf8e5f9effefeebe9e5eeefa4e5f8ed\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>:/home/xyz:/bin/bash\"</span><br/>    <span class=\"br0\">]</span><span class=\"sy0\">;</span><br/>\u00a0<br/>    <span class=\"kw4\">auto</span> records <span class=\"sy0\">=</span> rawData.<span class=\"me1\">map</span><span class=\"sy0\">!</span>parse<span class=\"sy0\">;</span><br/>\u00a0<br/>    <span class=\"kw1\">if</span> <span class=\"br0\">(</span><span class=\"sy0\">!</span>exists<span class=\"br0\">(</span><span class=\"st0\">\"_rosetta\"</span><span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>        mkdir<span class=\"br0\">(</span><span class=\"st0\">\"_rosetta\"</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>    <span class=\"br0\">}</span><br/>\u00a0<br/>    <span class=\"kw4\">auto</span> passwd <span class=\"sy0\">=</span> File<span class=\"br0\">(</span><span class=\"st0\">\"_rosetta/.passwd\"</span><span class=\"sy0\">,</span> <span class=\"st0\">\"w\"</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>    passwd.<span class=\"me1\">lock</span><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>    passwd.<span class=\"me1\">writeln</span><span class=\"br0\">(</span>records<span class=\"br0\">[</span><span class=\"nu0\">0</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>    passwd.<span class=\"me1\">writeln</span><span class=\"br0\">(</span>records<span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>    passwd.<span class=\"me1\">unlock</span><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>    passwd.<span class=\"me1\">close</span><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>\u00a0<br/>    passwd.<span class=\"me1\">open</span><span class=\"br0\">(</span><span class=\"st0\">\"_rosetta/.passwd\"</span><span class=\"sy0\">,</span> <span class=\"st0\">\"a\"</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>    passwd.<span class=\"me1\">lock</span><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>    passwd.<span class=\"me1\">writeln</span><span class=\"br0\">(</span>records<span class=\"br0\">[</span><span class=\"nu0\">2</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>    passwd.<span class=\"me1\">unlock</span><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>    passwd.<span class=\"me1\">close</span><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>\u00a0<br/>    passwd.<span class=\"me1\">open</span><span class=\"br0\">(</span><span class=\"st0\">\"_rosetta/.passwd\"</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>    <span class=\"kw1\">foreach</span><span class=\"br0\">(</span><span class=\"kw4\">string</span> line<span class=\"sy0\">;</span> passwd.<span class=\"me1\">lines</span><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>        parse<span class=\"br0\">(</span>line<span class=\"br0\">)</span>.<span class=\"me1\">writeln</span><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>    <span class=\"br0\">}</span><br/>    passwd.<span class=\"me1\">close</span><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/><span class=\"br0\">}</span></pre>"}, {"lang": "Elixir", "loc": 88, "block": "<pre class=\"text highlighted_source\">\u00a0<br/>defmodule Gecos do<br/>  defstruct [:fullname,\u00a0:office,\u00a0:extension,\u00a0:homephone,\u00a0:email]<br/>\u00a0<br/>  defimpl String.Chars do<br/>    def to_string(gecos) do<br/>      [:fullname,\u00a0:office,\u00a0:extension,\u00a0:homephone,\u00a0:email]<br/>      |&gt; Enum.map_join(\",\", &amp;Map.get(gecos, &amp;1))<br/>    end<br/>  end<br/>end<br/>\u00a0<br/>defmodule Passwd do<br/>  defstruct [:account,\u00a0:password,\u00a0:uid,\u00a0:gid,\u00a0:gecos,\u00a0:directory,\u00a0:shell]<br/>\u00a0<br/>  defimpl String.Chars do<br/>    def to_string(passwd) do<br/>      [:account,\u00a0:password,\u00a0:uid,\u00a0:gid,\u00a0:gecos,\u00a0:directory,\u00a0:shell]<br/>      |&gt; Enum.map_join(\":\", &amp;Map.get(passwd, &amp;1))<br/>    end<br/>  end<br/>end<br/>\u00a0<br/>defmodule Appender do<br/>  def write(filename) do<br/>    jsmith =\u00a0%Passwd{<br/>      account: \"jsmith\",<br/>      password: \"x\",<br/>      uid: 1001,<br/>      gid: 1000,<br/>      gecos:\u00a0%Gecos{<br/>        fullname: \"Joe Smith\",<br/>        office: \"Room 1007\",<br/>        extension: \"(234)555-8917\",<br/>        homephone: \"(234)555-0077\",<br/>        email: \"<a class=\"__cf_email__\" data-cfemail=\"afc5dcc2c6dbc7efddc0dccadbdbceccc0cbca81c0ddc8\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>\"<br/>      },<br/>      directory: \"/home/jsmith\",<br/>      shell: \"/bin/bash\"<br/>    }<br/>\u00a0<br/>    jdoe =\u00a0%Passwd{<br/>      account: \"jdoe\",<br/>      password: \"x\",<br/>      uid: 1002,<br/>      gid: 1000,<br/>      gecos:\u00a0%Gecos{<br/>        fullname: \"Jane Doe\",<br/>        office: \"Room 1004\",<br/>        extension: \"(234)555-8914\",<br/>        homephone: \"(234)555-0044\",<br/>        email: \"<a class=\"__cf_email__\" data-cfemail=\"f69c929993b68499859382829795999293d8998491\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>\"<br/>      },<br/>      directory: \"/home/jdoe\",<br/>      shell: \"/bin/bash\"<br/>    }<br/>\u00a0<br/>    xyz =\u00a0%Passwd{<br/>      account: \"xyz\",<br/>      password: \"x\",<br/>      uid: 1003,<br/>      gid: 1000,<br/>      gecos:\u00a0%Gecos{<br/>        fullname: \"X Yz\",<br/>        office: \"Room 1003\",<br/>        extension: \"(234)555-8913\",<br/>        homephone: \"(234)555-0033\",<br/>        email: \"<a class=\"__cf_email__\" data-cfemail=\"5129282b11233e2234252530323e35347f3e2336\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>\"<br/>      },<br/>      directory: \"/home/xyz\",<br/>      shell: \"/bin/bash\"<br/>    }<br/>\u00a0<br/>    File.open!(filename, [:write], fn file -&gt;<br/>      IO.puts(file, jsmith)<br/>      IO.puts(file, jdoe)<br/>    end)<br/>\u00a0<br/>    File.open!(filename, [:append], fn file -&gt;<br/>      IO.puts(file, xyz)<br/>    end)<br/>\u00a0<br/>    IO.puts File.read!(filename)<br/>  end<br/>end<br/>\u00a0<br/>Appender.write(\"passwd.txt\")<br/>\u00a0</pre>"}, {"lang": "Fortran", "loc": 64, "block": "<pre class=\"fortran highlighted_source\">      <span class=\"kw1\">PROGRAM</span> DEMO\t<span class=\"co1\">!As per the described task, more or less.</span><br/>      <span class=\"kw3\">TYPE</span> DETAILS\t\t<span class=\"co1\">!Define a component.</span><br/>       <span class=\"kw3\">CHARACTER</span><span class=\"sy0\">*</span><span class=\"nu0\">28</span> FULLNAME<br/>       <span class=\"kw3\">CHARACTER</span><span class=\"sy0\">*</span><span class=\"nu0\">12</span> OFFICE<br/>       <span class=\"kw3\">CHARACTER</span><span class=\"sy0\">*</span><span class=\"nu0\">16</span> EXTENSION<br/>       <span class=\"kw3\">CHARACTER</span><span class=\"sy0\">*</span><span class=\"nu0\">16</span> HOMEPHONE<br/>       <span class=\"kw3\">CHARACTER</span><span class=\"sy0\">*</span><span class=\"nu0\">88</span> EMAIL<br/>      <span class=\"kw1\">END</span> <span class=\"kw3\">TYPE</span> DETAILS<br/>      <span class=\"kw3\">TYPE</span> USERSTUFF\t\t<span class=\"co1\">!Define the desired data aggregate.</span><br/>       <span class=\"kw3\">CHARACTER</span><span class=\"sy0\">*</span><span class=\"nu0\">8</span> ACCOUNT<br/>       <span class=\"kw3\">CHARACTER</span><span class=\"sy0\">*</span><span class=\"nu0\">8</span> PASSWORD\t<span class=\"co1\">!Plain text!! Eeek!!!</span><br/>       <span class=\"kw3\">INTEGER</span><span class=\"sy0\">*</span><span class=\"nu0\">2</span> UID<br/>       <span class=\"kw3\">INTEGER</span><span class=\"sy0\">*</span><span class=\"nu0\">2</span> GID<br/>       <span class=\"kw3\">TYPE</span><span class=\"br0\">(</span>DETAILS<span class=\"br0\">)</span> PERSON<br/>       <span class=\"kw3\">CHARACTER</span><span class=\"sy0\">*</span><span class=\"nu0\">18</span> DIRECTORY<br/>       <span class=\"kw3\">CHARACTER</span><span class=\"sy0\">*</span><span class=\"nu0\">12</span> SHELL<br/>      <span class=\"kw1\">END</span> <span class=\"kw3\">TYPE</span> USERSTUFF<br/>      <span class=\"kw3\">TYPE</span><span class=\"br0\">(</span>USERSTUFF<span class=\"br0\">)</span> NOTE\t<span class=\"co1\">!After all that, I'll have one.</span><br/>      <span class=\"kw3\">NAMELIST</span> <span class=\"sy0\">/</span>STUFF<span class=\"sy0\">/</span> NOTE\t<span class=\"co1\">!Enables free-format I/O, with names.</span><br/>      <span class=\"kw3\">INTEGER</span> F,MSG,N<br/>      MSG <span class=\"sy0\">=</span> <span class=\"nu0\">6</span>\t<span class=\"co1\">!Standard output.</span><br/>      F <span class=\"sy0\">=</span> <span class=\"nu0\">10</span>\t<span class=\"co1\">!Suitable for some arbitrary file.</span><br/>      OPEN<span class=\"br0\">(</span>MSG, <span class=\"kw1\">DELIM</span> <span class=\"sy0\">=</span> <span class=\"st0\">\"QUOTE\"</span><span class=\"br0\">)</span>\t<span class=\"co1\">!Text variables are to be enquoted.</span><br/>\u00a0<br/><span class=\"co1\">Create the file and supply its initial content.</span><br/>      OPEN <span class=\"br0\">(</span>F, <span class=\"kw1\">FILE</span><span class=\"sy0\">=</span><span class=\"st0\">\"Staff.txt\"</span>,<span class=\"kw1\">STATUS</span><span class=\"sy0\">=</span><span class=\"st0\">\"REPLACE\"</span>,<span class=\"kw1\">ACTION</span><span class=\"sy0\">=</span><span class=\"st0\">\"WRITE\"</span>,<br/>     <span class=\"nu0\">1</span> <span class=\"kw1\">DELIM</span><span class=\"sy0\">=</span><span class=\"st0\">\"QUOTE\"</span>,<span class=\"kw1\">RECL</span><span class=\"sy0\">=</span><span class=\"nu0\">666</span><span class=\"br0\">)</span>\t<span class=\"co1\">!Special parameters for the free-format WRITE working.</span><br/>\u00a0<br/>      WRITE <span class=\"br0\">(</span>F,<span class=\"sy0\">*</span><span class=\"br0\">)</span> USERSTUFF<span class=\"br0\">(</span><span class=\"st0\">\"jsmith\"</span>,<span class=\"st0\">\"x\"</span>,<span class=\"nu0\">1001</span>,<span class=\"nu0\">1000</span>,<br/>     <span class=\"nu0\">1</span> DETAILS<span class=\"br0\">(</span><span class=\"st0\">\"Joe Smith\"</span>,<span class=\"st0\">\"Room 1007\"</span>,<span class=\"st0\">\"(234)555-8917\"</span>,<br/>     <span class=\"nu0\">2</span>  <span class=\"st0\">\"(234)555-0077\"</span>,<span class=\"st0\">\"<a class=\"__cf_email__\" data-cfemail=\"b6dcc5dbdfc2def6c4d9c5d3c2c2d7d5d9d2d398d9c4d1\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>\"</span><span class=\"br0\">)</span>,<br/>     <span class=\"nu0\">2</span> <span class=\"st0\">\"/home/jsmith\"</span>,<span class=\"st0\">\"/bin/bash\"</span><span class=\"br0\">)</span><br/>\u00a0<br/>      WRITE <span class=\"br0\">(</span>F,<span class=\"sy0\">*</span><span class=\"br0\">)</span> USERSTUFF<span class=\"br0\">(</span><span class=\"st0\">\"jdoe\"</span>,<span class=\"st0\">\"x\"</span>,<span class=\"nu0\">1002</span>,<span class=\"nu0\">1000</span>,<br/>     <span class=\"nu0\">1</span> DETAILS<span class=\"br0\">(</span><span class=\"st0\">\"Jane Doe\"</span>,<span class=\"st0\">\"Room 1004\"</span>,<span class=\"st0\">\"(234)555-8914\"</span>,<br/>     <span class=\"nu0\">2</span>  <span class=\"st0\">\"(234)555-0044\"</span>,<span class=\"st0\">\"<a class=\"__cf_email__\" data-cfemail=\"066c62696346746975637272676569626328697461\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>\"</span><span class=\"br0\">)</span>,<br/>     <span class=\"nu0\">3</span> <span class=\"st0\">\"home/jdoe\"</span>,<span class=\"st0\">\"/bin/bash\"</span><span class=\"br0\">)</span><br/>      CLOSE <span class=\"br0\">(</span>F<span class=\"br0\">)</span>\t\t<span class=\"co1\">!The file is now existing.</span><br/>\u00a0<br/><span class=\"co1\">Choose the existing file, and append a further record to it.</span><br/>      OPEN <span class=\"br0\">(</span>F, <span class=\"kw1\">FILE</span><span class=\"sy0\">=</span><span class=\"st0\">\"Staff.txt\"</span>,<span class=\"kw1\">STATUS</span><span class=\"sy0\">=</span><span class=\"st0\">\"OLD\"</span>,<span class=\"kw1\">ACTION</span><span class=\"sy0\">=</span><span class=\"st0\">\"WRITE\"</span>,<br/>     <span class=\"nu0\">1</span> <span class=\"kw1\">DELIM</span><span class=\"sy0\">=</span><span class=\"st0\">\"QUOTE\"</span>,<span class=\"kw1\">RECL</span><span class=\"sy0\">=</span><span class=\"nu0\">666</span>,<span class=\"kw1\">ACCESS</span><span class=\"sy0\">=</span><span class=\"st0\">\"APPEND\"</span><span class=\"br0\">)</span><br/>\u00a0<br/>      NOTE <span class=\"sy0\">=</span> USERSTUFF<span class=\"br0\">(</span><span class=\"st0\">\"xyz\"</span>,<span class=\"st0\">\"x\"</span>,<span class=\"nu0\">1003</span>,<span class=\"nu0\">1000</span>,\t\t<span class=\"co1\">!Create a new record's worth of stuff.</span><br/>     <span class=\"nu0\">1</span> DETAILS<span class=\"br0\">(</span><span class=\"st0\">\"X Yz\"</span>,<span class=\"st0\">\"Room 1003\"</span>,<span class=\"st0\">\"(234)555-8193\"</span>,<br/>     <span class=\"nu0\">2</span>  <span class=\"st0\">\"(234)555-033\"</span>,<span class=\"st0\">\"<a class=\"__cf_email__\" data-cfemail=\"88f0f1f2c8fae7fbedfcfce9ebe7eceda6e7faef\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>\"</span><span class=\"br0\">)</span>,<br/>     <span class=\"nu0\">3</span> <span class=\"st0\">\"/home/xyz\"</span>,<span class=\"st0\">\"/bin/bash\"</span><span class=\"br0\">)</span><br/>      WRITE <span class=\"br0\">(</span>F,<span class=\"sy0\">*</span><span class=\"br0\">)</span> NOTE\t\t\t\t\t<span class=\"co1\">!Append its content to the file.</span><br/>      CLOSE <span class=\"br0\">(</span>F<span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"co1\">Chase through the file, revealing what had been written..</span><br/>      OPEN <span class=\"br0\">(</span>F, <span class=\"kw1\">FILE</span><span class=\"sy0\">=</span><span class=\"st0\">\"Staff.txt\"</span>,<span class=\"kw1\">STATUS</span><span class=\"sy0\">=</span><span class=\"st0\">\"OLD\"</span>,<span class=\"kw1\">ACTION</span><span class=\"sy0\">=</span><span class=\"st0\">\"READ\"</span>,<br/>     <span class=\"nu0\">1</span> <span class=\"kw1\">DELIM</span><span class=\"sy0\">=</span><span class=\"st0\">\"QUOTE\"</span>,<span class=\"kw1\">RECL</span><span class=\"sy0\">=</span><span class=\"nu0\">666</span><span class=\"br0\">)</span><br/>      N <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><br/>   <span class=\"nu0\">10</span> READ <span class=\"br0\">(</span>F,<span class=\"sy0\">*</span>,<span class=\"kw1\">END</span> <span class=\"sy0\">=</span> <span class=\"nu0\">20</span><span class=\"br0\">)</span> NOTE\t<span class=\"co1\">!As it went out, so it comes in.</span><br/>      N <span class=\"sy0\">=</span> N <span class=\"sy0\">+</span> <span class=\"nu0\">1</span>\t\t\t<span class=\"co1\">!Another record read.</span><br/>      WRITE <span class=\"br0\">(</span>MSG,<span class=\"nu0\">11</span><span class=\"br0\">)</span> N\t\t<span class=\"co1\">!Announce.</span><br/>   <span class=\"nu0\">11</span> FORMAT <span class=\"br0\">(</span><span class=\"sy0\">/</span>,<span class=\"st0\">\"Record \"</span>,I0<span class=\"br0\">)</span>\t<span class=\"co1\">!Thus without quotes around the text part.</span><br/>      WRITE <span class=\"br0\">(</span>MSG,STUFF<span class=\"br0\">)</span>\t\t<span class=\"co1\">!Reveal.</span><br/>      <span class=\"kw1\">GO</span> <span class=\"kw1\">TO</span> <span class=\"nu0\">10</span>\t\t\t<span class=\"co1\">!Try again.</span><br/>\u00a0<br/><span class=\"co1\">Closedown.</span><br/>   <span class=\"nu0\">20</span> CLOSE <span class=\"br0\">(</span>F<span class=\"br0\">)</span><br/>      <span class=\"kw1\">END</span></pre>"}, {"lang": "FreeBASIC", "loc": 86, "block": "<pre class=\"freebasic highlighted_source\"><span class=\"co1\">' FB 1.05.0 Win64</span><br/>\u00a0<br/><span class=\"kw1\">Type</span> Person<br/>  <span class=\"kw1\">As</span> <span class=\"kw1\">String</span>  fullname<br/>  <span class=\"kw1\">As</span> <span class=\"kw1\">String</span>  office<br/>  <span class=\"kw1\">As</span> <span class=\"kw1\">String</span>  extension<br/>  <span class=\"kw1\">As</span> <span class=\"kw1\">String</span>  homephone<br/>  <span class=\"kw1\">As</span> <span class=\"kw1\">String</span>  email<br/>  <span class=\"kw1\">Declare</span> Constructor<span class=\"br0\">(</span><span class=\"br0\">)</span><br/>  <span class=\"kw1\">Declare</span> Constructor<span class=\"br0\">(</span><span class=\"kw1\">As</span> <span class=\"kw1\">String</span>, <span class=\"kw1\">As</span> <span class=\"kw1\">String</span>, <span class=\"kw1\">As</span> <span class=\"kw1\">String</span>, <span class=\"kw1\">As</span> <span class=\"kw1\">String</span>, <span class=\"kw1\">As</span> <span class=\"kw1\">String</span><span class=\"br0\">)</span><br/>  <span class=\"kw1\">Declare</span> Operator Cast<span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"kw1\">As</span> <span class=\"kw1\">String</span><br/><span class=\"kw1\">End</span> <span class=\"kw1\">Type</span><br/>\u00a0<br/>Constructor Person<span class=\"br0\">(</span><span class=\"br0\">)</span><br/><span class=\"kw1\">End</span> Constructor<br/>\u00a0<br/>Constructor Person<span class=\"br0\">(</span>fullname <span class=\"kw1\">As</span> <span class=\"kw1\">String</span>, office <span class=\"kw1\">As</span> <span class=\"kw1\">String</span>, extension <span class=\"kw1\">As</span> <span class=\"kw1\">String</span>, _<br/>homephone <span class=\"kw1\">As</span> <span class=\"kw1\">String</span>, email <span class=\"kw1\">As</span> <span class=\"kw1\">String</span><span class=\"br0\">)</span><br/>\u00a0<br/>  <span class=\"kw1\">With</span> This<br/>    .<span class=\"me1\">fullname</span>  = fullname<br/>    .<span class=\"me1\">office</span>    = office<br/>    .<span class=\"me1\">extension</span> = extension<br/>    .<span class=\"me1\">homephone</span> = homephone<br/>    .<span class=\"me1\">email</span>     = email<br/>  <span class=\"kw1\">End</span> <span class=\"kw1\">With</span><br/>\u00a0<br/><span class=\"kw1\">End</span> Constructor<br/>\u00a0<br/>Operator Person.<span class=\"me1\">Cast</span><span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"kw1\">As</span> <span class=\"kw1\">String</span><br/>  <span class=\"kw1\">Return</span> fullname + <span class=\"st0\">\",\"</span> + office + <span class=\"st0\">\",\"</span> + extension + <span class=\"st0\">\",\"</span> + homephone + <span class=\"st0\">\",\"</span> + email<br/><span class=\"kw1\">End</span> Operator<br/>\u00a0<br/><span class=\"kw1\">Type</span> Record<br/>  <span class=\"kw1\">As</span> <span class=\"kw1\">String</span>  account<br/>  <span class=\"kw1\">As</span> <span class=\"kw1\">String</span>  password<br/>  <span class=\"kw1\">As</span> <span class=\"kw1\">Integer</span> uid<br/>  <span class=\"kw1\">As</span> <span class=\"kw1\">Integer</span> gid<br/>  <span class=\"kw1\">As</span> Person  user<br/>  <span class=\"kw1\">As</span> <span class=\"kw1\">String</span>  directory<br/>  <span class=\"kw1\">As</span> <span class=\"kw1\">String</span>  <span class=\"kw1\">shell</span><br/>  <span class=\"kw1\">Declare</span> Constructor<span class=\"br0\">(</span><span class=\"br0\">)</span> <br/>  <span class=\"kw1\">Declare</span> Constructor<span class=\"br0\">(</span><span class=\"kw1\">As</span> <span class=\"kw1\">String</span>, <span class=\"kw1\">As</span> <span class=\"kw1\">String</span>, <span class=\"kw1\">As</span> <span class=\"kw1\">Integer</span>, <span class=\"kw1\">As</span> <span class=\"kw1\">Integer</span>, <span class=\"kw1\">As</span> Person, <span class=\"kw1\">As</span> <span class=\"kw1\">String</span>, <span class=\"kw1\">As</span> <span class=\"kw1\">String</span><span class=\"br0\">)</span><br/>  <span class=\"kw1\">Declare</span> Operator Cast<span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"kw1\">As</span> <span class=\"kw1\">String</span><br/><span class=\"kw1\">End</span> <span class=\"kw1\">Type</span><br/>\u00a0<br/>Constructor Record<span class=\"br0\">(</span><span class=\"br0\">)</span><br/><span class=\"kw1\">End</span> Constructor<br/>\u00a0<br/>Constructor Record<span class=\"br0\">(</span>account <span class=\"kw1\">As</span> <span class=\"kw1\">String</span>, password <span class=\"kw1\">As</span> <span class=\"kw1\">String</span>, uid <span class=\"kw1\">As</span> <span class=\"kw1\">Integer</span>, gid <span class=\"kw1\">As</span> <span class=\"kw1\">Integer</span>, user <span class=\"kw1\">As</span> Person, _<br/>directory <span class=\"kw1\">As</span> <span class=\"kw1\">String</span>, <span class=\"kw1\">shell</span> <span class=\"kw1\">As</span> <span class=\"kw1\">String</span><span class=\"br0\">)</span><br/>\u00a0<br/>  <span class=\"kw1\">With</span> This<br/>   .<span class=\"me1\">account</span>   = account<br/>   .<span class=\"me1\">password</span>  = password<br/>   .<span class=\"me1\">uid</span>       = uid<br/>   .<span class=\"me1\">gid</span>       = gid<br/>   .<span class=\"me1\">user</span>      = user<br/>   .<span class=\"me1\">directory</span> = directory<br/>   .<span class=\"kw1\">shell</span>     = <span class=\"kw1\">shell</span><br/>  <span class=\"kw1\">End</span> <span class=\"kw1\">With</span><br/>\u00a0<br/><span class=\"kw1\">End</span> Constructor <br/>\u00a0<br/>Operator Record.<span class=\"me1\">Cast</span><span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"kw1\">As</span> <span class=\"kw1\">String</span><br/>  <span class=\"kw1\">Return</span> account + <span class=\"st0\">\":\"</span> + password + <span class=\"st0\">\":\"</span> + <span class=\"kw1\">Str</span><span class=\"br0\">(</span>uid<span class=\"br0\">)</span> + <span class=\"st0\">\":\"</span> + <span class=\"kw1\">Str</span><span class=\"br0\">(</span>gid<span class=\"br0\">)</span> + <span class=\"st0\">\":\"</span> + user + <span class=\"st0\">\":\"</span> + directory + <span class=\"st0\">\":\"</span> + <span class=\"kw1\">shell</span><br/><span class=\"kw1\">End</span> Operator<br/>\u00a0<br/><span class=\"kw1\">Dim</span> persons<span class=\"br0\">(</span><span class=\"nu0\">1</span> <span class=\"kw1\">To</span> <span class=\"nu0\">3</span><span class=\"br0\">)</span> <span class=\"kw1\">As</span> Person<br/>persons<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"br0\">)</span> = Person<span class=\"br0\">(</span><span class=\"st0\">\"Joe Smith\"</span>, <span class=\"st0\">\"Room 1007\"</span>, <span class=\"st0\">\"(234)555-8917\"</span>, <span class=\"st0\">\"(234)555-0077\"</span>, <span class=\"st0\">\"<a class=\"__cf_email__\" data-cfemail=\"b0dac3ddd9c4d8f0c2dfc3d5c4c4d1d3dfd4d59edfc2d7\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>\"</span><span class=\"br0\">)</span><br/>persons<span class=\"br0\">(</span><span class=\"nu0\">2</span><span class=\"br0\">)</span> = Person<span class=\"br0\">(</span><span class=\"st0\">\"Jane Doe\"</span>,  <span class=\"st0\">\"Room 1004\"</span>, <span class=\"st0\">\"(234)555-8914\"</span>, <span class=\"st0\">\"(234)555-0044\"</span>, <span class=\"st0\">\"<a class=\"__cf_email__\" data-cfemail=\"573d33383217253824322323363438333279382530\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>\"</span>  <span class=\"br0\">)</span><br/>persons<span class=\"br0\">(</span><span class=\"nu0\">3</span><span class=\"br0\">)</span> = Person<span class=\"br0\">(</span><span class=\"st0\">\"X Yz\"</span>,      <span class=\"st0\">\"Room 1003\"</span>, <span class=\"st0\">\"(234)555-8913\"</span>, <span class=\"st0\">\"(234)555-0033\"</span>, <span class=\"st0\">\"<a class=\"__cf_email__\" data-cfemail=\"3e4647447e4c514d5b4a4a5f5d515a5b10514c59\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>\"</span>   <span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"kw1\">Dim</span> records<span class=\"br0\">(</span><span class=\"nu0\">1</span> <span class=\"kw1\">To</span> <span class=\"nu0\">3</span><span class=\"br0\">)</span> <span class=\"kw1\">As</span> Record<br/>records<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"br0\">)</span> = Record<span class=\"br0\">(</span><span class=\"st0\">\"jsmith\"</span>, <span class=\"st0\">\"x\"</span>, <span class=\"nu0\">1001</span>, <span class=\"nu0\">1000</span>, persons<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"br0\">)</span>, <span class=\"st0\">\"/home/jsmith\"</span>, <span class=\"st0\">\"/bin/bash\"</span><span class=\"br0\">)</span><br/>records<span class=\"br0\">(</span><span class=\"nu0\">2</span><span class=\"br0\">)</span> = Record<span class=\"br0\">(</span><span class=\"st0\">\"jdoe\"</span>,   <span class=\"st0\">\"x\"</span>, <span class=\"nu0\">1002</span>, <span class=\"nu0\">1000</span>, persons<span class=\"br0\">(</span><span class=\"nu0\">2</span><span class=\"br0\">)</span>, <span class=\"st0\">\"/home/jdoe\"</span>  , <span class=\"st0\">\"/bin/bash\"</span><span class=\"br0\">)</span>\t<br/>records<span class=\"br0\">(</span><span class=\"nu0\">3</span><span class=\"br0\">)</span> = Record<span class=\"br0\">(</span><span class=\"st0\">\"xyz\"</span>,    <span class=\"st0\">\"x\"</span>, <span class=\"nu0\">1003</span>, <span class=\"nu0\">1000</span>, persons<span class=\"br0\">(</span><span class=\"nu0\">3</span><span class=\"br0\">)</span>, <span class=\"st0\">\"/home/xyz\"</span>   , <span class=\"st0\">\"/bin/bash\"</span><span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"kw1\">Open</span> <span class=\"st0\">\"passwd.txt\"</span> <span class=\"kw1\">For</span> <span class=\"kw1\">Output</span> <span class=\"kw1\">As</span> <span class=\"co2\">#1</span><br/><span class=\"kw1\">Print</span> <span class=\"co2\">#1, records(1)</span><br/><span class=\"kw1\">Print</span> <span class=\"co2\">#1, records(2)</span><br/><span class=\"kw1\">Close</span> <span class=\"co2\">#1</span><br/>\u00a0<br/><span class=\"kw1\">Open</span> <span class=\"st0\">\"passwd.txt\"</span> <span class=\"kw1\">For</span> <span class=\"kw1\">Append</span> <span class=\"kw1\">Lock</span> <span class=\"kw1\">Write</span> <span class=\"kw1\">As</span> <span class=\"co2\">#1</span><br/><span class=\"kw1\">Print</span> <span class=\"co2\">#1, records(3)</span><br/><span class=\"kw1\">Close</span> <span class=\"co2\">#1</span></pre>"}, {"lang": "Go", "loc": 101, "block": "<pre class=\"go highlighted_source\"><span class=\"kw1\">package</span> main<br/>\u00a0<br/><span class=\"kw1\">import</span> <span class=\"sy1\">(</span><br/>    <span class=\"st0\">\"bytes\"</span><br/>    <span class=\"st0\">\"fmt\"</span><br/>    <span class=\"st0\">\"io\"</span><br/>    <span class=\"st0\">\"io/ioutil\"</span><br/>    <span class=\"st0\">\"os\"</span><br/><span class=\"sy1\">)</span><br/>\u00a0<br/><span class=\"kw1\">type</span> pw <span class=\"kw4\">struct</span> <span class=\"sy1\">{</span><br/>    account<span class=\"sy1\">,</span> password <span class=\"kw4\">string</span><br/>    uid<span class=\"sy1\">,</span> gid          <span class=\"kw4\">uint</span><br/>    gecos<br/>    directory<span class=\"sy1\">,</span> shell <span class=\"kw4\">string</span><br/><span class=\"sy1\">}</span><br/>\u00a0<br/><span class=\"kw1\">type</span> gecos <span class=\"kw4\">struct</span> <span class=\"sy1\">{</span><br/>    fullname<span class=\"sy1\">,</span> office<span class=\"sy1\">,</span> extension<span class=\"sy1\">,</span> homephone<span class=\"sy1\">,</span> email <span class=\"kw4\">string</span><br/><span class=\"sy1\">}</span><br/>\u00a0<br/><span class=\"kw4\">func</span> <span class=\"sy1\">(</span>p <span class=\"sy3\">*</span>pw<span class=\"sy1\">)</span> encode<span class=\"sy1\">(</span>w <a href=\"http://golang.org/search?q=io.Writer\"><span class=\"kw5\">io.<span class=\"me1\">Writer</span></span></a><span class=\"sy1\">)</span> <span class=\"sy1\">(</span><span class=\"kw4\">int</span><span class=\"sy1\">,</span> error<span class=\"sy1\">)</span> <span class=\"sy1\">{</span><br/>    <span class=\"kw1\">return</span> fmt<span class=\"sy3\">.</span>Fprintf<span class=\"sy1\">(</span>w<span class=\"sy1\">,</span> <span class=\"st0\">\"%s:%s:%d:%d:%s,%s,%s,%s,%s:%s:%s<span class=\"es1\">\\n</span>\"</span><span class=\"sy1\">,</span><br/>        p<span class=\"sy3\">.</span><span class=\"me1\">account</span><span class=\"sy1\">,</span> p<span class=\"sy3\">.</span><span class=\"me1\">password</span><span class=\"sy1\">,</span> p<span class=\"sy3\">.</span><span class=\"me1\">uid</span><span class=\"sy1\">,</span> p<span class=\"sy3\">.</span><span class=\"me1\">gid</span><span class=\"sy1\">,</span><br/>        p<span class=\"sy3\">.</span><span class=\"me1\">fullname</span><span class=\"sy1\">,</span> p<span class=\"sy3\">.</span><span class=\"me1\">office</span><span class=\"sy1\">,</span> p<span class=\"sy3\">.</span><span class=\"me1\">extension</span><span class=\"sy1\">,</span> p<span class=\"sy3\">.</span><span class=\"me1\">homephone</span><span class=\"sy1\">,</span> p<span class=\"sy3\">.</span><span class=\"me1\">email</span><span class=\"sy1\">,</span><br/>        p<span class=\"sy3\">.</span><span class=\"me1\">directory</span><span class=\"sy1\">,</span> p<span class=\"sy3\">.</span><span class=\"me1\">shell</span><span class=\"sy1\">)</span><br/><span class=\"sy1\">}</span><br/>\u00a0<br/><span class=\"co1\">// data cut and pasted from task description</span><br/><span class=\"kw1\">var</span> p2 <span class=\"sy2\">=</span> <span class=\"sy1\">[]</span>pw<span class=\"sy1\">{</span><br/>    <span class=\"sy1\">{</span><span class=\"st0\">\"jsmith\"</span><span class=\"sy1\">,</span> <span class=\"st0\">\"x\"</span><span class=\"sy1\">,</span> <span class=\"nu0\">1001</span><span class=\"sy1\">,</span> <span class=\"nu0\">1000</span><span class=\"sy1\">,</span> gecos<span class=\"sy1\">{</span><span class=\"st0\">\"Joe Smith\"</span><span class=\"sy1\">,</span> <span class=\"st0\">\"Room 1007\"</span><span class=\"sy1\">,</span><br/>        <span class=\"st0\">\"(234)555-8917\"</span><span class=\"sy1\">,</span> <span class=\"st0\">\"(234)555-0077\"</span><span class=\"sy1\">,</span> <span class=\"st0\">\"<a class=\"__cf_email__\" data-cfemail=\"c2a8b1afabb6aa82b0adb1a7b6b6a3a1ada6a7ecadb0a5\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>\"</span><span class=\"sy1\">},</span><br/>        <span class=\"st0\">\"/home/jsmith\"</span><span class=\"sy1\">,</span> <span class=\"st0\">\"/bin/bash\"</span><span class=\"sy1\">},</span><br/>    <span class=\"sy1\">{</span><span class=\"st0\">\"jdoe\"</span><span class=\"sy1\">,</span> <span class=\"st0\">\"x\"</span><span class=\"sy1\">,</span> <span class=\"nu0\">1002</span><span class=\"sy1\">,</span> <span class=\"nu0\">1000</span><span class=\"sy1\">,</span> gecos<span class=\"sy1\">{</span><span class=\"st0\">\"Jane Doe\"</span><span class=\"sy1\">,</span> <span class=\"st0\">\"Room 1004\"</span><span class=\"sy1\">,</span><br/>        <span class=\"st0\">\"(234)555-8914\"</span><span class=\"sy1\">,</span> <span class=\"st0\">\"(234)555-0044\"</span><span class=\"sy1\">,</span> <span class=\"st0\">\"<a class=\"__cf_email__\" data-cfemail=\"4c262823290c3e233f2938382d2f23282962233e2b\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>\"</span><span class=\"sy1\">},</span><br/>        <span class=\"st0\">\"/home/jsmith\"</span><span class=\"sy1\">,</span> <span class=\"st0\">\"/bin/bash\"</span><span class=\"sy1\">},</span><br/><span class=\"sy1\">}</span><br/>\u00a0<br/><span class=\"kw1\">var</span> pa <span class=\"sy2\">=</span> pw<span class=\"sy1\">{</span><span class=\"st0\">\"xyz\"</span><span class=\"sy1\">,</span> <span class=\"st0\">\"x\"</span><span class=\"sy1\">,</span> <span class=\"nu0\">1003</span><span class=\"sy1\">,</span> <span class=\"nu0\">1000</span><span class=\"sy1\">,</span> gecos<span class=\"sy1\">{</span><span class=\"st0\">\"X Yz\"</span><span class=\"sy1\">,</span> <span class=\"st0\">\"Room 1003\"</span><span class=\"sy1\">,</span><br/>    <span class=\"st0\">\"(234)555-8913\"</span><span class=\"sy1\">,</span> <span class=\"st0\">\"(234)555-0033\"</span><span class=\"sy1\">,</span> <span class=\"st0\">\"<a class=\"__cf_email__\" data-cfemail=\"7b0302013b0914081e0f0f1a18141f1e5514091c\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>\"</span><span class=\"sy1\">},</span><br/>    <span class=\"st0\">\"/home/xyz\"</span><span class=\"sy1\">,</span> <span class=\"st0\">\"/bin/bash\"</span><span class=\"sy1\">}</span><br/>\u00a0<br/><span class=\"kw1\">var</span> expected <span class=\"sy2\">=</span> <span class=\"st0\">\"xyz:x:1003:1000:X Yz,Room 1003,(234)555-8913,\"</span> <span class=\"sy3\">+</span><br/>    <span class=\"st0\">\"(234)555-0033,<a class=\"__cf_email__\" data-cfemail=\"423a3b3802302d312736\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>tacode.org:/home/xyz:/bin/bash\"</span><br/>\u00a0<br/><span class=\"kw1\">const</span> pfn <span class=\"sy2\">=</span> <span class=\"st0\">\"mythical\"</span><br/>\u00a0<br/><span class=\"kw4\">func</span> main<span class=\"sy1\">()</span> <span class=\"sy1\">{</span><br/>    writeTwo<span class=\"sy1\">()</span><br/>    appendOneMore<span class=\"sy1\">()</span><br/>    checkResult<span class=\"sy1\">()</span><br/><span class=\"sy1\">}</span><br/>\u00a0<br/><span class=\"kw4\">func</span> writeTwo<span class=\"sy1\">()</span> <span class=\"sy1\">{</span><br/>    <span class=\"co1\">// overwrites any existing file</span><br/>    f<span class=\"sy1\">,</span> err <span class=\"sy2\">:=</span> os<span class=\"sy3\">.</span>Create<span class=\"sy1\">(</span>pfn<span class=\"sy1\">)</span><br/>    <span class=\"kw1\">if</span> err <span class=\"sy2\">!=</span> <span class=\"kw2\">nil</span> <span class=\"sy1\">{</span><br/>        fmt<span class=\"sy3\">.</span>Println<span class=\"sy1\">(</span>err<span class=\"sy1\">)</span><br/>        <span class=\"kw1\">return</span><br/>    <span class=\"sy1\">}</span><br/>    <span class=\"kw1\">defer</span> <span class=\"kw4\">func</span><span class=\"sy1\">()</span> <span class=\"sy1\">{</span><br/>        <span class=\"kw1\">if</span> cErr <span class=\"sy2\">:=</span> f<span class=\"sy3\">.</span>Close<span class=\"sy1\">();</span> cErr <span class=\"sy2\">!=</span> <span class=\"kw2\">nil</span> &amp;&amp; err <span class=\"sy3\">==</span> <span class=\"kw2\">nil</span> <span class=\"sy1\">{</span><br/>            fmt<span class=\"sy3\">.</span>Println<span class=\"sy1\">(</span>cErr<span class=\"sy1\">)</span><br/>        <span class=\"sy1\">}</span><br/>    <span class=\"sy1\">}()</span><br/>    <span class=\"kw1\">for</span> _<span class=\"sy1\">,</span> p <span class=\"sy2\">:=</span> <span class=\"kw1\">range</span> p2 <span class=\"sy1\">{</span><br/>        <span class=\"kw1\">if</span> _<span class=\"sy1\">,</span> err <span class=\"sy2\">=</span> p<span class=\"sy3\">.</span>encode<span class=\"sy1\">(</span>f<span class=\"sy1\">);</span> err <span class=\"sy2\">!=</span> <span class=\"kw2\">nil</span> <span class=\"sy1\">{</span><br/>            fmt<span class=\"sy3\">.</span>Println<span class=\"sy1\">(</span>err<span class=\"sy1\">)</span><br/>            <span class=\"kw1\">return</span><br/>        <span class=\"sy1\">}</span><br/>    <span class=\"sy1\">}</span><br/><span class=\"sy1\">}</span><br/>\u00a0<br/><span class=\"kw4\">func</span> appendOneMore<span class=\"sy1\">()</span> <span class=\"sy1\">{</span><br/>    <span class=\"co1\">// file must already exist</span><br/>    f<span class=\"sy1\">,</span> err <span class=\"sy2\">:=</span> os<span class=\"sy3\">.</span>OpenFile<span class=\"sy1\">(</span>pfn<span class=\"sy1\">,</span> os<span class=\"sy3\">.</span>O_RDWR<span class=\"sy3\">|</span>os<span class=\"sy3\">.</span>O_APPEND<span class=\"sy1\">,</span> <span class=\"nu0\">0</span><span class=\"sy1\">)</span><br/>    <span class=\"kw1\">if</span> err <span class=\"sy2\">!=</span> <span class=\"kw2\">nil</span> <span class=\"sy1\">{</span><br/>        fmt<span class=\"sy3\">.</span>Println<span class=\"sy1\">(</span>err<span class=\"sy1\">)</span><br/>        <span class=\"kw1\">return</span><br/>    <span class=\"sy1\">}</span><br/>    <span class=\"kw1\">if</span> _<span class=\"sy1\">,</span> err <span class=\"sy2\">:=</span> pa<span class=\"sy3\">.</span>encode<span class=\"sy1\">(</span>f<span class=\"sy1\">);</span> err <span class=\"sy2\">!=</span> <span class=\"kw2\">nil</span> <span class=\"sy1\">{</span><br/>        fmt<span class=\"sy3\">.</span>Println<span class=\"sy1\">(</span>err<span class=\"sy1\">)</span><br/>    <span class=\"sy1\">}</span><br/>    <span class=\"kw1\">if</span> cErr <span class=\"sy2\">:=</span> f<span class=\"sy3\">.</span>Close<span class=\"sy1\">();</span> cErr <span class=\"sy2\">!=</span> <span class=\"kw2\">nil</span> &amp;&amp; err <span class=\"sy3\">==</span> <span class=\"kw2\">nil</span> <span class=\"sy1\">{</span><br/>        fmt<span class=\"sy3\">.</span>Println<span class=\"sy1\">(</span>cErr<span class=\"sy1\">)</span><br/>    <span class=\"sy1\">}</span><br/><span class=\"sy1\">}</span><br/>\u00a0<br/><span class=\"kw4\">func</span> checkResult<span class=\"sy1\">()</span> <span class=\"sy1\">{</span><br/>    <span class=\"co1\">// reads entire file then closes it</span><br/>    b<span class=\"sy1\">,</span> err <span class=\"sy2\">:=</span> ioutil<span class=\"sy3\">.</span>ReadFile<span class=\"sy1\">(</span>pfn<span class=\"sy1\">)</span><br/>    <span class=\"kw1\">if</span> err <span class=\"sy2\">!=</span> <span class=\"kw2\">nil</span> <span class=\"sy1\">{</span><br/>        fmt<span class=\"sy3\">.</span>Println<span class=\"sy1\">(</span>err<span class=\"sy1\">)</span><br/>        <span class=\"kw1\">return</span><br/>    <span class=\"sy1\">}</span><br/>    <span class=\"kw1\">if</span> <span class=\"kw4\">string</span><span class=\"sy1\">(</span>bytes<span class=\"sy3\">.</span>Split<span class=\"sy1\">(</span>b<span class=\"sy1\">,</span> <span class=\"sy1\">[]</span><span class=\"kw4\">byte</span><span class=\"sy1\">{</span><span class=\"st0\">'<span class=\"es1\">\\n</span>'</span><span class=\"sy1\">})[</span><span class=\"nu0\">2</span><span class=\"sy1\">])</span> <span class=\"sy3\">==</span> expected <span class=\"sy1\">{</span><br/>        fmt<span class=\"sy3\">.</span>Println<span class=\"sy1\">(</span><span class=\"st0\">\"append okay\"</span><span class=\"sy1\">)</span><br/>    <span class=\"sy1\">}</span> <span class=\"kw1\">else</span> <span class=\"sy1\">{</span><br/>        fmt<span class=\"sy3\">.</span>Println<span class=\"sy1\">(</span><span class=\"st0\">\"it didn't work\"</span><span class=\"sy1\">)</span><br/>    <span class=\"sy1\">}</span><br/><span class=\"sy1\">}</span></pre>"}, {"lang": "Groovy", "loc": 68, "block": "<pre class=\"groovy highlighted_source\"><a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20class\"><span class=\"kw2\">class</span></a> PasswdRecord <span class=\"br0\">{</span><br/>    <a href=\"http://www.google.de/search?as_q=String&amp;num=100&amp;hl=en&amp;as_occt=url&amp;as_sitesearch=java.sun.com%2Fj2se%2F1%2E5%2E0%2Fdocs%2Fapi%2F\"><span class=\"kw3\">String</span></a> account, password, directory, shell<br/>    <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20int\"><span class=\"kw4\">int</span></a> uid, gid<br/>    SourceRecord source<br/>\u00a0<br/>    <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20private\"><span class=\"kw2\">private</span></a> <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20static\"><span class=\"kw2\">static</span></a> <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20final\"><span class=\"kw2\">final</span></a> fs <span class=\"sy0\">=</span> <span class=\"st0\">':'</span><br/>    <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20private\"><span class=\"kw2\">private</span></a> <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20static\"><span class=\"kw2\">static</span></a> <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20final\"><span class=\"kw2\">final</span></a> fieldNames <span class=\"sy0\">=</span> <span class=\"br0\">[</span><span class=\"st0\">'account'</span>, <span class=\"st0\">'password'</span>, <span class=\"st0\">'uid'</span>, <span class=\"st0\">'gid'</span>, <span class=\"st0\">'source'</span>, <span class=\"st0\">'directory'</span>, <span class=\"st0\">'shell'</span><span class=\"br0\">]</span><br/>    <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20private\"><span class=\"kw2\">private</span></a> <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20static\"><span class=\"kw2\">static</span></a> <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20final\"><span class=\"kw2\">final</span></a> stringFields <span class=\"sy0\">=</span> <span class=\"br0\">[</span><span class=\"st0\">'account'</span>, <span class=\"st0\">'password'</span>, <span class=\"st0\">'directory'</span>, <span class=\"st0\">'shell'</span><span class=\"br0\">]</span><br/>    <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20private\"><span class=\"kw2\">private</span></a> <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20static\"><span class=\"kw2\">static</span></a> <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20final\"><span class=\"kw2\">final</span></a> intFields <span class=\"sy0\">=</span> <span class=\"br0\">[</span><span class=\"st0\">'uid'</span>, <span class=\"st0\">'gid'</span><span class=\"br0\">]</span><br/>\u00a0<br/>    PasswdRecord<span class=\"br0\">(</span><a href=\"http://www.google.de/search?as_q=String&amp;num=100&amp;hl=en&amp;as_occt=url&amp;as_sitesearch=java.sun.com%2Fj2se%2F1%2E5%2E0%2Fdocs%2Fapi%2F\"><span class=\"kw3\">String</span></a> line <span class=\"sy0\">=</span> <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20null\"><span class=\"kw2\">null</span></a><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>        <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20if\"><span class=\"kw1\">if</span></a> <span class=\"br0\">(</span><span class=\"sy0\">!</span>line<span class=\"br0\">)</span> <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20return\"><span class=\"kw2\">return</span></a><br/>        <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20def\"><span class=\"kw2\">def</span></a> fields <span class=\"sy0\">=</span> line.<span class=\"me1\">split</span><span class=\"br0\">(</span>fs<span class=\"br0\">)</span><br/>        <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20if\"><span class=\"kw1\">if</span></a> <span class=\"br0\">(</span>fields.<a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20size\"><span class=\"kw5\">size</span></a><span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"sy0\">!=</span> fieldNames.<a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20size\"><span class=\"kw5\">size</span></a><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>            <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20throw\"><span class=\"kw2\">throw</span></a> <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20new\"><span class=\"kw2\">new</span></a> <a href=\"http://www.google.de/search?as_q=IllegalArgumentException&amp;num=100&amp;hl=en&amp;as_occt=url&amp;as_sitesearch=java.sun.com%2Fj2se%2F1%2E5%2E0%2Fdocs%2Fapi%2F\"><span class=\"kw3\">IllegalArgumentException</span></a><span class=\"br0\">(</span><br/>            <span class=\"st0\">\"Passwd record must have exactly ${fieldNames.size()} '${fs}'-delimited fields\"</span><span class=\"br0\">)</span><br/>        <span class=\"br0\">}</span><br/>        <span class=\"br0\">(</span><span class=\"nu0\">0</span>..<span class=\"sy0\">&lt;</span>fields.<a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20size\"><span class=\"kw5\">size</span></a><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"br0\">)</span>.<a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20each\"><span class=\"kw5\">each</span></a> <span class=\"br0\">{</span> i <span class=\"sy0\">-&gt;</span><br/>            <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20switch\"><span class=\"kw1\">switch</span></a> <span class=\"br0\">(</span>fieldNames<span class=\"br0\">[</span>i<span class=\"br0\">]</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>                <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20case\"><span class=\"kw1\">case</span></a> stringFields:    <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20this\"><span class=\"kw2\">this</span></a><span class=\"br0\">[</span>fieldNames<span class=\"br0\">[</span>i<span class=\"br0\">]</span><span class=\"br0\">]</span> <span class=\"sy0\">=</span> fields<span class=\"br0\">[</span>i<span class=\"br0\">]</span><span class=\"sy0\">;</span>            <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20break\"><span class=\"kw2\">break</span></a><br/>                <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20case\"><span class=\"kw1\">case</span></a> intFields:       <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20this\"><span class=\"kw2\">this</span></a><span class=\"br0\">[</span>fieldNames<span class=\"br0\">[</span>i<span class=\"br0\">]</span><span class=\"br0\">]</span> <span class=\"sy0\">=</span> fields<span class=\"br0\">[</span>i<span class=\"br0\">]</span> <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20as\"><span class=\"kw2\">as</span></a> <a href=\"http://www.google.de/search?as_q=Integer&amp;num=100&amp;hl=en&amp;as_occt=url&amp;as_sitesearch=java.sun.com%2Fj2se%2F1%2E5%2E0%2Fdocs%2Fapi%2F\"><span class=\"kw3\">Integer</span></a><span class=\"sy0\">;</span> <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20break\"><span class=\"kw2\">break</span></a><br/>                <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20default\"><span class=\"kw2\">default</span></a> <span class=\"coMULTI\">/* source */</span>: <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20this\"><span class=\"kw2\">this</span></a>.<span class=\"me1\">source</span> <span class=\"sy0\">=</span> <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20new\"><span class=\"kw2\">new</span></a> SourceRecord<span class=\"br0\">(</span>fields<span class=\"br0\">[</span>i<span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span>  <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20break\"><span class=\"kw2\">break</span></a><br/>            <span class=\"br0\">}</span><br/>        <span class=\"br0\">}</span><br/>    <span class=\"br0\">}</span><br/>\u00a0<br/>    @Override <a href=\"http://www.google.de/search?as_q=String&amp;num=100&amp;hl=en&amp;as_occt=url&amp;as_sitesearch=java.sun.com%2Fj2se%2F1%2E5%2E0%2Fdocs%2Fapi%2F\"><span class=\"kw3\">String</span></a> toString<span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"br0\">{</span> fieldNames.<a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20collect\"><span class=\"kw5\">collect</span></a> <span class=\"br0\">{</span> <span class=\"st0\">\"${this[it]}${fs}\"</span> <span class=\"br0\">}</span>.<span class=\"me1\">sum</span><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"br0\">[</span><span class=\"nu0\">0</span>..<span class=\"sy0\">-</span><span class=\"nu0\">2</span><span class=\"br0\">]</span> <span class=\"br0\">}</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20class\"><span class=\"kw2\">class</span></a> SourceRecord <span class=\"br0\">{</span><br/>    <a href=\"http://www.google.de/search?as_q=String&amp;num=100&amp;hl=en&amp;as_occt=url&amp;as_sitesearch=java.sun.com%2Fj2se%2F1%2E5%2E0%2Fdocs%2Fapi%2F\"><span class=\"kw3\">String</span></a> fullname, office, extension, homephone, email<br/>\u00a0<br/>    <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20private\"><span class=\"kw2\">private</span></a> <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20static\"><span class=\"kw2\">static</span></a> <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20final\"><span class=\"kw2\">final</span></a> fs <span class=\"sy0\">=</span> <span class=\"st0\">','</span><br/>    <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20private\"><span class=\"kw2\">private</span></a> <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20static\"><span class=\"kw2\">static</span></a> <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20final\"><span class=\"kw2\">final</span></a> fieldNames <span class=\"sy0\">=</span><br/>    <span class=\"br0\">[</span><span class=\"st0\">'fullname'</span>, <span class=\"st0\">'office'</span>, <span class=\"st0\">'extension'</span>, <span class=\"st0\">'homephone'</span>, <span class=\"st0\">'email'</span><span class=\"br0\">]</span><br/>\u00a0<br/>    SourceRecord<span class=\"br0\">(</span><a href=\"http://www.google.de/search?as_q=String&amp;num=100&amp;hl=en&amp;as_occt=url&amp;as_sitesearch=java.sun.com%2Fj2se%2F1%2E5%2E0%2Fdocs%2Fapi%2F\"><span class=\"kw3\">String</span></a> line <span class=\"sy0\">=</span> <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20null\"><span class=\"kw2\">null</span></a><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>        <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20if\"><span class=\"kw1\">if</span></a> <span class=\"br0\">(</span><span class=\"sy0\">!</span>line<span class=\"br0\">)</span> <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20return\"><span class=\"kw2\">return</span></a><br/>        <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20def\"><span class=\"kw2\">def</span></a> fields <span class=\"sy0\">=</span> line.<span class=\"me1\">split</span><span class=\"br0\">(</span>fs<span class=\"br0\">)</span><br/>        <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20if\"><span class=\"kw1\">if</span></a> <span class=\"br0\">(</span>fields.<a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20size\"><span class=\"kw5\">size</span></a><span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"sy0\">!=</span> fieldNames.<a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20size\"><span class=\"kw5\">size</span></a><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>            <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20throw\"><span class=\"kw2\">throw</span></a> <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20new\"><span class=\"kw2\">new</span></a> <a href=\"http://www.google.de/search?as_q=IllegalArgumentException&amp;num=100&amp;hl=en&amp;as_occt=url&amp;as_sitesearch=java.sun.com%2Fj2se%2F1%2E5%2E0%2Fdocs%2Fapi%2F\"><span class=\"kw3\">IllegalArgumentException</span></a><span class=\"br0\">(</span><br/>            <span class=\"st0\">\"Source record must have exactly ${fieldNames.size()} '${fs}'-delimited fields\"</span><span class=\"br0\">)</span><br/>        <span class=\"br0\">}</span><br/>        <span class=\"br0\">(</span><span class=\"nu0\">0</span>..<span class=\"sy0\">&lt;</span>fields.<a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20size\"><span class=\"kw5\">size</span></a><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"br0\">)</span>.<a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20each\"><span class=\"kw5\">each</span></a> <span class=\"br0\">{</span> i <span class=\"sy0\">-&gt;</span><br/>            <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20this\"><span class=\"kw2\">this</span></a><span class=\"br0\">[</span>fieldNames<span class=\"br0\">[</span>i<span class=\"br0\">]</span><span class=\"br0\">]</span> <span class=\"sy0\">=</span> fields<span class=\"br0\">[</span>i<span class=\"br0\">]</span><br/>        <span class=\"br0\">}</span><br/>    <span class=\"br0\">}</span><br/>\u00a0<br/>    @Override <a href=\"http://www.google.de/search?as_q=String&amp;num=100&amp;hl=en&amp;as_occt=url&amp;as_sitesearch=java.sun.com%2Fj2se%2F1%2E5%2E0%2Fdocs%2Fapi%2F\"><span class=\"kw3\">String</span></a> toString<span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"br0\">{</span> fieldNames.<a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20collect\"><span class=\"kw5\">collect</span></a> <span class=\"br0\">{</span> <span class=\"st0\">\"${this[it]}${fs}\"</span> <span class=\"br0\">}</span>.<span class=\"me1\">sum</span><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"br0\">[</span><span class=\"nu0\">0</span>..<span class=\"sy0\">-</span><span class=\"nu0\">2</span><span class=\"br0\">]</span> <span class=\"br0\">}</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20def\"><span class=\"kw2\">def</span></a> appendNewPasswdRecord <span class=\"sy0\">=</span> <span class=\"br0\">{</span><br/>    PasswdRecord pwr <span class=\"sy0\">=</span> <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20new\"><span class=\"kw2\">new</span></a> PasswdRecord<span class=\"br0\">(</span><span class=\"br0\">)</span>.<span class=\"me1\">with</span> <span class=\"br0\">{</span> p <span class=\"sy0\">-&gt;</span><br/>        <span class=\"br0\">(</span>account, password, uid, gid<span class=\"br0\">)</span> <span class=\"sy0\">=</span> <span class=\"br0\">[</span><span class=\"st0\">'xyz'</span>, <span class=\"st0\">'x'</span>, <span class=\"nu0\">1003</span>, <span class=\"nu0\">1000</span><span class=\"br0\">]</span><br/>        source <span class=\"sy0\">=</span> <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20new\"><span class=\"kw2\">new</span></a> SourceRecord<span class=\"br0\">(</span><span class=\"br0\">)</span>.<span class=\"me1\">with</span> <span class=\"br0\">{</span> s <span class=\"sy0\">-&gt;</span><br/>            <span class=\"br0\">(</span>fullname, office, extension, homephone, email<span class=\"br0\">)</span> <span class=\"sy0\">=</span><br/>                    <span class=\"br0\">[</span><span class=\"st0\">'X Yz'</span>, <span class=\"st0\">'Room 1003'</span>, <span class=\"st0\">'(234)555-8913'</span>, <span class=\"st0\">'(234)555-0033'</span>, <span class=\"st0\">'<a class=\"__cf_email__\" data-cfemail=\"d1a9a8ab91a3bea2b4a5a5b0b2beb5b4ffbea3b6\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>'</span><span class=\"br0\">]</span><br/>            s<br/>        <span class=\"br0\">}</span><br/>        <span class=\"br0\">(</span>directory, shell<span class=\"br0\">)</span> <span class=\"sy0\">=</span> <span class=\"br0\">[</span><span class=\"st0\">'/home/xyz'</span>, <span class=\"st0\">'/bin/bash'</span><span class=\"br0\">]</span><br/>        p<br/>    <span class=\"br0\">}</span><span class=\"sy0\">;</span><br/>\u00a0<br/>    <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20new\"><span class=\"kw2\">new</span></a> <a href=\"http://www.google.de/search?as_q=File&amp;num=100&amp;hl=en&amp;as_occt=url&amp;as_sitesearch=java.sun.com%2Fj2se%2F1%2E5%2E0%2Fdocs%2Fapi%2F\"><span class=\"kw3\">File</span></a><span class=\"br0\">(</span><span class=\"st0\">'passwd.txt'</span><span class=\"br0\">)</span>.<a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20withWriterAppend\"><span class=\"kw7\">withWriterAppend</span></a> <span class=\"br0\">{</span> w <span class=\"sy0\">-&gt;</span><br/>        w.<a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20append\"><span class=\"kw7\">append</span></a><span class=\"br0\">(</span>pwr <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20as\"><span class=\"kw2\">as</span></a> <a href=\"http://www.google.de/search?as_q=String&amp;num=100&amp;hl=en&amp;as_occt=url&amp;as_sitesearch=java.sun.com%2Fj2se%2F1%2E5%2E0%2Fdocs%2Fapi%2F\"><span class=\"kw3\">String</span></a><span class=\"br0\">)</span><br/>        w.<a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20append\"><span class=\"kw7\">append</span></a><span class=\"br0\">(</span><span class=\"st0\">'<span class=\"es0\">\\r</span><span class=\"es0\">\\n</span>'</span><span class=\"br0\">)</span><br/>    <span class=\"br0\">}</span><br/><span class=\"br0\">}</span></pre>"}, {"lang": "Haskell", "loc": 31, "block": "<pre class=\"haskell highlighted_source\">\u00a0<br/><span class=\"coMULTI\">{-# LANGUAGE RecordWildCards #-}</span><br/>\u00a0<br/><span class=\"kw1\">import</span> System<span class=\"sy0\">.</span><a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t:IO\"><span class=\"kw4\">IO</span></a><br/><span class=\"kw1\">import</span> Data<span class=\"sy0\">.</span>List <span class=\"br0\">(</span>intercalate<span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"kw1\">data</span> Gecos <span class=\"sy0\">=</span> Gecos <span class=\"br0\">{</span> fullname  <span class=\"sy0\">::</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t:String\"><span class=\"kw4\">String</span></a><br/>                   <span class=\"sy0\">,</span> office    <span class=\"sy0\">::</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t:String\"><span class=\"kw4\">String</span></a><br/>                   <span class=\"sy0\">,</span> extension <span class=\"sy0\">::</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t:String\"><span class=\"kw4\">String</span></a><br/>                   <span class=\"sy0\">,</span> homephone <span class=\"sy0\">::</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t:String\"><span class=\"kw4\">String</span></a><br/>                   <span class=\"sy0\">,</span> email     <span class=\"sy0\">::</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t:String\"><span class=\"kw4\">String</span></a> <br/>                   <span class=\"br0\">}</span> <br/>\u00a0<br/><span class=\"kw1\">data</span> Record <span class=\"sy0\">=</span> Record <span class=\"br0\">{</span> account   <span class=\"sy0\">::</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t:String\"><span class=\"kw4\">String</span></a><br/>                     <span class=\"sy0\">,</span> password  <span class=\"sy0\">::</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t:String\"><span class=\"kw4\">String</span></a><br/>                     <span class=\"sy0\">,</span> uid       <span class=\"sy0\">::</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t:Int\"><span class=\"kw4\">Int</span></a><br/>                     <span class=\"sy0\">,</span> gid       <span class=\"sy0\">::</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t:Int\"><span class=\"kw4\">Int</span></a> <br/>                     <span class=\"sy0\">,</span> directory <span class=\"sy0\">::</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t:String\"><span class=\"kw4\">String</span></a><br/>                     <span class=\"sy0\">,</span> shell     <span class=\"sy0\">::</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t:String\"><span class=\"kw4\">String</span></a><br/>                     <span class=\"sy0\">,</span> gecos     <span class=\"sy0\">::</span> Gecos<br/>                     <span class=\"br0\">}</span> <br/>\u00a0<br/><span class=\"kw1\">instance</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t:Show\"><span class=\"kw4\">Show</span></a> Gecos <span class=\"kw1\">where</span><br/>    <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:show\"><span class=\"kw3\">show</span></a> <span class=\"br0\">(</span>Gecos <span class=\"br0\">{</span><span class=\"sy0\">..</span><span class=\"br0\">}</span><span class=\"br0\">)</span> <span class=\"sy0\">=</span> intercalate <span class=\"st0\">\",\"</span> <span class=\"br0\">[</span>fullname<span class=\"sy0\">,</span> office<span class=\"sy0\">,</span> extension<span class=\"sy0\">,</span> homephone<span class=\"sy0\">,</span> email<span class=\"br0\">]</span> <br/>\u00a0<br/><span class=\"kw1\">instance</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t:Show\"><span class=\"kw4\">Show</span></a> Record <span class=\"kw1\">where</span><br/>    <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:show\"><span class=\"kw3\">show</span></a> <span class=\"br0\">(</span>Record <span class=\"br0\">{</span><span class=\"sy0\">..</span><span class=\"br0\">}</span><span class=\"br0\">)</span> <span class=\"sy0\">=</span> intercalate <span class=\"st0\">\":\"</span> <span class=\"br0\">[</span>account<span class=\"sy0\">,</span> password<span class=\"sy0\">,</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:show\"><span class=\"kw3\">show</span></a> uid<span class=\"sy0\">,</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:show\"><span class=\"kw3\">show</span></a> gid<span class=\"sy0\">,</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:show\"><span class=\"kw3\">show</span></a> gecos<span class=\"sy0\">,</span> directory<span class=\"sy0\">,</span> shell<span class=\"br0\">]</span><br/>\u00a0<br/>addRecord <span class=\"sy0\">::</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t:String\"><span class=\"kw4\">String</span></a> <span class=\"sy0\">-&gt;</span> Record <span class=\"sy0\">-&gt;</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t:IO\"><span class=\"kw4\">IO</span></a> <span class=\"br0\">(</span><span class=\"br0\">)</span><br/>addRecord path r <span class=\"sy0\">=</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:appendFile\"><span class=\"kw3\">appendFile</span></a> path <span class=\"br0\">(</span><a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:show\"><span class=\"kw3\">show</span></a> r<span class=\"br0\">)</span><br/>\u00a0</pre>"}, {"lang": "Icon and Unicon", "loc": 13, "block": "<pre class=\"unicon highlighted_source\"><span class=\"kw1\">procedure</span> main<span class=\"br0\">(</span><span class=\"br0\">)</span><br/>    orig <span class=\"sy0\">:=</span> <span class=\"br0\">[</span><br/>       <span class=\"st0\">\"jsmith:x:1001:1000:Joe Smith,Room 1007,(234)555-8917,(234)555-0077,<a class=\"__cf_email__\" data-cfemail=\"1d776e707469755d6f726e7869697c7e72797833726f7a\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>:/home/jsmith:/bin/bash\"</span><span class=\"sy0\">,</span><br/>       <span class=\"st0\">\"jdoe:x:1002:1000:Jane Doe,Room 1004,(234)555-8914,(234)555-0044,<a class=\"__cf_email__\" data-cfemail=\"4a202e252f0a3825392f3e3e2b29252e2f6425382d\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>:/home/jsmith:/bin/bash\"</span><br/>       <span class=\"br0\">]</span><br/>    new <span class=\"sy0\">:=</span> <span class=\"br0\">[</span><br/>       <span class=\"st0\">\"xyz:x:1003:1000:X:Yz,Room 1003,(234)555-8913,(234)555-0033,<a class=\"__cf_email__\" data-cfemail=\"d1a9a8ab91a3bea2b4a5a5b0b2beb5b4ffbea3b6\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>:/home/xyz:/bin/bash\"</span><br/>       <span class=\"br0\">]</span><br/>    fName <span class=\"sy0\">:=</span> <span class=\"sy0\">!</span><span class=\"kw4\">open</span><span class=\"br0\">(</span><span class=\"st0\">\"mktemp\"</span><span class=\"sy0\">,</span><span class=\"st0\">\"rp\"</span><span class=\"br0\">)</span><br/>    <span class=\"kw1\">every</span> <span class=\"br0\">(</span>f <span class=\"sy0\">:=</span> <span class=\"kw4\">open</span><span class=\"br0\">(</span>fName<span class=\"sy0\">,</span><span class=\"st0\">\"w\"</span><span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"sy0\">|</span> <span class=\"kw4\">write</span><span class=\"br0\">(</span>f<span class=\"sy0\">,!</span>orig<span class=\"br0\">)</span> <span class=\"sy0\">|</span> <span class=\"kw4\">close</span><span class=\"br0\">(</span>f<span class=\"br0\">)</span><br/>    <span class=\"kw1\">every</span> <span class=\"br0\">(</span>f <span class=\"sy0\">:=</span> <span class=\"kw4\">open</span><span class=\"br0\">(</span>fName<span class=\"sy0\">,</span><span class=\"st0\">\"a\"</span><span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"sy0\">|</span> <span class=\"kw4\">write</span><span class=\"br0\">(</span>f<span class=\"sy0\">,!</span>new<span class=\"br0\">)</span>  <span class=\"sy0\">|</span> <span class=\"kw4\">close</span><span class=\"br0\">(</span>f<span class=\"br0\">)</span><br/>    <span class=\"kw1\">every</span> <span class=\"br0\">(</span>f <span class=\"sy0\">:=</span> <span class=\"kw4\">open</span><span class=\"br0\">(</span>fName<span class=\"sy0\">,</span><span class=\"st0\">\"r\"</span><span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"sy0\">|</span> <span class=\"kw4\">write</span><span class=\"br0\">(</span><span class=\"sy0\">!</span>f<span class=\"br0\">)</span>      <span class=\"sy0\">|</span> <span class=\"kw4\">close</span><span class=\"br0\">(</span>f<span class=\"br0\">)</span><br/><span class=\"kw1\">end</span></pre>"}, {"lang": "J", "loc": 43, "block": "<pre class=\"j highlighted_source\">require<span class=\"st_h\">'strings ~system/packages/misc/xenos.ijs'</span><br/>record=: [:|: &lt;@deb;.<span class=\"nu0\">_1</span>@<span class=\"sy0\">(</span><span class=\"st_h\">':'</span>,]<span class=\"sy0\">)</span>;.<span class=\"nu0\">_2</span>@do bind <span class=\"st_h\">'0\u00a0:0'</span><br/>\u00a0<br/>passfields=: &lt;;.<span class=\"nu0\">_1</span><span class=\"st_h\">':username:password:gid:uid:gecos:home:shell'</span><br/>\u00a0<br/>passrec=: LF,~ [: }<a class=\"__cf_email__\" data-cfemail=\"c7e987\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>;@ , <span class=\"st_h\">':'</span>;\"<span class=\"nu0\">0</span> <span class=\"sy0\">(</span>passfields i. {. <span class=\"sy0\">)</span> { a:,~ {:<br/>\u00a0<br/>R1=: passrec record<span class=\"st_h\">''</span><br/>   username: jsmith<br/>   password: <span class=\"kw2\">x</span><br/>   gid: <span class=\"nu0\">1001</span><br/>   uid: <span class=\"nu0\">1000</span><br/>   gecos: Joe Smith,Room <span class=\"nu0\">1007</span>,<span class=\"sy0\">(</span><span class=\"nu0\">234</span><span class=\"sy0\">)</span><span class=\"nu0\">555</span>-<span class=\"nu0\">8917</span>,<span class=\"sy0\">(</span><span class=\"nu0\">234</span><span class=\"sy0\">)</span><span class=\"nu0\">555</span>-<span class=\"nu0\">0077</span>,<a class=\"__cf_email__\" data-cfemail=\"167c657b7f627e56647965736262777579727338796471\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a><br/>   home: /home/jsmith<br/>   shell: /bin/bash<br/><span class=\"sy0\">)</span><br/>\u00a0<br/>R2=: passrec record<span class=\"st_h\">''</span>   <br/>   username: jdoe<br/>   password: <span class=\"kw2\">x</span><br/>   gid: <span class=\"nu0\">1002</span><br/>   uid: <span class=\"nu0\">1000</span><br/>   gecos: Jane Doe,Room <span class=\"nu0\">1004</span>,<span class=\"sy0\">(</span><span class=\"nu0\">234</span><span class=\"sy0\">)</span><span class=\"nu0\">555</span>-<span class=\"nu0\">8914</span>,<span class=\"sy0\">(</span><span class=\"nu0\">234</span><span class=\"sy0\">)</span><span class=\"nu0\">555</span>-<span class=\"nu0\">0044</span>,<a class=\"__cf_email__\" data-cfemail=\"0c666863694c7e637f6978786d6f63686922637e6b\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a><br/>   home: /home/jdoe<br/>   shell: /bin/bash<br/><span class=\"sy0\">)</span><br/>\u00a0<br/>R3=: passrec record<span class=\"st_h\">''</span><br/>   username: xyz<br/>   password: <span class=\"kw2\">x</span><br/>   gid: <span class=\"nu0\">1003</span><br/>   uid: <span class=\"nu0\">1000</span><br/>   gecos: X Yz,Room <span class=\"nu0\">1003</span>,<span class=\"sy0\">(</span><span class=\"nu0\">234</span><span class=\"sy0\">)</span><span class=\"nu0\">555</span>-<span class=\"nu0\">8913</span>,<span class=\"sy0\">(</span><span class=\"nu0\">234</span><span class=\"sy0\">)</span><span class=\"nu0\">555</span>-<span class=\"nu0\">0033</span>,<a class=\"__cf_email__\" data-cfemail=\"a1d9d8dbe1d3ced2c4d5d5c0c2cec5c48fced3c6\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a><br/>   home: /home/xyz<br/>   shell: /bin/bash<br/><span class=\"sy0\">)</span><br/>\u00a0<br/>passwd=: &lt;<span class=\"st_h\">'/tmp/passwd.txt'</span>  <span class=\"co1\">NB. file needs to be writable on implementation machine</span><br/>\u00a0<br/><span class=\"sy0\">(</span>R1,R2<span class=\"sy0\">)</span> fwrite passwd<br/>R3 fappend passwd<br/>\u00a0<br/>assert <span class=\"nu0\">1</span> e. R3 E. fread passwd </pre>"}, {"lang": "Java", "loc": 71, "block": "<pre class=\"java highlighted_source\"><span class=\"kw1\">import</span> <span class=\"co2\">static</span> java.<span class=\"me1\">util</span>.<span class=\"me1\">Objects</span>.<span class=\"me1\">requireNonNull</span><span class=\"sy0\">;</span><br/>\u00a0<br/><span class=\"kw1\">import</span> <span class=\"co2\">java.io.IOException</span><span class=\"sy0\">;</span><br/><span class=\"kw1\">import</span> <span class=\"co2\">java.nio.file.Files</span><span class=\"sy0\">;</span><br/><span class=\"kw1\">import</span> <span class=\"co2\">java.nio.file.Path</span><span class=\"sy0\">;</span><br/><span class=\"kw1\">import</span> <span class=\"co2\">java.nio.file.Paths</span><span class=\"sy0\">;</span><br/><span class=\"kw1\">import</span> <span class=\"co2\">java.nio.file.StandardOpenOption</span><span class=\"sy0\">;</span><br/><span class=\"kw1\">import</span> <span class=\"co2\">java.util.Arrays</span><span class=\"sy0\">;</span><br/><span class=\"kw1\">import</span> <span class=\"co2\">java.util.Collections</span><span class=\"sy0\">;</span><br/><span class=\"kw1\">import</span> <span class=\"co2\">java.util.List</span><span class=\"sy0\">;</span><br/><span class=\"kw1\">import</span> <span class=\"co2\">java.util.stream.Collectors</span><span class=\"sy0\">;</span><br/><span class=\"kw1\">import</span> <span class=\"co2\">java.util.stream.Stream</span><span class=\"sy0\">;</span><br/>\u00a0<br/><span class=\"kw1\">public</span> <span class=\"kw1\">class</span> RecordAppender <span class=\"br0\">{</span><br/>    <span class=\"kw1\">static</span> <span class=\"kw1\">class</span> Record <span class=\"br0\">{</span><br/>        <span class=\"kw1\">private</span> <span class=\"kw1\">final</span> <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Astring+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">String</span></a> account<span class=\"sy0\">;</span><br/>        <span class=\"kw1\">private</span> <span class=\"kw1\">final</span> <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Astring+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">String</span></a> password<span class=\"sy0\">;</span><br/>        <span class=\"kw1\">private</span> <span class=\"kw1\">final</span> <span class=\"kw4\">int</span> uid<span class=\"sy0\">;</span><br/>        <span class=\"kw1\">private</span> <span class=\"kw1\">final</span> <span class=\"kw4\">int</span> gid<span class=\"sy0\">;</span><br/>        <span class=\"kw1\">private</span> <span class=\"kw1\">final</span> List<span class=\"sy0\">&lt;</span>String<span class=\"sy0\">&gt;</span> gecos<span class=\"sy0\">;</span><br/>        <span class=\"kw1\">private</span> <span class=\"kw1\">final</span> <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Astring+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">String</span></a> directory<span class=\"sy0\">;</span><br/>        <span class=\"kw1\">private</span> <span class=\"kw1\">final</span> <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Astring+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">String</span></a> shell<span class=\"sy0\">;</span><br/>\u00a0<br/>        <span class=\"kw1\">public</span> Record<span class=\"br0\">(</span><a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Astring+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">String</span></a> account, <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Astring+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">String</span></a> password, <span class=\"kw4\">int</span> uid, <span class=\"kw4\">int</span> gid, List<span class=\"sy0\">&lt;</span>String<span class=\"sy0\">&gt;</span> gecos, <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Astring+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">String</span></a> directory, <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Astring+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">String</span></a> shell<span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>            <span class=\"kw1\">this</span>.<span class=\"me1\">account</span> <span class=\"sy0\">=</span> requireNonNull<span class=\"br0\">(</span>account<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>            <span class=\"kw1\">this</span>.<span class=\"me1\">password</span> <span class=\"sy0\">=</span> requireNonNull<span class=\"br0\">(</span>password<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>            <span class=\"kw1\">this</span>.<span class=\"me1\">uid</span> <span class=\"sy0\">=</span> uid<span class=\"sy0\">;</span><br/>            <span class=\"kw1\">this</span>.<span class=\"me1\">gid</span> <span class=\"sy0\">=</span> gid<span class=\"sy0\">;</span><br/>            <span class=\"kw1\">this</span>.<span class=\"me1\">gecos</span> <span class=\"sy0\">=</span> requireNonNull<span class=\"br0\">(</span>gecos<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>            <span class=\"kw1\">this</span>.<span class=\"me1\">directory</span> <span class=\"sy0\">=</span> requireNonNull<span class=\"br0\">(</span>directory<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>            <span class=\"kw1\">this</span>.<span class=\"me1\">shell</span> <span class=\"sy0\">=</span> requireNonNull<span class=\"br0\">(</span>shell<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        <span class=\"br0\">}</span><br/>\u00a0<br/>        @Override<br/>        <span class=\"kw1\">public</span> <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Astring+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">String</span></a> toString<span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>            <span class=\"kw1\">return</span> account <span class=\"sy0\">+</span> <span class=\"st0\">':'</span> <span class=\"sy0\">+</span> password <span class=\"sy0\">+</span> <span class=\"st0\">':'</span> <span class=\"sy0\">+</span> uid <span class=\"sy0\">+</span> <span class=\"st0\">':'</span> <span class=\"sy0\">+</span> gid <span class=\"sy0\">+</span> <span class=\"st0\">':'</span> <span class=\"sy0\">+</span> <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Astring+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">String</span></a>.<span class=\"me1\">join</span><span class=\"br0\">(</span><span class=\"st0\">\",\"</span>, gecos<span class=\"br0\">)</span> <span class=\"sy0\">+</span> <span class=\"st0\">':'</span> <span class=\"sy0\">+</span> directory <span class=\"sy0\">+</span> <span class=\"st0\">':'</span> <span class=\"sy0\">+</span> shell<span class=\"sy0\">;</span><br/>        <span class=\"br0\">}</span><br/>\u00a0<br/>        <span class=\"kw1\">public</span> <span class=\"kw1\">static</span> Record parse<span class=\"br0\">(</span><a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Astring+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">String</span></a> text<span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>            <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Astring+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">String</span></a><span class=\"br0\">[</span><span class=\"br0\">]</span> tokens <span class=\"sy0\">=</span> text.<span class=\"me1\">split</span><span class=\"br0\">(</span><span class=\"st0\">\":\"</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>            <span class=\"kw1\">return</span> <span class=\"kw1\">new</span> Record<span class=\"br0\">(</span><br/>                    tokens<span class=\"br0\">[</span><span class=\"nu0\">0</span><span class=\"br0\">]</span>,<br/>                    tokens<span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"br0\">]</span>,<br/>                    <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Ainteger+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">Integer</span></a>.<span class=\"me1\">parseInt</span><span class=\"br0\">(</span>tokens<span class=\"br0\">[</span><span class=\"nu0\">2</span><span class=\"br0\">]</span><span class=\"br0\">)</span>,<br/>                    <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Ainteger+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">Integer</span></a>.<span class=\"me1\">parseInt</span><span class=\"br0\">(</span>tokens<span class=\"br0\">[</span><span class=\"nu0\">3</span><span class=\"br0\">]</span><span class=\"br0\">)</span>,<br/>                    <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Aarrays+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">Arrays</span></a>.<span class=\"me1\">asList</span><span class=\"br0\">(</span>tokens<span class=\"br0\">[</span><span class=\"nu0\">4</span><span class=\"br0\">]</span>.<span class=\"me1\">split</span><span class=\"br0\">(</span><span class=\"st0\">\",\"</span><span class=\"br0\">)</span><span class=\"br0\">)</span>,<br/>                    tokens<span class=\"br0\">[</span><span class=\"nu0\">5</span><span class=\"br0\">]</span>,<br/>                    tokens<span class=\"br0\">[</span><span class=\"nu0\">6</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        <span class=\"br0\">}</span><br/>    <span class=\"br0\">}</span><br/>\u00a0<br/>    <span class=\"kw1\">public</span> <span class=\"kw1\">static</span> <span class=\"kw4\">void</span> main<span class=\"br0\">(</span><a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Astring+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">String</span></a><span class=\"br0\">[</span><span class=\"br0\">]</span> args<span class=\"br0\">)</span> <span class=\"kw1\">throws</span> <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Aioexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">IOException</span></a> <span class=\"br0\">{</span><br/>        List<span class=\"sy0\">&lt;</span>String<span class=\"sy0\">&gt;</span> rawData <span class=\"sy0\">=</span> <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Aarrays+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">Arrays</span></a>.<span class=\"me1\">asList</span><span class=\"br0\">(</span><br/>                <span class=\"st0\">\"jsmith:x:1001:1000:Joe Smith,Room 1007,(234)555-8917,(234)555-0077,[email protected]:/home/jsmith:/bin/bash\"</span>,<br/>                <span class=\"st0\">\"jdoe:x:1002:1000:Jane Doe,Room 1004,(234)555-8914,(234)555-0044,[email protected]:/home/jdoe:/bin/bash\"</span>,<br/>                <span class=\"st0\">\"xyz:x:1003:1000:X Yz,Room 1003,(234)555-8913,(234)555-0033,[email protected]:/home/xyz:/bin/bash\"</span><br/>        <span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>\u00a0<br/>        List<span class=\"sy0\">&lt;</span>Record<span class=\"sy0\">&gt;</span> records <span class=\"sy0\">=</span> rawData.<span class=\"me1\">stream</span><span class=\"br0\">(</span><span class=\"br0\">)</span>.<span class=\"me1\">map</span><span class=\"br0\">(</span>Record<span class=\"sy0\">::</span>parse<span class=\"br0\">)</span>.<span class=\"me1\">collect</span><span class=\"br0\">(</span>Collectors.<span class=\"me1\">toList</span><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>\u00a0<br/>        Path tmp <span class=\"sy0\">=</span> Paths.<span class=\"me1\">get</span><span class=\"br0\">(</span><span class=\"st0\">\"_rosetta\"</span>, <span class=\"st0\">\".passwd\"</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        Files.<span class=\"me1\">createDirectories</span><span class=\"br0\">(</span>tmp.<span class=\"me1\">getParent</span><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        Files.<span class=\"me1\">write</span><span class=\"br0\">(</span>tmp, <span class=\"br0\">(</span>Iterable<span class=\"sy0\">&lt;</span>String<span class=\"sy0\">&gt;</span><span class=\"br0\">)</span> records.<span class=\"me1\">stream</span><span class=\"br0\">(</span><span class=\"br0\">)</span>.<span class=\"me1\">limit</span><span class=\"br0\">(</span><span class=\"nu0\">2</span><span class=\"br0\">)</span>.<span class=\"me1\">map</span><span class=\"br0\">(</span>Record<span class=\"sy0\">::</span>toString<span class=\"br0\">)</span><span class=\"sy0\">::</span>iterator<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>\u00a0<br/>        Files.<span class=\"me1\">write</span><span class=\"br0\">(</span>tmp, <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Acollections+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">Collections</span></a>.<span class=\"me1\">singletonList</span><span class=\"br0\">(</span>records.<span class=\"me1\">get</span><span class=\"br0\">(</span><span class=\"nu0\">2</span><span class=\"br0\">)</span>.<span class=\"me1\">toString</span><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"br0\">)</span>, StandardOpenOption.<span class=\"me1\">APPEND</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>\u00a0<br/>        <span class=\"kw1\">try</span> <span class=\"br0\">(</span>Stream<span class=\"sy0\">&lt;</span>String<span class=\"sy0\">&gt;</span> lines <span class=\"sy0\">=</span> Files.<span class=\"me1\">lines</span><span class=\"br0\">(</span>tmp<span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>            lines.<span class=\"me1\">map</span><span class=\"br0\">(</span>Record<span class=\"sy0\">::</span>parse<span class=\"br0\">)</span>.<span class=\"kw1\">forEach</span><span class=\"br0\">(</span><a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Asystem+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">System</span></a>.<span class=\"me1\">out</span><span class=\"sy0\">::</span>println<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        <span class=\"br0\">}</span><br/>    <span class=\"br0\">}</span><br/><span class=\"br0\">}</span></pre>"}, {"lang": "Julia", "loc": 48, "block": "<pre class=\"text highlighted_source\">\u00a0<br/>using SHA  # security instincts say do not write bare passwords to a shared file even in toy code\u00a0:)<br/>\u00a0<br/>mutable struct Personnel<br/>    fullname::String<br/>    office::String<br/>    extension::String<br/>    homephone::String<br/>    email::String<br/>    Personnel(ful,off,ext,hom,ema) = new(ful,off,ext,hom,ema)<br/>end<br/>\u00a0<br/>mutable struct Passwd<br/>     account::String<br/>     password::String<br/>     uid::Int32<br/>     gid::Int32<br/>     personal::Personnel<br/>     directory::String<br/>     shell::String<br/>     Passwd(acc,pas,uid,gid,per,dir,she) =  new(acc,pas,uid,gid,per,dir,she)<br/>end<br/>\u00a0<br/>function writepasswd(filename, passrecords)<br/>    if(passrecords isa Array) == false<br/>        passrecords = [passrecords]<br/>    end<br/>    fh = open(filename, \"a\") # should throw an exception if cannot open in a locked or exclusive mode for append<br/>    for pas in passrecords<br/>        record = join([pas.account, bytes2hex(sha256(pas.password)), pas.uid, pas.gid,<br/>                 join([pas.personal.fullname, pas.personal.office, pas.personal.extension,<br/>                 pas.personal.homephone, pas.personal.email], ','),<br/>                 pas.directory, pas.shell], ':')<br/>        write(fh, record, \"\\n\")<br/>    end<br/>    close(fh)<br/>end<br/>\u00a0<br/>const jsmith = Passwd(\"jsmith\",\"x\",1001, 1000, Personnel(\"Joe Smith\", \"Room 1007\", \"(234)555-8917\", \"(234)555-0077\", \"<a class=\"__cf_email__\" data-cfemail=\"8ce6ffe1e5f8e4ccfee3ffe9f8f8edefe3e8e9a2e3feeb\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>\"), \"/home/jsmith\", \"/bin/bash\")<br/>const jdoe = Passwd(\"jdoe\",\"x\",1002, 1000, Personnel(\"Jane Doe\", \"Room 1004\", \"(234)555-8914\", \"(234)555-0044\", \"<a class=\"__cf_email__\" data-cfemail=\"513b353e3411233e2234252530323e35347f3e2336\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>\"), \"/home/jdoe\", \"/bin/bash\")<br/>const xyz = Passwd(\"xyz\",\"x\",1003, 1000, Personnel(\"X Yz\", \"Room 1003\", \"(234)555-8913\", \"(234)555-0033\", \"<a class=\"__cf_email__\" data-cfemail=\"6018191a20120f1305141401030f04054e0f1207\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>\"), \"/home/xyz\", \"/bin/bash\")<br/>\u00a0<br/>const pfile = \"pfile.csv\"<br/>writepasswd(pfile, [jsmith, jdoe])<br/>println(\"Before last record added, file is:\\n$(readstring(pfile))\")<br/>writepasswd(pfile, xyz)<br/>println(\"After last record added, file is:\\n$(readstring(pfile))\")<br/>\u00a0</pre>"}, {"lang": "Kotlin", "loc": 56, "block": "<pre class=\"scala highlighted_source\"><span class=\"co1\">// Version 1.2.41</span><br/>\u00a0<br/><a href=\"http://scala-lang.org\"><span class=\"kw1\">import</span></a> java.<span class=\"me1\">io</span>.<span class=\"me1\">File</span><br/>\u00a0<br/><a href=\"http://scala-lang.org\"><span class=\"kw1\">class</span></a> Record<span class=\"br0\">(</span><br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> account<span class=\"sy0\">:</span> String,<br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> password<span class=\"sy0\">:</span> String,<br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> uid<span class=\"sy0\">:</span> Int,<br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> gid<span class=\"sy0\">:</span> Int,<br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> gecos<span class=\"sy0\">:</span> List<span class=\"sy0\">&lt;</span>String<span class=\"sy0\">&gt;</span>,<br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> directory<span class=\"sy0\">:</span> String,<br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> shell<span class=\"sy0\">:</span> String<br/><span class=\"br0\">)</span><span class=\"br0\">{</span><br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">override</span></a> fun toString<span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"sy0\">=</span><br/>        <span class=\"st0\">\"$account:$password:$uid:$gid:${gecos.joinToString(\"</span>,<span class=\"st0\">\")}:$directory:$shell\"</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/>fun parseRecord<span class=\"br0\">(</span>line<span class=\"sy0\">:</span> String<span class=\"br0\">)</span><span class=\"sy0\">:</span> Record <span class=\"br0\">{</span><br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> fields <span class=\"sy0\">=</span> line.<span class=\"me1\">split</span><span class=\"br0\">(</span><span class=\"st0\">':'</span><span class=\"br0\">)</span><br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">return</span></a> Record<span class=\"br0\">(</span><br/>        fields<span class=\"br0\">[</span><span class=\"nu0\">0</span><span class=\"br0\">]</span>,<br/>        fields<span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"br0\">]</span>,<br/>        fields<span class=\"br0\">[</span><span class=\"nu0\">2</span><span class=\"br0\">]</span>.<span class=\"me1\">toInt</span><span class=\"br0\">(</span><span class=\"br0\">)</span>,<br/>        fields<span class=\"br0\">[</span><span class=\"nu0\">3</span><span class=\"br0\">]</span>.<span class=\"me1\">toInt</span><span class=\"br0\">(</span><span class=\"br0\">)</span>,<br/>        fields<span class=\"br0\">[</span><span class=\"nu0\">4</span><span class=\"br0\">]</span>.<span class=\"me1\">split</span><span class=\"br0\">(</span><span class=\"st0\">','</span><span class=\"br0\">)</span>,<br/>        fields<span class=\"br0\">[</span><span class=\"nu0\">5</span><span class=\"br0\">]</span>,<br/>        fields<span class=\"br0\">[</span><span class=\"nu0\">6</span><span class=\"br0\">]</span><br/>    <span class=\"br0\">)</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/>fun main<span class=\"br0\">(</span>args<span class=\"sy0\">:</span> Array<span class=\"sy0\">&lt;</span>String<span class=\"sy0\">&gt;</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> startData <span class=\"sy0\">=</span> listOf<span class=\"br0\">(</span><br/>        <span class=\"st0\">\"jsmith:x:1001:1000:Joe Smith,Room 1007,(234)555-8917,(234)555-0077,[email protected]:/home/jsmith:/bin/bash\"</span>,<br/>        <span class=\"st0\">\"jdoe:x:1002:1000:Jane Doe,Room 1004,(234)555-8914,(234)555-0044,[email protected]:/home/jdoe:/bin/bash\"</span><br/>    <span class=\"br0\">)</span><br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> records <span class=\"sy0\">=</span> startData.<span class=\"me1\">map</span> <span class=\"br0\">{</span> parseRecord<span class=\"br0\">(</span>it<span class=\"br0\">)</span> <span class=\"br0\">}</span><br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> f <span class=\"sy0\">=</span> File<span class=\"br0\">(</span><span class=\"st0\">\"passwd.csv\"</span><span class=\"br0\">)</span><br/>    f.<span class=\"me1\">printWriter</span><span class=\"br0\">(</span><span class=\"br0\">)</span>.<span class=\"me1\">use</span> <span class=\"br0\">{</span><br/>        <a href=\"http://scala-lang.org\"><span class=\"kw1\">for</span></a> <span class=\"br0\">(</span>record in records<span class=\"br0\">)</span> it.<span class=\"me1\">println</span><span class=\"br0\">(</span>record<span class=\"br0\">)</span><br/>    <span class=\"br0\">}</span><br/>    println<span class=\"br0\">(</span><span class=\"st0\">\"Initial records:<span class=\"es1\">\\n</span>\"</span><span class=\"br0\">)</span><br/>    f.<span class=\"me1\">forEachLine</span> <span class=\"br0\">{</span><br/>        println<span class=\"br0\">(</span>parseRecord<span class=\"br0\">(</span>it<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>    <span class=\"br0\">}</span><br/>\u00a0<br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> newData <span class=\"sy0\">=</span> <span class=\"st0\">\"xyz:x:1003:1000:X Yz,Room 1003,(234)555-8913,(234)555-0033,[email protected]:/home/xyz:/bin/bash\"</span><br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> record <span class=\"sy0\">=</span> parseRecord<span class=\"br0\">(</span>newData<span class=\"br0\">)</span><br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">if</span></a> <span class=\"br0\">(</span><span class=\"sy0\">!</span>f.<span class=\"me1\">setWritable</span><span class=\"br0\">(</span><a href=\"http://scala-lang.org\"><span class=\"kw1\">true</span></a>, <a href=\"http://scala-lang.org\"><span class=\"kw1\">true</span></a><span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>        println<span class=\"br0\">(</span><span class=\"st0\">\"<span class=\"es1\">\\n</span>Failed to make file writable only by owner<span class=\"es1\">\\n</span>.\"</span><span class=\"br0\">)</span><br/>    <span class=\"br0\">}</span><br/>    f.<span class=\"me1\">appendText</span><span class=\"br0\">(</span><span class=\"st0\">\"$record<span class=\"es1\">\\n</span>\"</span><span class=\"br0\">)</span><br/>    println<span class=\"br0\">(</span><span class=\"st0\">\"<span class=\"es1\">\\n</span>Records after another one is appended:<span class=\"es1\">\\n</span>\"</span><span class=\"br0\">)</span><br/>    f.<span class=\"me1\">forEachLine</span> <span class=\"br0\">{</span><br/>        println<span class=\"br0\">(</span>parseRecord<span class=\"br0\">(</span>it<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>    <span class=\"br0\">}</span><br/><span class=\"br0\">}</span></pre>"}, {"lang": "Mathematica / Wolfram Language", "loc": 17, "block": "<pre class=\"text highlighted_source\">data = &lt;|\"account\" -&gt; \"xyz\", \"password\" -&gt; \"x\", \"UID\" -&gt; 1003, <br/>   \"GID\" -&gt; 1000, \"fullname\" -&gt; \"X Yz\", \"office\" -&gt; \"Room 1003\", <br/>   \"extension\" -&gt; \"(234)555-8913\", \"homephone\" -&gt; \"(234)555-0033\", <br/>   \"email\" -&gt; \"<a class=\"__cf_email__\" data-cfemail=\"275f5e5d67554854425353464448434209485540\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>\", \"directory\" -&gt; \"/home/xyz\", <br/>   \"shell\" -&gt; \"/bin/bash\"|&gt;;<br/>asString[data_]\u00a0:= <br/>  StringRiffle[<br/>   ToString /@ <br/>    Insert[data /@ {\"account\", \"password\", \"UID\", \"GID\", \"directory\", <br/>       \"shell\"}, <br/>     StringRiffle[<br/>      data /@ {\"fullname\", \"office\", \"extension\", \"homephone\", <br/>        \"email\"}, \",\"], 5], \":\"];<br/>fname = FileNameJoin[{$TemporaryDirectory, \"testfile\"}];<br/>str = OpenWrite[fname]; (* Use OpenAppend if file exists *)<br/>Close[str];<br/>Print[\"Appended record: \" &lt;&gt; asString[data]];</pre>"}, {"lang": "MATLAB / Octave", "loc": 58, "block": "<pre class=\"matlab highlighted_source\">  DS<span class=\"br0\">{</span><span class=\"nu0\">1</span><span class=\"br0\">}</span>.<span class=\"me1\">account</span>=<span class=\"co2\">'jsmith'</span>;<br/>  DS<span class=\"br0\">{</span><span class=\"nu0\">1</span><span class=\"br0\">}</span>.<span class=\"me1\">password</span>=<span class=\"co2\">'x'</span>;<br/>  DS<span class=\"br0\">{</span><span class=\"nu0\">1</span><span class=\"br0\">}</span>.<span class=\"me1\">UID</span>=<span class=\"nu0\">1001</span>;<br/>  DS<span class=\"br0\">{</span><span class=\"nu0\">1</span><span class=\"br0\">}</span>.<span class=\"me1\">GID</span>=<span class=\"nu0\">1000</span>;<br/>  DS<span class=\"br0\">{</span><span class=\"nu0\">1</span><span class=\"br0\">}</span>.<span class=\"me1\">fullname</span>=<span class=\"co2\">'Joe Smith'</span>;<br/>  DS<span class=\"br0\">{</span><span class=\"nu0\">1</span><span class=\"br0\">}</span>.<span class=\"me1\">office</span>=<span class=\"co2\">'Room 1007'</span>;<br/>  DS<span class=\"br0\">{</span><span class=\"nu0\">1</span><span class=\"br0\">}</span>.<span class=\"me1\">extension</span>=<span class=\"co2\">'(234)555-8917'</span>;<br/>  DS<span class=\"br0\">{</span><span class=\"nu0\">1</span><span class=\"br0\">}</span>.<span class=\"me1\">homephone</span>=<span class=\"co2\">'(234)555-0077'</span>;<br/>  DS<span class=\"br0\">{</span><span class=\"nu0\">1</span><span class=\"br0\">}</span>.<span class=\"me1\">email</span>=<span class=\"co2\">'<a class=\"__cf_email__\" data-cfemail=\"ec869f81859884ac9e839f8998988d8f838889c2839e8b\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>'</span>;<br/>  DS<span class=\"br0\">{</span><span class=\"nu0\">1</span><span class=\"br0\">}</span>.<span class=\"me1\">directory</span>=<span class=\"co2\">'/home/jsmith'</span>;<br/>  DS<span class=\"br0\">{</span><span class=\"nu0\">1</span><span class=\"br0\">}</span>.<span class=\"me1\">shell</span>=<span class=\"co2\">'/bin/bash'</span>;<br/>\u00a0<br/>  DS<span class=\"br0\">{</span><span class=\"nu0\">2</span><span class=\"br0\">}</span>.<span class=\"me1\">account</span>=<span class=\"co2\">'jdoe'</span>;<br/>  DS<span class=\"br0\">{</span><span class=\"nu0\">2</span><span class=\"br0\">}</span>.<span class=\"me1\">password</span>=<span class=\"co2\">'x'</span>;<br/>  DS<span class=\"br0\">{</span><span class=\"nu0\">2</span><span class=\"br0\">}</span>.<span class=\"me1\">UID</span>=<span class=\"nu0\">1002</span>;<br/>  DS<span class=\"br0\">{</span><span class=\"nu0\">2</span><span class=\"br0\">}</span>.<span class=\"me1\">GID</span>=<span class=\"nu0\">1000</span>;<br/>  DS<span class=\"br0\">{</span><span class=\"nu0\">2</span><span class=\"br0\">}</span>.<span class=\"me1\">fullname</span>=<span class=\"co2\">'Jane Doe'</span>;<br/>  DS<span class=\"br0\">{</span><span class=\"nu0\">2</span><span class=\"br0\">}</span>.<span class=\"me1\">office</span>=<span class=\"co2\">'Room 1004'</span>;<br/>  DS<span class=\"br0\">{</span><span class=\"nu0\">2</span><span class=\"br0\">}</span>.<span class=\"me1\">extension</span>=<span class=\"co2\">'(234)555-8914'</span>;<br/>  DS<span class=\"br0\">{</span><span class=\"nu0\">2</span><span class=\"br0\">}</span>.<span class=\"me1\">homephone</span>=<span class=\"co2\">'(234)555-0044'</span>;<br/>  DS<span class=\"br0\">{</span><span class=\"nu0\">2</span><span class=\"br0\">}</span>.<span class=\"me1\">email</span>=<span class=\"co2\">'<a class=\"__cf_email__\" data-cfemail=\"f8929c979db88a978b9d8c8c999b979c9dd6978a9f\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>'</span>;<br/>  DS<span class=\"br0\">{</span><span class=\"nu0\">2</span><span class=\"br0\">}</span>.<span class=\"me1\">directory</span>=<span class=\"co2\">'/home/jdoe'</span>;<br/>  DS<span class=\"br0\">{</span><span class=\"nu0\">2</span><span class=\"br0\">}</span>.<span class=\"me1\">shell</span>=<span class=\"co2\">'/bin/bash'</span>;<br/>\u00a0<br/>  <span class=\"kw1\">function</span> WriteRecord<span class=\"br0\">(</span>fid, rec<span class=\"br0\">)</span><br/>     <a href=\"http://www.mathworks.com/access/helpdesk/help/techdoc/ref/fprintf.html\"><span class=\"kw2\">fprintf</span></a><span class=\"br0\">(</span>fid,\"<span class=\"co1\">%s:%s:%i:%i:%s,%s,%s,%s,%s:%s%s\\n\", rec.account, rec.password, rec.UID, rec.GID, rec.fullname, rec.office, rec.extension, rec.homephone, rec.email, rec.directory, rec.shell);</span><br/>     <span class=\"kw1\">return</span>; <br/>  <span class=\"kw1\">end</span>   <br/>\u00a0<br/>  <span class=\"co1\">%% write </span><br/>  fid = <a href=\"http://www.mathworks.com/access/helpdesk/help/techdoc/ref/fopen.html\"><span class=\"kw2\">fopen</span></a><span class=\"br0\">(</span><span class=\"co2\">'passwd.txt'</span>,<span class=\"co2\">'w'</span><span class=\"br0\">)</span>;<br/>  WriteRecord<span class=\"br0\">(</span>fid,DS<span class=\"br0\">{</span><span class=\"nu0\">1</span><span class=\"br0\">}</span><span class=\"br0\">)</span>;<br/>  WriteRecord<span class=\"br0\">(</span>fid,DS<span class=\"br0\">{</span><span class=\"nu0\">2</span><span class=\"br0\">}</span><span class=\"br0\">)</span>;<br/>  <a href=\"http://www.mathworks.com/access/helpdesk/help/techdoc/ref/fclose.html\"><span class=\"kw2\">fclose</span></a><span class=\"br0\">(</span>fid<span class=\"br0\">)</span>; <br/>\u00a0<br/>  new.<span class=\"me1\">account</span>=<span class=\"co2\">'xyz'</span>;<br/>  new.<span class=\"me1\">password</span>=<span class=\"co2\">'x'</span>;<br/>  new.<span class=\"me1\">UID</span>=<span class=\"nu0\">1003</span>;<br/>  new.<span class=\"me1\">GID</span>=<span class=\"nu0\">1000</span>;<br/>  new.<span class=\"me1\">fullname</span>=<span class=\"co2\">'X Yz'</span>;<br/>  new.<span class=\"me1\">office</span>=<span class=\"co2\">'Room 1003'</span>;<br/>  new.<span class=\"me1\">extension</span>=<span class=\"co2\">'(234)555-8913'</span>;<br/>  new.<span class=\"me1\">homephone</span>=<span class=\"co2\">'(234)555-0033'</span>;<br/>  new.<span class=\"me1\">email</span>=<span class=\"co2\">'<a class=\"__cf_email__\" data-cfemail=\"08707172487a677b6d7c7c696b676c6d26677a6f\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>'</span>;<br/>  new.<span class=\"me1\">directory</span>=<span class=\"co2\">'/home/xyz'</span>;<br/>  new.<span class=\"me1\">shell</span>=<span class=\"co2\">'/bin/bash'</span>;<br/>\u00a0<br/>  <span class=\"co1\">%% append</span><br/>  fid = <a href=\"http://www.mathworks.com/access/helpdesk/help/techdoc/ref/fopen.html\"><span class=\"kw2\">fopen</span></a><span class=\"br0\">(</span><span class=\"co2\">'passwd.txt'</span>,<span class=\"co2\">'a+'</span><span class=\"br0\">)</span>;<br/>  WriteRecord<span class=\"br0\">(</span>fid,new<span class=\"br0\">)</span>;<br/>  <a href=\"http://www.mathworks.com/access/helpdesk/help/techdoc/ref/fclose.html\"><span class=\"kw2\">fclose</span></a><span class=\"br0\">(</span>fid<span class=\"br0\">)</span>; <br/>\u00a0<br/>  <span class=\"co1\">% read password file </span><br/>  fid = <a href=\"http://www.mathworks.com/access/helpdesk/help/techdoc/ref/fopen.html\"><span class=\"kw2\">fopen</span></a><span class=\"br0\">(</span><span class=\"co2\">'passwd.txt'</span>,<span class=\"co2\">'r'</span><span class=\"br0\">)</span>;<br/>  <span class=\"kw1\">while</span> ~<a href=\"http://www.mathworks.com/access/helpdesk/help/techdoc/ref/feof.html\"><span class=\"kw2\">feof</span></a><span class=\"br0\">(</span>fid<span class=\"br0\">)</span><br/>\tprintf<span class=\"br0\">(</span><span class=\"co2\">'%s\\n'</span>,<a href=\"http://www.mathworks.com/access/helpdesk/help/techdoc/ref/fgetl.html\"><span class=\"kw2\">fgetl</span></a><span class=\"br0\">(</span>fid<span class=\"br0\">)</span><span class=\"br0\">)</span>;<br/>  <span class=\"kw1\">end</span>; <br/>  <a href=\"http://www.mathworks.com/access/helpdesk/help/techdoc/ref/fclose.html\"><span class=\"kw2\">fclose</span></a><span class=\"br0\">(</span>fid<span class=\"br0\">)</span>; </pre>"}, {"lang": "Perl", "loc": 107, "block": "<pre class=\"perl highlighted_source\"><span class=\"kw2\">use</span> strict<span class=\"sy0\">;</span><br/><span class=\"kw2\">use</span> warnings<span class=\"sy0\">;</span><br/>\u00a0<br/><span class=\"kw2\">use</span> Fcntl <a href=\"http://perldoc.perl.org/functions/qw.html\"><span class=\"kw3\">qw</span></a><span class=\"br0\">(</span> <span class=\"sy0\">:</span><a href=\"http://perldoc.perl.org/functions/flock.html\"><span class=\"kw3\">flock</span></a> SEEK_END <span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>\u00a0<br/><span class=\"kw2\">use</span> constant <span class=\"br0\">{</span><br/>    RECORD_FIELDS <span class=\"sy0\">=&gt;</span> <span class=\"br0\">[</span><a href=\"http://perldoc.perl.org/functions/qw.html\"><span class=\"kw3\">qw</span></a><span class=\"br0\">(</span> account password UID GID GECOS directory shell <span class=\"br0\">)</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><br/>    GECOS_FIELDS  <span class=\"sy0\">=&gt;</span> <span class=\"br0\">[</span><a href=\"http://perldoc.perl.org/functions/qw.html\"><span class=\"kw3\">qw</span></a><span class=\"br0\">(</span> fullname office extension homephone email <span class=\"br0\">)</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><br/>    RECORD_SEP    <span class=\"sy0\">=&gt;</span> <span class=\"st_h\">':'</span><span class=\"sy0\">,</span><br/>    GECOS_SEP     <span class=\"sy0\">=&gt;</span> <span class=\"st_h\">','</span><span class=\"sy0\">,</span><br/>    PASSWD_FILE   <span class=\"sy0\">=&gt;</span> <span class=\"st_h\">'passwd.txt'</span><span class=\"sy0\">,</span><br/><span class=\"br0\">}</span><span class=\"sy0\">;</span><br/>\u00a0<br/><span class=\"co1\"># here's our three records</span><br/><span class=\"kw1\">my</span> <span class=\"re0\">$records_to_write</span> <span class=\"sy0\">=</span> <span class=\"br0\">[</span><br/>    <span class=\"br0\">{</span><br/>        account  <span class=\"sy0\">=&gt;</span> <span class=\"st_h\">'jsmith'</span><span class=\"sy0\">,</span><br/>        password <span class=\"sy0\">=&gt;</span> <span class=\"st_h\">'x'</span><span class=\"sy0\">,</span><br/>        UID      <span class=\"sy0\">=&gt;</span> <span class=\"nu0\">1001</span><span class=\"sy0\">,</span><br/>        GID      <span class=\"sy0\">=&gt;</span> <span class=\"nu0\">1000</span><span class=\"sy0\">,</span><br/>        GECOS    <span class=\"sy0\">=&gt;</span> <span class=\"br0\">{</span><br/>            fullname  <span class=\"sy0\">=&gt;</span> <span class=\"st_h\">'John Smith'</span><span class=\"sy0\">,</span><br/>            office    <span class=\"sy0\">=&gt;</span> <span class=\"st_h\">'Room 1007'</span><span class=\"sy0\">,</span><br/>            extension <span class=\"sy0\">=&gt;</span> <span class=\"st_h\">'(234)555-8917'</span><span class=\"sy0\">,</span><br/>            homephone <span class=\"sy0\">=&gt;</span> <span class=\"st_h\">'(234)555-0077'</span><span class=\"sy0\">,</span><br/>            email     <span class=\"sy0\">=&gt;</span> <span class=\"st_h\">'<a class=\"__cf_email__\" data-cfemail=\"c5afb6a8acb1ad85b7aab6a0b1b1a4a6aaa1a0ebaab7a2\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>'</span><span class=\"sy0\">,</span><br/>        <span class=\"br0\">}</span><span class=\"sy0\">,</span><br/>        directory <span class=\"sy0\">=&gt;</span> <span class=\"st_h\">'/home/jsmith'</span><span class=\"sy0\">,</span><br/>        shell     <span class=\"sy0\">=&gt;</span> <span class=\"st_h\">'/bin/bash'</span><span class=\"sy0\">,</span><br/>    <span class=\"br0\">}</span><span class=\"sy0\">,</span><br/>    <span class=\"br0\">{</span><br/>        account  <span class=\"sy0\">=&gt;</span> <span class=\"st_h\">'jdoe'</span><span class=\"sy0\">,</span><br/>        password <span class=\"sy0\">=&gt;</span> <span class=\"st_h\">'x'</span><span class=\"sy0\">,</span><br/>        UID      <span class=\"sy0\">=&gt;</span> <span class=\"nu0\">1002</span><span class=\"sy0\">,</span><br/>        GID      <span class=\"sy0\">=&gt;</span> <span class=\"nu0\">1000</span><span class=\"sy0\">,</span><br/>        GECOS    <span class=\"sy0\">=&gt;</span> <span class=\"br0\">{</span><br/>            fullname  <span class=\"sy0\">=&gt;</span> <span class=\"st_h\">'Jane Doe'</span><span class=\"sy0\">,</span><br/>            office    <span class=\"sy0\">=&gt;</span> <span class=\"st_h\">'Room 1004'</span><span class=\"sy0\">,</span><br/>            extension <span class=\"sy0\">=&gt;</span> <span class=\"st_h\">'(234)555-8914'</span><span class=\"sy0\">,</span><br/>            homephone <span class=\"sy0\">=&gt;</span> <span class=\"st_h\">'(234)555-0044'</span><span class=\"sy0\">,</span><br/>            email     <span class=\"sy0\">=&gt;</span> <span class=\"st_h\">'<a class=\"__cf_email__\" data-cfemail=\"107a747f7550627f6375646471737f74753e7f6277\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>'</span><span class=\"sy0\">,</span><br/>        <span class=\"br0\">}</span><span class=\"sy0\">,</span><br/>        directory <span class=\"sy0\">=&gt;</span> <span class=\"st_h\">'/home/jdoe'</span><span class=\"sy0\">,</span><br/>        shell     <span class=\"sy0\">=&gt;</span> <span class=\"st_h\">'/bin/bash'</span><span class=\"sy0\">,</span><br/>    <span class=\"br0\">}</span><span class=\"sy0\">,</span><br/><span class=\"br0\">]</span><span class=\"sy0\">;</span><br/><span class=\"kw1\">my</span> <span class=\"re0\">$record_to_append</span> <span class=\"sy0\">=</span> <span class=\"br0\">{</span><br/>    account  <span class=\"sy0\">=&gt;</span> <span class=\"st_h\">'xyz'</span><span class=\"sy0\">,</span><br/>    password <span class=\"sy0\">=&gt;</span> <span class=\"st_h\">'x'</span><span class=\"sy0\">,</span><br/>    UID      <span class=\"sy0\">=&gt;</span> <span class=\"nu0\">1003</span><span class=\"sy0\">,</span><br/>    GID      <span class=\"sy0\">=&gt;</span> <span class=\"nu0\">1000</span><span class=\"sy0\">,</span><br/>    GECOS    <span class=\"sy0\">=&gt;</span> <span class=\"br0\">{</span><br/>        fullname  <span class=\"sy0\">=&gt;</span> <span class=\"st_h\">'X Yz'</span><span class=\"sy0\">,</span><br/>        office    <span class=\"sy0\">=&gt;</span> <span class=\"st_h\">'Room 1003'</span><span class=\"sy0\">,</span><br/>        extension <span class=\"sy0\">=&gt;</span> <span class=\"st_h\">'(234)555-8913'</span><span class=\"sy0\">,</span><br/>        homephone <span class=\"sy0\">=&gt;</span> <span class=\"st_h\">'(234)555-0033'</span><span class=\"sy0\">,</span><br/>        email     <span class=\"sy0\">=&gt;</span> <span class=\"st_h\">'<a class=\"__cf_email__\" data-cfemail=\"94ecedeed4e6fbe7f1e0e0f5f7fbf0f1bafbe6f3\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>'</span><span class=\"sy0\">,</span><br/>    <span class=\"br0\">}</span><span class=\"sy0\">,</span><br/>    directory <span class=\"sy0\">=&gt;</span> <span class=\"st_h\">'/home/xyz'</span><span class=\"sy0\">,</span><br/>    shell     <span class=\"sy0\">=&gt;</span> <span class=\"st_h\">'/bin/bash'</span><span class=\"sy0\">,</span><br/><span class=\"br0\">}</span><span class=\"sy0\">;</span><br/>\u00a0<br/><span class=\"kw2\">sub</span> record_to_string <span class=\"br0\">{</span><br/>    <span class=\"kw1\">my</span> <span class=\"re0\">$rec</span>    <span class=\"sy0\">=</span> <a href=\"http://perldoc.perl.org/functions/shift.html\"><span class=\"kw3\">shift</span></a><span class=\"sy0\">;</span><br/>    <span class=\"kw1\">my</span> <span class=\"re0\">$sep</span>    <span class=\"sy0\">=</span> <a href=\"http://perldoc.perl.org/functions/shift.html\"><span class=\"kw3\">shift</span></a> <span class=\"sy0\">//</span> RECORD_SEP<span class=\"sy0\">;</span><br/>    <span class=\"kw1\">my</span> <span class=\"re0\">$fields</span> <span class=\"sy0\">=</span> <a href=\"http://perldoc.perl.org/functions/shift.html\"><span class=\"kw3\">shift</span></a> <span class=\"sy0\">//</span> RECORD_FIELDS<span class=\"sy0\">;</span><br/>    <span class=\"kw1\">my</span> <span class=\"re0\">@ary</span><span class=\"sy0\">;</span><br/>    <span class=\"kw1\">for</span> <span class=\"kw1\">my</span> <span class=\"re0\">$field</span> <span class=\"br0\">(</span><span class=\"re0\">@$fields</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>        <span class=\"kw1\">my</span> <span class=\"re0\">$r</span> <span class=\"sy0\">=</span> <span class=\"re0\">$rec</span><span class=\"sy0\">-&gt;</span><span class=\"br0\">{</span><span class=\"re0\">$field</span><span class=\"br0\">}</span><span class=\"sy0\">;</span><br/>        <a href=\"http://perldoc.perl.org/functions/die.html\"><span class=\"kw3\">die</span></a> <span class=\"st0\">\"Field '$field' not found\"</span> <span class=\"kw1\">unless</span> <a href=\"http://perldoc.perl.org/functions/defined.html\"><span class=\"kw3\">defined</span></a> <span class=\"re0\">$r</span><span class=\"sy0\">;</span>    <span class=\"co1\"># simple sanity check</span><br/>        <a href=\"http://perldoc.perl.org/functions/push.html\"><span class=\"kw3\">push</span></a> <span class=\"re0\">@ary</span><span class=\"sy0\">,</span> <span class=\"br0\">(</span> <span class=\"re0\">$field</span> <span class=\"kw1\">eq</span> <span class=\"st_h\">'GECOS'</span> <span class=\"sy0\">?</span> record_to_string<span class=\"br0\">(</span> <span class=\"re0\">$r</span><span class=\"sy0\">,</span> GECOS_SEP<span class=\"sy0\">,</span> GECOS_FIELDS <span class=\"br0\">)</span> <span class=\"sy0\">:</span> <span class=\"re0\">$r</span> <span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>    <span class=\"br0\">}</span><br/>    <a href=\"http://perldoc.perl.org/functions/return.html\"><span class=\"kw3\">return</span></a> <a href=\"http://perldoc.perl.org/functions/join.html\"><span class=\"kw3\">join</span></a> <span class=\"re0\">$sep</span><span class=\"sy0\">,</span> <span class=\"re0\">@ary</span><span class=\"sy0\">;</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"kw2\">sub</span> write_records_to_file <span class=\"br0\">{</span><br/>    <span class=\"kw1\">my</span> <span class=\"re0\">$records</span>  <span class=\"sy0\">=</span> <a href=\"http://perldoc.perl.org/functions/shift.html\"><span class=\"kw3\">shift</span></a><span class=\"sy0\">;</span><br/>    <span class=\"kw1\">my</span> <span class=\"re0\">$filename</span> <span class=\"sy0\">=</span> <a href=\"http://perldoc.perl.org/functions/shift.html\"><span class=\"kw3\">shift</span></a> <span class=\"sy0\">//</span> PASSWD_FILE<span class=\"sy0\">;</span><br/>    <a href=\"http://perldoc.perl.org/functions/open.html\"><span class=\"kw3\">open</span></a> <span class=\"kw1\">my</span> <span class=\"re0\">$fh</span><span class=\"sy0\">,</span> <span class=\"st_h\">'&gt;&gt;'</span><span class=\"sy0\">,</span> <span class=\"re0\">$filename</span> <span class=\"kw1\">or</span> <a href=\"http://perldoc.perl.org/functions/die.html\"><span class=\"kw3\">die</span></a> <span class=\"st0\">\"Can't open $filename: $!\"</span><span class=\"sy0\">;</span><br/>    <a href=\"http://perldoc.perl.org/functions/flock.html\"><span class=\"kw3\">flock</span></a><span class=\"br0\">(</span> <span class=\"re0\">$fh</span><span class=\"sy0\">,</span> LOCK_EX <span class=\"br0\">)</span> <span class=\"kw1\">or</span> <a href=\"http://perldoc.perl.org/functions/die.html\"><span class=\"kw3\">die</span></a> <span class=\"st0\">\"Can't lock $filename: $!\"</span><span class=\"sy0\">;</span><br/>    <span class=\"co1\"># if someone appended while we were waiting...</span><br/>    <a href=\"http://perldoc.perl.org/functions/seek.html\"><span class=\"kw3\">seek</span></a><span class=\"br0\">(</span> <span class=\"re0\">$fh</span><span class=\"sy0\">,</span> <span class=\"nu0\">0</span><span class=\"sy0\">,</span> SEEK_END <span class=\"br0\">)</span> <span class=\"kw1\">or</span> <a href=\"http://perldoc.perl.org/functions/die.html\"><span class=\"kw3\">die</span></a> <span class=\"st0\">\"Can't seek $filename: $!\"</span> <span class=\"sy0\">;</span><br/>    <a href=\"http://perldoc.perl.org/functions/print.html\"><span class=\"kw3\">print</span></a> <span class=\"re0\">$fh</span> record_to_string<span class=\"br0\">(</span><span class=\"co5\">$_</span><span class=\"br0\">)</span><span class=\"sy0\">,</span> <span class=\"st0\">\"<span class=\"es0\">\\n</span>\"</span> <span class=\"kw1\">for</span> <span class=\"re0\">@$records</span><span class=\"sy0\">;</span><br/>    <a href=\"http://perldoc.perl.org/functions/flock.html\"><span class=\"kw3\">flock</span></a><span class=\"br0\">(</span> <span class=\"re0\">$fh</span><span class=\"sy0\">,</span> LOCK_UN <span class=\"br0\">)</span> <span class=\"kw1\">or</span> <a href=\"http://perldoc.perl.org/functions/die.html\"><span class=\"kw3\">die</span></a> <span class=\"st0\">\"Can't unlock $filename: $!\"</span><span class=\"sy0\">;</span><br/>    <span class=\"co1\"># note: the file is closed automatically when function returns (and refcount of $fh becomes 0)</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"co1\"># write two records to file</span><br/>write_records_to_file<span class=\"br0\">(</span> <span class=\"re0\">$records_to_write</span> <span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>\u00a0<br/><span class=\"co1\"># append one more record to file</span><br/>write_records_to_file<span class=\"br0\">(</span> <span class=\"br0\">[</span><span class=\"re0\">$record_to_append</span><span class=\"br0\">]</span> <span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>\u00a0<br/><span class=\"co1\"># test</span><br/><span class=\"br0\">{</span><br/>    <span class=\"kw2\">use</span> Test<span class=\"sy0\">::</span><span class=\"me2\">Simple</span> tests <span class=\"sy0\">=&gt;</span> <span class=\"nu0\">1</span><span class=\"sy0\">;</span><br/>\u00a0<br/>    <a href=\"http://perldoc.perl.org/functions/open.html\"><span class=\"kw3\">open</span></a> <span class=\"kw1\">my</span> <span class=\"re0\">$fh</span><span class=\"sy0\">,</span> <span class=\"st_h\">'&lt;'</span><span class=\"sy0\">,</span> PASSWD_FILE <span class=\"kw1\">or</span> <a href=\"http://perldoc.perl.org/functions/die.html\"><span class=\"kw3\">die</span></a> <span class=\"st0\">\"Can't open \"</span><span class=\"sy0\">,</span> PASSWD_FILE<span class=\"sy0\">,</span> <span class=\"st0\">\": $!\"</span><span class=\"sy0\">;</span><br/>    <span class=\"kw1\">my</span> <span class=\"re0\">@lines</span> <span class=\"sy0\">=</span> <span class=\"sy0\">&lt;</span><span class=\"re0\">$fh</span><span class=\"sy0\">&gt;;</span><br/>    <a href=\"http://perldoc.perl.org/functions/chomp.html\"><span class=\"kw3\">chomp</span></a> <span class=\"re0\">@lines</span><span class=\"sy0\">;</span><br/>    ok<span class=\"br0\">(</span><br/>        <span class=\"re0\">$lines</span><span class=\"br0\">[</span><span class=\"sy0\">-</span><span class=\"nu0\">1</span><span class=\"br0\">]</span> <span class=\"kw1\">eq</span><br/><span class=\"st_h\">'xyz:x:1003:1000:X Yz,Room 1003,(234)555-8913,(234)555-0033,<a class=\"__cf_email__\" data-cfemail=\"225a5b5862504d5147565643414d46470c4d5045\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>:/home/xyz:/bin/bash'</span><span class=\"sy0\">,</span><br/>        <span class=\"st0\">\"Appended record: $lines[-1]\"</span><br/>    <span class=\"br0\">)</span><span class=\"sy0\">;</span><br/><span class=\"br0\">}</span><br/>\u00a0</pre>"}, {"lang": "Perl 6", "loc": 67, "block": "<pre class=\"perl6 highlighted_source\"><span class=\"kw2\">class</span> record <span class=\"br0\">{</span><br/>    <span class=\"kw1\">has</span> <span class=\"re0\">$</span><span class=\"sy0\">.</span><span class=\"me1\">name</span><span class=\"sy0\">;</span><br/>    <span class=\"kw1\">has</span> <span class=\"re0\">$</span><span class=\"sy0\">.</span><span class=\"me1\">password</span><span class=\"sy0\">;</span><br/>    <span class=\"kw1\">has</span> <span class=\"re0\">$</span><span class=\"sy0\">.</span><span class=\"me1\">UID</span><span class=\"sy0\">;</span><br/>    <span class=\"kw1\">has</span> <span class=\"re0\">$</span><span class=\"sy0\">.</span><span class=\"me1\">GID</span><span class=\"sy0\">;</span><br/>    <span class=\"kw1\">has</span> <span class=\"re0\">$</span><span class=\"sy0\">.</span><span class=\"me1\">fullname</span><span class=\"sy0\">;</span><br/>    <span class=\"kw1\">has</span> <span class=\"re0\">$</span><span class=\"sy0\">.</span><span class=\"me1\">office</span><span class=\"sy0\">;</span><br/>    <span class=\"kw1\">has</span> <span class=\"re0\">$</span><span class=\"sy0\">.</span><span class=\"me1\">extension</span><span class=\"sy0\">;</span><br/>    <span class=\"kw1\">has</span> <span class=\"re0\">$</span><span class=\"sy0\">.</span><span class=\"me1\">homephone</span><span class=\"sy0\">;</span><br/>    <span class=\"kw1\">has</span> <span class=\"re0\">$</span><span class=\"sy0\">.</span><span class=\"me1\">email</span><span class=\"sy0\">;</span><br/>    <span class=\"kw1\">has</span> <span class=\"re0\">$</span><span class=\"sy0\">.</span><span class=\"me1\">directory</span><span class=\"sy0\">;</span><br/>    <span class=\"kw1\">has</span> <span class=\"re0\">$</span><span class=\"sy0\">.</span><span class=\"me1\">shell</span><span class=\"sy0\">;</span><br/>\u00a0<br/>    <span class=\"kw2\">method</span> gecos <span class=\"br0\">{</span> <span class=\"kw3\">join</span> <span class=\"st_h\">','</span><span class=\"sy0\">,</span> <span class=\"re0\">$</span><span class=\"sy0\">.</span><span class=\"me1\">fullname</span><span class=\"sy0\">,</span> <span class=\"re0\">$</span><span class=\"sy0\">.</span><span class=\"me1\">office</span><span class=\"sy0\">,</span> <span class=\"re0\">$</span><span class=\"sy0\">.</span><span class=\"me1\">extension</span><span class=\"sy0\">,</span> <span class=\"re0\">$</span><span class=\"sy0\">.</span><span class=\"me1\">homephone</span><span class=\"sy0\">,</span> <span class=\"re0\">$</span><span class=\"sy0\">.</span><span class=\"me1\">email</span> <span class=\"br0\">}</span><br/>\u00a0<br/>    <span class=\"kw2\">method</span> gist <span class=\"br0\">{</span><br/>        <span class=\"kw3\">join</span> <span class=\"st_h\">':'</span><span class=\"sy0\">,</span><br/>        <span class=\"re0\">$</span><span class=\"sy0\">.</span><span class=\"me1\">name</span><span class=\"sy0\">,</span><br/>        <span class=\"re0\">$</span><span class=\"sy0\">.</span><span class=\"me1\">password</span><span class=\"sy0\">,</span><br/>        <span class=\"re0\">$</span><span class=\"sy0\">.</span><span class=\"me1\">UID</span><span class=\"sy0\">,</span><br/>        <span class=\"re0\">$</span><span class=\"sy0\">.</span><span class=\"me1\">GID</span><span class=\"sy0\">,</span><br/>        self<span class=\"sy0\">.</span><span class=\"me1\">gecos</span><span class=\"sy0\">,</span><br/>        <span class=\"re0\">$</span><span class=\"sy0\">.</span><span class=\"me1\">directory</span><span class=\"sy0\">,</span><br/>        <span class=\"re0\">$</span><span class=\"sy0\">.</span><span class=\"me1\">shell</span><span class=\"sy0\">;</span><br/>    <span class=\"br0\">}</span><br/><span class=\"br0\">}</span><span class=\"sy0\">;</span><br/>\u00a0<br/><span class=\"kw1\">my</span> <span class=\"re0\">$fname</span> <span class=\"sy0\">=</span> <span class=\"st_h\">'foo.fil'</span><span class=\"sy0\">;</span><br/>\u00a0<br/><span class=\"kw1\">given</span> <span class=\"re0\">$fname</span><span class=\"sy0\">.</span><span class=\"me1\">IO</span><span class=\"sy0\">.</span><span class=\"me1\">open</span><span class=\"br0\">(</span><span class=\"sy0\">:</span>w<span class=\"br0\">)</span> <span class=\"br0\">{</span> <span class=\"sy0\">.</span><span class=\"me1\">close</span> <span class=\"br0\">}</span><span class=\"sy0\">;</span> <span class=\"co1\"># clear file</span><br/>\u00a0<br/><span class=\"kw2\">sub</span> append <span class=\"br0\">(</span><span class=\"re0\">$file</span><span class=\"sy0\">,</span> <span class=\"re0\">$line</span><span class=\"br0\">)</span><span class=\"br0\">{</span><br/>    <span class=\"kw1\">my</span> <span class=\"re0\">$fh</span> <span class=\"sy0\">=</span> <span class=\"re0\">$file</span><span class=\"sy0\">.</span><span class=\"me1\">IO</span><span class=\"sy0\">.</span><span class=\"me1\">open</span><span class=\"br0\">(</span><span class=\"sy0\">:</span>a<span class=\"br0\">)</span> <span class=\"kw1\">or</span> <span class=\"kw1\">fail</span> <span class=\"st0\">\"Unable to open $file\"</span><span class=\"sy0\">;</span><br/>    <span class=\"kw1\">given</span> <span class=\"re0\">$fh</span> <span class=\"br0\">{</span><br/>        <span class=\"co1\"># Get a lock on the file, waits until lock is active</span><br/>        <span class=\"sy0\">.</span><span class=\"me1\">lock</span><span class=\"sy0\">;</span><br/>        <span class=\"co1\"># seek to the end in case some other process wrote to</span><br/>        <span class=\"co1\"># the file while we were waiting for the lock</span><br/>        <span class=\"sy0\">.</span><span class=\"me1\">seek</span><span class=\"br0\">(</span><span class=\"nu0\">0</span><span class=\"sy0\">,</span> SeekType<span class=\"sy0\">::</span><span class=\"me2\">SeekFromEnd</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        <span class=\"co1\"># write the record</span><br/>        <span class=\"sy0\">.</span><span class=\"kw3\">say</span><span class=\"sy0\">:</span> <span class=\"re0\">$line</span><span class=\"sy0\">;</span><br/>        <span class=\"sy0\">.</span><span class=\"me1\">close</span><span class=\"sy0\">;</span><br/>    <span class=\"br0\">}</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"kw2\">sub</span> str<span class=\"sy0\">-</span>to<span class=\"sy0\">-</span>record <span class=\"br0\">(</span><span class=\"re0\">$str</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>    <span class=\"kw1\">my</span> <span class=\"re0\">%rec</span> <span class=\"sy0\">=</span> <span class=\"sy0\">&lt;</span>name password UID GID fullname office extension<br/>      homephone email directory shell<span class=\"sy0\">&gt;</span> <span class=\"kw1\">Z</span><span class=\"sy0\">=&gt;</span> <span class=\"re0\">$str</span><span class=\"sy0\">.</span><span class=\"kw3\">split</span><span class=\"br0\">(</span><span class=\"co2\">/&lt;[:,]&gt;/</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>    <span class=\"kw1\">my</span> <span class=\"re0\">$user</span> <span class=\"sy0\">=</span> record<span class=\"sy0\">.</span><span class=\"kw2\">new</span><span class=\"br0\">(</span><span class=\"sy0\">|</span><span class=\"re0\">%rec</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"kw1\">for</span><br/>  <span class=\"st_h\">'jsmith:x:1001:1000:Joe Smith,Room 1007,(234)555-8917,(234)555-0077,<a class=\"__cf_email__\" data-cfemail=\"2e445d43475a466e5c415d4b5a5a4f4d414a4b00415c49\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>:/home/jsmith:/bin/bash'</span><span class=\"sy0\">,</span><br/>  <span class=\"st_h\">'jdoe:x:1002:1000:Jane Doe,Room 1004,(234)555-8914,(234)555-0044,<a class=\"__cf_email__\" data-cfemail=\"4e242a212b0e3c213d2b3a3a2f2d212a2b60213c29\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>:/home/jdoe:/bin/bash'</span><br/><span class=\"sy0\">-&gt;</span> <span class=\"re0\">$line</span> <span class=\"br0\">{</span><br/>        <span class=\"kw1\">my</span> <span class=\"re0\">$thisuser</span> <span class=\"sy0\">=</span> str<span class=\"sy0\">-</span>to<span class=\"sy0\">-</span>record <span class=\"re0\">$line</span><span class=\"sy0\">;</span><br/>       <span class=\"re0\">$fname</span><span class=\"sy0\">.</span><span class=\"re0\">&amp;append</span><span class=\"sy0\">:</span> <span class=\"re0\">$thisuser</span><span class=\"sy0\">.</span><span class=\"me1\">gist</span><span class=\"sy0\">;</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/>put <span class=\"st0\">\"Last line of $fname before append:\"</span><span class=\"sy0\">;</span><br/>put <span class=\"re0\">$fname</span><span class=\"sy0\">.</span><span class=\"me1\">IO</span><span class=\"sy0\">.</span><span class=\"me1\">lines</span><span class=\"sy0\">.</span><span class=\"me1\">tail</span><span class=\"sy0\">;</span><br/>\u00a0<br/><span class=\"re0\">$fname</span><span class=\"sy0\">.</span><span class=\"re0\">&amp;append</span><span class=\"sy0\">:</span> str<span class=\"sy0\">-</span>to<span class=\"sy0\">-</span>record<span class=\"br0\">(</span><span class=\"st_h\">'xyz:x:1003:1000:X Yz,Room 1003,(234)555-8913,(234)555-0033,<a class=\"__cf_email__\" data-cfemail=\"c8b0b1b288baa7bbadbcbca9aba7acade6a7baaf\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>:/home/xyz:/bin/bash'</span><span class=\"br0\">)</span><span class=\"sy0\">.</span><span class=\"me1\">gist</span><span class=\"sy0\">;</span><br/>\u00a0<br/>put <span class=\"st0\">\"Last line of $fname after append:\"</span><span class=\"sy0\">;</span><br/>put <span class=\"re0\">$fname</span><span class=\"sy0\">.</span><span class=\"me1\">IO</span><span class=\"sy0\">.</span><span class=\"me1\">lines</span><span class=\"sy0\">.</span><span class=\"me1\">tail</span><span class=\"sy0\">;</span><br/>\u00a0</pre>"}, {"lang": "Phix", "loc": 61, "block": "<pre class=\"text highlighted_source\">constant filename = \"passwd.txt\"<br/>integer fn<br/>\u00a0<br/>constant<br/> rec1 = {\"jsmith\",\"x\",1001,1000,{\"Joe Smith\",\"Room 1007\",\"(234)555-8917\",\"(234)555-0077\",\"<a class=\"__cf_email__\" data-cfemail=\"6a001907031e022a1805190f1e1e0b09050e0f4405180d\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>\"},\"/home/jsmith\",\"/bin/bash\"},<br/> rec2 = {\"jdoe\",\"x\",1002,1000,{\"Jane Doe\",\"Room 1004\",\"(234)555-8914\",\"(234)555-0044\",\"<a class=\"__cf_email__\" data-cfemail=\"4e242a212b0e3c213d2b3a3a2f2d212a2b60213c29\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>\"},\"/home/jdoe\",\"/bin/bash\"},<br/> rec3 = {\"xyz\",\"x\",1003,1000,{\"X Yz\",\"Room 1003\",\"(234)555-8913\",\"(234)555-0033\",\"<a class=\"__cf_email__\" data-cfemail=\"e79f9e9da79588948293938684888382c9889580\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>\"},\"/home/xyz\",\"/bin/bash\"}<br/>\u00a0<br/>function tostring(sequence record)<br/>    record[3] = sprintf(\"%d\",{record[3]})<br/>    record[4] = sprintf(\"%d\",{record[4]})<br/>    record[5] = join(record[5],\",\")<br/>    record = join(record,\":\")<br/>    return record<br/>end function<br/>\u00a0<br/>procedure wait(string what)<br/>   \u00a0?sprintf(\"wait (%s)\",{what})<br/>    sleep(1)<br/>    task_yield()<br/>end procedure<br/>\u00a0<br/>    if not file_exists(filename) then<br/>        fn = open(filename,\"w\")<br/>        if fn!=-1 then -- (someone else just beat us to it?)<br/>            printf(fn,\"account:password:UID:GID:fullname,office,extension,homephone,email:directory:shell\\n\")<br/>            printf(fn,\"%s\\n\",{tostring(rec1)})<br/>            printf(fn,\"%s\\n\",{tostring(rec2)})<br/>            close(fn)<br/>        end if<br/>    end if<br/>    while 1 do<br/>        fn = open(filename,\"a\")<br/>        if fn!=-1 then exit end if<br/>        wait(\"append\")<br/>    end while<br/>-- \u00a0?\"file open in append mode\"; {} = wait_key()<br/>    while 1 do<br/>        if lock_file(fn,LOCK_EXCLUSIVE,{}) then exit end if<br/>        wait(\"lock\")<br/>    end while<br/>-- \u00a0?\"file locked\"; {} = wait_key()<br/>    printf(fn,\"%s\\n\",{tostring(rec3)})<br/>    unlock_file(fn,{})<br/>    close(fn)<br/>    while 1 do<br/>        fn = open(filename,\"r\")<br/>        if fn!=-1 then exit end if<br/>        wait(\"read\")<br/>    end while<br/>\u00a0<br/>   \u00a0?gets(fn)<br/>    while 1 do<br/>        object line = gets(fn)<br/>        if atom(line) then exit end if<br/>       \u00a0?line<br/>        {line} = scanf(line,\"%s:%s:%d:%d:%s:%s:%s\\n\")<br/>        line[5] = split(line[5],',')<br/>       \u00a0?line<br/>    end while<br/>    close(fn)</pre>"}, {"lang": "PicoLisp", "loc": 27, "block": "<pre class=\"text highlighted_source\">(setq L '((jsmith x 1001 1000<br/>   \"Joe Smith,Room 1007,(234)555-8917,\\<br/>   (234)555-0077,<a class=\"__cf_email__\" data-cfemail=\"4e243d23273a260e3c213d2b3a3a2f2d212a2b60213c29\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>\"<br/>   /home/jsmith /bin/bash )<br/>   (jdoe x 1002 1000<br/>   \"Jane Doe,Room 1004,(234)555-8914,\\<br/>   (234)555-0044,<a class=\"__cf_email__\" data-cfemail=\"b0dad4dfd5f0c2dfc3d5c4c4d1d3dfd4d59edfc2d7\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>\"<br/>   /home/jsmith /bin/bash ) ) )<br/>\u00a0<br/>(setq A '(xyz x 1003 1000 <br/>    \"X Yz,Room 1003,(234)555-8913,\\<br/>    (234)555-0033,<a class=\"__cf_email__\" data-cfemail=\"146c6d6e54667b6771606075777b70713a7b6673\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>\"<br/>    /home/xyz /bin/bash ) )<br/>\u00a0<br/>(out \"mythical\"<br/>   (for I L<br/>      (prinl (glue ': I)) ) )<br/>(out \"+mythical\"<br/>   (prinl (glue ': A)) )<br/>(in \"mythical\"<br/>   (do 2 (line))<br/>   (println<br/>      (and<br/>         (= \"xyz\" (pack (till ':)))<br/>         (= 3 (lines \"mythical\") ) ) ) )<br/>\u00a0<br/>(bye)</pre>"}, {"lang": "PowerShell", "loc": 165, "block": "<pre class=\"powershell highlighted_source\">\u00a0<br/><span class=\"kw3\">function</span> Test<span class=\"sy0\">-</span>FileLock<br/><span class=\"br0\">{</span><br/>    <span class=\"kw3\">Param</span><br/>    <span class=\"br0\">(</span><br/>        <span class=\"br0\">[</span>parameter<span class=\"br0\">(</span>Mandatory<span class=\"sy0\">=</span><span class=\"re0\">$true</span><span class=\"br0\">)</span><span class=\"br0\">]</span><br/>        <span class=\"br0\">[</span><span class=\"re3\">string</span><span class=\"br0\">]</span><br/>        <span class=\"re0\">$Path</span><br/>    <span class=\"br0\">)</span><br/>\u00a0<br/>    <span class=\"re0\">$outFile</span> <span class=\"sy0\">=</span> <span class=\"kw1\">New-Object</span> System.IO.FileInfo <span class=\"re0\">$Path</span><br/>\u00a0<br/>    <span class=\"kw3\">if</span> <span class=\"br0\">(</span><span class=\"kw4\">-not</span><span class=\"br0\">(</span><span class=\"kw1\">Test-Path</span> <span class=\"kw5\">-Path</span> <span class=\"re0\">$Path</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>    <span class=\"br0\">{</span><br/>        <span class=\"kw3\">return</span> <span class=\"re0\">$false</span><br/>    <span class=\"br0\">}</span><br/>\u00a0<br/>    try<br/>    <span class=\"br0\">{</span><br/>        <span class=\"re0\">$outStream</span> <span class=\"sy0\">=</span> <span class=\"re0\">$outFile</span>.Open<span class=\"br0\">(</span><span class=\"br0\">[</span>System.IO.FileMode<span class=\"br0\">]</span>::Open<span class=\"sy0\">,</span> <span class=\"br0\">[</span>System.IO.FileAccess<span class=\"br0\">]</span>::ReadWrite<span class=\"sy0\">,</span> <span class=\"br0\">[</span>System.IO.FileShare<span class=\"br0\">]</span>::None<span class=\"br0\">)</span><br/>\u00a0<br/>        <span class=\"kw3\">if</span> <span class=\"br0\">(</span><span class=\"re0\">$outStream</span><span class=\"br0\">)</span><br/>        <span class=\"br0\">{</span><br/>            <span class=\"re0\">$outStream</span>.Close<span class=\"br0\">(</span><span class=\"br0\">)</span><br/>        <span class=\"br0\">}</span><br/>\u00a0<br/>        <span class=\"kw3\">return</span> <span class=\"re0\">$false</span><br/>    <span class=\"br0\">}</span><br/>    catch<br/>    <span class=\"br0\">{</span><br/>        <span class=\"co1\"># File is locked by a process.</span><br/>        <span class=\"kw3\">return</span> <span class=\"re0\">$true</span><br/>    <span class=\"br0\">}</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"kw3\">function</span> New<span class=\"sy0\">-</span>Record<br/><span class=\"br0\">{</span><br/>    <span class=\"kw3\">Param</span><br/>    <span class=\"br0\">(</span><br/>        <span class=\"br0\">[</span><span class=\"re3\">string</span><span class=\"br0\">]</span><span class=\"re0\">$Account</span><span class=\"sy0\">,</span><br/>        <span class=\"br0\">[</span><span class=\"re3\">string</span><span class=\"br0\">]</span><span class=\"re0\">$Password</span><span class=\"sy0\">,</span><br/>        <span class=\"br0\">[</span><span class=\"re3\">int</span><span class=\"br0\">]</span><span class=\"re0\">$UID</span><span class=\"sy0\">,</span><br/>        <span class=\"br0\">[</span><span class=\"re3\">int</span><span class=\"br0\">]</span><span class=\"re0\">$GID</span><span class=\"sy0\">,</span><br/>        <span class=\"br0\">[</span><span class=\"re3\">string</span><span class=\"br0\">]</span><span class=\"re0\">$FullName</span><span class=\"sy0\">,</span><br/>        <span class=\"br0\">[</span><span class=\"re3\">string</span><span class=\"br0\">]</span><span class=\"re0\">$Office</span><span class=\"sy0\">,</span><br/>        <span class=\"br0\">[</span><span class=\"re3\">string</span><span class=\"br0\">]</span><span class=\"re0\">$Extension</span><span class=\"sy0\">,</span><br/>        <span class=\"br0\">[</span><span class=\"re3\">string</span><span class=\"br0\">]</span><span class=\"re0\">$HomePhone</span><span class=\"sy0\">,</span><br/>        <span class=\"br0\">[</span><span class=\"re3\">string</span><span class=\"br0\">]</span><span class=\"re0\">$Email</span><span class=\"sy0\">,</span><br/>        <span class=\"br0\">[</span><span class=\"re3\">string</span><span class=\"br0\">]</span><span class=\"re0\">$Directory</span><span class=\"sy0\">,</span><br/>        <span class=\"br0\">[</span><span class=\"re3\">string</span><span class=\"br0\">]</span><span class=\"re0\">$Shell</span><br/>    <span class=\"br0\">)</span><br/>\u00a0<br/>    <span class=\"re0\">$GECOS</span> <span class=\"sy0\">=</span> <span class=\"br0\">[</span>PSCustomObject<span class=\"br0\">]</span><span class=\"sy0\">@</span><span class=\"br0\">{</span><br/>        FullName  <span class=\"sy0\">=</span> <span class=\"re0\">$FullName</span><br/>        Office    <span class=\"sy0\">=</span> <span class=\"re0\">$Office</span><br/>        Extension <span class=\"sy0\">=</span> <span class=\"re0\">$Extension</span><br/>        HomePhone <span class=\"sy0\">=</span> <span class=\"re0\">$HomePhone</span><br/>        Email     <span class=\"sy0\">=</span> <span class=\"re0\">$Email</span><br/>    <span class=\"br0\">}</span><br/>\u00a0<br/>    <span class=\"br0\">[</span>PSCustomObject<span class=\"br0\">]</span><span class=\"sy0\">@</span><span class=\"br0\">{</span><br/>        Account   <span class=\"sy0\">=</span> <span class=\"re0\">$Account</span><br/>        Password  <span class=\"sy0\">=</span> <span class=\"re0\">$Password</span><br/>        UID       <span class=\"sy0\">=</span> <span class=\"re0\">$UID</span><br/>        GID       <span class=\"sy0\">=</span> <span class=\"re0\">$GID</span><br/>        GECOS     <span class=\"sy0\">=</span> <span class=\"re0\">$GECOS</span><br/>        Directory <span class=\"sy0\">=</span> <span class=\"re0\">$Directory</span><br/>        Shell     <span class=\"sy0\">=</span> <span class=\"re0\">$Shell</span><br/>    <span class=\"br0\">}</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/>\u00a0<br/><span class=\"kw3\">function</span> Import<span class=\"kw4\">-File</span><br/><span class=\"br0\">{</span><br/>    <span class=\"kw3\">Param</span><br/>    <span class=\"br0\">(</span><br/>        <span class=\"br0\">[</span>Parameter<span class=\"br0\">(</span>Mandatory<span class=\"sy0\">=</span><span class=\"re0\">$false</span><span class=\"sy0\">,</span><br/>                   ValueFromPipeline<span class=\"sy0\">=</span><span class=\"re0\">$true</span><span class=\"sy0\">,</span><br/>                   ValueFromPipelineByPropertyName<span class=\"sy0\">=</span><span class=\"re0\">$true</span><span class=\"br0\">)</span><span class=\"br0\">]</span><br/>        <span class=\"br0\">[</span><span class=\"re3\">string</span><span class=\"br0\">]</span><br/>        <span class=\"re0\">$Path</span> <span class=\"sy0\">=</span> <span class=\"st0\">\".\\passwd.txt\"</span><br/>    <span class=\"br0\">)</span><br/>\u00a0<br/>    <span class=\"kw3\">if</span> <span class=\"br0\">(</span><span class=\"kw4\">-not</span><span class=\"br0\">(</span><span class=\"kw1\">Test-Path</span> <span class=\"re0\">$Path</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>    <span class=\"br0\">{</span><br/>        <span class=\"kw3\">throw</span> <span class=\"br0\">[</span>System.IO.FileNotFoundException<span class=\"br0\">]</span><br/>    <span class=\"br0\">}</span><br/>\u00a0<br/>    <span class=\"re0\">$header</span> <span class=\"sy0\">=</span> <span class=\"st0\">\"Account\"</span><span class=\"sy0\">,</span><span class=\"st0\">\"Password\"</span><span class=\"sy0\">,</span><span class=\"st0\">\"UID\"</span><span class=\"sy0\">,</span><span class=\"st0\">\"GID\"</span><span class=\"sy0\">,</span><span class=\"st0\">\"GECOS\"</span><span class=\"sy0\">,</span><span class=\"st0\">\"Directory\"</span><span class=\"sy0\">,</span><span class=\"st0\">\"Shell\"</span><br/>\u00a0<br/>    <span class=\"re0\">$csv</span> <span class=\"sy0\">=</span> <span class=\"kw1\">Import-Csv</span> <span class=\"kw5\">-Path</span> <span class=\"re0\">$Path</span> <span class=\"kw5\">-Delimiter</span> <span class=\"st0\">\":\"</span> <span class=\"sy0\">-</span>Header <span class=\"re0\">$header</span> <span class=\"kw5\">-Encoding</span> ASCII<br/>    <span class=\"re0\">$csv</span> <span class=\"sy0\">|</span> <span class=\"kw1\">ForEach-Object</span> <span class=\"br0\">{</span><br/>        New<span class=\"sy0\">-</span>Record <span class=\"sy0\">-</span>Account   <a href=\"about:blank\"><span class=\"kw6\">$_</span></a>.Account `<br/>                   <span class=\"sy0\">-</span>Password  <a href=\"about:blank\"><span class=\"kw6\">$_</span></a>.Password `<br/>                   <span class=\"sy0\">-</span>UID       <a href=\"about:blank\"><span class=\"kw6\">$_</span></a>.UID `<br/>                   <span class=\"sy0\">-</span>GID       <a href=\"about:blank\"><span class=\"kw6\">$_</span></a>.GID `<br/>                   <span class=\"sy0\">-</span>FullName  <a href=\"about:blank\"><span class=\"kw6\">$_</span></a>.GECOS.Split<span class=\"br0\">(</span><span class=\"st0\">\",\"</span><span class=\"br0\">)</span><span class=\"br0\">[</span><span class=\"nu0\">0</span><span class=\"br0\">]</span> `<br/>                   <span class=\"sy0\">-</span>Office    <a href=\"about:blank\"><span class=\"kw6\">$_</span></a>.GECOS.Split<span class=\"br0\">(</span><span class=\"st0\">\",\"</span><span class=\"br0\">)</span><span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"br0\">]</span> `<br/>                   <span class=\"sy0\">-</span>Extension <a href=\"about:blank\"><span class=\"kw6\">$_</span></a>.GECOS.Split<span class=\"br0\">(</span><span class=\"st0\">\",\"</span><span class=\"br0\">)</span><span class=\"br0\">[</span><span class=\"nu0\">2</span><span class=\"br0\">]</span> `<br/>                   <span class=\"sy0\">-</span>HomePhone <a href=\"about:blank\"><span class=\"kw6\">$_</span></a>.GECOS.Split<span class=\"br0\">(</span><span class=\"st0\">\",\"</span><span class=\"br0\">)</span><span class=\"br0\">[</span><span class=\"nu0\">3</span><span class=\"br0\">]</span> `<br/>                   <span class=\"sy0\">-</span>Email     <a href=\"about:blank\"><span class=\"kw6\">$_</span></a>.GECOS.Split<span class=\"br0\">(</span><span class=\"st0\">\",\"</span><span class=\"br0\">)</span><span class=\"br0\">[</span><span class=\"nu0\">4</span><span class=\"br0\">]</span> `<br/>                   <span class=\"sy0\">-</span>Directory <a href=\"about:blank\"><span class=\"kw6\">$_</span></a>.Directory `<br/>                   <span class=\"sy0\">-</span>Shell     <a href=\"about:blank\"><span class=\"kw6\">$_</span></a>.Shell<br/>    <span class=\"br0\">}</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/>\u00a0<br/><span class=\"kw3\">function</span> Export<span class=\"kw4\">-File</span><br/><span class=\"br0\">{</span><br/>    <span class=\"br0\">[</span>CmdletBinding<span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"br0\">]</span><br/>    <span class=\"kw3\">Param</span><br/>    <span class=\"br0\">(</span><br/>        <span class=\"br0\">[</span>Parameter<span class=\"br0\">(</span>Mandatory<span class=\"sy0\">=</span><span class=\"re0\">$true</span><span class=\"sy0\">,</span><br/>                   ValueFromPipeline<span class=\"sy0\">=</span><span class=\"re0\">$true</span><span class=\"sy0\">,</span><br/>                   ValueFromPipelineByPropertyName<span class=\"sy0\">=</span><span class=\"re0\">$true</span><span class=\"br0\">)</span><span class=\"br0\">]</span><br/>        <span class=\"re0\">$InputObject</span><span class=\"sy0\">,</span><br/>\u00a0<br/>        <span class=\"br0\">[</span>Parameter<span class=\"br0\">(</span>Mandatory<span class=\"sy0\">=</span><span class=\"re0\">$false</span><span class=\"sy0\">,</span><br/>                   ValueFromPipeline<span class=\"sy0\">=</span><span class=\"re0\">$true</span><span class=\"sy0\">,</span><br/>                   ValueFromPipelineByPropertyName<span class=\"sy0\">=</span><span class=\"re0\">$true</span><span class=\"br0\">)</span><span class=\"br0\">]</span><br/>        <span class=\"br0\">[</span><span class=\"re3\">string</span><span class=\"br0\">]</span><br/>        <span class=\"re0\">$Path</span> <span class=\"sy0\">=</span> <span class=\"st0\">\".\\passwd.txt\"</span><br/>    <span class=\"br0\">)</span><br/>\u00a0<br/>    Begin<br/>    <span class=\"br0\">{</span><br/>        <span class=\"kw3\">if</span> <span class=\"br0\">(</span><span class=\"kw4\">-not</span><span class=\"br0\">(</span><span class=\"kw1\">Test-Path</span> <span class=\"re0\">$Path</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>        <span class=\"br0\">{</span><br/>            <span class=\"kw1\">New-Item</span> <span class=\"kw5\">-Path</span> . <span class=\"kw5\">-Name</span> <span class=\"re0\">$Path</span> <span class=\"kw5\">-ItemType</span> File <span class=\"sy0\">|</span> <span class=\"kw1\">Out-Null</span><br/>        <span class=\"br0\">}</span><br/>\u00a0<br/>        <span class=\"br0\">[</span><span class=\"re3\">string</span><span class=\"br0\">]</span><span class=\"re0\">$recordString</span> <span class=\"sy0\">=</span> <span class=\"st0\">\"{0}:{1}:{2}:{3}:{4}:{5}:{6}\"</span><br/>        <span class=\"br0\">[</span><span class=\"re3\">string</span><span class=\"br0\">]</span><span class=\"re0\">$gecosString</span>  <span class=\"sy0\">=</span> <span class=\"st0\">\"{0},{1},{2},{3},{4}\"</span><br/>        <span class=\"br0\">[</span><span class=\"re3\">string</span><span class=\"br0\">[</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"re0\">$lines</span> <span class=\"sy0\">=</span> <span class=\"sy0\">@</span><span class=\"br0\">(</span><span class=\"br0\">)</span><br/>        <span class=\"br0\">[</span>string<span class=\"br0\">[</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"re0\">$file</span>  <span class=\"sy0\">=</span> <span class=\"kw1\">Get-Content</span> <span class=\"re0\">$Path</span><br/>    <span class=\"br0\">}</span><br/>    Process<br/>    <span class=\"br0\">{</span><br/>        <span class=\"kw3\">foreach</span> <span class=\"br0\">(</span><span class=\"re0\">$object</span> <span class=\"kw3\">in</span> <span class=\"re0\">$InputObject</span><span class=\"br0\">)</span><br/>        <span class=\"br0\">{</span><br/>            <span class=\"re0\">$lines</span> <span class=\"sy0\">+=</span> <span class=\"re0\">$recordString</span> <span class=\"kw4\">-f</span> <span class=\"re0\">$object</span>.Account<span class=\"sy0\">,</span><br/>                                       <span class=\"re0\">$object</span>.Password<span class=\"sy0\">,</span><br/>                                       <span class=\"re0\">$object</span>.UID<span class=\"sy0\">,</span><br/>                                       <span class=\"re0\">$object</span>.GID<span class=\"sy0\">,</span><br/>                                       $<span class=\"br0\">(</span><span class=\"re0\">$gecosString</span> <span class=\"kw4\">-f</span> <span class=\"re0\">$object</span>.GECOS.FullName<span class=\"sy0\">,</span><br/>                                                         <span class=\"re0\">$object</span>.GECOS.Office<span class=\"sy0\">,</span><br/>                                                         <span class=\"re0\">$object</span>.GECOS.Extension<span class=\"sy0\">,</span><br/>                                                         <span class=\"re0\">$object</span>.GECOS.HomePhone<span class=\"sy0\">,</span><br/>                                                         <span class=\"re0\">$object</span>.GECOS.Email<span class=\"br0\">)</span><span class=\"sy0\">,</span><br/>                                       <span class=\"re0\">$object</span>.Directory<span class=\"sy0\">,</span><br/>                                       <span class=\"re0\">$object</span>.Shell<br/>        <span class=\"br0\">}</span><br/>    <span class=\"br0\">}</span><br/>    End<br/>    <span class=\"br0\">{</span><br/>        <span class=\"kw3\">foreach</span> <span class=\"br0\">(</span><span class=\"re0\">$line</span> <span class=\"kw3\">in</span> <span class=\"re0\">$lines</span><span class=\"br0\">)</span><br/>        <span class=\"br0\">{</span><br/>            <span class=\"kw3\">if</span> <span class=\"br0\">(</span><span class=\"kw4\">-not</span> <span class=\"br0\">(</span><span class=\"re0\">$line</span> <span class=\"sy0\">-</span><span class=\"kw3\">in</span> <span class=\"re0\">$file</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>            <span class=\"br0\">{</span><br/>                <span class=\"re0\">$line</span> <span class=\"sy0\">|</span> <span class=\"kw1\">Out<span class=\"kw4\">-File</span></span> <span class=\"kw5\">-FilePath</span> <span class=\"re0\">$Path</span> <span class=\"kw5\">-Encoding</span> ASCII <span class=\"kw5\">-Append</span><br/>            <span class=\"br0\">}</span><br/>        <span class=\"br0\">}</span><br/>    <span class=\"br0\">}</span><br/><span class=\"br0\">}</span><br/>\u00a0</pre>"}, {"lang": "Python", "loc": 48, "block": "<pre class=\"python highlighted_source\"><span class=\"co1\">#############################</span><br/><span class=\"co1\"># Create a passwd text file</span><br/><span class=\"co1\">#############################</span><br/><span class=\"co1\"># note that UID &amp; gid are of type \"text\"</span><br/>passwd_list<span class=\"sy0\">=</span><span class=\"br0\">[</span><br/>  <span class=\"kw2\">dict</span><span class=\"br0\">(</span>account<span class=\"sy0\">=</span><span class=\"st0\">'jsmith'</span><span class=\"sy0\">,</span> password<span class=\"sy0\">=</span><span class=\"st0\">'x'</span><span class=\"sy0\">,</span> UID<span class=\"sy0\">=</span><span class=\"nu0\">1001</span><span class=\"sy0\">,</span> GID<span class=\"sy0\">=</span><span class=\"nu0\">1000</span><span class=\"sy0\">,</span> <span class=\"co1\"># UID and GID are type int</span><br/>       GECOS<span class=\"sy0\">=</span><span class=\"kw2\">dict</span><span class=\"br0\">(</span>fullname<span class=\"sy0\">=</span><span class=\"st0\">'Joe Smith'</span><span class=\"sy0\">,</span> office<span class=\"sy0\">=</span><span class=\"st0\">'Room 1007'</span><span class=\"sy0\">,</span> extension<span class=\"sy0\">=</span><span class=\"st0\">'(234)555-8917'</span><span class=\"sy0\">,</span><br/>                  homephone<span class=\"sy0\">=</span><span class=\"st0\">'(234)555-0077'</span><span class=\"sy0\">,</span> <span class=\"kw3\">email</span><span class=\"sy0\">=</span><span class=\"st0\">'<a class=\"__cf_email__\" data-cfemail=\"96fce5fbffe2fed6e4f9e5f3e2e2f7f5f9f2f3b8f9e4f1\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>'</span><span class=\"br0\">)</span><span class=\"sy0\">,</span><br/>                  directory<span class=\"sy0\">=</span><span class=\"st0\">'/home/jsmith'</span><span class=\"sy0\">,</span> shell<span class=\"sy0\">=</span><span class=\"st0\">'/bin/bash'</span><span class=\"br0\">)</span><span class=\"sy0\">,</span><br/>  <span class=\"kw2\">dict</span><span class=\"br0\">(</span>account<span class=\"sy0\">=</span><span class=\"st0\">'jdoe'</span><span class=\"sy0\">,</span> password<span class=\"sy0\">=</span><span class=\"st0\">'x'</span><span class=\"sy0\">,</span> UID<span class=\"sy0\">=</span><span class=\"nu0\">1002</span><span class=\"sy0\">,</span> GID<span class=\"sy0\">=</span><span class=\"nu0\">1000</span><span class=\"sy0\">,</span><br/>       GECOS<span class=\"sy0\">=</span><span class=\"kw2\">dict</span><span class=\"br0\">(</span>fullname<span class=\"sy0\">=</span><span class=\"st0\">'Jane Doe'</span><span class=\"sy0\">,</span> office<span class=\"sy0\">=</span><span class=\"st0\">'Room 1004'</span><span class=\"sy0\">,</span> extension<span class=\"sy0\">=</span><span class=\"st0\">'(234)555-8914'</span><span class=\"sy0\">,</span><br/>                  homephone<span class=\"sy0\">=</span><span class=\"st0\">'(234)555-0044'</span><span class=\"sy0\">,</span> <span class=\"kw3\">email</span><span class=\"sy0\">=</span><span class=\"st0\">'<a class=\"__cf_email__\" data-cfemail=\"107a747f7550627f6375646471737f74753e7f6277\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>'</span><span class=\"br0\">)</span><span class=\"sy0\">,</span><br/>       directory<span class=\"sy0\">=</span><span class=\"st0\">'/home/jdoe'</span><span class=\"sy0\">,</span> shell<span class=\"sy0\">=</span><span class=\"st0\">'/bin/bash'</span><span class=\"br0\">)</span><br/><span class=\"br0\">]</span><br/>\u00a0<br/>passwd_fields<span class=\"sy0\">=</span><span class=\"st0\">\"account password UID GID GECOS directory shell\"</span>.<span class=\"me1\">split</span><span class=\"br0\">(</span><span class=\"br0\">)</span><br/>GECOS_fields<span class=\"sy0\">=</span><span class=\"st0\">\"fullname office extension homephone email\"</span>.<span class=\"me1\">split</span><span class=\"br0\">(</span><span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"kw1\">def</span> passwd_text_repr<span class=\"br0\">(</span>passwd_rec<span class=\"br0\">)</span>:<br/><span class=\"co1\"># convert individual fields to string type</span><br/>  passwd_rec<span class=\"br0\">[</span><span class=\"st0\">\"GECOS\"</span><span class=\"br0\">]</span><span class=\"sy0\">=</span><span class=\"st0\">\",\"</span>.<span class=\"me1\">join</span><span class=\"br0\">(</span><span class=\"br0\">[</span> passwd_rec<span class=\"br0\">[</span><span class=\"st0\">\"GECOS\"</span><span class=\"br0\">]</span><span class=\"br0\">[</span>field<span class=\"br0\">]</span> <span class=\"kw1\">for</span> field <span class=\"kw1\">in</span> GECOS_fields<span class=\"br0\">]</span><span class=\"br0\">)</span><br/>  <span class=\"kw1\">for</span> field <span class=\"kw1\">in</span> passwd_rec: <span class=\"co1\"># convert \"int\" fields</span><br/>    <span class=\"kw1\">if</span> <span class=\"kw1\">not</span> <span class=\"kw2\">isinstance</span><span class=\"br0\">(</span>passwd_rec<span class=\"br0\">[</span>field<span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"kw2\">str</span><span class=\"br0\">)</span>:<br/>      passwd_rec<span class=\"br0\">[</span>field<span class=\"br0\">]</span><span class=\"sy0\">=</span>`passwd_rec<span class=\"br0\">[</span>field<span class=\"br0\">]</span>`<br/>  <span class=\"kw1\">return</span> <span class=\"st0\">\":\"</span>.<span class=\"me1\">join</span><span class=\"br0\">(</span><span class=\"br0\">[</span> passwd_rec<span class=\"br0\">[</span>field<span class=\"br0\">]</span> <span class=\"kw1\">for</span> field <span class=\"kw1\">in</span> passwd_fields <span class=\"br0\">]</span><span class=\"br0\">)</span><br/>\u00a0<br/>passwd_text<span class=\"sy0\">=</span><span class=\"kw2\">open</span><span class=\"br0\">(</span><span class=\"st0\">\"passwd.txt\"</span><span class=\"sy0\">,</span><span class=\"st0\">\"w\"</span><span class=\"br0\">)</span><br/><span class=\"kw1\">for</span> passwd_rec <span class=\"kw1\">in</span> passwd_list:<br/>  <span class=\"kw1\">print</span> <span class=\"sy0\">&gt;&gt;</span> passwd_text<span class=\"sy0\">,</span>passwd_text_repr<span class=\"br0\">(</span>passwd_rec<span class=\"br0\">)</span><br/>passwd_text.<span class=\"me1\">close</span><span class=\"br0\">(</span><span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"co1\">#################################</span><br/><span class=\"co1\"># Load text ready for appending</span><br/><span class=\"co1\">#################################</span><br/>passwd_text<span class=\"sy0\">=</span><span class=\"kw2\">open</span><span class=\"br0\">(</span><span class=\"st0\">\"passwd.txt\"</span><span class=\"sy0\">,</span><span class=\"st0\">\"a+\"</span><span class=\"br0\">)</span><br/>new_rec<span class=\"sy0\">=</span><span class=\"kw2\">dict</span><span class=\"br0\">(</span>account<span class=\"sy0\">=</span><span class=\"st0\">'xyz'</span><span class=\"sy0\">,</span> password<span class=\"sy0\">=</span><span class=\"st0\">'x'</span><span class=\"sy0\">,</span> UID<span class=\"sy0\">=</span><span class=\"nu0\">1003</span><span class=\"sy0\">,</span> GID<span class=\"sy0\">=</span><span class=\"nu0\">1000</span><span class=\"sy0\">,</span><br/>             GECOS<span class=\"sy0\">=</span><span class=\"kw2\">dict</span><span class=\"br0\">(</span>fullname<span class=\"sy0\">=</span><span class=\"st0\">'X Yz'</span><span class=\"sy0\">,</span> office<span class=\"sy0\">=</span><span class=\"st0\">'Room 1003'</span><span class=\"sy0\">,</span> extension<span class=\"sy0\">=</span><span class=\"st0\">'(234)555-8913'</span><span class=\"sy0\">,</span><br/>                        homephone<span class=\"sy0\">=</span><span class=\"st0\">'(234)555-0033'</span><span class=\"sy0\">,</span> <span class=\"kw3\">email</span><span class=\"sy0\">=</span><span class=\"st0\">'<a class=\"__cf_email__\" data-cfemail=\"1d6564675d6f726e7869697c7e72797833726f7a\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>'</span><span class=\"br0\">)</span><span class=\"sy0\">,</span><br/>             directory<span class=\"sy0\">=</span><span class=\"st0\">'/home/xyz'</span><span class=\"sy0\">,</span> shell<span class=\"sy0\">=</span><span class=\"st0\">'/bin/bash'</span><span class=\"br0\">)</span><br/><span class=\"kw1\">print</span> <span class=\"sy0\">&gt;&gt;</span> passwd_text<span class=\"sy0\">,</span>  passwd_text_repr<span class=\"br0\">(</span>new_rec<span class=\"br0\">)</span><br/>passwd_text.<span class=\"me1\">close</span><span class=\"br0\">(</span><span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"co1\">##############################################</span><br/><span class=\"co1\"># Finally reopen and check record was appended</span><br/><span class=\"co1\">##############################################</span><br/>passwd_list<span class=\"sy0\">=</span><span class=\"kw2\">list</span><span class=\"br0\">(</span><span class=\"kw2\">open</span><span class=\"br0\">(</span><span class=\"st0\">\"passwd.txt\"</span><span class=\"sy0\">,</span><span class=\"st0\">\"r\"</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/><span class=\"kw1\">if</span> <span class=\"st0\">\"xyz\"</span> <span class=\"kw1\">in</span> passwd_list<span class=\"br0\">[</span>-<span class=\"nu0\">1</span><span class=\"br0\">]</span>:<br/>  <span class=\"kw1\">print</span> <span class=\"st0\">\"Appended record:\"</span><span class=\"sy0\">,</span>passwd_list<span class=\"br0\">[</span>-<span class=\"nu0\">1</span><span class=\"br0\">]</span><span class=\"br0\">[</span>:-<span class=\"nu0\">1</span><span class=\"br0\">]</span></pre>"}, {"lang": "Racket", "loc": 38, "block": "<pre class=\"text highlighted_source\">\u00a0<br/>#lang racket<br/>\u00a0<br/>(define sample1<br/>  '(\"jsmith\" \"x\" 1001 1000<br/>    (\"Joe Smith\" \"Room 1007\" \"(234)555-8917\" \"(234)555-0077\" \"<a class=\"__cf_email__\" data-cfemail=\"553f26383c213d15273a2630212134363a31307b3a2732\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>\")<br/>    \"/home/jsmith\" \"/bin/bash\"))<br/>\u00a0<br/>(define sample2<br/>  '(\"jdoe\" \"x\" 1002 1000<br/>    (\"Jane Doe\" \"Room 1004\" \"(234)555-8914\" \"(234)555-0044\" \"<a class=\"__cf_email__\" data-cfemail=\"78121c171d380a170b1d0c0c191b171c1d56170a1f\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>\")<br/>    \"/home/jdoe\" \"/bin/bash\"))<br/>\u00a0<br/>(define sample3<br/>  '(\"xyz\" \"x\" 1003 1000<br/>    (\"X Yz\" \"Room 1003\" \"(234)555-8913\" \"(234)555-0033\" \"<a class=\"__cf_email__\" data-cfemail=\"c8b0b1b288baa7bbadbcbca9aba7acade6a7baaf\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>\")<br/>    \"/home/xyz\" \"/bin/bash\"))<br/>\u00a0<br/>(define passwd-file \"sexpr-passwd\")<br/>\u00a0<br/>(define (write-passwds mode . ps)<br/>  (with-output-to-file passwd-file #:exists mode<br/>    (\u03bb() (for ([p (in-list ps)]) (printf \"~s\\n\" p)))))<br/>\u00a0<br/>(define (lookup username)<br/>  (with-input-from-file passwd-file<br/>    (\u03bb() (for/first ([p (in-producer read eof)]<br/>                     #:when (equal? username (car p)))<br/>           p))))<br/>\u00a0<br/>(printf \"Creating file with two sample records.\\n\")<br/>(write-passwds 'replace sample1 sample2)<br/>\u00a0<br/>(printf \"Appending third sample.\\n\")<br/>(write-passwds 'append sample3)<br/>\u00a0<br/>(printf \"Looking up xyz in current file:\\n=&gt; ~s\\n\" (lookup \"xyz\"))<br/>\u00a0</pre>"}, {"lang": "RapidQ", "loc": 30, "block": "<pre class=\"vb highlighted_source\">\u00a0<br/><span class=\"co1\">'Short solution: Append record and read last record<br/></span>$Include <span class=\"st0\">\"Rapidq.inc\"</span><br/>\u00a0<br/><span class=\"kw4\">dim</span> file <span class=\"kw4\">as</span> qfilestream<br/><span class=\"kw4\">dim</span> filename <span class=\"kw4\">as</span> <span class=\"kw1\">string</span><br/><span class=\"kw4\">dim</span> LogRec <span class=\"kw4\">as</span> <span class=\"kw1\">string</span><br/>\u00a0<br/><span class=\"co1\">'First create our logfile<br/></span>filename = <span class=\"st0\">\"C:\\Logfile2.txt\"</span><br/>file.<span class=\"kw4\">open</span>(filename, fmCreate)<br/>file.writeline <span class=\"st0\">\"jsmith:x:1001:1000:Joe Smith,Room 1007,(234)555-8917,(234)555-0077,<a class=\"__cf_email__\" data-cfemail=\"5f352c32362b371f2d302c3a2b2b3e3c303b3a71302d38\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>:/home/jsmith:/bin/bash\"</span><br/>file.writeline <span class=\"st0\">\"jdoe:x:1002:1000:Jane Doe,Room 1004,(234)555-8914,(234)555-0044,<a class=\"__cf_email__\" data-cfemail=\"84eee0ebe1c4f6ebf7e1f0f0e5e7ebe0e1aaebf6e3\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>:/home/jsmith:/bin/bash\"</span><br/>file.<span class=\"kw3\">close</span><br/>\u00a0<br/><span class=\"co1\">'Append record<br/></span>file.<span class=\"kw4\">open</span>(filename, fmOpenWrite)<br/>file.position = File.size<br/>file.writeline <span class=\"st0\">\"xyz:x:1003:1000:X Yz,Room 1003,(234)555-8913,(234)555-0033,<a class=\"__cf_email__\" data-cfemail=\"522a2b2812203d2137262633313d36377c3d2035\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>:/home/xyz:/bin/bash\"</span><br/>file.<span class=\"kw3\">close</span><br/>\u00a0<br/><span class=\"co1\">'Read last record<br/></span>file.<span class=\"kw4\">open</span> (filename, fmOpenRead)<br/><span class=\"kw3\">while</span> <span class=\"kw3\">not</span> file.EOF<br/>    LogRec = File.Readline<br/>wend<br/>file.<span class=\"kw3\">close</span><br/>\u00a0<br/>showmessage <span class=\"st0\">\"Appended record: \"</span> + LogRec <br/>\u00a0</pre>"}, {"lang": "REXX", "loc": 36, "block": "<pre class=\"rexx highlighted_source\"><span class=\"coMULTI\">/*REXX program  writes (appends) two records,  closes the file,  appends another record.*/</span><br/>tFID= <span class=\"st0\">'PASSWD.TXT'</span>                               <span class=\"coMULTI\">/*define the name of the  output  file.*/</span><br/><span class=\"kw1\">call</span> <span class=\"kw6\">lineout</span> tFID                                <span class=\"coMULTI\">/*close the output file,  just in case,*/</span><br/>                                                 <span class=\"coMULTI\">/*   it could be open from calling pgm.*/</span><br/><span class=\"kw1\">call</span> writeRec tFID,,                             <span class=\"coMULTI\">/*append the  1st record  to the file. */</span><br/>   <span class=\"st0\">'jsmith'</span>,<span class=\"st0\">\"x\"</span>, <span class=\"nu0\">1001</span>, <span class=\"nu0\">1000</span>, <span class=\"st0\">'Joe Smith,Room 1007,(234)555-8917,(234)555-0077,<a class=\"__cf_email__\" data-cfemail=\"761c051b1f021e36041905130202171519121358190411\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>'</span>, <span class=\"st0\">\"/home/jsmith\"</span>, <span class=\"st0\">'/bin/bash'</span><br/>\u00a0<br/><span class=\"kw1\">call</span> writeRec tFID,,                             <span class=\"coMULTI\">/*append the  2nd record  to the file. */</span><br/>   <span class=\"st0\">'jdoe'</span>,  <span class=\"st0\">\"x\"</span>, <span class=\"nu0\">1002</span>, <span class=\"nu0\">1000</span>, <span class=\"st0\">'Jane Doe,Room 1004,(234)555-8914,(234)555-0044,<a class=\"__cf_email__\" data-cfemail=\"8ce6e8e3e9ccfee3ffe9f8f8edefe3e8e9a2e3feeb\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>'</span>,    <span class=\"st0\">\"/home/jsmith\"</span>, <span class=\"st0\">'/bin/bash'</span><br/>\u00a0<br/><span class=\"kw1\">call</span> <span class=\"kw6\">lineout</span> fid                                 <span class=\"coMULTI\">/*close the outfile  (just to be tidy).*/</span><br/>\u00a0<br/><span class=\"kw1\">call</span> writeRec tFID,,                             <span class=\"coMULTI\">/*append the  3rd record  to the file. */</span><br/>   <span class=\"st0\">'xyz'</span>,   <span class=\"st0\">\"x\"</span>, <span class=\"nu0\">1003</span>, <span class=\"nu0\">1000</span>, <span class=\"st0\">'X Yz,Room 1003,(234)555-8913,(234)555-0033,<a class=\"__cf_email__\" data-cfemail=\"cab2b3b08ab8a5b9afbebeaba9a5aeafe4a5b8ad\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>'</span>,         <span class=\"st0\">\"/home/xyz\"</span>,    <span class=\"st0\">'/bin/bash'</span><br/><span class=\"coMULTI\">/*\u2500account\u2500pw\u2500\u2500\u2500\u2500uid\u2500\u2500\u2500gid\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500fullname,office,extension,homephone,Email\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500directory\u2500\u2500\u2500\u2500\u2500\u2500\u2500shell\u2500\u2500*/</span><br/>\u00a0<br/><span class=\"kw1\">call</span> <span class=\"kw6\">lineout</span> fid                                 <span class=\"coMULTI\">/*\"be safe\" programming: close the file*/</span><br/><span class=\"kw1\">exit</span>                                             <span class=\"coMULTI\">/*stick a fork in it,  we're all done. */</span><br/><span class=\"coMULTI\">/*\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500*/</span><br/>s:   <span class=\"kw1\">if</span> <span class=\"kw1\">arg</span><span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"br0\">)</span>==<span class=\"nu0\">1</span>  <span class=\"kw3\">then</span> <span class=\"kw1\">return</span> <span class=\"kw1\">arg</span><span class=\"br0\">(</span><span class=\"nu0\">3</span><span class=\"br0\">)</span>;       <span class=\"kw1\">return</span> <span class=\"kw6\">word</span><span class=\"br0\">(</span><span class=\"kw1\">arg</span><span class=\"br0\">(</span><span class=\"nu0\">2</span><span class=\"br0\">)</span> <span class=\"st0\">'s'</span>, <span class=\"nu0\">1</span><span class=\"br0\">)</span>     <span class=\"coMULTI\">/*pluralizer*/</span><br/><span class=\"coMULTI\">/*\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500*/</span><br/>writeRec: <span class=\"kw1\">parse</span> <span class=\"kw1\">arg</span> fid,_                        <span class=\"coMULTI\">/*get the fileID, and also the 1st arg.*/</span><br/>          sep=<span class=\"st0\">':'</span>                                <span class=\"coMULTI\">/*field delimiter used in file, it \u00b7\u00b7\u00b7 */</span><br/>                                                 <span class=\"coMULTI\">/*      \u00b7\u00b7\u00b7 can be unique and any size.*/</span><br/>                       <span class=\"kw1\">do</span> i=<span class=\"nu0\">3</span>  <span class=\"kw2\">to</span> <span class=\"kw1\">arg</span><span class=\"br0\">(</span><span class=\"br0\">)</span>          <span class=\"coMULTI\">/*get each argument and append it to   */</span><br/>                       _=_ <span class=\"sy0\">||</span> sep <span class=\"sy0\">||</span> <span class=\"kw1\">arg</span><span class=\"br0\">(</span>i<span class=\"br0\">)</span>      <span class=\"coMULTI\">/*  the previous arg, with a  \u00a0:   sep.*/</span><br/>                       <span class=\"kw3\">end</span>   <span class=\"coMULTI\">/*i*/</span><br/>\u00a0<br/>                       <span class=\"kw1\">do</span> tries=<span class=\"nu0\">0</span>  <span class=\"kw2\">for</span> <span class=\"nu0\">11</span>        <span class=\"coMULTI\">/*keep trying for  66  seconds.        */</span><br/>                       r=<span class=\"kw6\">lineout</span><span class=\"br0\">(</span>fid, _<span class=\"br0\">)</span>         <span class=\"coMULTI\">/*write (append)  the new record.      */</span><br/>                       <span class=\"kw1\">if</span> r==<span class=\"nu0\">0</span>  <span class=\"kw3\">then</span> <span class=\"kw1\">return</span>      <span class=\"coMULTI\">/*Zero?   Then record was written.     */</span><br/>                       <span class=\"kw1\">call</span> sleep tries          <span class=\"coMULTI\">/*Error?  So try again after a delay.  */</span><br/>                       <span class=\"kw3\">end</span>   <span class=\"coMULTI\">/*tries*/</span>           <span class=\"coMULTI\">/*Note:  not all REXXes have  SLEEP.   */</span><br/>\u00a0<br/>          <span class=\"kw1\">say</span> <span class=\"st0\">'***error***'</span>;  <span class=\"kw1\">say</span> r  <span class=\"st0\">'record'</span>s<span class=\"br0\">(</span>r<span class=\"br0\">)</span>   <span class=\"st0\">\"not written to file\"</span>   fid;   <span class=\"kw1\">exit</span> <span class=\"nu0\">13</span><br/>          <span class=\"coMULTI\">/*some error causes: no write access, disk is full, file lockout, no authority*/</span></pre>"}, {"lang": "Ruby", "loc": 36, "block": "<pre class=\"ruby highlighted_source\">Gecos = <span class=\"kw4\">Struct</span>.<span class=\"me1\">new</span> <span class=\"re3\">:fullname</span>, <span class=\"re3\">:office</span>, <span class=\"re3\">:extension</span>, <span class=\"re3\">:homephone</span>, <span class=\"re3\">:email</span> <br/><span class=\"kw1\">class</span> Gecos<br/>  <span class=\"kw1\">def</span> to_s<br/>    <span class=\"st0\">\"%s,%s,%s,%s,%s\"</span> <span class=\"sy0\">%</span> to_a<br/>  <span class=\"kw1\">end</span><br/><span class=\"kw1\">end</span><br/>\u00a0<br/><span class=\"co1\"># Another way define 'to_s' method</span><br/>Passwd = <span class=\"kw4\">Struct</span>.<span class=\"me1\">new</span><span class=\"br0\">(</span><span class=\"re3\">:account</span>, <span class=\"re3\">:password</span>, <span class=\"re3\">:uid</span>, <span class=\"re3\">:gid</span>, <span class=\"re3\">:gecos</span>, <span class=\"re3\">:directory</span>, <span class=\"re3\">:shell</span><span class=\"br0\">)</span> <span class=\"kw1\">do</span><br/>  <span class=\"kw1\">def</span> to_s<br/>    to_a.<span class=\"me1\">join</span><span class=\"br0\">(</span><span class=\"st0\">':'</span><span class=\"br0\">)</span><br/>  <span class=\"kw1\">end</span><br/><span class=\"kw1\">end</span><br/>\u00a0<br/>jsmith = Passwd.<span class=\"me1\">new</span><span class=\"br0\">(</span><span class=\"st0\">'jsmith'</span>,<span class=\"st0\">'x'</span>,<span class=\"nu0\">1001</span>, <span class=\"nu0\">1000</span>, Gecos.<span class=\"me1\">new</span><span class=\"br0\">(</span><span class=\"st0\">'Joe Smith'</span>, <span class=\"st0\">'Room 1007'</span>, <span class=\"st0\">'(234)555-8917'</span>, <span class=\"st0\">'(234)555-0077'</span>, <span class=\"st0\">'<a class=\"__cf_email__\" data-cfemail=\"a5cfd6c8ccd1cde5d7cad6c0d1d1c4c6cac1c08bcad7c2\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>'</span><span class=\"br0\">)</span>, <span class=\"st0\">'/home/jsmith'</span>, <span class=\"st0\">'/bin/bash'</span><span class=\"br0\">)</span><br/>jdoe = Passwd.<span class=\"me1\">new</span><span class=\"br0\">(</span><span class=\"st0\">'jdoe'</span>,<span class=\"st0\">'x'</span>,<span class=\"nu0\">1002</span>, <span class=\"nu0\">1000</span>, Gecos.<span class=\"me1\">new</span><span class=\"br0\">(</span><span class=\"st0\">'Jane Doe'</span>, <span class=\"st0\">'Room 1004'</span>, <span class=\"st0\">'(234)555-8914'</span>, <span class=\"st0\">'(234)555-0044'</span>, <span class=\"st0\">'<a class=\"__cf_email__\" data-cfemail=\"8be1efe4eecbf9e4f8eeffffeae8e4efeea5e4f9ec\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>'</span><span class=\"br0\">)</span>, <span class=\"st0\">'/home/jdoe'</span>, <span class=\"st0\">'/bin/bash'</span><span class=\"br0\">)</span><br/>xyz = Passwd.<span class=\"me1\">new</span><span class=\"br0\">(</span><span class=\"st0\">'xyz'</span>,<span class=\"st0\">'x'</span>,<span class=\"nu0\">1003</span>, <span class=\"nu0\">1000</span>, Gecos.<span class=\"me1\">new</span><span class=\"br0\">(</span><span class=\"st0\">'X Yz'</span>, <span class=\"st0\">'Room 1003'</span>, <span class=\"st0\">'(234)555-8913'</span>, <span class=\"st0\">'(234)555-0033'</span>, <span class=\"st0\">'<a class=\"__cf_email__\" data-cfemail=\"562e2f2c16243925332222373539323378392431\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>'</span><span class=\"br0\">)</span>, <span class=\"st0\">'/home/xyz'</span>, <span class=\"st0\">'/bin/bash'</span><span class=\"br0\">)</span><br/>\u00a0<br/>filename = <span class=\"st0\">'append.records.test'</span><br/>\u00a0<br/><span class=\"co1\"># create the passwd file with two records</span><br/><span class=\"kw4\">File</span>.<span class=\"kw3\">open</span><span class=\"br0\">(</span>filename, <span class=\"st0\">'w'</span><span class=\"br0\">)</span> <span class=\"kw1\">do</span> <span class=\"sy0\">|</span>io<span class=\"sy0\">|</span><br/>  io.<span class=\"kw3\">puts</span> jsmith<br/>  io.<span class=\"kw3\">puts</span> jdoe<br/><span class=\"kw1\">end</span><br/>\u00a0<br/><span class=\"kw3\">puts</span> <span class=\"st0\">\"before appending:\"</span><br/><span class=\"kw3\">puts</span> <span class=\"kw4\">File</span>.<span class=\"kw3\">readlines</span><span class=\"br0\">(</span>filename<span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"co1\"># append the third record</span><br/><span class=\"kw4\">File</span>.<span class=\"kw3\">open</span><span class=\"br0\">(</span>filename, <span class=\"st0\">'a'</span><span class=\"br0\">)</span> <span class=\"kw1\">do</span> <span class=\"sy0\">|</span>io<span class=\"sy0\">|</span><br/>  io.<span class=\"kw3\">puts</span> xyz<br/><span class=\"kw1\">end</span><br/>\u00a0<br/><span class=\"kw3\">puts</span> <span class=\"st0\">\"after appending:\"</span><br/><span class=\"kw3\">puts</span> <span class=\"kw4\">File</span>.<span class=\"kw3\">readlines</span><span class=\"br0\">(</span>filename<span class=\"br0\">)</span></pre>"}, {"lang": "Scala", "loc": 56, "block": "<pre class=\"scala highlighted_source\"><a href=\"http://scala-lang.org\"><span class=\"kw1\">import</span></a> java.<span class=\"me1\">io</span>.<span class=\"br0\">{</span>File, FileWriter, IOException<span class=\"br0\">}</span><br/><a href=\"http://scala-lang.org\"><span class=\"kw1\">import</span></a> scala.<span class=\"me1\">io</span>.<span class=\"me1\">Source</span><br/>\u00a0<br/><a href=\"http://scala-lang.org\"><span class=\"kw1\">object</span></a> RecordAppender <a href=\"http://scala-lang.org\"><span class=\"kw1\">extends</span></a> App <span class=\"br0\">{</span><br/>  <a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> rawDataIt <span class=\"sy0\">=</span> Source.<span class=\"me1\">fromString</span><span class=\"br0\">(</span>rawData<span class=\"br0\">)</span>.<span class=\"me1\">getLines</span><span class=\"br0\">(</span><span class=\"br0\">)</span><br/>\u00a0<br/>  <a href=\"http://scala-lang.org\"><span class=\"kw1\">def</span></a> writeStringToFile<span class=\"br0\">(</span>file<span class=\"sy0\">:</span> File, data<span class=\"sy0\">:</span> String, appending<span class=\"sy0\">:</span> Boolean <span class=\"sy0\">=</span> <a href=\"http://scala-lang.org\"><span class=\"kw1\">false</span></a><span class=\"br0\">)</span> <span class=\"sy0\">=</span><br/>    using<span class=\"br0\">(</span><a href=\"http://scala-lang.org\"><span class=\"kw1\">new</span></a> FileWriter<span class=\"br0\">(</span>file, appending<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">(</span><span class=\"sy0\">_</span>.<span class=\"me1\">write</span><span class=\"br0\">(</span>data<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\u00a0<br/>  <a href=\"http://scala-lang.org\"><span class=\"kw1\">def</span></a> using<span class=\"br0\">[</span>A <span class=\"sy0\">&lt;:</span> <span class=\"br0\">{</span><a href=\"http://scala-lang.org\"><span class=\"kw1\">def</span></a> close<span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"sy0\">:</span> Unit<span class=\"br0\">}</span>, B<span class=\"br0\">]</span><span class=\"br0\">(</span>resource<span class=\"sy0\">:</span> A<span class=\"br0\">)</span><span class=\"br0\">(</span>f<span class=\"sy0\">:</span> A <span class=\"sy0\">=&gt;</span> B<span class=\"br0\">)</span><span class=\"sy0\">:</span> B <span class=\"sy0\">=</span><br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">try</span></a> f<span class=\"br0\">(</span>resource<span class=\"br0\">)</span> <a href=\"http://scala-lang.org\"><span class=\"kw1\">finally</span></a> resource.<span class=\"me1\">close</span><span class=\"br0\">(</span><span class=\"br0\">)</span><br/>\u00a0<br/>  <a href=\"http://scala-lang.org\"><span class=\"kw1\">def</span></a> rawData <span class=\"sy0\">=</span><br/>    <span class=\"st0\">\"\"</span><span class=\"st0\">\"jsmith:x:1001:1000:Joe Smith,Room 1007,(234)555-8917,(234)555-0077,<a class=\"__cf_email__\" data-cfemail=\"3b514856524f537b4954485e4f4f5a58545f5e1554495c\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>:/home/jsmith:/bin/bash<br/>      |jdoe:x:1002:1000:Jane Doe,Room 1004,(234)555-8914,(234)555-0044,<a class=\"__cf_email__\" data-cfemail=\"09636d666c497b667a6c7d7d686a666d6c27667b6e\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>:/home/jdoe:/bin/bash<br/>      |xyz:x:1003:1000:X Yz,Room 1003,(234)555-8913,(234)555-0033,<a class=\"__cf_email__\" data-cfemail=\"1c6465665c6e736f7968687d7f73787932736e7b\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>:/home/xyz:/bin/bash\"</span><span class=\"st0\">\"\"</span>.<span class=\"me1\">stripMargin</span><br/>\u00a0<br/>  <a href=\"http://scala-lang.org\"><span class=\"kw1\">case</span></a> <a href=\"http://scala-lang.org\"><span class=\"kw1\">class</span></a> Record<span class=\"br0\">(</span>account<span class=\"sy0\">:</span> String,<br/>                    password<span class=\"sy0\">:</span> String,<br/>                    uid<span class=\"sy0\">:</span> Int,<br/>                    gid<span class=\"sy0\">:</span> Int,<br/>                    gecos<span class=\"sy0\">:</span> Array<span class=\"br0\">[</span>String<span class=\"br0\">]</span>,<br/>                    directory<span class=\"sy0\">:</span> String,<br/>                    shell<span class=\"sy0\">:</span> String<span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">def</span></a> asLine<span class=\"sy0\">:</span> String <span class=\"sy0\">=</span> s<span class=\"st0\">\"$account:$password:$uid:$gid:${gecos.mkString(\"</span>,<span class=\"st0\">\")}:$directory:$shell<span class=\"es1\">\\n</span>\"</span><br/>  <span class=\"br0\">}</span><br/>\u00a0<br/>  <a href=\"http://scala-lang.org\"><span class=\"kw1\">object</span></a> Record <span class=\"br0\">{</span><br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">def</span></a> apply<span class=\"br0\">(</span>line<span class=\"sy0\">:</span> String<span class=\"br0\">)</span><span class=\"sy0\">:</span> Record <span class=\"sy0\">=</span> <span class=\"br0\">{</span><br/>      <a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> token <span class=\"sy0\">=</span> line.<span class=\"me1\">trim</span>.<span class=\"me1\">split</span><span class=\"br0\">(</span><span class=\"st0\">\":\"</span><span class=\"br0\">)</span><br/>      require<span class=\"br0\">(</span><span class=\"br0\">(</span>token <span class=\"sy0\">!=</span> <a href=\"http://scala-lang.org\"><span class=\"kw1\">null</span></a><span class=\"br0\">)</span> || <span class=\"br0\">(</span>token.<span class=\"me1\">length</span> <span class=\"sy0\">==</span> <span class=\"nu0\">7</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>      <a href=\"http://scala-lang.org\"><span class=\"kw1\">this</span></a><span class=\"br0\">(</span>token<span class=\"br0\">(</span><span class=\"nu0\">0</span><span class=\"br0\">)</span>.<span class=\"me1\">trim</span>,<br/>        token<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"br0\">)</span>.<span class=\"me1\">trim</span>,<br/>        Integer.<span class=\"me1\">parseInt</span><span class=\"br0\">(</span>token<span class=\"br0\">(</span><span class=\"nu0\">2</span><span class=\"br0\">)</span>.<span class=\"me1\">trim</span><span class=\"br0\">)</span>,<br/>        Integer.<span class=\"me1\">parseInt</span><span class=\"br0\">(</span>token<span class=\"br0\">(</span><span class=\"nu0\">3</span><span class=\"br0\">)</span>.<span class=\"me1\">trim</span><span class=\"br0\">)</span>,<br/>        token<span class=\"br0\">(</span><span class=\"nu0\">4</span><span class=\"br0\">)</span>.<span class=\"me1\">split</span><span class=\"br0\">(</span><span class=\"st0\">\",\"</span><span class=\"br0\">)</span>,<br/>        token<span class=\"br0\">(</span><span class=\"nu0\">5</span><span class=\"br0\">)</span>.<span class=\"me1\">trim</span>,<br/>        token<span class=\"br0\">(</span><span class=\"nu0\">6</span><span class=\"br0\">)</span>.<span class=\"me1\">trim</span><span class=\"br0\">)</span><br/>    <span class=\"br0\">}</span><br/>  <span class=\"br0\">}</span><br/>\u00a0<br/>  <a href=\"http://scala-lang.org\"><span class=\"kw1\">try</span></a> <span class=\"br0\">{</span><br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> file <span class=\"sy0\">=</span> File.<span class=\"me1\">createTempFile</span><span class=\"br0\">(</span><span class=\"st0\">\"_rosetta\"</span>, <span class=\"st0\">\".passwd\"</span><span class=\"br0\">)</span><br/>    using<span class=\"br0\">(</span><a href=\"http://scala-lang.org\"><span class=\"kw1\">new</span></a> FileWriter<span class=\"br0\">(</span>file<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">(</span>writer <span class=\"sy0\">=&gt;</span> rawDataIt.<span class=\"me1\">take</span><span class=\"br0\">(</span><span class=\"nu0\">2</span><span class=\"br0\">)</span>.<span class=\"me1\">foreach</span><span class=\"br0\">(</span>line <span class=\"sy0\">=&gt;</span> writer.<span class=\"me1\">write</span><span class=\"br0\">(</span>Record<span class=\"br0\">(</span>line<span class=\"br0\">)</span>.<span class=\"me1\">asLine</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\u00a0<br/>    writeStringToFile<span class=\"br0\">(</span>file, Record<span class=\"br0\">(</span>rawDataIt.<span class=\"me1\">next</span><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"br0\">)</span>.<span class=\"me1\">asLine</span>, appending <span class=\"sy0\">=</span> <a href=\"http://scala-lang.org\"><span class=\"kw1\">true</span></a><span class=\"br0\">)</span> <span class=\"co1\">// Append a record</span><br/>\u00a0<br/>    Source.<span class=\"me1\">fromFile</span><span class=\"br0\">(</span>file<span class=\"br0\">)</span>.<span class=\"me1\">getLines</span><span class=\"br0\">(</span><span class=\"br0\">)</span>.<span class=\"me1\">foreach</span><span class=\"br0\">(</span>line <span class=\"sy0\">=&gt;</span> <span class=\"br0\">{</span><br/>      <a href=\"http://scala-lang.org\"><span class=\"kw1\">if</span></a> <span class=\"br0\">(</span>line startsWith <span class=\"st0\">\"\"</span><span class=\"st0\">\"xyz\"</span><span class=\"st0\">\"\"</span><span class=\"br0\">)</span> print<span class=\"br0\">(</span>s<span class=\"st0\">\"Selected record: ${Record(line).asLine}\"</span><span class=\"br0\">)</span><br/>    <span class=\"br0\">}</span><span class=\"br0\">)</span><br/>    scala.<span class=\"me1\">compat</span>.<span class=\"me1\">Platform</span>.<span class=\"me1\">collectGarbage</span><span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"co1\">// JVM Windows related bug workaround JDK-4715154</span><br/>    file.<span class=\"me1\">deleteOnExit</span><span class=\"br0\">(</span><span class=\"br0\">)</span><br/>  <span class=\"br0\">}</span> <a href=\"http://scala-lang.org\"><span class=\"kw1\">catch</span></a> <span class=\"br0\">{</span><br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">case</span></a> e<span class=\"sy0\">:</span> IOException <span class=\"sy0\">=&gt;</span> println<span class=\"br0\">(</span>s<span class=\"st0\">\"Running Example failed: ${e.getMessage}\"</span><span class=\"br0\">)</span><br/>  <span class=\"br0\">}</span><br/><span class=\"br0\">}</span> <span class=\"co1\">// 57 lines</span></pre>"}, {"lang": "Sidef", "loc": 98, "block": "<pre class=\"ruby highlighted_source\">define <span class=\"br0\">(</span><br/>    RECORD_FIELDS = <span class=\"sy0\">%</span>w<span class=\"br0\">(</span>account password UID GID GECOS directory shell<span class=\"br0\">)</span>,<br/>    GECOS_FIELDS  = <span class=\"sy0\">%</span>w<span class=\"br0\">(</span>fullname office extension homephone email<span class=\"br0\">)</span>,<br/>    RECORD_SEP    = <span class=\"st0\">':'</span>,<br/>    GECOS_SEP     = <span class=\"st0\">','</span>,<br/>    PASSWD_FILE   = <span class=\"st0\">'passwd.txt'</span>,<br/><span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"co1\"># here's our three records</span><br/>var records_to_write = <span class=\"br0\">[</span><br/>    <span class=\"kw4\">Hash</span><span class=\"br0\">(</span><br/>        account  <span class=\"sy0\">=&gt;</span> <span class=\"st0\">'jsmith'</span>,<br/>        password <span class=\"sy0\">=&gt;</span> <span class=\"st0\">'x'</span>,<br/>        UID      <span class=\"sy0\">=&gt;</span> <span class=\"nu0\">1001</span>,<br/>        GID      <span class=\"sy0\">=&gt;</span> <span class=\"nu0\">1000</span>,<br/>        GECOS    <span class=\"sy0\">=&gt;</span> <span class=\"kw4\">Hash</span><span class=\"br0\">(</span><br/>            fullname  <span class=\"sy0\">=&gt;</span> <span class=\"st0\">'John Smith'</span>,<br/>            office    <span class=\"sy0\">=&gt;</span> <span class=\"st0\">'Room 1007'</span>,<br/>            extension <span class=\"sy0\">=&gt;</span> <span class=\"st0\">'(234)555-8917'</span>,<br/>            homephone <span class=\"sy0\">=&gt;</span> <span class=\"st0\">'(234)555-0077'</span>,<br/>            email     <span class=\"sy0\">=&gt;</span> <span class=\"st0\">'<a class=\"__cf_email__\" data-cfemail=\"4b213826223f230b3924382e3f3f2a28242f2e6524392c\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>'</span>,<br/>        <span class=\"br0\">)</span>,<br/>        directory <span class=\"sy0\">=&gt;</span> <span class=\"st0\">'/home/jsmith'</span>,<br/>        shell     <span class=\"sy0\">=&gt;</span> <span class=\"st0\">'/bin/bash'</span>,<br/>    <span class=\"br0\">)</span>,<br/>    <span class=\"kw4\">Hash</span><span class=\"br0\">(</span><br/>        account  <span class=\"sy0\">=&gt;</span> <span class=\"st0\">'jdoe'</span>,<br/>        password <span class=\"sy0\">=&gt;</span> <span class=\"st0\">'x'</span>,<br/>        UID      <span class=\"sy0\">=&gt;</span> <span class=\"nu0\">1002</span>,<br/>        GID      <span class=\"sy0\">=&gt;</span> <span class=\"nu0\">1000</span>,<br/>        GECOS    <span class=\"sy0\">=&gt;</span> <span class=\"kw4\">Hash</span><span class=\"br0\">(</span><br/>            fullname  <span class=\"sy0\">=&gt;</span> <span class=\"st0\">'Jane Doe'</span>,<br/>            office    <span class=\"sy0\">=&gt;</span> <span class=\"st0\">'Room 1004'</span>,<br/>            extension <span class=\"sy0\">=&gt;</span> <span class=\"st0\">'(234)555-8914'</span>,<br/>            homephone <span class=\"sy0\">=&gt;</span> <span class=\"st0\">'(234)555-0044'</span>,<br/>            email     <span class=\"sy0\">=&gt;</span> <span class=\"st0\">'<a class=\"__cf_email__\" data-cfemail=\"274d43484267554854425353464448434209485540\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>'</span>,<br/>        <span class=\"br0\">)</span>,<br/>        directory <span class=\"sy0\">=&gt;</span> <span class=\"st0\">'/home/jdoe'</span>,<br/>        shell     <span class=\"sy0\">=&gt;</span> <span class=\"st0\">'/bin/bash'</span>,<br/>    <span class=\"br0\">)</span>,<br/><span class=\"br0\">]</span>;<br/>\u00a0<br/>var record_to_append = <span class=\"kw4\">Hash</span><span class=\"br0\">(</span><br/>    account  <span class=\"sy0\">=&gt;</span> <span class=\"st0\">'xyz'</span>,<br/>    password <span class=\"sy0\">=&gt;</span> <span class=\"st0\">'x'</span>,<br/>    UID      <span class=\"sy0\">=&gt;</span> <span class=\"nu0\">1003</span>,<br/>    GID      <span class=\"sy0\">=&gt;</span> <span class=\"nu0\">1000</span>,<br/>    GECOS    <span class=\"sy0\">=&gt;</span> <span class=\"kw4\">Hash</span><span class=\"br0\">(</span><br/>        fullname  <span class=\"sy0\">=&gt;</span> <span class=\"st0\">'X Yz'</span>,<br/>        office    <span class=\"sy0\">=&gt;</span> <span class=\"st0\">'Room 1003'</span>,<br/>        extension <span class=\"sy0\">=&gt;</span> <span class=\"st0\">'(234)555-8913'</span>,<br/>        homephone <span class=\"sy0\">=&gt;</span> <span class=\"st0\">'(234)555-0033'</span>,<br/>        email     <span class=\"sy0\">=&gt;</span> <span class=\"st0\">'<a class=\"__cf_email__\" data-cfemail=\"7b0302013b0914081e0f0f1a18141f1e5514091c\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>'</span>,<br/>    <span class=\"br0\">)</span>,<br/>    directory <span class=\"sy0\">=&gt;</span> <span class=\"st0\">'/home/xyz'</span>,<br/>    shell     <span class=\"sy0\">=&gt;</span> <span class=\"st0\">'/bin/bash'</span>,<br/><span class=\"br0\">)</span>;<br/>\u00a0<br/>func record_to_string<span class=\"br0\">(</span>rec, sep = RECORD_SEP, fields = RECORD_FIELDS<span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>    gather <span class=\"br0\">{</span><br/>        fields.<span class=\"me1\">each</span> <span class=\"br0\">{</span> <span class=\"sy0\">|</span>field<span class=\"sy0\">|</span><br/>            var r = rec<span class=\"br0\">{</span>field<span class=\"br0\">}</span> \\\\ die <span class=\"st0\">\"Field #{field} not found\"</span><br/>            take<span class=\"br0\">(</span>field == <span class=\"st0\">'GECOS'</span>\u00a0? record_to_string<span class=\"br0\">(</span>r, GECOS_SEP, GECOS_FIELDS<span class=\"br0\">)</span><br/>                                 \u00a0: r<span class=\"br0\">)</span><br/>        <span class=\"br0\">}</span><br/>    <span class=\"br0\">}</span>.<span class=\"me1\">join</span><span class=\"br0\">(</span>sep<span class=\"br0\">)</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/>func write_records_to_file<span class=\"br0\">(</span>records, filename = PASSWD_FILE, append = <span class=\"kw2\">false</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>    <span class=\"kw4\">File</span><span class=\"br0\">(</span>filename<span class=\"br0\">)</span>.<span class=\"br0\">(</span>append\u00a0? <span class=\"re3\">:open_a</span>\u00a0: <span class=\"re3\">:open_w</span><span class=\"br0\">)</span><span class=\"br0\">(</span>\\var fh, \\var err<span class=\"br0\">)</span><br/>    err <span class=\"sy0\">&amp;&amp;</span> die <span class=\"st0\">\"Can't open #{filename}: #{err}\"</span>;<br/>    fh.<span class=\"me1\">flock</span><span class=\"br0\">(</span><span class=\"kw4\">File</span>.<span class=\"me1\">LOCK_EX</span><span class=\"br0\">)</span> <span class=\"sy0\">||</span> die <span class=\"st0\">\"Can't lock #{filename}: $!\"</span><br/>    fh.<span class=\"me1\">seek</span><span class=\"br0\">(</span><span class=\"nu0\">0</span>, <span class=\"kw4\">File</span>.<span class=\"me1\">SEEK_END</span><span class=\"br0\">)</span> <span class=\"sy0\">||</span> die <span class=\"st0\">\"Can't seek #{filename}: $!\"</span><br/>    records.<span class=\"me1\">each</span> <span class=\"br0\">{</span> <span class=\"sy0\">|</span>record<span class=\"sy0\">|</span> fh.<span class=\"me1\">say</span><span class=\"br0\">(</span>record_to_string<span class=\"br0\">(</span>record<span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"br0\">}</span><br/>    fh.<span class=\"me1\">flock</span><span class=\"br0\">(</span><span class=\"kw4\">File</span>.<span class=\"me1\">LOCK_UN</span><span class=\"br0\">)</span> <span class=\"sy0\">||</span> die <span class=\"st0\">\"Can't unlock #{filename}: $!\"</span><br/>    fh.<span class=\"me1\">close</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"co1\"># write two records to file</span><br/>write_records_to_file<span class=\"br0\">(</span>records: records_to_write<span class=\"br0\">)</span>;<br/>\u00a0<br/><span class=\"co1\"># append one more record to file</span><br/>write_records_to_file<span class=\"br0\">(</span>records: <span class=\"br0\">[</span>record_to_append<span class=\"br0\">]</span>, append: <span class=\"kw2\">true</span><span class=\"br0\">)</span>;<br/>\u00a0<br/><span class=\"co1\"># test</span><br/>\u00a0<br/><span class=\"kw4\">File</span><span class=\"br0\">(</span>PASSWD_FILE<span class=\"br0\">)</span>.<span class=\"me1\">open_r</span><span class=\"br0\">(</span>\\var fh, \\var err<span class=\"br0\">)</span><br/>err <span class=\"sy0\">&amp;&amp;</span> die <span class=\"st0\">\"Can't open file #{PASSWD_FILE}: #{err}\"</span><br/>var lines = fh.<span class=\"me1\">lines</span><br/>\u00a0<br/><span class=\"co1\"># There should be more than one line</span><br/>assert<span class=\"br0\">(</span>lines.<span class=\"me1\">len</span> <span class=\"sy0\">&gt;</span> <span class=\"nu0\">1</span><span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"co1\"># Check the last line</span><br/>assert_eq<span class=\"br0\">(</span>lines<span class=\"br0\">[</span><span class=\"sy0\">-</span><span class=\"nu0\">1</span><span class=\"br0\">]</span>, <span class=\"st0\">'xyz:x:1003:1000:X Yz,Room 1003,(234)555-8913,'</span> <span class=\"sy0\">+</span><br/>                     <span class=\"st0\">'(234)555-0033,<a class=\"__cf_email__\" data-cfemail=\"a0d8d9dae0d2cfd3c5d4d4c1c3cfc4c58ecfd2c7\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>:/home/xyz:/bin/bash'</span><span class=\"br0\">)</span><br/>\u00a0<br/>say <span class=\"st0\">\"** Test passed!\"</span></pre>"}, {"lang": "Tcl", "loc": 85, "block": "<pre class=\"tcl highlighted_source\"><span class=\"co1\"># Model the data as nested lists, as that is a natural fit for Tcl</span><br/><span class=\"kw1\">set</span> basicRecords <span class=\"br0\">{</span><br/>    <span class=\"br0\">{</span><br/>\tjsmith<br/>\tx<br/>\t<span class=\"nu0\">1001</span><br/>\t<span class=\"nu0\">1000</span><br/>\t<span class=\"br0\">{</span><br/>\t    <span class=\"br0\">{</span>Joe Smith<span class=\"br0\">}</span><br/>\t    <span class=\"br0\">{</span>Room <span class=\"nu0\">1007</span><span class=\"br0\">}</span><br/>\t    <span class=\"br0\">(</span><span class=\"nu0\">234</span><span class=\"br0\">)</span><span class=\"nu0\">555</span>-<span class=\"nu0\">8917</span><br/>\t    <span class=\"br0\">(</span><span class=\"nu0\">234</span><span class=\"br0\">)</span><span class=\"nu0\">555</span>-0077<br/>\t    <a class=\"__cf_email__\" data-cfemail=\"9ff5ecf2f6ebf7dfedf0ecfaebebfefcf0fbfab1f0edf8\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a><br/>\t<span class=\"br0\">}</span><br/>\t/home/jsmith<br/>\t/bin/bash<br/>    <span class=\"br0\">}</span><br/>    <span class=\"br0\">{</span><br/>\tjdoe<br/>\tx<br/>\t<span class=\"nu0\">1002</span><br/>\t<span class=\"nu0\">1000</span><br/>\t<span class=\"br0\">{</span><br/>\t    <span class=\"br0\">{</span>Jane Doe<span class=\"br0\">}</span><br/>\t    <span class=\"br0\">{</span>Room <span class=\"nu0\">1004</span><span class=\"br0\">}</span><br/>\t    <span class=\"br0\">(</span><span class=\"nu0\">234</span><span class=\"br0\">)</span><span class=\"nu0\">555</span>-<span class=\"nu0\">8914</span><br/>\t    <span class=\"br0\">(</span><span class=\"nu0\">234</span><span class=\"br0\">)</span><span class=\"nu0\">555</span>-0044<br/>\t    <a class=\"__cf_email__\" data-cfemail=\"4329272c2603312c3026373722202c27266d2c3124\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a><br/>\t<span class=\"br0\">}</span><br/>\t/home/jsmith<br/>\t/bin/bash<br/>    <span class=\"br0\">}</span><br/><span class=\"br0\">}</span><br/><span class=\"kw1\">set</span> addedRecords <span class=\"br0\">{</span><br/>    <span class=\"br0\">{</span><br/>\txyz<br/>\tx<br/>\t<span class=\"nu0\">1003</span><br/>\t<span class=\"nu0\">1000</span><br/>\t<span class=\"br0\">{</span><br/>\t    <span class=\"br0\">{</span>X Yz<span class=\"br0\">}</span><br/>\t    <span class=\"br0\">{</span>Room <span class=\"nu0\">1003</span><span class=\"br0\">}</span><br/>\t    <span class=\"br0\">(</span><span class=\"nu0\">234</span><span class=\"br0\">)</span><span class=\"nu0\">555</span>-<span class=\"nu0\">8913</span><br/>\t    <span class=\"br0\">(</span><span class=\"nu0\">234</span><span class=\"br0\">)</span><span class=\"nu0\">555</span>-0033<br/>\t    <a class=\"__cf_email__\" data-cfemail=\"443c3d3e04362b3721303025272b20216a2b3623\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a><br/>\t<span class=\"br0\">}</span><br/>\t/home/xyz<br/>\t/bin/bash<br/>    <span class=\"br0\">}</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"kw1\">proc</span> printRecords <span class=\"br0\">{</span>records fd<span class=\"br0\">}</span> <span class=\"br0\">{</span><br/>    <span class=\"kw2\">fconfigure</span> <span class=\"re0\">$fd</span> -buffering none<br/>    <span class=\"kw1\">foreach</span> record <span class=\"re0\">$records</span> <span class=\"br0\">{</span><br/>\t<span class=\"kw2\">lset</span> record <span class=\"nu0\">4</span> <span class=\"br0\">[</span><span class=\"kw2\">join</span> <span class=\"br0\">[</span><span class=\"kw2\">lindex</span> <span class=\"re0\">$record</span> <span class=\"nu0\">4</span><span class=\"br0\">]</span> <span class=\"st0\">\",\"</span><span class=\"br0\">]</span><br/>\t<span class=\"kw2\">puts</span> -nonewline <span class=\"re0\">$fd</span> <span class=\"br0\">[</span><span class=\"kw2\">join</span> <span class=\"re0\">$record</span> <span class=\"st0\">\":\"</span><span class=\"br0\">]</span>\\n<br/>    <span class=\"br0\">}</span><br/><span class=\"br0\">}</span><br/><span class=\"kw1\">proc</span> readRecords fd <span class=\"br0\">{</span><br/>    <span class=\"kw1\">set</span> result <span class=\"br0\">{</span><span class=\"br0\">}</span><br/>    <span class=\"kw1\">foreach</span> line <span class=\"br0\">[</span><span class=\"kw2\">split</span> <span class=\"br0\">[</span><span class=\"kw2\">read</span> <span class=\"re0\">$fd</span><span class=\"br0\">]</span> <span class=\"st0\">\"<span class=\"es0\">\\n</span>\"</span><span class=\"br0\">]</span> <span class=\"br0\">{</span><br/>\t<span class=\"kw1\">if</span> <span class=\"br0\">{</span><span class=\"re0\">$line</span> eq <span class=\"st0\">\"\"</span><span class=\"br0\">}</span> <span class=\"kw1\">continue</span><br/>\t<span class=\"kw1\">set</span> record <span class=\"br0\">[</span><span class=\"kw2\">split</span> <span class=\"re0\">$line</span> <span class=\"st0\">\":\"</span><span class=\"br0\">]</span><br/>\t<span class=\"co1\"># Special handling for GECOS</span><br/>\t<span class=\"kw2\">lset</span> record <span class=\"nu0\">4</span> <span class=\"br0\">[</span><span class=\"kw2\">split</span> <span class=\"br0\">[</span><span class=\"kw2\">lindex</span> <span class=\"re0\">$record</span> <span class=\"nu0\">4</span><span class=\"br0\">]</span> <span class=\"st0\">\",\"</span><span class=\"br0\">]</span><br/>\t<span class=\"kw2\">lappend</span> result <span class=\"re0\">$record</span><br/>    <span class=\"br0\">}</span><br/>    <span class=\"kw1\">return</span> <span class=\"re0\">$result</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"co1\"># Write basic set</span><br/><span class=\"kw1\">set</span> f <span class=\"br0\">[</span><span class=\"kw2\">open</span> ./passwd w<span class=\"br0\">]</span><br/>printRecords <span class=\"re0\">$basicRecords</span> <span class=\"re0\">$f</span><br/><span class=\"kw2\">close</span> <span class=\"re0\">$f</span><br/>\u00a0<br/><span class=\"co1\"># Append the extra ones</span><br/><span class=\"co1\"># Use {WRONLY APPEND} on Tcl 8.4</span><br/><span class=\"kw1\">set</span> f <span class=\"br0\">[</span><span class=\"kw2\">open</span> ./passwd a<span class=\"br0\">]</span><br/>printRecords <span class=\"re0\">$addedRecords</span> <span class=\"re0\">$f</span><br/><span class=\"kw2\">close</span> <span class=\"re0\">$f</span><br/>\u00a0<br/><span class=\"kw1\">set</span> f <span class=\"br0\">[</span><span class=\"kw2\">open</span> ./passwd<span class=\"br0\">]</span><br/><span class=\"kw1\">set</span> recs <span class=\"br0\">[</span>readRecords <span class=\"re0\">$f</span><span class=\"br0\">]</span><br/><span class=\"kw2\">close</span> <span class=\"re0\">$f</span><br/><span class=\"kw2\">puts</span> <span class=\"st0\">\"last record is for [lindex $recs end 0], named [lindex $recs end 4 0]\"</span></pre>"}, {"lang": "UNIX Shell", "loc": 49, "block": "<pre class=\"bash highlighted_source\"><span class=\"re2\">rec1</span>=<span class=\"br0\">(</span><br/>    jsmith<br/>    x<br/>    <span class=\"nu0\">1001</span><br/>    <span class=\"nu0\">1000</span><br/>    <span class=\"st0\">\"Joe Smith,Room 1007,(234)555-8917,(234)555-0077,<a class=\"__cf_email__\" data-cfemail=\"0e647d63677a664e7c617d6b7a7a6f6d616a6b20617c69\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>\"</span><br/>    <span class=\"sy0\">/</span>home<span class=\"sy0\">/</span>jsmith<br/>    <span class=\"sy0\">/</span>bin<span class=\"sy0\">/</span><span class=\"kw2\">bash</span><br/><span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"re2\">rec2</span>=<span class=\"br0\">(</span><br/>    jdoe<br/>    x<br/>    <span class=\"nu0\">1002</span><br/>    <span class=\"nu0\">1000</span><br/>    <span class=\"st0\">\"Jane Doe,Room 1004,(234)555-8914,(234)555-0044,<a class=\"__cf_email__\" data-cfemail=\"ef858b808aaf9d809c8a9b9b8e8c808b8ac1809d88\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>\"</span><br/>    <span class=\"sy0\">/</span>home<span class=\"sy0\">/</span>jdoe<br/>    <span class=\"sy0\">/</span>bin<span class=\"sy0\">/</span><span class=\"kw2\">bash</span><br/><span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"re2\">rec3</span>=<span class=\"br0\">(</span><br/>    xyz<br/>    x<br/>    <span class=\"nu0\">1003</span><br/>    <span class=\"nu0\">1000</span><br/>    <span class=\"st0\">\"X Yz,Room 1003,(234)555-8913,(234)555-0033,<a class=\"__cf_email__\" data-cfemail=\"720a0b0832001d0117060613111d16175c1d0015\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>\"</span><br/>    <span class=\"sy0\">/</span>home<span class=\"sy0\">/</span>xyz<br/>    <span class=\"sy0\">/</span>bin<span class=\"sy0\">/</span><span class=\"kw2\">bash</span><br/><span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"re2\">filename</span>=.<span class=\"sy0\">/</span>passwd-ish<br/>\u00a0<br/><span class=\"co0\"># use parentheses to run the commands in a subshell, so the</span><br/><span class=\"co0\"># current shell's IFS variable is not changed</span><br/><span class=\"br0\">(</span><br/>    <span class=\"re2\">IFS</span>=:<br/>    <span class=\"kw3\">echo</span> <span class=\"st0\">\"<span class=\"es3\">${rec1[*]}</span>\"</span><br/>    <span class=\"kw3\">echo</span> <span class=\"st0\">\"<span class=\"es3\">${rec2[*]}</span>\"</span><br/><span class=\"br0\">)</span> <span class=\"sy0\">&gt;</span> <span class=\"st0\">\"<span class=\"es2\">$filename</span>\"</span><br/>\u00a0<br/><span class=\"kw3\">echo</span> before appending:<br/><span class=\"kw2\">cat</span> <span class=\"st0\">\"<span class=\"es2\">$filename</span>\"</span><br/>\u00a0<br/><span class=\"co0\"># appending, use the \"&gt;&gt;\" redirection symbol</span><br/><span class=\"re2\">IFS</span>=:<br/><span class=\"kw3\">echo</span> <span class=\"st0\">\"<span class=\"es3\">${rec3[*]}</span>\"</span> <span class=\"sy0\">&gt;&gt;</span> <span class=\"st0\">\"<span class=\"es2\">$filename</span>\"</span><br/>\u00a0<br/><span class=\"kw3\">echo</span> after appending:<br/><span class=\"kw2\">cat</span> <span class=\"st0\">\"<span class=\"es2\">$filename</span>\"</span></pre>"}, {"lang": "Ursa", "loc": 28, "block": "<pre class=\"text highlighted_source\"># ursa appends to files by default when the out function is used<br/>\u00a0<br/># create new passwd in working directory<br/>decl file f<br/>f.create \"passwd\"<br/>f.open \"passwd\"<br/>out \"account:password:UID:GID:fullname,office,extension,homephone,email:directory:shell\" endl f<br/>out \"jsmith:x:1001:1000:Joe Smith,Room 1007,(234)555-8917,(234)555-0077,<a class=\"__cf_email__\" data-cfemail=\"345e47595d405c74465b4751404055575b50511a5b4653\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>:/home/jsmith:/bin/bash\" endl f<br/>out \"jdoe:x:1002:1000:Jane Doe,Room 1004,(234)555-8914,(234)555-0044,<a class=\"__cf_email__\" data-cfemail=\"761c12191336041905130202171519121358190411\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>:/home/jdoe:/bin/bash\" endl f<br/>f.close<br/>\u00a0<br/># display the created file<br/>f.open \"passwd\"<br/>out \"initial file:\" endl console<br/>while (f.hasline)<br/>\tout (in string f) endl console<br/>end while<br/>\u00a0<br/># append the new record<br/>out \"xyz:x:1003:1000:X Yz,Room 1003,(234)555-8913,(234)555-0033,<a class=\"__cf_email__\" data-cfemail=\"bdc5c4c7fdcfd2ced8c9c9dcded2d9d893d2cfda\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>:/home/xyz:/bin/bash\" endl f<br/>f.close<br/>\u00a0<br/># output the new file contents<br/>f.open \"passwd\"<br/>out endl endl \"file after append:\" endl console<br/>while (f.hasline)<br/>\tout (in string f) endl console<br/>end while</pre>"}, {"lang": "zkl", "loc": 14, "block": "<pre class=\"text highlighted_source\">var [const] <br/>   gnames=T(\"fullname\",\"office\",\"extension\",\"homephone\",\"email\"),<br/>   pnames=T(\"account\",\"password\",\"uid\",\"gid\",\"gecos\",\"directory\",\"shell\");<br/>\u00a0<br/>class Gecos{<br/>   var fullname, office, extension, homephone, email;<br/>   fcn init(str){ gnames.zipWith(setVar,vm.arglist) }<br/>   fcn toString { gnames.apply(setVar).concat(\",\")  }<br/>}<br/>class Passwd{<br/>   var account,password,uid,gid,gecos,directory,shell;<br/>   fcn init(str){ pnames.zipWith(setVar,vm.arglist) }<br/>   fcn toString { pnames.apply(setVar).concat(\":\")  }<br/>}</pre>"}]}