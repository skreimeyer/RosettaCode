{"task": "N-queens_problem", "blocks": [{"lang": "360 Assembly", "loc": 142, "block": "<pre class=\"text highlighted_source\">*        N-QUEENS PROBLEM          04/09/2015              <br/>         MACRO <br/>&amp;LAB     XDECO  &amp;REG,&amp;TARGET<br/>&amp;LAB     B      I&amp;SYSNDX           branch around work area<br/>P&amp;SYSNDX DS     0D,PL8             packed<br/>W&amp;SYSNDX DS     CL13               char<br/>I&amp;SYSNDX CVD    &amp;REG,P&amp;SYSNDX          convert to decimal<br/>         MVC    W&amp;SYSNDX,=X'40202020202020202020212060'  nice mask<br/>         EDMK   W&amp;SYSNDX,P&amp;SYSNDX+2    edit and mark<br/>         BCTR   R1,0                   locate the right place<br/>         MVC    0(1,R1),W&amp;SYSNDX+12    move the sign<br/>         MVC    &amp;TARGET.(12),W&amp;SYSNDX  move to target<br/>         MEND<br/>NQUEENS  CSECT<br/>         SAVE   (14,12)            save registers on entry<br/>         BALR   R12,0              establish addressability<br/>         USING  *,R12              set base register<br/>         ST     R13,SAVEA+4        link mySA-&gt;prevSA<br/>         LA     R11,SAVEA          mySA<br/>         ST     R11,8(R13)         link prevSA-&gt;mySA<br/>         LR     R13,R11            set mySA pointer<br/>         LA     R7,LL              l<br/>         LA     R6,1               i=1<br/>LOOPI    LR     R1,R6              do i=1 to l<br/>         SLA    R1,1               i*2<br/>         STH    R6,A-2(R1)         a(i)=i<br/>         LA     R6,1(R6)           i=i+1<br/>         BCT    R7,LOOPI           loop do i<br/>OPENEM   OPEN   (OUTDCB,OUTPUT)    open the printer file<br/>         LA     R9,1               n=1 start of loop<br/>LOOPN    CH     R9,L               do n=1 to l<br/>         BH     ELOOPN             if n&gt;l then exit loop<br/>         SR     R8,R8              m=0<br/>         LA     R10,1              i=1<br/>         LR     R5,R9              n<br/>         SLA    R5,1               n*2<br/>         BCTR   R5,0               r=2*n-1<br/>E40      CR     R10,R9             if i&gt;n<br/>         BH     E80                then goto e80<br/>         LR     R11,R10            j=i<br/>E50      LR     R1,R10             i<br/>         SLA    R1,1               i*2<br/>         LA     R6,A-2(R1)         <a class=\"__cf_email__\" data-cfemail=\"c4b6f2f984a5\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>(i)<br/>         LR     R1,R11             j<br/>         SLA    R1,1               j*2<br/>         LA     R7,A-2(R1)         <a class=\"__cf_email__\" data-cfemail=\"4f3d78720f2e\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>(j)<br/>         MVC    Z,0(R6)            z=a(i)<br/>         MVC    Y,0(R7)            y=a(j)<br/>         LR     R3,R10             i<br/>         SH     R3,Y               -y<br/>         AR     R3,R9              p=i-y+n<br/>         LR     R4,R10             i<br/>         AH     R4,Y               +y<br/>         BCTR   R4,0               q=i+y-1<br/>         MVC    0(2,R6),Y          a(i)=y<br/>         MVC    0(2,R7),Z          a(j)=z<br/>         LR     R1,R3              p<br/>         SLA    R1,1               p*2<br/>         LH     R2,U-2(R1)         u(p)<br/>         LTR    R2,R2              if u(p)&lt;&gt;0<br/>         BNE    E60                then goto e60<br/>         LR     R1,R4              q<br/>         AR     R1,R5              q+r<br/>         SLA    R1,1               (q+r)*2<br/>         LH     R2,U-2(R1)         u(q+r)<br/>         C      R2,=F'0'           if u(q+r)&lt;&gt;0<br/>         BNE    E60                then goto e60<br/>         LR     R1,R10             i<br/>         SLA    R1,1               i*2<br/>         STH    R11,S-2(R1)        s(i)=j<br/>         LA     R0,1               r0=1<br/>         LR     R1,R3              p<br/>         SLA    R1,1               p*2<br/>         STH    R0,U-2(R1)         u(p)=1<br/>         LR     R1,R4              q<br/>         AR     R1,R5              q+r<br/>         SLA    R1,1               (q+r)*2<br/>         STH    R0,U-2(R1)         u(q+r)=1<br/>         LA     R10,1(R10)         i=i+1<br/>         B      E40                goto e40<br/>E60      LA     R11,1(R11)         j=j+1<br/>         CR     R11,R9             if j&lt;=n<br/>         BNH    E50                then goto e50<br/>E70      BCTR   R11,0              j=j-1<br/>         CR     R11,R10            if j=i<br/>         BE     E90                goto e90<br/>         LR     R1,R10             i<br/>         SLA    R1,1               i*2<br/>         LA     R6,A-2(R1)         <a class=\"__cf_email__\" data-cfemail=\"ed9fdbd0ad8c\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>(i)<br/>         LR     R1,R11             j<br/>         SLA    R1,1               j*2<br/>         LA     R7,A-2(R1)         <a class=\"__cf_email__\" data-cfemail=\"5220656f1233\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>(j)<br/>         MVC    Z,0(R6)            z=a(i)<br/>         MVC    0(2,R6),0(R7)      a(i)=a(j)<br/>         MVC    0(2,R7),Z          a(j)=z;<br/>         B      E70                goto e70<br/>E80      LA     R8,1(R8)           m=m+1<br/>E90      BCTR   R10,0              i=i-1<br/>         LTR    R10,R10            if i=0<br/>         BZ     ZERO               then goto zero<br/>         LR     R1,R10             i<br/>         SLA    R1,1               i*2<br/>         LH     R2,A-2(R1)         r2=a(i)<br/>         LR     R3,R10             i<br/>         SR     R3,R2              -a(i)<br/>         AR     R3,R9              p=i-a(i)+n<br/>         LR     R4,R10             i<br/>         AR     R4,R2              +a(i)<br/>         BCTR   R4,0               q=i+a(i)-1<br/>         LR     R1,R10             i<br/>         SLA    R1,1               i*2<br/>         LH     R11,S-2(R1)        j=s(i)<br/>         LA     R0,0               r0=0<br/>         LR     R1,R3              p<br/>         SLA    R1,1               p*2<br/>         STH    R0,U-2(R1)         u(p)=0<br/>         LR     R1,R4              q<br/>         AR     R1,R5              q+r<br/>         SLA    R1,1               (q+r)*2<br/>         STH    R0,U-2(R1)         u(q+r)=0<br/>         B      E60                goto e60<br/>ZERO     XDECO  R9,PG+0            edit N<br/>         XDECO  R8,PG+12           edit M<br/>         PUT    OUTDCB,PG          print buffer<br/>         LA     R9,1(R9)           n=n+1<br/>         B      LOOPN              loop do n<br/>ELOOPN   CLOSE  (OUTDCB)           close output <br/>         L      R13,SAVEA+4        previous save area addrs<br/>         RETURN (14,12),RC=0       return to caller with rc=0<br/>         LTORG<br/>SAVEA    DS     18F                save area for chaining<br/>OUTDCB   DCB    DSORG=PS,MACRF=PM,DDNAME=OUTDD  use OUTDD in jcl<br/>LL       EQU    14                 ll&lt;=16<br/>L        DC     AL2(LL)            input value<br/>A        DS     (LL)H<br/>S        DS     (LL)H <br/>Z        DS     H<br/>Y        DS     H<br/>PG       DS     CL24               buffer<br/>U        DC     (4*LL-2)H'0'       stack<br/>         REGS                      make sure to include copybook jcl <br/>         END    NQUEENS</pre>"}, {"lang": "Assembler DEC PDP11", "loc": 116, "block": "<pre class=\"text highlighted_source\">\u00a0<br/>; \"eight queens problem\" benchmark test<br/>\u00a0<br/>         .radix    16<br/>\u00a0<br/>         .loc 0<br/>\u00a0<br/>          nop           \u00a0;<br/>          mov  #scr,@#E800<br/>          mov  #88C6,@#E802<br/>; clear the display RAM<br/>          mov  #scr,r0<br/>          mov  #1E0,r1<br/>cls:      clr  (r0)+<br/>          sob  r1,cls<br/>; display the initial counter value<br/>          clr  r3<br/>          mov  #scr,r0<br/>          jsr  pc,number<br/>; perform the test<br/>          jsr  pc,queens<br/>; display the counter<br/>          mov  #scr,r0<br/>          jsr  pc,number<br/>finish:   br   finish<br/>\u00a0<br/>; display the character R1 at the screen address R0,<br/>; advance the pointer R0 to the next column<br/>putc:     mov  r2,-(sp)<br/>; R1 &lt;- 6 * R1<br/>         asl  r1       \u00a0;* 2<br/>         mov  r1,-(sp)<br/>         asl  r1       \u00a0;* 4<br/>         add  (sp)+,r1 \u00a0;* 6<br/>         add  #chars,r1<br/>         mov  #6,r2<br/>putc1:   movb (r1)+,(r0)<br/>         add  #1E,r0<br/>         sob  r2,putc1<br/>         sub  #B2,r0        \u00a0;6 * 1E - 2 = B2<br/>         mov  (sp)+,r2<br/>         rts  pc<br/>\u00a0<br/>print1:   jsr  pc,putc<br/>; print a string pointed to by R2 at the screen address R0,<br/>; advance the pointer R0 to the next column,<br/>; the string should be terminated by a negative byte<br/>print:    movb (r2)+,r1<br/>          bpl  print1<br/>          rts  pc<br/>\u00a0<br/>; display the word R3 decimal at the screen address R0<br/>number:   mov  sp,r1<br/>          mov  #A0A,-(sp)<br/>          mov  (sp),-(sp)<br/>          mov  (sp),-(sp)<br/>          movb #80,-(r1)<br/>numb1:    clr  r2<br/>          div  #A,r2<br/>          movb r3,-(r1)<br/>          mov  r2,r3<br/>          bne  numb1<br/>          mov  sp,r2<br/>          jsr  pc,print<br/>          add  #6,sp<br/>          rts  pc<br/>\u00a0<br/>queens:  mov  #64,r5        \u00a0;100<br/>l06:     clr  r3<br/>         clr  r0<br/>l00:     cmp  #8,r0<br/>         beq  l05<br/>         inc  r0<br/>         movb #8,ary(r0)<br/>l01:     inc  r3<br/>         mov  r0,r1<br/>l02:     dec  r1<br/>         beq  l00<br/>         movb ary(r0),r2<br/>         movb ary(r1),r4<br/>         sub  r2,r4<br/>         beq  l04<br/>         bcc  l03<br/>         neg  r4<br/>l03:     add  r1,r4<br/>         sub  r0,r4<br/>         bne  l02<br/>l04:     decb ary(r0)<br/>         bne  l01<br/>         sob  r0,l04<br/>l05:     sob  r5,l06<br/>         mov  r3,cnt<br/>         rts  pc<br/>\u00a0<br/>; characters, width = 8 pixels, height = 6 pixels<br/>chars:  .byte     3C, 46, 4A, 52, 62, 3C  \u00a0;digit '0'<br/>        .byte     18, 28, 8,  8,  8,  3E  \u00a0;digit '1'<br/>        .byte     3C, 42, 2,  3C, 40, 7E  \u00a0;digit '2'<br/>        .byte     3C, 42, C,  2,  42, 3C  \u00a0;digit '3'<br/>        .byte     8,  18, 28, 48, 7E, 8   \u00a0;digit '4'<br/>        .byte     7E, 40, 7C, 2,  42, 3C  \u00a0;digit '5'<br/>        .byte     3C, 40, 7C, 42, 42, 3C  \u00a0;digit '6'<br/>        .byte     7E, 2,  4,  8,  10, 10  \u00a0;digit '7'<br/>        .byte     3C, 42, 3C, 42, 42, 3C  \u00a0;digit '8'<br/>        .byte     3C, 42, 42, 3E, 2,  3C  \u00a0;digit '9'<br/>        .byte     0,  0,  0,  0,  0,  0   \u00a0;space<br/>\u00a0<br/>        .even<br/>\u00a0<br/>cnt:    .blkw     1<br/>ary:    .blkb     9<br/>\u00a0<br/>        .loc 200<br/>\u00a0<br/>scr:                                       \u00a0;display RAM<br/>\u00a0</pre>"}, {"lang": "ABAP", "loc": 287, "block": "<pre class=\"abap highlighted_source\">\u00a0<br/><a href=\"http://help.sap.com/abapdocu/en/ABAPTYPES.htm\"><span class=\"kw2\">TYPES</span></a><span class=\"sy0\">:</span> <span class=\"kw9\">BEGIN OF</span> gty_matrix<span class=\"sy0\">,</span><br/>         <span class=\"nu0\">1</span>  <span class=\"kw4\">TYPE</span> c<span class=\"sy0\">,</span><br/>         <span class=\"nu0\">2</span>  <span class=\"kw4\">TYPE</span> c<span class=\"sy0\">,</span><br/>         <span class=\"nu0\">3</span>  <span class=\"kw4\">TYPE</span> c<span class=\"sy0\">,</span><br/>         <span class=\"nu0\">4</span>  <span class=\"kw4\">TYPE</span> c<span class=\"sy0\">,</span><br/>         <span class=\"nu0\">5</span>  <span class=\"kw4\">TYPE</span> c<span class=\"sy0\">,</span><br/>         <span class=\"nu0\">6</span>  <span class=\"kw4\">TYPE</span> c<span class=\"sy0\">,</span><br/>         <span class=\"nu0\">7</span>  <span class=\"kw4\">TYPE</span> c<span class=\"sy0\">,</span><br/>         <span class=\"nu0\">8</span>  <span class=\"kw4\">TYPE</span> c<span class=\"sy0\">,</span><br/>         <span class=\"nu0\">9</span>  <span class=\"kw4\">TYPE</span> c<span class=\"sy0\">,</span><br/>         <span class=\"nu0\">10</span> <span class=\"kw4\">TYPE</span> c<span class=\"sy0\">,</span><br/>       <span class=\"kw9\">END OF</span> gty_matrix<span class=\"sy0\">,</span><br/>       gty_t_matrix <span class=\"kw4\">TYPE</span> <span class=\"kw9\">STANDARD <span class=\"kw4\">TABLE</span> OF</span> gty_matrix <span class=\"kw9\"><span class=\"kw4\">INITIAL</span> SIZE</span> <span class=\"nu0\">8</span><span class=\"sy0\">.</span><br/>\u00a0<br/><a href=\"http://help.sap.com/abapdocu/en/ABAPDATA.htm\"><span class=\"kw2\">DATA</span></a><span class=\"sy0\">:</span> gt_matrix <span class=\"kw4\">TYPE</span> gty_t_matrix<span class=\"sy0\">,</span><br/>      gs_matrix <span class=\"kw4\">TYPE</span> gty_matrix<span class=\"sy0\">,</span><br/>      gv_count  <span class=\"kw4\">TYPE</span> i <span class=\"kw4\">VALUE</span> <span class=\"nu0\">0</span><span class=\"sy0\">,</span><br/>      gv_solut  <span class=\"kw4\">TYPE</span> i <span class=\"kw4\">VALUE</span> <span class=\"nu0\">0</span><span class=\"sy0\">.</span><br/>\u00a0<br/>\u00a0<br/><a href=\"http://help.sap.com/abapdocu/en/ABAPSELECTION-SCREEN.htm\"><span class=\"kw3\">SELECTION-SCREEN</span></a> <span class=\"kw9\">BEGIN <span class=\"kw4\">OF</span> BLOCK</span> b01 <span class=\"kw9\"><span class=\"kw4\">WITH</span> FRAME</span> <span class=\"kw4\">TITLE</span> text<span class=\"sy0\">-</span>b01<span class=\"sy0\">.</span><br/><a href=\"http://help.sap.com/abapdocu/en/ABAPPARAMETERS.htm\"><span class=\"kw2\">PARAMETERS</span></a><span class=\"sy0\">:</span> p_number <span class=\"kw4\">TYPE</span> i <span class=\"kw4\">OBLIGATORY</span> <span class=\"kw4\">DEFAULT</span> <span class=\"nu0\">8</span><span class=\"sy0\">.</span><br/><a href=\"http://help.sap.com/abapdocu/en/ABAPSELECTION-SCREEN.htm\"><span class=\"kw3\">SELECTION-SCREEN</span></a> <span class=\"kw9\">END <span class=\"kw4\">OF</span> BLOCK</span> b01<span class=\"sy0\">.</span><br/>\u00a0<br/><span class=\"co1\">\" Filling empty table</span><br/><a href=\"http://help.sap.com/abapdocu/en/ABAPSTART-OF-SELECTION.htm\"><span class=\"kw3\">START-OF-SELECTION</span></a><span class=\"sy0\">.</span><br/>  <a href=\"http://help.sap.com/abapdocu/en/ABAPDO.htm\"><span class=\"kw1\">DO</span></a> p_number <span class=\"kw4\">TIMES</span><span class=\"sy0\">.</span><br/>    <a href=\"http://help.sap.com/abapdocu/en/ABAPAPPEND.htm\"><span class=\"kw3\">APPEND</span></a> gs_matrix <span class=\"kw4\">TO</span> gt_matrix<span class=\"sy0\">.</span><br/>  <a href=\"http://help.sap.com/abapdocu/en/ABAPENDDO.htm\"><span class=\"kw1\">ENDDO</span></a><span class=\"sy0\">.</span><br/>\u00a0<br/><span class=\"co1\">\" Recursive Function</span><br/>  <a href=\"http://help.sap.com/abapdocu/en/ABAPPERFORM.htm\"><span class=\"kw3\">PERFORM</span></a> fill_matrix <span class=\"kw4\">USING</span> gv_count <span class=\"nu0\">1</span> <span class=\"nu0\">1</span> <span class=\"kw4\">CHANGING</span> gt_matrix<span class=\"sy0\">.</span><br/>  <a href=\"http://help.sap.com/abapdocu/en/ABAPBREAK-POINT.htm\"><span class=\"kw3\">BREAK-POINT</span></a><span class=\"sy0\">.</span><br/><span class=\"co2\">*&amp;---------------------------------------------------------------------*</span><br/><span class=\"co2\">*&amp;      Form  FILL_MATRIX</span><br/><span class=\"co2\">*----------------------------------------------------------------------*</span><br/><a href=\"http://help.sap.com/abapdocu/en/ABAPFORM.htm\"><span class=\"kw3\">FORM</span></a> fill_matrix  <span class=\"kw4\">USING</span>    p_count <span class=\"kw4\">TYPE</span> i<br/>                           p_i     <span class=\"kw4\">TYPE</span> i<br/>                           p_j     <span class=\"kw4\">TYPE</span> i<br/>                  <span class=\"kw4\">CHANGING</span> p_matrix <span class=\"kw4\">TYPE</span> gty_t_matrix<span class=\"sy0\">.</span><br/>\u00a0<br/>  <a href=\"http://help.sap.com/abapdocu/en/ABAPDATA.htm\"><span class=\"kw2\">DATA</span></a><span class=\"sy0\">:</span> lv_i      <span class=\"kw4\">TYPE</span> i<span class=\"sy0\">,</span><br/>        lv_j      <span class=\"kw4\">TYPE</span> i<span class=\"sy0\">,</span><br/>        lv_result <span class=\"kw4\">TYPE</span> c <span class=\"kw4\">LENGTH</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span><br/>        lt_matrix <span class=\"kw4\">TYPE</span> gty_t_matrix<span class=\"sy0\">,</span><br/>        lv_count  <span class=\"kw4\">TYPE</span> i<span class=\"sy0\">,</span><br/>        lv_value  <span class=\"kw4\">TYPE</span> c<span class=\"sy0\">.</span><br/>\u00a0<br/>  lt_matrix<span class=\"br0\">[</span><span class=\"br0\">]</span> <span class=\"sy1\">=</span> p_matrix<span class=\"br0\">[</span><span class=\"br0\">]</span><span class=\"sy0\">.</span><br/>  lv_count <span class=\"sy1\">=</span> p_count<span class=\"sy0\">.</span><br/>  lv_i <span class=\"sy1\">=</span> p_i<span class=\"sy0\">.</span><br/>  lv_j <span class=\"sy1\">=</span> p_j<span class=\"sy0\">.</span><br/>\u00a0<br/>  <a href=\"http://help.sap.com/abapdocu/en/ABAPWHILE.htm\"><span class=\"kw1\">WHILE</span></a> lv_i <span class=\"kw4\">LE</span> p_number<span class=\"sy0\">.</span><br/>    <a href=\"http://help.sap.com/abapdocu/en/ABAPWHILE.htm\"><span class=\"kw1\">WHILE</span></a> lv_j <span class=\"kw4\">LE</span> p_number<span class=\"sy0\">.</span><br/>      <a href=\"http://help.sap.com/abapdocu/en/ABAPCLEAR.htm\"><span class=\"kw3\">CLEAR</span></a> lv_result<span class=\"sy0\">.</span><br/>      <a href=\"http://help.sap.com/abapdocu/en/ABAPPERFORM.htm\"><span class=\"kw3\">PERFORM</span></a> check_position <span class=\"kw4\">USING</span> lv_i lv_j <span class=\"kw4\">CHANGING</span> lv_result lt_matrix<span class=\"sy0\">.</span><br/>      <a href=\"http://help.sap.com/abapdocu/en/ABAPIF.htm\"><span class=\"kw1\">IF</span></a> lv_result <span class=\"kw4\">NE</span> <span class=\"st0\">'X'</span><span class=\"sy0\">.</span><br/>        <a href=\"http://help.sap.com/abapdocu/en/ABAPMOVE.htm\"><span class=\"kw3\">MOVE</span></a> <span class=\"st0\">'X'</span> <span class=\"kw4\">TO</span> lv_value<span class=\"sy0\">.</span><br/>        <a href=\"http://help.sap.com/abapdocu/en/ABAPPERFORM.htm\"><span class=\"kw3\">PERFORM</span></a> get_position <span class=\"kw4\">USING</span> lv_i lv_j <span class=\"st0\">'U'</span> <span class=\"kw4\">CHANGING</span> lv_value lt_matrix<span class=\"sy0\">.</span><br/>        <a href=\"http://help.sap.com/abapdocu/en/ABAPADD.htm\"><span class=\"kw3\">ADD</span></a> <span class=\"nu0\">1</span> <span class=\"kw4\">TO</span> lv_count<span class=\"sy0\">.</span><br/>        <a href=\"http://help.sap.com/abapdocu/en/ABAPIF.htm\"><span class=\"kw1\">IF</span></a> lv_count <span class=\"kw4\">EQ</span> p_number<span class=\"sy0\">.</span><br/>          <a href=\"http://help.sap.com/abapdocu/en/ABAPPERFORM.htm\"><span class=\"kw3\">PERFORM</span></a> show_matrix <span class=\"kw4\">USING</span> lt_matrix<span class=\"sy0\">.</span><br/>        <a href=\"http://help.sap.com/abapdocu/en/ABAPELSE.htm\"><span class=\"kw1\">ELSE</span></a><span class=\"sy0\">.</span><br/>          <a href=\"http://help.sap.com/abapdocu/en/ABAPPERFORM.htm\"><span class=\"kw3\">PERFORM</span></a> fill_matrix <span class=\"kw4\">USING</span> lv_count lv_i lv_j <span class=\"kw4\">CHANGING</span> lt_matrix<span class=\"sy0\">.</span><br/>        <a href=\"http://help.sap.com/abapdocu/en/ABAPENDIF.htm\"><span class=\"kw1\">ENDIF</span></a><span class=\"sy0\">.</span><br/>        lv_value <span class=\"sy1\">=</span> <span class=\"kw4\">space</span><span class=\"sy0\">.</span><br/>        <a href=\"http://help.sap.com/abapdocu/en/ABAPPERFORM.htm\"><span class=\"kw3\">PERFORM</span></a> get_position <span class=\"kw4\">USING</span> lv_i lv_j <span class=\"st0\">'U'</span> <span class=\"kw4\">CHANGING</span> lv_value lt_matrix<span class=\"sy0\">.</span><br/>        <a href=\"http://help.sap.com/abapdocu/en/ABAPSUBTRACT.htm\"><span class=\"kw3\">SUBTRACT</span></a> <span class=\"nu0\">1</span> <span class=\"kw4\">FROM</span> lv_count<span class=\"sy0\">.</span><br/>      <a href=\"http://help.sap.com/abapdocu/en/ABAPENDIF.htm\"><span class=\"kw1\">ENDIF</span></a><span class=\"sy0\">.</span><br/>      <a href=\"http://help.sap.com/abapdocu/en/ABAPADD.htm\"><span class=\"kw3\">ADD</span></a> <span class=\"nu0\">1</span> <span class=\"kw4\">TO</span> lv_j<span class=\"sy0\">.</span><br/>    <a href=\"http://help.sap.com/abapdocu/en/ABAPENDWHILE.htm\"><span class=\"kw1\">ENDWHILE</span></a><span class=\"sy0\">.</span><br/>    <a href=\"http://help.sap.com/abapdocu/en/ABAPADD.htm\"><span class=\"kw3\">ADD</span></a> <span class=\"nu0\">1</span> <span class=\"kw4\">TO</span> lv_i<span class=\"sy0\">.</span><br/>    lv_j <span class=\"sy1\">=</span> <span class=\"nu0\">1</span><span class=\"sy0\">.</span><br/>  <a href=\"http://help.sap.com/abapdocu/en/ABAPENDWHILE.htm\"><span class=\"kw1\">ENDWHILE</span></a><span class=\"sy0\">.</span><br/><a href=\"http://help.sap.com/abapdocu/en/ABAPENDFORM.htm\"><span class=\"kw3\">ENDFORM</span></a><span class=\"sy0\">.</span>                    <span class=\"co1\">\" FILL_MATRIX</span><br/>\u00a0<br/><span class=\"co2\">*&amp;---------------------------------------------------------------------*</span><br/><span class=\"co2\">*&amp;      Form  CHECK_POSITION</span><br/><span class=\"co2\">*&amp;---------------------------------------------------------------------*</span><br/><a href=\"http://help.sap.com/abapdocu/en/ABAPFORM.htm\"><span class=\"kw3\">FORM</span></a> check_position  <span class=\"kw4\">USING</span> <span class=\"kw4\">value</span><span class=\"br0\">(</span>p_i<span class=\"br0\">)</span>  <span class=\"kw4\">TYPE</span> i<br/>                           <span class=\"kw4\">value</span><span class=\"br0\">(</span>p_j<span class=\"br0\">)</span>  <span class=\"kw4\">TYPE</span> i<br/>                     <span class=\"kw4\">CHANGING</span> p_result <span class=\"kw4\">TYPE</span> c<br/>                              p_matrix <span class=\"kw4\">TYPE</span> gty_t_matrix<span class=\"sy0\">.</span><br/>\u00a0<br/>  <a href=\"http://help.sap.com/abapdocu/en/ABAPPERFORM.htm\"><span class=\"kw3\">PERFORM</span></a> get_position <span class=\"kw4\">USING</span> p_i p_j <span class=\"st0\">'R'</span> <span class=\"kw4\">CHANGING</span> p_result p_matrix<span class=\"sy0\">.</span><br/>  <a href=\"http://help.sap.com/abapdocu/en/ABAPCHECK.htm\"><span class=\"kw1\">CHECK</span></a> p_result <span class=\"kw4\">NE</span> <span class=\"st0\">'X'</span><span class=\"sy0\">.</span><br/>\u00a0<br/>  <a href=\"http://help.sap.com/abapdocu/en/ABAPPERFORM.htm\"><span class=\"kw3\">PERFORM</span></a> check_horizontal <span class=\"kw4\">USING</span> p_i p_j <span class=\"kw4\">CHANGING</span> p_result p_matrix<span class=\"sy0\">.</span><br/>  <a href=\"http://help.sap.com/abapdocu/en/ABAPCHECK.htm\"><span class=\"kw1\">CHECK</span></a> p_result <span class=\"kw4\">NE</span> <span class=\"st0\">'X'</span><span class=\"sy0\">.</span><br/>\u00a0<br/>  <a href=\"http://help.sap.com/abapdocu/en/ABAPPERFORM.htm\"><span class=\"kw3\">PERFORM</span></a> check_vertical <span class=\"kw4\">USING</span> p_i p_j <span class=\"kw4\">CHANGING</span> p_result p_matrix<span class=\"sy0\">.</span><br/>  <a href=\"http://help.sap.com/abapdocu/en/ABAPCHECK.htm\"><span class=\"kw1\">CHECK</span></a> p_result <span class=\"kw4\">NE</span> <span class=\"st0\">'X'</span><span class=\"sy0\">.</span><br/>\u00a0<br/>  <a href=\"http://help.sap.com/abapdocu/en/ABAPPERFORM.htm\"><span class=\"kw3\">PERFORM</span></a> check_diagonals <span class=\"kw4\">USING</span> p_i p_j <span class=\"kw4\">CHANGING</span> p_result p_matrix<span class=\"sy0\">.</span><br/>\u00a0<br/><a href=\"http://help.sap.com/abapdocu/en/ABAPENDFORM.htm\"><span class=\"kw3\">ENDFORM</span></a><span class=\"sy0\">.</span>                    <span class=\"co1\">\" CHECK_POSITION</span><br/>\u00a0<br/><span class=\"co2\">*&amp;---------------------------------------------------------------------*</span><br/><span class=\"co2\">*&amp;      Form  GET_POSITION</span><br/><span class=\"co2\">*&amp;---------------------------------------------------------------------*</span><br/><a href=\"http://help.sap.com/abapdocu/en/ABAPFORM.htm\"><span class=\"kw3\">FORM</span></a> get_position  <span class=\"kw4\">USING</span> <span class=\"kw4\">value</span><span class=\"br0\">(</span>p_i<span class=\"br0\">)</span>      <span class=\"kw4\">TYPE</span> i<br/>                         <span class=\"kw4\">value</span><span class=\"br0\">(</span>p_j<span class=\"br0\">)</span>      <span class=\"kw4\">TYPE</span> i<br/>                         <span class=\"kw4\">value</span><span class=\"br0\">(</span>p_action<span class=\"br0\">)</span> <span class=\"kw4\">TYPE</span> c<br/>                      <span class=\"kw4\">CHANGING</span> p_result  <span class=\"kw4\">TYPE</span> c<br/>                               p_matrix  <span class=\"kw4\">TYPE</span> gty_t_matrix<span class=\"sy0\">.</span><br/>\u00a0<br/>  <a href=\"http://help.sap.com/abapdocu/en/ABAPFIELD-SYMBOLS.htm\"><span class=\"kw2\">FIELD-SYMBOLS</span></a><span class=\"sy0\">:</span> <span class=\"sy1\">&lt;</span>fs_lmatrix<span class=\"sy1\">&gt;</span> <span class=\"kw4\">TYPE</span> gty_matrix<span class=\"sy0\">,</span><br/>                 <span class=\"sy1\">&lt;</span>fs_lfield<span class=\"sy1\">&gt;</span> <span class=\"kw4\">TYPE</span> <span class=\"kw4\">any</span><span class=\"sy0\">.</span><br/>\u00a0<br/>  <span class=\"kw8\">READ TABLE</span> p_matrix <span class=\"kw4\">ASSIGNING</span> <span class=\"sy1\">&lt;</span>fs_lmatrix<span class=\"sy1\">&gt;</span> <span class=\"kw4\">INDEX</span> p_i<span class=\"sy0\">.</span><br/>  <span class=\"kw8\"><a href=\"http://help.sap.com/abapdocu/en/ABAPASSIGN.htm\"><span class=\"kw3\">ASSIGN</span></a> COMPONENT</span> p_j <span class=\"kw4\">OF</span> <span class=\"kw4\">STRUCTURE</span> <span class=\"sy1\">&lt;</span>fs_lmatrix<span class=\"sy1\">&gt;</span> <span class=\"kw4\">TO</span> <span class=\"sy1\">&lt;</span>fs_lfield<span class=\"sy1\">&gt;</span><span class=\"sy0\">.</span><br/>\u00a0<br/>  <a href=\"http://help.sap.com/abapdocu/en/ABAPCASE.htm\"><span class=\"kw1\">CASE</span></a> p_action<span class=\"sy0\">.</span><br/>    <a href=\"http://help.sap.com/abapdocu/en/ABAPWHEN.htm\"><span class=\"kw1\">WHEN</span></a> <span class=\"st0\">'U'</span><span class=\"sy0\">.</span><br/>      <span class=\"sy1\">&lt;</span>fs_lfield<span class=\"sy1\">&gt;</span> <span class=\"sy1\">=</span> p_result<span class=\"sy0\">.</span><br/>    <a href=\"http://help.sap.com/abapdocu/en/ABAPWHEN.htm\"><span class=\"kw1\">WHEN</span></a> <span class=\"st0\">'R'</span><span class=\"sy0\">.</span><br/>      p_result <span class=\"sy1\">=</span> <span class=\"sy1\">&lt;</span>fs_lfield<span class=\"sy1\">&gt;</span><span class=\"sy0\">.</span><br/>    <a href=\"http://help.sap.com/abapdocu/en/ABAPWHEN.htm\"><span class=\"kw1\">WHEN</span></a> <span class=\"kw4\">OTHERS</span><span class=\"sy0\">.</span><br/>  <a href=\"http://help.sap.com/abapdocu/en/ABAPENDCASE.htm\"><span class=\"kw1\">ENDCASE</span></a><span class=\"sy0\">.</span><br/>\u00a0<br/><a href=\"http://help.sap.com/abapdocu/en/ABAPENDFORM.htm\"><span class=\"kw3\">ENDFORM</span></a><span class=\"sy0\">.</span>                    <span class=\"co1\">\" GET_POSITION</span><br/>\u00a0<br/><span class=\"co2\">*&amp;---------------------------------------------------------------------*</span><br/><span class=\"co2\">*&amp;      Form  CHECK_HORIZONTAL</span><br/><span class=\"co2\">*&amp;---------------------------------------------------------------------*</span><br/><a href=\"http://help.sap.com/abapdocu/en/ABAPFORM.htm\"><span class=\"kw3\">FORM</span></a> check_horizontal  <span class=\"kw4\">USING</span> <span class=\"kw4\">value</span><span class=\"br0\">(</span>p_i<span class=\"br0\">)</span>      <span class=\"kw4\">TYPE</span> i<br/>                             <span class=\"kw4\">value</span><span class=\"br0\">(</span>p_j<span class=\"br0\">)</span>      <span class=\"kw4\">TYPE</span> i<br/>                          <span class=\"kw4\">CHANGING</span> p_result  <span class=\"kw4\">TYPE</span> c<br/>                                   p_matrix  <span class=\"kw4\">TYPE</span> gty_t_matrix<span class=\"sy0\">.</span><br/>  <a href=\"http://help.sap.com/abapdocu/en/ABAPDATA.htm\"><span class=\"kw2\">DATA</span></a><span class=\"sy0\">:</span> lv_j <span class=\"kw4\">TYPE</span> i<span class=\"sy0\">,</span><br/>        ls_matrix <span class=\"kw4\">TYPE</span> gty_matrix<span class=\"sy0\">.</span><br/>\u00a0<br/>  <a href=\"http://help.sap.com/abapdocu/en/ABAPFIELD-SYMBOLS.htm\"><span class=\"kw2\">FIELD-SYMBOLS</span></a> <span class=\"sy1\">&lt;</span>fs<span class=\"sy1\">&gt;</span> <span class=\"kw4\">TYPE</span> c<span class=\"sy0\">.</span><br/>\u00a0<br/>  lv_j <span class=\"sy1\">=</span> <span class=\"nu0\">1</span><span class=\"sy0\">.</span><br/>  <span class=\"kw8\">READ TABLE</span> p_matrix <span class=\"kw4\">INTO</span> ls_matrix <span class=\"kw4\">INDEX</span> p_i<span class=\"sy0\">.</span><br/>  <a href=\"http://help.sap.com/abapdocu/en/ABAPWHILE.htm\"><span class=\"kw1\">WHILE</span></a> lv_j <span class=\"kw4\">LE</span> p_number<span class=\"sy0\">.</span><br/>    <span class=\"kw8\"><a href=\"http://help.sap.com/abapdocu/en/ABAPASSIGN.htm\"><span class=\"kw3\">ASSIGN</span></a> COMPONENT</span> lv_j <span class=\"kw4\">OF</span> <span class=\"kw4\">STRUCTURE</span> ls_matrix <span class=\"kw4\">TO</span> <span class=\"sy1\">&lt;</span>fs<span class=\"sy1\">&gt;</span><span class=\"sy0\">.</span><br/>    <a href=\"http://help.sap.com/abapdocu/en/ABAPIF.htm\"><span class=\"kw1\">IF</span></a> <span class=\"sy1\">&lt;</span>fs<span class=\"sy1\">&gt;</span> <span class=\"kw4\">EQ</span> <span class=\"st0\">'X'</span><span class=\"sy0\">.</span><br/>      p_result <span class=\"sy1\">=</span> <span class=\"st0\">'X'</span><span class=\"sy0\">.</span><br/>      <a href=\"http://help.sap.com/abapdocu/en/ABAPRETURN.htm\"><span class=\"kw1\">RETURN</span></a><span class=\"sy0\">.</span><br/>    <a href=\"http://help.sap.com/abapdocu/en/ABAPENDIF.htm\"><span class=\"kw1\">ENDIF</span></a><span class=\"sy0\">.</span><br/>    <a href=\"http://help.sap.com/abapdocu/en/ABAPADD.htm\"><span class=\"kw3\">ADD</span></a> <span class=\"nu0\">1</span> <span class=\"kw4\">TO</span> lv_j<span class=\"sy0\">.</span><br/>  <a href=\"http://help.sap.com/abapdocu/en/ABAPENDWHILE.htm\"><span class=\"kw1\">ENDWHILE</span></a><span class=\"sy0\">.</span><br/><a href=\"http://help.sap.com/abapdocu/en/ABAPENDFORM.htm\"><span class=\"kw3\">ENDFORM</span></a><span class=\"sy0\">.</span>                    <span class=\"co1\">\" CHECK_HORIZONTAL</span><br/>\u00a0<br/><span class=\"co2\">*&amp;---------------------------------------------------------------------*</span><br/><span class=\"co2\">*&amp;      Form  CHECK_VERTICAL</span><br/><span class=\"co2\">*&amp;---------------------------------------------------------------------*</span><br/><a href=\"http://help.sap.com/abapdocu/en/ABAPFORM.htm\"><span class=\"kw3\">FORM</span></a> check_vertical  <span class=\"kw4\">USING</span> <span class=\"kw4\">value</span><span class=\"br0\">(</span>p_i<span class=\"br0\">)</span>      <span class=\"kw4\">TYPE</span> i<br/>                           <span class=\"kw4\">value</span><span class=\"br0\">(</span>p_j<span class=\"br0\">)</span>      <span class=\"kw4\">TYPE</span> i<br/>                        <span class=\"kw4\">CHANGING</span> p_result  <span class=\"kw4\">TYPE</span> c<br/>                                 p_matrix  <span class=\"kw4\">TYPE</span> gty_t_matrix<span class=\"sy0\">.</span><br/>  <a href=\"http://help.sap.com/abapdocu/en/ABAPDATA.htm\"><span class=\"kw2\">DATA</span></a><span class=\"sy0\">:</span> lv_i <span class=\"kw4\">TYPE</span> i<span class=\"sy0\">,</span><br/>        ls_matrix <span class=\"kw4\">TYPE</span> gty_matrix<span class=\"sy0\">.</span><br/>\u00a0<br/>  <a href=\"http://help.sap.com/abapdocu/en/ABAPFIELD-SYMBOLS.htm\"><span class=\"kw2\">FIELD-SYMBOLS</span></a> <span class=\"sy1\">&lt;</span>fs<span class=\"sy1\">&gt;</span> <span class=\"kw4\">TYPE</span> c<span class=\"sy0\">.</span><br/>\u00a0<br/>  lv_i <span class=\"sy1\">=</span> <span class=\"nu0\">1</span><span class=\"sy0\">.</span><br/>  <a href=\"http://help.sap.com/abapdocu/en/ABAPWHILE.htm\"><span class=\"kw1\">WHILE</span></a> lv_i <span class=\"kw4\">LE</span> p_number<span class=\"sy0\">.</span><br/>    <span class=\"kw8\">READ TABLE</span> p_matrix <span class=\"kw4\">INTO</span> ls_matrix <span class=\"kw4\">INDEX</span> lv_i<span class=\"sy0\">.</span><br/>    <span class=\"kw8\"><a href=\"http://help.sap.com/abapdocu/en/ABAPASSIGN.htm\"><span class=\"kw3\">ASSIGN</span></a> COMPONENT</span> p_j <span class=\"kw4\">OF</span> <span class=\"kw4\">STRUCTURE</span> ls_matrix <span class=\"kw4\">TO</span> <span class=\"sy1\">&lt;</span>fs<span class=\"sy1\">&gt;</span><span class=\"sy0\">.</span><br/>    <a href=\"http://help.sap.com/abapdocu/en/ABAPIF.htm\"><span class=\"kw1\">IF</span></a> <span class=\"sy1\">&lt;</span>fs<span class=\"sy1\">&gt;</span> <span class=\"kw4\">EQ</span> <span class=\"st0\">'X'</span><span class=\"sy0\">.</span><br/>      p_result <span class=\"sy1\">=</span> <span class=\"st0\">'X'</span><span class=\"sy0\">.</span><br/>      <a href=\"http://help.sap.com/abapdocu/en/ABAPRETURN.htm\"><span class=\"kw1\">RETURN</span></a><span class=\"sy0\">.</span><br/>    <a href=\"http://help.sap.com/abapdocu/en/ABAPENDIF.htm\"><span class=\"kw1\">ENDIF</span></a><span class=\"sy0\">.</span><br/>    <a href=\"http://help.sap.com/abapdocu/en/ABAPADD.htm\"><span class=\"kw3\">ADD</span></a> <span class=\"nu0\">1</span> <span class=\"kw4\">TO</span> lv_i<span class=\"sy0\">.</span><br/>  <a href=\"http://help.sap.com/abapdocu/en/ABAPENDWHILE.htm\"><span class=\"kw1\">ENDWHILE</span></a><span class=\"sy0\">.</span><br/><a href=\"http://help.sap.com/abapdocu/en/ABAPENDFORM.htm\"><span class=\"kw3\">ENDFORM</span></a><span class=\"sy0\">.</span>                    <span class=\"co1\">\" CHECK_VERTICAL</span><br/>\u00a0<br/><span class=\"co2\">*&amp;---------------------------------------------------------------------*</span><br/><span class=\"co2\">*&amp;      Form  CHECK_DIAGONALS</span><br/><span class=\"co2\">*&amp;---------------------------------------------------------------------*</span><br/><a href=\"http://help.sap.com/abapdocu/en/ABAPFORM.htm\"><span class=\"kw3\">FORM</span></a> check_diagonals  <span class=\"kw4\">USING</span> <span class=\"kw4\">value</span><span class=\"br0\">(</span>p_i<span class=\"br0\">)</span>      <span class=\"kw4\">TYPE</span> i<br/>                            <span class=\"kw4\">value</span><span class=\"br0\">(</span>p_j<span class=\"br0\">)</span>      <span class=\"kw4\">TYPE</span> i<br/>                         <span class=\"kw4\">CHANGING</span> p_result  <span class=\"kw4\">TYPE</span> c<br/>                                  p_matrix  <span class=\"kw4\">TYPE</span> gty_t_matrix<span class=\"sy0\">.</span><br/>  <a href=\"http://help.sap.com/abapdocu/en/ABAPDATA.htm\"><span class=\"kw2\">DATA</span></a><span class=\"sy0\">:</span> lv_dx <span class=\"kw4\">TYPE</span> i<span class=\"sy0\">,</span><br/>        lv_dy <span class=\"kw4\">TYPE</span> i<span class=\"sy0\">.</span><br/>\u00a0<br/><span class=\"co2\">* I++ J++ (Up Right)</span><br/>  lv_dx <span class=\"sy1\">=</span> <span class=\"nu0\">1</span><span class=\"sy0\">.</span><br/>  lv_dy <span class=\"sy1\">=</span> <span class=\"nu0\">1</span><span class=\"sy0\">.</span><br/>  <a href=\"http://help.sap.com/abapdocu/en/ABAPPERFORM.htm\"><span class=\"kw3\">PERFORM</span></a> check_diagonal <span class=\"kw4\">USING</span> p_i p_j lv_dx lv_dy <span class=\"kw4\">CHANGING</span> p_result p_matrix<span class=\"sy0\">.</span><br/>  <a href=\"http://help.sap.com/abapdocu/en/ABAPCHECK.htm\"><span class=\"kw1\">CHECK</span></a> p_result <span class=\"kw4\">NE</span> <span class=\"st0\">'X'</span><span class=\"sy0\">.</span><br/>\u00a0<br/><span class=\"co2\">* I-- J-- (Left Down)</span><br/>  lv_dx <span class=\"sy1\">=</span> <span class=\"sy0\">-</span><span class=\"nu0\">1</span><span class=\"sy0\">.</span><br/>  lv_dy <span class=\"sy1\">=</span> <span class=\"sy0\">-</span><span class=\"nu0\">1</span><span class=\"sy0\">.</span><br/>  <a href=\"http://help.sap.com/abapdocu/en/ABAPPERFORM.htm\"><span class=\"kw3\">PERFORM</span></a> check_diagonal <span class=\"kw4\">USING</span> p_i p_j lv_dx lv_dy <span class=\"kw4\">CHANGING</span> p_result p_matrix<span class=\"sy0\">.</span><br/>  <a href=\"http://help.sap.com/abapdocu/en/ABAPCHECK.htm\"><span class=\"kw1\">CHECK</span></a> p_result <span class=\"kw4\">NE</span> <span class=\"st0\">'X'</span><span class=\"sy0\">.</span><br/>\u00a0<br/><span class=\"co2\">* I++ J-- (Right Down)</span><br/>  lv_dx <span class=\"sy1\">=</span> <span class=\"nu0\">1</span><span class=\"sy0\">.</span><br/>  lv_dy <span class=\"sy1\">=</span> <span class=\"sy0\">-</span><span class=\"nu0\">1</span><span class=\"sy0\">.</span><br/>  <a href=\"http://help.sap.com/abapdocu/en/ABAPPERFORM.htm\"><span class=\"kw3\">PERFORM</span></a> check_diagonal <span class=\"kw4\">USING</span> p_i p_j lv_dx lv_dy <span class=\"kw4\">CHANGING</span> p_result p_matrix<span class=\"sy0\">.</span><br/>  <a href=\"http://help.sap.com/abapdocu/en/ABAPCHECK.htm\"><span class=\"kw1\">CHECK</span></a> p_result <span class=\"kw4\">NE</span> <span class=\"st0\">'X'</span><span class=\"sy0\">.</span><br/>\u00a0<br/><span class=\"co2\">* I-- J++ (Left Up)</span><br/>  lv_dx <span class=\"sy1\">=</span> <span class=\"sy0\">-</span><span class=\"nu0\">1</span><span class=\"sy0\">.</span><br/>  lv_dy <span class=\"sy1\">=</span> <span class=\"nu0\">1</span><span class=\"sy0\">.</span><br/>  <a href=\"http://help.sap.com/abapdocu/en/ABAPPERFORM.htm\"><span class=\"kw3\">PERFORM</span></a> check_diagonal <span class=\"kw4\">USING</span> p_i p_j lv_dx lv_dy <span class=\"kw4\">CHANGING</span> p_result p_matrix<span class=\"sy0\">.</span><br/>  <a href=\"http://help.sap.com/abapdocu/en/ABAPCHECK.htm\"><span class=\"kw1\">CHECK</span></a> p_result <span class=\"kw4\">NE</span> <span class=\"st0\">'X'</span><span class=\"sy0\">.</span><br/><a href=\"http://help.sap.com/abapdocu/en/ABAPENDFORM.htm\"><span class=\"kw3\">ENDFORM</span></a><span class=\"sy0\">.</span>                    <span class=\"co1\">\" CHECK_DIAGONALS</span><br/>\u00a0<br/><span class=\"co2\">*&amp;---------------------------------------------------------------------*</span><br/><span class=\"co2\">*&amp;      Form  CHECK_DIAGONAL</span><br/><span class=\"co2\">*&amp;---------------------------------------------------------------------*</span><br/><a href=\"http://help.sap.com/abapdocu/en/ABAPFORM.htm\"><span class=\"kw3\">FORM</span></a> check_diagonal  <span class=\"kw4\">USING</span> <span class=\"kw4\">value</span><span class=\"br0\">(</span>p_i<span class=\"br0\">)</span>      <span class=\"kw4\">TYPE</span> i<br/>                            <span class=\"kw4\">value</span><span class=\"br0\">(</span>p_j<span class=\"br0\">)</span>      <span class=\"kw4\">TYPE</span> i<br/>                            <span class=\"kw4\">value</span><span class=\"br0\">(</span>p_dx<span class=\"br0\">)</span>      <span class=\"kw4\">TYPE</span> i<br/>                            <span class=\"kw4\">value</span><span class=\"br0\">(</span>p_dy<span class=\"br0\">)</span>      <span class=\"kw4\">TYPE</span> i<br/>                         <span class=\"kw4\">CHANGING</span> p_result  <span class=\"kw4\">TYPE</span> c<br/>                                  p_matrix  <span class=\"kw4\">TYPE</span> gty_t_matrix<span class=\"sy0\">.</span><br/>  <a href=\"http://help.sap.com/abapdocu/en/ABAPDATA.htm\"><span class=\"kw2\">DATA</span></a><span class=\"sy0\">:</span> lv_i <span class=\"kw4\">TYPE</span> i<span class=\"sy0\">,</span><br/>        lv_j <span class=\"kw4\">TYPE</span> i<span class=\"sy0\">,</span><br/>        ls_matrix <span class=\"kw4\">TYPE</span> gty_matrix<span class=\"sy0\">.</span><br/>\u00a0<br/>  <a href=\"http://help.sap.com/abapdocu/en/ABAPFIELD-SYMBOLS.htm\"><span class=\"kw2\">FIELD-SYMBOLS</span></a> <span class=\"sy1\">&lt;</span>fs<span class=\"sy1\">&gt;</span> <span class=\"kw4\">TYPE</span> c<span class=\"sy0\">.</span><br/>\u00a0<br/>  lv_i <span class=\"sy1\">=</span> p_i<span class=\"sy0\">.</span><br/>  lv_j <span class=\"sy1\">=</span> p_j<span class=\"sy0\">.</span><br/>  <a href=\"http://help.sap.com/abapdocu/en/ABAPWHILE.htm\"><span class=\"kw1\">WHILE</span></a> <span class=\"nu0\">1</span> <span class=\"kw4\">EQ</span> <span class=\"nu0\">1</span><span class=\"sy0\">.</span><br/>    <a href=\"http://help.sap.com/abapdocu/en/ABAPADD.htm\"><span class=\"kw3\">ADD</span></a><span class=\"sy0\">:</span> p_dx <span class=\"kw4\">TO</span> lv_i<span class=\"sy0\">,</span> p_dy <span class=\"kw4\">TO</span> lv_j<span class=\"sy0\">.</span><br/>\u00a0<br/>    <a href=\"http://help.sap.com/abapdocu/en/ABAPIF.htm\"><span class=\"kw1\">IF</span></a> p_dx <span class=\"kw4\">EQ</span> <span class=\"nu0\">1</span><span class=\"sy0\">.</span><br/>      <a href=\"http://help.sap.com/abapdocu/en/ABAPIF.htm\"><span class=\"kw1\">IF</span></a> lv_i <span class=\"kw4\">GT</span> p_number<span class=\"sy0\">.</span> <a href=\"http://help.sap.com/abapdocu/en/ABAPEXIT.htm\"><span class=\"kw1\">EXIT</span></a><span class=\"sy0\">.</span> <a href=\"http://help.sap.com/abapdocu/en/ABAPENDIF.htm\"><span class=\"kw1\">ENDIF</span></a><span class=\"sy0\">.</span><br/>    <a href=\"http://help.sap.com/abapdocu/en/ABAPELSE.htm\"><span class=\"kw1\">ELSE</span></a><span class=\"sy0\">.</span><br/>      <a href=\"http://help.sap.com/abapdocu/en/ABAPIF.htm\"><span class=\"kw1\">IF</span></a> lv_i <span class=\"kw4\">LT</span> <span class=\"nu0\">1</span><span class=\"sy0\">.</span> <a href=\"http://help.sap.com/abapdocu/en/ABAPEXIT.htm\"><span class=\"kw1\">EXIT</span></a><span class=\"sy0\">.</span> <a href=\"http://help.sap.com/abapdocu/en/ABAPENDIF.htm\"><span class=\"kw1\">ENDIF</span></a><span class=\"sy0\">.</span><br/>    <a href=\"http://help.sap.com/abapdocu/en/ABAPENDIF.htm\"><span class=\"kw1\">ENDIF</span></a><span class=\"sy0\">.</span><br/>\u00a0<br/>    <a href=\"http://help.sap.com/abapdocu/en/ABAPIF.htm\"><span class=\"kw1\">IF</span></a> p_dy <span class=\"kw4\">EQ</span> <span class=\"nu0\">1</span><span class=\"sy0\">.</span><br/>      <a href=\"http://help.sap.com/abapdocu/en/ABAPIF.htm\"><span class=\"kw1\">IF</span></a> lv_j <span class=\"kw4\">GT</span> p_number<span class=\"sy0\">.</span> <a href=\"http://help.sap.com/abapdocu/en/ABAPEXIT.htm\"><span class=\"kw1\">EXIT</span></a><span class=\"sy0\">.</span> <a href=\"http://help.sap.com/abapdocu/en/ABAPENDIF.htm\"><span class=\"kw1\">ENDIF</span></a><span class=\"sy0\">.</span><br/>    <a href=\"http://help.sap.com/abapdocu/en/ABAPELSE.htm\"><span class=\"kw1\">ELSE</span></a><span class=\"sy0\">.</span><br/>      <a href=\"http://help.sap.com/abapdocu/en/ABAPIF.htm\"><span class=\"kw1\">IF</span></a> lv_j <span class=\"kw4\">LT</span> <span class=\"nu0\">1</span><span class=\"sy0\">.</span> <a href=\"http://help.sap.com/abapdocu/en/ABAPEXIT.htm\"><span class=\"kw1\">EXIT</span></a><span class=\"sy0\">.</span> <a href=\"http://help.sap.com/abapdocu/en/ABAPENDIF.htm\"><span class=\"kw1\">ENDIF</span></a><span class=\"sy0\">.</span><br/>    <a href=\"http://help.sap.com/abapdocu/en/ABAPENDIF.htm\"><span class=\"kw1\">ENDIF</span></a><span class=\"sy0\">.</span><br/>\u00a0<br/>    <span class=\"kw8\">READ TABLE</span> p_matrix <span class=\"kw4\">INTO</span> ls_matrix <span class=\"kw4\">INDEX</span> lv_i<span class=\"sy0\">.</span><br/>    <span class=\"kw8\"><a href=\"http://help.sap.com/abapdocu/en/ABAPASSIGN.htm\"><span class=\"kw3\">ASSIGN</span></a> COMPONENT</span> lv_j <span class=\"kw4\">OF</span> <span class=\"kw4\">STRUCTURE</span> ls_matrix <span class=\"kw4\">TO</span> <span class=\"sy1\">&lt;</span>fs<span class=\"sy1\">&gt;</span><span class=\"sy0\">.</span><br/>    <a href=\"http://help.sap.com/abapdocu/en/ABAPIF.htm\"><span class=\"kw1\">IF</span></a> <span class=\"sy1\">&lt;</span>fs<span class=\"sy1\">&gt;</span> <span class=\"kw4\">EQ</span> <span class=\"st0\">'X'</span><span class=\"sy0\">.</span><br/>      p_result <span class=\"sy1\">=</span> <span class=\"st0\">'X'</span><span class=\"sy0\">.</span><br/>      <a href=\"http://help.sap.com/abapdocu/en/ABAPRETURN.htm\"><span class=\"kw1\">RETURN</span></a><span class=\"sy0\">.</span><br/>    <a href=\"http://help.sap.com/abapdocu/en/ABAPENDIF.htm\"><span class=\"kw1\">ENDIF</span></a><span class=\"sy0\">.</span><br/>  <a href=\"http://help.sap.com/abapdocu/en/ABAPENDWHILE.htm\"><span class=\"kw1\">ENDWHILE</span></a><span class=\"sy0\">.</span><br/><a href=\"http://help.sap.com/abapdocu/en/ABAPENDFORM.htm\"><span class=\"kw3\">ENDFORM</span></a><span class=\"sy0\">.</span>                    <span class=\"co1\">\" CHECK_DIAGONAL</span><br/><span class=\"co2\">*&amp;---------------------------------------------------------------------*</span><br/><span class=\"co2\">*&amp;      Form  SHOW_MATRIX</span><br/><span class=\"co2\">*----------------------------------------------------------------------*</span><br/><a href=\"http://help.sap.com/abapdocu/en/ABAPFORM.htm\"><span class=\"kw3\">FORM</span></a> show_matrix <span class=\"kw4\">USING</span> p_matrix <span class=\"kw4\">TYPE</span> gty_t_matrix<span class=\"sy0\">.</span><br/>  <a href=\"http://help.sap.com/abapdocu/en/ABAPDATA.htm\"><span class=\"kw2\">DATA</span></a><span class=\"sy0\">:</span> lt_matrix <span class=\"kw4\">TYPE</span> gty_t_matrix<span class=\"sy0\">,</span><br/>        lv_j      <span class=\"kw4\">TYPE</span> i <span class=\"kw4\">VALUE</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span><br/>        lv_colum  <span class=\"kw4\">TYPE</span> <span class=\"kw4\">string</span> <span class=\"kw4\">VALUE</span> <span class=\"st0\">'-'</span><span class=\"sy0\">.</span><br/>\u00a0<br/>  <a href=\"http://help.sap.com/abapdocu/en/ABAPFIELD-SYMBOLS.htm\"><span class=\"kw2\">FIELD-SYMBOLS</span></a><span class=\"sy0\">:</span> <span class=\"sy1\">&lt;</span>fs_matrix<span class=\"sy1\">&gt;</span> <span class=\"kw4\">TYPE</span> gty_matrix<span class=\"sy0\">,</span><br/>                 <span class=\"sy1\">&lt;</span>fs_field<span class=\"sy1\">&gt;</span>  <span class=\"kw4\">TYPE</span> c<span class=\"sy0\">.</span><br/>\u00a0<br/>  <a href=\"http://help.sap.com/abapdocu/en/ABAPADD.htm\"><span class=\"kw3\">ADD</span></a> <span class=\"nu0\">1</span> <span class=\"kw4\">TO</span> gv_solut<span class=\"sy0\">.</span><br/>\u00a0<br/>  <a href=\"http://help.sap.com/abapdocu/en/ABAPWRITE.htm\"><span class=\"kw3\">WRITE</span></a><span class=\"sy0\">:/</span> <span class=\"st0\">'Solution: '</span><span class=\"sy0\">,</span> gv_solut<span class=\"sy0\">.</span><br/>\u00a0<br/>  <a href=\"http://help.sap.com/abapdocu/en/ABAPDO.htm\"><span class=\"kw1\">DO</span></a> p_number <span class=\"kw4\">TIMES</span><span class=\"sy0\">.</span><br/>    <a href=\"http://help.sap.com/abapdocu/en/ABAPCONCATENATE.htm\"><span class=\"kw3\">CONCATENATE</span></a> lv_colum <span class=\"st0\">'----'</span> <span class=\"kw4\">INTO</span> lv_colum<span class=\"sy0\">.</span><br/>  <a href=\"http://help.sap.com/abapdocu/en/ABAPENDDO.htm\"><span class=\"kw1\">ENDDO</span></a><span class=\"sy0\">.</span><br/>\u00a0<br/>  <span class=\"kw7\"><a href=\"http://help.sap.com/abapdocu/en/ABAPLOOP.htm\"><span class=\"kw1\">LOOP</span></a> AT</span> p_matrix <span class=\"kw4\">ASSIGNING</span> <span class=\"sy1\">&lt;</span>fs_matrix<span class=\"sy1\">&gt;</span><span class=\"sy0\">.</span><br/>    <a href=\"http://help.sap.com/abapdocu/en/ABAPIF.htm\"><span class=\"kw1\">IF</span></a> sy<span class=\"sy0\">-</span>tabix <span class=\"kw4\">EQ</span> <span class=\"nu0\">1</span><span class=\"sy0\">.</span><br/>      <a href=\"http://help.sap.com/abapdocu/en/ABAPWRITE.htm\"><span class=\"kw3\">WRITE</span></a><span class=\"sy0\">:/</span> lv_colum<span class=\"sy0\">.</span><br/>    <a href=\"http://help.sap.com/abapdocu/en/ABAPENDIF.htm\"><span class=\"kw1\">ENDIF</span></a><span class=\"sy0\">.</span><br/>    <a href=\"http://help.sap.com/abapdocu/en/ABAPWRITE.htm\"><span class=\"kw3\">WRITE</span></a><span class=\"sy0\">:/</span> <span class=\"st0\">'|'</span><span class=\"sy0\">.</span><br/>    <a href=\"http://help.sap.com/abapdocu/en/ABAPDO.htm\"><span class=\"kw1\">DO</span></a> p_number <span class=\"kw4\">TIMES</span><span class=\"sy0\">.</span><br/>      <span class=\"kw8\"><a href=\"http://help.sap.com/abapdocu/en/ABAPASSIGN.htm\"><span class=\"kw3\">ASSIGN</span></a> COMPONENT</span> lv_j <span class=\"kw4\">OF</span> <span class=\"kw4\">STRUCTURE</span> <span class=\"sy1\">&lt;</span>fs_matrix<span class=\"sy1\">&gt;</span> <span class=\"kw4\">TO</span> <span class=\"sy1\">&lt;</span>fs_field<span class=\"sy1\">&gt;</span><span class=\"sy0\">.</span><br/>      <a href=\"http://help.sap.com/abapdocu/en/ABAPIF.htm\"><span class=\"kw1\">IF</span></a> <span class=\"sy1\">&lt;</span>fs_field<span class=\"sy1\">&gt;</span> <span class=\"kw4\">EQ</span> <span class=\"kw4\">space</span><span class=\"sy0\">.</span><br/>        <a href=\"http://help.sap.com/abapdocu/en/ABAPWRITE.htm\"><span class=\"kw3\">WRITE</span></a><span class=\"sy0\">:</span> <span class=\"sy1\">&lt;</span>fs_field<span class=\"sy1\">&gt;</span> <span class=\"sy0\">,</span><span class=\"st0\">'|'</span><span class=\"sy0\">.</span><br/>      <a href=\"http://help.sap.com/abapdocu/en/ABAPELSE.htm\"><span class=\"kw1\">ELSE</span></a><span class=\"sy0\">.</span><br/>        <a href=\"http://help.sap.com/abapdocu/en/ABAPWRITE.htm\"><span class=\"kw3\">WRITE</span></a><span class=\"sy0\">:</span> <span class=\"sy1\">&lt;</span>fs_field<span class=\"sy1\">&gt;</span> <span class=\"kw4\">COLOR</span> <span class=\"nu0\">2</span> <span class=\"kw4\">HOTSPOT</span> ON<span class=\"sy0\">,</span><span class=\"st0\">'|'</span><span class=\"sy0\">.</span><br/>      <a href=\"http://help.sap.com/abapdocu/en/ABAPENDIF.htm\"><span class=\"kw1\">ENDIF</span></a><span class=\"sy0\">.</span><br/>      <a href=\"http://help.sap.com/abapdocu/en/ABAPADD.htm\"><span class=\"kw3\">ADD</span></a> <span class=\"nu0\">1</span> <span class=\"kw4\">TO</span> lv_j<span class=\"sy0\">.</span><br/>    <a href=\"http://help.sap.com/abapdocu/en/ABAPENDDO.htm\"><span class=\"kw1\">ENDDO</span></a><span class=\"sy0\">.</span><br/>    lv_j <span class=\"sy1\">=</span> <span class=\"nu0\">1</span><span class=\"sy0\">.</span><br/>    <a href=\"http://help.sap.com/abapdocu/en/ABAPWRITE.htm\"><span class=\"kw3\">WRITE</span></a><span class=\"sy0\">:</span> <span class=\"sy0\">/</span> lv_colum<span class=\"sy0\">.</span><br/>  <a href=\"http://help.sap.com/abapdocu/en/ABAPENDLOOP.htm\"><span class=\"kw1\">ENDLOOP</span></a><span class=\"sy0\">.</span><br/>\u00a0<br/>  <a href=\"http://help.sap.com/abapdocu/en/ABAPSKIP.htm\"><span class=\"kw3\">SKIP</span></a> <span class=\"nu0\">1</span><span class=\"sy0\">.</span><br/><a href=\"http://help.sap.com/abapdocu/en/ABAPENDFORM.htm\"><span class=\"kw3\">ENDFORM</span></a><span class=\"sy0\">.</span>                    <span class=\"co1\">\" SHOW_MATRIX</span><br/>\u00a0</pre>"}, {"lang": "Ada", "loc": 50, "block": "<pre class=\"ada highlighted_source\"><span class=\"kw3\">with</span> Ada.<span class=\"me1\">Text_IO</span>;  <span class=\"kw3\">use</span> Ada.<span class=\"me1\">Text_IO</span>;<br/>\u00a0<br/><span class=\"kw3\">procedure</span> Queens <span class=\"kw1\">is</span><br/>   Board\u00a0: <span class=\"kw3\">array</span> <span class=\"br0\">(</span><span class=\"nu0\">1</span>..<span class=\"nu0\">8</span>, <span class=\"nu0\">1</span>..<span class=\"nu0\">8</span><span class=\"br0\">)</span> <span class=\"kw3\">of</span> Boolean\u00a0:= <span class=\"br0\">(</span><span class=\"kw3\">others</span> =&gt; <span class=\"br0\">(</span><span class=\"kw3\">others</span> =&gt; False<span class=\"br0\">)</span><span class=\"br0\">)</span>;<br/>   <span class=\"kw3\">function</span> Test <span class=\"br0\">(</span>Row, Column\u00a0: Integer<span class=\"br0\">)</span> <span class=\"kw1\">return</span> Boolean <span class=\"kw1\">is</span><br/>   <span class=\"kw1\">begin</span><br/>      <span class=\"kw1\">for</span> J <span class=\"kw3\">in</span> <span class=\"nu0\">1</span>..<span class=\"me1\">Column</span> - <span class=\"nu0\">1</span> <span class=\"kw1\">loop</span><br/>         <span class=\"kw1\">if</span> <span class=\"br0\">(</span>  Board <span class=\"br0\">(</span>Row, J<span class=\"br0\">)</span><br/>            <span class=\"kw2\">or</span> <span class=\"kw1\">else</span><br/>               <span class=\"br0\">(</span>Row &gt; J <span class=\"kw2\">and</span> <span class=\"kw1\">then</span> Board <span class=\"br0\">(</span>Row - J, Column - J<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>            <span class=\"kw2\">or</span> <span class=\"kw1\">else</span><br/>               <span class=\"br0\">(</span>Row + J &lt;= <span class=\"nu0\">8</span> <span class=\"kw2\">and</span> <span class=\"kw1\">then</span> Board <span class=\"br0\">(</span>Row + J, Column - J<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>            <span class=\"br0\">)</span>  <span class=\"kw1\">then</span><br/>            <span class=\"kw1\">return</span> False;<br/>         <span class=\"kw1\">end</span> <span class=\"kw1\">if</span>;<br/>      <span class=\"kw1\">end</span> <span class=\"kw1\">loop</span>;<br/>      <span class=\"kw1\">return</span> True;<br/>   <span class=\"kw1\">end</span> Test;<br/>   <span class=\"kw3\">function</span> Fill <span class=\"br0\">(</span>Column\u00a0: Integer<span class=\"br0\">)</span> <span class=\"kw1\">return</span> Boolean <span class=\"kw1\">is</span><br/>   <span class=\"kw1\">begin</span><br/>      <span class=\"kw1\">for</span> Row <span class=\"kw3\">in</span> Board'<span class=\"kw3\">Range</span> <span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"br0\">)</span> <span class=\"kw1\">loop</span><br/>         <span class=\"kw1\">if</span> Test <span class=\"br0\">(</span>Row, Column<span class=\"br0\">)</span> <span class=\"kw1\">then</span><br/>            Board <span class=\"br0\">(</span>Row, Column<span class=\"br0\">)</span>\u00a0:= True;<br/>            <span class=\"kw1\">if</span> Column = <span class=\"nu0\">8</span> <span class=\"kw2\">or</span> <span class=\"kw1\">else</span> Fill <span class=\"br0\">(</span>Column + <span class=\"nu0\">1</span><span class=\"br0\">)</span> <span class=\"kw1\">then</span><br/>               <span class=\"kw1\">return</span> True;<br/>            <span class=\"kw1\">end</span> <span class=\"kw1\">if</span>;<br/>            Board <span class=\"br0\">(</span>Row, Column<span class=\"br0\">)</span>\u00a0:= False;<br/>         <span class=\"kw1\">end</span> <span class=\"kw1\">if</span>;<br/>      <span class=\"kw1\">end</span> <span class=\"kw1\">loop</span>;<br/>      <span class=\"kw1\">return</span> False;<br/>   <span class=\"kw1\">end</span> Fill;<br/><span class=\"kw1\">begin</span><br/>   <span class=\"kw1\">if</span> <span class=\"kw2\">not</span> Fill <span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"br0\">)</span> <span class=\"kw1\">then</span><br/>      <span class=\"kw3\">raise</span> Program_Error;<br/>   <span class=\"kw1\">end</span> <span class=\"kw1\">if</span>;<br/>   <span class=\"kw1\">for</span> I <span class=\"kw3\">in</span> Board'<span class=\"kw3\">Range</span> <span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"br0\">)</span> <span class=\"kw1\">loop</span><br/>      Put <span class=\"br0\">(</span>Integer'Image <span class=\"br0\">(</span><span class=\"nu0\">9</span> - I<span class=\"br0\">)</span><span class=\"br0\">)</span>;<br/>      <span class=\"kw1\">for</span> J <span class=\"kw3\">in</span> Board'<span class=\"kw3\">Range</span> <span class=\"br0\">(</span><span class=\"nu0\">2</span><span class=\"br0\">)</span> <span class=\"kw1\">loop</span><br/>         <span class=\"kw1\">if</span> Board <span class=\"br0\">(</span>I, J<span class=\"br0\">)</span> <span class=\"kw1\">then</span><br/>            Put <span class=\"br0\">(</span><span class=\"st0\">\"|Q\"</span><span class=\"br0\">)</span>;<br/>         <span class=\"kw1\">elsif</span> <span class=\"br0\">(</span>I + J<span class=\"br0\">)</span> <span class=\"kw2\">mod</span> <span class=\"nu0\">2</span> = <span class=\"nu0\">1</span> <span class=\"kw1\">then</span><br/>            Put <span class=\"br0\">(</span><span class=\"st0\">\"|/\"</span><span class=\"br0\">)</span>;<br/>         <span class=\"kw1\">else</span><br/>            Put <span class=\"br0\">(</span><span class=\"st0\">\"| \"</span><span class=\"br0\">)</span>;<br/>         <span class=\"kw1\">end</span> <span class=\"kw1\">if</span>;<br/>      <span class=\"kw1\">end</span> <span class=\"kw1\">loop</span>;<br/>      Put_Line <span class=\"br0\">(</span><span class=\"st0\">\"|\"</span><span class=\"br0\">)</span>;<br/>   <span class=\"kw1\">end</span> <span class=\"kw1\">loop</span>;<br/>   Put_Line <span class=\"br0\">(</span><span class=\"st0\">\"   A B C D E F G H\"</span><span class=\"br0\">)</span>;<br/><span class=\"kw1\">end</span> Queens;</pre>"}, {"lang": "ALGOL 68", "loc": 51, "block": "<pre class=\"algol68 highlighted_source\"><span class=\"kw3\">INT</span> ofs <span class=\"sy1\">=</span> 1<span class=\"sy1\">,</span> <span class=\"coMULTI\"># Algol68 normally uses array offset of 1 #</span><br/>    dim <span class=\"sy1\">=</span> 8<span class=\"sy1\">;</span> <span class=\"coMULTI\"># dim X dim chess board #</span><br/><span class=\"br0\">[</span>ofs<span class=\"sy1\">:</span>dim<span class=\"sy1\">+</span>ofs<span class=\"sy1\">-</span>1<span class=\"br0\">]</span><span class=\"kw3\">INT</span> b<span class=\"sy1\">;</span><br/>\u00a0<br/><span class=\"kw4\">PROC</span> unsafe <span class=\"sy1\">=</span> <span class=\"br0\">(</span><span class=\"kw3\">INT</span> y<span class=\"br0\">)</span><span class=\"kw3\">BOOL</span><span class=\"sy1\">:</span><span class=\"br0\">(</span><br/>  <span class=\"kw3\">INT</span> i<span class=\"sy1\">,</span> t<span class=\"sy1\">,</span> x<span class=\"sy1\">;</span><br/>  x <span class=\"sy1\">:=</span> b<span class=\"br0\">[</span>y<span class=\"br0\">]</span><span class=\"sy1\">;</span><br/>  <span class=\"kw2\">FOR</span> i <span class=\"kw2\">TO</span> y <span class=\"sy1\">-</span> <span class=\"kw8\">LWB</span> b <span class=\"kw2\">DO</span><br/>    t <span class=\"sy1\">:=</span> b<span class=\"br0\">[</span>y <span class=\"sy1\">-</span> i<span class=\"br0\">]</span><span class=\"sy1\">;</span><br/>    <span class=\"kw2\">IF</span> t <span class=\"sy1\">=</span> x <span class=\"kw2\">THEN</span> break true<br/>    <span class=\"kw2\">ELIF</span> t <span class=\"sy1\">=</span> x <span class=\"sy1\">-</span> i <span class=\"kw2\">THEN</span> break true<br/>    <span class=\"kw2\">ELIF</span> t <span class=\"sy1\">=</span> x <span class=\"sy1\">+</span> i <span class=\"kw2\">THEN</span> break true<br/>    <span class=\"kw2\">FI</span><br/>  <span class=\"kw2\">OD</span><span class=\"sy1\">;</span><br/>  <span class=\"kw7\">FALSE</span> <span class=\"kw2\">EXIT</span><br/>break true<span class=\"sy1\">:</span><br/>  <span class=\"kw7\">TRUE</span><br/><span class=\"br0\">)</span><span class=\"sy1\">;</span><br/>\u00a0<br/><span class=\"kw3\">INT</span> s <span class=\"sy1\">:=</span> 0<span class=\"sy1\">;</span><br/>\u00a0<br/><span class=\"kw4\">PROC</span> <span class=\"kw22\">print</span> board <span class=\"sy1\">=</span> <span class=\"kw3\">VOID</span><span class=\"sy1\">:</span><span class=\"br0\">(</span><br/>  <span class=\"kw3\">INT</span> x<span class=\"sy1\">,</span> y<span class=\"sy1\">;</span><br/>  <span class=\"kw22\">print</span><span class=\"br0\">(</span><span class=\"br0\">(</span><span class=\"kw22\">new line</span><span class=\"sy1\">,</span> <span class=\"st0\">\"Solution # \"</span><span class=\"sy1\">,</span> s<span class=\"sy1\">+:=</span>1<span class=\"sy1\">,</span> <span class=\"kw22\">new line</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"sy1\">;</span><br/>  <span class=\"kw2\">FOR</span> y <span class=\"kw2\">FROM</span> <span class=\"kw8\">LWB</span> b <span class=\"kw2\">TO</span> <span class=\"kw8\">UPB</span> b <span class=\"kw2\">DO</span> <br/>    <span class=\"kw2\">FOR</span> x <span class=\"kw2\">FROM</span> <span class=\"kw8\">LWB</span> b <span class=\"kw2\">TO</span> <span class=\"kw8\">UPB</span> b <span class=\"kw2\">DO</span><br/>      <span class=\"kw22\">print</span><span class=\"br0\">(</span><span class=\"st0\">\"|\"</span><span class=\"sy1\">+</span><span class=\"br0\">(</span>b<span class=\"br0\">[</span>y<span class=\"br0\">]</span><span class=\"sy1\">=</span>x<span class=\"sy1\">|</span><span class=\"st0\">\"Q\"</span><span class=\"sy1\">|:</span> <span class=\"kw8\">ODD</span><span class=\"br0\">(</span>x<span class=\"sy1\">+</span>y<span class=\"br0\">)</span><span class=\"sy1\">|</span><span class=\"st0\">\"/\"</span><span class=\"sy1\">|</span><span class=\"st0\">\" \"</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>    <span class=\"kw2\">OD</span><span class=\"sy1\">;</span><br/>    <span class=\"kw22\">print</span><span class=\"br0\">(</span><span class=\"br0\">(</span><span class=\"st0\">\"|\"</span><span class=\"sy1\">,</span> <span class=\"kw22\">new line</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>  <span class=\"kw2\">OD</span><br/><span class=\"br0\">)</span><span class=\"sy1\">;</span><br/>\u00a0<br/>main<span class=\"sy1\">:</span> <span class=\"br0\">(</span><br/>  <span class=\"kw3\">INT</span> y <span class=\"sy1\">:=</span> <span class=\"kw8\">LWB</span> b<span class=\"sy1\">;</span><br/>  b<span class=\"br0\">[</span><span class=\"kw8\">LWB</span> b<span class=\"br0\">]</span> <span class=\"sy1\">:=</span> <span class=\"kw8\">LWB</span> b <span class=\"sy1\">-</span> 1<span class=\"sy1\">;</span><br/>  <span class=\"kw2\">FOR</span> i <span class=\"kw2\">WHILE</span> y <span class=\"sy1\">&gt;=</span> <span class=\"kw8\">LWB</span> b <span class=\"kw2\">DO</span><br/>    <span class=\"kw2\">WHILE</span><br/>      b<span class=\"br0\">[</span>y<span class=\"br0\">]</span><span class=\"sy1\">+:=</span>1<span class=\"sy1\">;</span><br/>  <span class=\"coMULTI\"># BREAK #</span> <span class=\"kw2\">IF</span> b<span class=\"br0\">[</span>y<span class=\"br0\">]</span> <span class=\"sy1\">&lt;=</span> <span class=\"kw8\">UPB</span> b <span class=\"kw2\">THEN</span> unsafe<span class=\"br0\">(</span>y<span class=\"br0\">)</span> <span class=\"kw2\">ELSE</span> <span class=\"kw7\">FALSE</span> <span class=\"kw2\">FI</span> <br/>    <span class=\"kw2\">DO</span> <span class=\"kw7\">SKIP</span> <span class=\"kw2\">OD</span><span class=\"sy1\">;</span><br/>    <span class=\"kw2\">IF</span> b<span class=\"br0\">[</span>y<span class=\"br0\">]</span> <span class=\"sy1\">&lt;=</span> <span class=\"kw8\">UPB</span> b  <span class=\"kw2\">THEN</span><br/>      <span class=\"kw2\">IF</span> y <span class=\"sy1\">&lt;</span> <span class=\"kw8\">UPB</span> b <span class=\"kw2\">THEN</span><br/>        b<span class=\"br0\">[</span>y<span class=\"sy1\">+:=</span>1<span class=\"br0\">]</span> <span class=\"sy1\">:=</span> <span class=\"kw8\">LWB</span> b <span class=\"sy1\">-</span> 1<br/>      <span class=\"kw2\">ELSE</span><br/>        <span class=\"kw22\">print</span> board<br/>      <span class=\"kw2\">FI</span><br/>    <span class=\"kw2\">ELSE</span><br/>      y<span class=\"sy1\">-:=</span>1<br/>    <span class=\"kw2\">FI</span><br/>  <span class=\"kw2\">OD</span><br/><span class=\"br0\">)</span></pre>"}, {"lang": "AppleScript", "loc": 164, "block": "<pre class=\"applescript highlighted_source\"><span class=\"co1\">-- Finds all possible solutions and the unique patterns.</span><br/>\u00a0<br/><span class=\"kw3\">property</span> Grid_Size\u00a0: <span class=\"nu0\">8</span><br/>\u00a0<br/><span class=\"kw3\">property</span> Patterns\u00a0: <span class=\"br0\">{</span><span class=\"br0\">}</span><br/><span class=\"kw3\">property</span> Solutions\u00a0: <span class=\"br0\">{</span><span class=\"br0\">}</span><br/><span class=\"kw3\">property</span> Test_Count\u00a0: <span class=\"nu0\">0</span><br/>\u00a0<br/><span class=\"kw3\">property</span> Rotated\u00a0: <span class=\"br0\">{</span><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"kw3\">on</span> <span class=\"kw1\">run</span><br/>    <span class=\"kw3\">local</span> diff<br/>    <span class=\"kw3\">local</span> endTime<br/>    <span class=\"kw3\">local</span> msg<br/>    <span class=\"kw3\">local</span> rows<br/>    <span class=\"kw3\">local</span> startTime<br/>\u00a0<br/>    <span class=\"kw3\">set</span> Patterns <span class=\"kw3\">to</span> <span class=\"br0\">{</span><span class=\"br0\">}</span><br/>    <span class=\"kw3\">set</span> Solutions <span class=\"kw3\">to</span> <span class=\"br0\">{</span><span class=\"br0\">}</span><br/>    <span class=\"kw3\">set</span> Rotated <span class=\"kw3\">to</span> <span class=\"br0\">{</span><span class=\"br0\">}</span><br/>\u00a0<br/>    <span class=\"kw3\">set</span> Test_Count <span class=\"kw3\">to</span> <span class=\"nu0\">0</span><br/>\u00a0<br/>    <span class=\"kw3\">set</span> rows <span class=\"kw3\">to</span> Make_Empty_List<span class=\"br0\">(</span>Grid_Size<span class=\"br0\">)</span><br/>\u00a0<br/>    <span class=\"kw3\">set</span> startTime <span class=\"kw3\">to</span> current date<br/>    Solve<span class=\"br0\">(</span><span class=\"nu0\">1</span>, rows<span class=\"br0\">)</span><br/>    <span class=\"kw3\">set</span> endTime <span class=\"kw3\">to</span> current date<br/>    <span class=\"kw3\">set</span> diff <span class=\"kw3\">to</span> endTime <span class=\"sy0\">-</span> startTime<br/>\u00a0<br/>    <span class=\"kw3\">set</span> msg <span class=\"kw3\">to</span> <span class=\"br0\">(</span><span class=\"st0\">\"Found \"</span> <span class=\"sy0\">&amp;</span> <span class=\"br0\">(</span><span class=\"kw1\">count</span> Solutions<span class=\"br0\">)</span> <span class=\"sy0\">&amp;</span> <span class=\"st0\">\" solutions with \"</span> <span class=\"sy0\">&amp;</span> <span class=\"br0\">(</span><span class=\"kw1\">count</span> Patterns<span class=\"br0\">)</span> <span class=\"sy0\">&amp;</span> <span class=\"st0\">\" patterns in \"</span> <span class=\"sy0\">&amp;</span> diff <span class=\"sy0\">&amp;</span> <span class=\"st0\">\" seconds.\"</span><span class=\"br0\">)</span> <span class=\"kw2\">as</span> <span class=\"kw1\">text</span><br/>    display alert msg<br/>\u00a0<br/>    <span class=\"kw3\">return</span> Solutions<br/><span class=\"kw3\">end</span> <span class=\"kw1\">run</span><br/>\u00a0<br/><span class=\"kw3\">on</span> Solve<span class=\"br0\">(</span>row <span class=\"kw2\">as</span> <span class=\"kw1\">integer</span>, rows <span class=\"kw2\">as</span> <span class=\"kw1\">list</span><span class=\"br0\">)</span><br/>    <span class=\"kw3\">if</span> row <span class=\"kw3\">is</span> <span class=\"kw2\">greater</span> than <span class=\"br0\">(</span><span class=\"kw1\">count</span> rows<span class=\"br0\">)</span> <span class=\"kw3\">then</span><br/>        Append_Solution<span class=\"br0\">(</span>rows<span class=\"br0\">)</span><br/>        <span class=\"kw3\">return</span><br/>    <span class=\"kw3\">end</span> <span class=\"kw3\">if</span><br/>\u00a0<br/>    <span class=\"kw3\">repeat</span> <span class=\"kw3\">with</span> column <span class=\"kw3\">from</span> <span class=\"nu0\">1</span> <span class=\"kw3\">to</span> Grid_Size<br/>        <span class=\"kw3\">set</span> Test_Count <span class=\"kw3\">to</span> Test_Count <span class=\"sy0\">+</span> <span class=\"nu0\">1</span><br/>        <span class=\"kw3\">if</span> Place_Queen<span class=\"br0\">(</span>column, row, rows<span class=\"br0\">)</span> <span class=\"kw3\">then</span><br/>            Solve<span class=\"br0\">(</span>row <span class=\"sy0\">+</span> <span class=\"nu0\">1</span>, rows<span class=\"br0\">)</span><br/>        <span class=\"kw3\">end</span> <span class=\"kw3\">if</span><br/>    <span class=\"kw3\">end</span> <span class=\"kw3\">repeat</span><br/><span class=\"kw3\">end</span> Solve<br/>\u00a0<br/><span class=\"kw3\">on</span> abs<span class=\"br0\">(</span>n<span class=\"br0\">)</span><br/>    <span class=\"kw3\">if</span> n <span class=\"sy0\">&lt;</span> <span class=\"nu0\">0</span> <span class=\"kw3\">then</span><br/>        <span class=\"sy0\">-</span>n<br/>    <span class=\"kw3\">else</span><br/>        n<br/>    <span class=\"kw3\">end</span> <span class=\"kw3\">if</span><br/><span class=\"kw3\">end</span> abs<br/>\u00a0<br/><span class=\"kw3\">on</span> Place_Queen<span class=\"br0\">(</span>column <span class=\"kw2\">as</span> <span class=\"kw1\">integer</span>, row <span class=\"kw2\">as</span> <span class=\"kw1\">integer</span>, rows <span class=\"kw2\">as</span> <span class=\"kw1\">list</span><span class=\"br0\">)</span><br/>    <span class=\"kw3\">local</span> colDiff<br/>    <span class=\"kw3\">local</span> previousRow<br/>    <span class=\"kw3\">local</span> rowDiff<br/>    <span class=\"kw3\">local</span> testColumn<br/>\u00a0<br/>    <span class=\"kw3\">repeat</span> <span class=\"kw3\">with</span> previousRow <span class=\"kw3\">from</span> <span class=\"nu0\">1</span> <span class=\"kw3\">to</span> <span class=\"br0\">(</span>row <span class=\"sy0\">-</span> <span class=\"nu0\">1</span><span class=\"br0\">)</span><br/>        <span class=\"kw3\">set</span> testColumn <span class=\"kw3\">to</span> <span class=\"kw1\">item</span> previousRow <span class=\"kw3\">of</span> rows<br/>\u00a0<br/>        <span class=\"kw3\">if</span> testColumn <span class=\"kw3\">is</span> <span class=\"kw2\">equal</span> <span class=\"kw3\">to</span> column <span class=\"kw3\">then</span><br/>            <span class=\"kw3\">return</span> <span class=\"kw1\">false</span><br/>        <span class=\"kw3\">end</span> <span class=\"kw3\">if</span><br/>\u00a0<br/>        <span class=\"kw3\">set</span> colDiff <span class=\"kw3\">to</span> abs<span class=\"br0\">(</span>testColumn <span class=\"sy0\">-</span> column<span class=\"br0\">)</span> <span class=\"kw2\">as</span> <span class=\"kw1\">integer</span><br/>        <span class=\"kw3\">set</span> rowDiff <span class=\"kw3\">to</span> row <span class=\"sy0\">-</span> previousRow<br/>        <span class=\"kw3\">if</span> colDiff <span class=\"kw3\">is</span> <span class=\"kw2\">equal</span> <span class=\"kw3\">to</span> rowDiff <span class=\"kw3\">then</span><br/>            <span class=\"kw3\">return</span> <span class=\"kw1\">false</span><br/>        <span class=\"kw3\">end</span> <span class=\"kw3\">if</span><br/>    <span class=\"kw3\">end</span> <span class=\"kw3\">repeat</span><br/>\u00a0<br/>    <span class=\"kw3\">set</span> <span class=\"kw1\">item</span> row <span class=\"kw3\">of</span> rows <span class=\"kw3\">to</span> column<br/>    <span class=\"kw3\">return</span> <span class=\"kw1\">true</span><br/><span class=\"kw3\">end</span> Place_Queen<br/>\u00a0<br/><span class=\"kw3\">on</span> Append_Solution<span class=\"br0\">(</span>rows <span class=\"kw2\">as</span> <span class=\"kw1\">list</span><span class=\"br0\">)</span><br/>    <span class=\"kw3\">local</span> column<br/>    <span class=\"kw3\">local</span> rowsCopy<br/>    <span class=\"kw3\">local</span> testReflection<br/>    <span class=\"kw3\">local</span> testReflectionText<br/>    <span class=\"kw3\">local</span> testRotation<br/>    <span class=\"kw3\">local</span> testRotationText<br/>    <span class=\"kw3\">local</span> testRotations<br/>\u00a0<br/>    <span class=\"kw3\">copy</span> rows <span class=\"kw3\">to</span> rowsCopy<br/>    <span class=\"kw3\">set</span> <span class=\"kw3\">end</span> <span class=\"kw3\">of</span> Solutions <span class=\"kw3\">to</span> rowsCopy<br/>    <span class=\"kw3\">local</span> rowsCopy<br/>\u00a0<br/>    <span class=\"kw3\">copy</span> rows <span class=\"kw3\">to</span> testRotation<br/>    <span class=\"kw3\">set</span> testRotations <span class=\"kw3\">to</span> <span class=\"br0\">{</span><span class=\"br0\">}</span><br/>    <span class=\"kw3\">repeat</span> <span class=\"nu0\">3</span> <span class=\"kw3\">times</span><br/>        <span class=\"kw3\">set</span> testRotation <span class=\"kw3\">to</span> Rotate<span class=\"br0\">(</span>testRotation<span class=\"br0\">)</span><br/>        <span class=\"kw3\">set</span> testRotationText <span class=\"kw3\">to</span> testRotation <span class=\"kw2\">as</span> <span class=\"kw1\">text</span><br/>        <span class=\"kw3\">if</span> Rotated <span class=\"kw2\">contains</span> testRotationText <span class=\"kw3\">then</span><br/>            <span class=\"kw3\">return</span><br/>        <span class=\"kw3\">end</span> <span class=\"kw3\">if</span><br/>        <span class=\"kw3\">set</span> <span class=\"kw3\">end</span> <span class=\"kw3\">of</span> testRotations <span class=\"kw3\">to</span> testRotationText<br/>\u00a0<br/>        <span class=\"kw3\">set</span> testReflection <span class=\"kw3\">to</span> Reflect<span class=\"br0\">(</span>testRotation<span class=\"br0\">)</span><br/>        <span class=\"kw3\">set</span> testReflectionText <span class=\"kw3\">to</span> testReflection <span class=\"kw2\">as</span> <span class=\"kw1\">text</span><br/>        <span class=\"kw3\">if</span> Rotated <span class=\"kw2\">contains</span> testReflectionText <span class=\"kw3\">then</span><br/>            <span class=\"kw3\">return</span><br/>        <span class=\"kw3\">end</span> <span class=\"kw3\">if</span><br/>        <span class=\"kw3\">set</span> <span class=\"kw3\">end</span> <span class=\"kw3\">of</span> testRotations <span class=\"kw3\">to</span> testReflectionText<br/>    <span class=\"kw3\">end</span> <span class=\"kw3\">repeat</span><br/>\u00a0<br/>    <span class=\"kw3\">repeat</span> <span class=\"kw3\">with</span> testRotationText <span class=\"kw3\">in</span> testRotations<br/>        <span class=\"kw3\">set</span> <span class=\"kw3\">end</span> <span class=\"kw3\">of</span> Rotated <span class=\"kw3\">to</span> <span class=\"br0\">(</span><span class=\"kw1\">contents</span> <span class=\"kw3\">of</span> testRotationText<span class=\"br0\">)</span><br/>    <span class=\"kw3\">end</span> <span class=\"kw3\">repeat</span><br/>    <span class=\"kw3\">set</span> <span class=\"kw3\">end</span> <span class=\"kw3\">of</span> Rotated <span class=\"kw3\">to</span> <span class=\"br0\">(</span>rowsCopy <span class=\"kw2\">as</span> <span class=\"kw1\">text</span><span class=\"br0\">)</span><br/>    <span class=\"kw3\">set</span> <span class=\"kw3\">end</span> <span class=\"kw3\">of</span> Rotated <span class=\"kw3\">to</span> <span class=\"br0\">(</span>Reflect<span class=\"br0\">(</span>rowsCopy<span class=\"br0\">)</span> <span class=\"kw2\">as</span> <span class=\"kw1\">text</span><span class=\"br0\">)</span><br/>\u00a0<br/>    <span class=\"kw3\">set</span> <span class=\"kw3\">end</span> <span class=\"kw3\">of</span> Patterns <span class=\"kw3\">to</span> rowsCopy<br/><span class=\"kw3\">end</span> Append_Solution<br/>\u00a0<br/><span class=\"kw3\">on</span> Make_Empty_List<span class=\"br0\">(</span>depth <span class=\"kw2\">as</span> <span class=\"kw1\">integer</span><span class=\"br0\">)</span><br/>    <span class=\"kw3\">local</span> i<br/>    <span class=\"kw3\">local</span> emptyList<br/>\u00a0<br/>    <span class=\"kw3\">set</span> emptyList <span class=\"kw3\">to</span> <span class=\"br0\">{</span><span class=\"br0\">}</span><br/>    <span class=\"kw3\">repeat</span> <span class=\"kw3\">with</span> i <span class=\"kw3\">from</span> <span class=\"nu0\">1</span> <span class=\"kw3\">to</span> depth<br/>        <span class=\"kw3\">set</span> <span class=\"kw3\">end</span> <span class=\"kw3\">of</span> emptyList <span class=\"kw3\">to</span> <span class=\"kw1\">missing value</span><br/>    <span class=\"kw3\">end</span> <span class=\"kw3\">repeat</span><br/>    <span class=\"kw3\">return</span> emptyList<br/><span class=\"kw3\">end</span> Make_Empty_List<br/>\u00a0<br/><span class=\"kw3\">on</span> Rotate<span class=\"br0\">(</span>rows <span class=\"kw2\">as</span> <span class=\"kw1\">list</span><span class=\"br0\">)</span><br/>    <span class=\"kw3\">local</span> column<br/>    <span class=\"kw3\">local</span> newColumn<br/>    <span class=\"kw3\">local</span> newRow<br/>    <span class=\"kw3\">local</span> newRows<br/>    <span class=\"kw3\">local</span> row<br/>    <span class=\"kw3\">local</span> rowCount<br/>\u00a0<br/>    <span class=\"kw3\">set</span> rowCount <span class=\"kw3\">to</span> <span class=\"br0\">(</span><span class=\"kw1\">count</span> rows<span class=\"br0\">)</span><br/>    <span class=\"kw3\">set</span> newRows <span class=\"kw3\">to</span> Make_Empty_List<span class=\"br0\">(</span>rowCount<span class=\"br0\">)</span><br/>    <span class=\"kw3\">repeat</span> <span class=\"kw3\">with</span> row <span class=\"kw3\">from</span> <span class=\"nu0\">1</span> <span class=\"kw3\">to</span> rowCount<br/>        <span class=\"kw3\">set</span> column <span class=\"kw3\">to</span> <span class=\"br0\">(</span><span class=\"kw1\">contents</span> <span class=\"kw3\">of</span> <span class=\"kw1\">item</span> row <span class=\"kw3\">of</span> rows<span class=\"br0\">)</span><br/>        <span class=\"kw3\">set</span> newRow <span class=\"kw3\">to</span> column<br/>        <span class=\"kw3\">set</span> newColumn <span class=\"kw3\">to</span> rowCount <span class=\"sy0\">-</span> row <span class=\"sy0\">+</span> <span class=\"nu0\">1</span><br/>        <span class=\"kw3\">set</span> <span class=\"kw1\">item</span> newRow <span class=\"kw3\">of</span> newRows <span class=\"kw3\">to</span> newColumn<br/>    <span class=\"kw3\">end</span> <span class=\"kw3\">repeat</span><br/>\u00a0<br/>    <span class=\"kw3\">return</span> newRows<br/><span class=\"kw3\">end</span> Rotate<br/>\u00a0<br/><span class=\"kw3\">on</span> Reflect<span class=\"br0\">(</span>rows <span class=\"kw2\">as</span> <span class=\"kw1\">list</span><span class=\"br0\">)</span><br/>    <span class=\"kw3\">local</span> column<br/>    <span class=\"kw3\">local</span> newRows<br/>\u00a0<br/>    <span class=\"kw3\">set</span> newRows <span class=\"kw3\">to</span> <span class=\"br0\">{</span><span class=\"br0\">}</span><br/>    <span class=\"kw3\">repeat</span> <span class=\"kw3\">with</span> column <span class=\"kw3\">in</span> rows<br/>        <span class=\"kw3\">set</span> <span class=\"kw3\">end</span> <span class=\"kw3\">of</span> newRows <span class=\"kw3\">to</span> <span class=\"br0\">(</span><span class=\"kw1\">count</span> rows<span class=\"br0\">)</span> <span class=\"sy0\">-</span> column <span class=\"sy0\">+</span> <span class=\"nu0\">1</span><br/>    <span class=\"kw3\">end</span> <span class=\"kw3\">repeat</span><br/>\u00a0<br/>    <span class=\"kw3\">return</span> newRows<br/><span class=\"kw3\">end</span> Reflect</pre>"}, {"lang": "Arc", "loc": 20, "block": "<pre class=\"lisp highlighted_source\"><span class=\"br0\">(</span>def nqueens <span class=\"br0\">(</span>n <span class=\"br0\">(</span>o queens<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>  <span class=\"br0\">(</span><span class=\"kw1\">if</span> <span class=\"br0\">(</span><span class=\"sy0\">&lt;</span> len<span class=\"sy0\">.</span>queens n<span class=\"br0\">)</span><br/>    <span class=\"br0\">(</span><span class=\"kw1\">let</span> row <span class=\"br0\">(</span><span class=\"kw1\">if</span> queens <span class=\"br0\">(</span>+ <span class=\"nu0\">1</span> queens<span class=\"sy0\">.</span>0<span class=\"sy0\">.</span>0<span class=\"br0\">)</span> <span class=\"nu0\">0</span><span class=\"br0\">)</span><br/>      <span class=\"br0\">(</span>each col <span class=\"br0\">(</span>range <span class=\"nu0\">0</span> <span class=\"br0\">(</span>- n <span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>        <span class=\"br0\">(</span><span class=\"kw1\">let</span> new-queens <span class=\"br0\">(</span><span class=\"kw1\">cons</span> <span class=\"br0\">(</span><span class=\"kw1\">list</span> row col<span class=\"br0\">)</span> queens<span class=\"br0\">)</span><br/>          <span class=\"br0\">(</span><span class=\"kw1\">if</span> <span class=\"br0\">(</span>no conflicts<span class=\"sy0\">.</span>new-queens<span class=\"br0\">)</span><br/>            <span class=\"br0\">(</span>nqueens n new-queens<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>    <span class=\"br0\">(</span>prn queens<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"co1\">; check if the first queen in 'queens' lies on the same column or diagonal as</span><br/><span class=\"co1\">; any of the others</span><br/><span class=\"br0\">(</span>def conflicts <span class=\"br0\">(</span>queens<span class=\"br0\">)</span><br/>  <span class=\"br0\">(</span><span class=\"kw1\">let</span> <span class=\"br0\">(</span>curr <span class=\"sy0\">.</span> rest<span class=\"br0\">)</span> queens<br/>    <span class=\"br0\">(</span><span class=\"kw1\">or</span> <span class=\"br0\">(</span><span class=\"kw1\">let</span> curr-column curr<span class=\"sy0\">.</span>1<br/>          <span class=\"br0\">(</span>some curr-column <span class=\"br0\">(</span>map <span class=\"br0\">[</span>_ <span class=\"nu0\">1</span><span class=\"br0\">]</span> rest<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span>  <span class=\"co1\">; columns</span><br/>        <span class=\"br0\">(</span>some <span class=\"br0\">[</span>diagonal-match curr _<span class=\"br0\">]</span> rest<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"br0\">(</span>def diagonal-match <span class=\"br0\">(</span>curr other<span class=\"br0\">)</span><br/>  <span class=\"br0\">(</span>is <span class=\"br0\">(</span><span class=\"kw1\">abs</span> <span class=\"br0\">(</span>- curr<span class=\"sy0\">.</span>0 other<span class=\"sy0\">.</span>0<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>      <span class=\"br0\">(</span><span class=\"kw1\">abs</span> <span class=\"br0\">(</span>- curr<span class=\"sy0\">.</span>1 other<span class=\"sy0\">.</span>1<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span></pre>"}, {"lang": "ATS", "loc": 82, "block": "<pre class=\"text highlighted_source\">\u00a0<br/>(* ****** ****** *)<br/>//<br/>// Solving N-queen puzzle<br/>//<br/>(* ****** ****** *)<br/>//<br/>// How to test:<br/>// ./queens<br/>// How to compile:<br/>// patscc -DATS_MEMALLOC_LIBC -o queens queens.dats<br/>//<br/>(* ****** ****** *)<br/>//<br/>#include<br/>\"share/atspre_staload.hats\"<br/>//<br/>#include<br/>\"share/HATS/atspre_staload_libats_ML.hats\"<br/>//<br/>(* ****** ****** *)<br/>\u00a0<br/>fun<br/>solutions(N:int) = let<br/>//<br/>fun<br/>show<br/>(<br/>  board: list0(int)<br/>)\u00a0: void =<br/>(<br/>  list0_foreach&lt;int&gt;<br/>  ( list0_reverse(board)<br/>  , lam(n) =&gt; ((N).foreach()(lam(i) =&gt; print_string(if i = n then \" Q\" else \" _\")); print_newline())<br/>  )\u00a0;<br/>  print_newline()<br/>)<br/>//<br/>fun<br/>safe<br/>(<br/>  i: int, j: int, k: int, xs: list0(int)<br/>)\u00a0: bool =<br/>(<br/>  case+ xs of<br/>  | nil0() =&gt; true<br/>  | cons0(x, xs) =&gt; x\u00a0!= i &amp;&amp; x\u00a0!= j &amp;&amp; x\u00a0!= k &amp;&amp; safe(i, j+1, k-1, xs)<br/>)<br/>//<br/>fun<br/>loop<br/>(<br/>  col: int, xs: list0(int)<br/>)\u00a0: void =<br/>(N).foreach()<br/>(<br/>lam(i) =&gt;<br/>if<br/>safe(i, i+1, i-1, xs)<br/>then let<br/>  val xs = cons0(i, xs)<br/>in<br/>  if col = N then show(xs) else loop(col+1, xs)<br/>end // end of [then]<br/>)<br/>//<br/>in<br/>  loop(1, nil0())<br/>end // end of [solutions]<br/>\u00a0<br/>(* ****** ****** *)<br/>\u00a0<br/>val () = solutions(8)<br/>\u00a0<br/>(* ****** ****** *)<br/>\u00a0<br/>implement main0() = ()<br/>\u00a0<br/>(* ****** ****** *)<br/>\u00a0<br/>(* end of [queens.dats] *)<br/>\u00a0</pre>"}, {"lang": "AutoHotkey", "loc": 80, "block": "<pre class=\"autohotkey highlighted_source\"><span class=\"co1\">;</span><br/><span class=\"co1\">; Post: http://www.autohotkey.com/forum/viewtopic.php?p=353059#353059</span><br/><span class=\"co1\">; Timestamp: 05/may/2010</span><br/><span class=\"co1\">;</span><br/>\u00a0<br/><a href=\"http://www.autohotkey.com/docs/commands/MsgBox.htm\"><span class=\"kw3\">MsgBox</span></a>\u00a0% funcNQP<span class=\"br0\">(</span><span class=\"nu0\">5</span><span class=\"br0\">)</span><br/><a href=\"http://www.autohotkey.com/docs/commands/MsgBox.htm\"><span class=\"kw3\">MsgBox</span></a>\u00a0% funcNQP<span class=\"br0\">(</span><span class=\"nu0\">8</span><span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"kw1\">Return</span><br/>\u00a0<br/><span class=\"co1\">;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br/><span class=\"co1\">;</span><br/><span class=\"co1\">; ** USED VARIABLES **</span><br/><span class=\"co1\">;</span><br/><span class=\"co1\">; Global: All variables named Array[???]</span><br/><span class=\"co1\">;</span><br/><span class=\"co1\">; Function funcNPQ: nQueens , OutText , qIndex</span><br/><span class=\"co1\">;</span><br/><span class=\"co1\">; Function Unsafe: nIndex , Idx , Tmp , Aux</span><br/><span class=\"co1\">;</span><br/><span class=\"co1\">; Function PutBoard: Output , QueensN , Stc , xxx , yyy</span><br/><span class=\"co1\">;</span><br/><span class=\"co1\">;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br/>\u00a0<br/>funcNQP<span class=\"br0\">(</span>nQueens<span class=\"br0\">)</span><br/><span class=\"br0\">{</span><br/>  Global<br/>  Array<span class=\"br0\">[</span><span class=\"nu0\">0</span><span class=\"br0\">]</span> <span class=\"sy0\">:=</span> <span class=\"sy0\">-</span><span class=\"nu0\">1</span><br/>  Local OutText <span class=\"sy0\">,</span> qIndex <span class=\"sy0\">:=</span> <span class=\"nu0\">0</span><br/>  <span class=\"kw1\">While</span> <span class=\"br0\">(</span> qIndex <span class=\"sy0\">&gt;=</span> <span class=\"nu0\">0</span> <span class=\"br0\">)</span><br/>  <span class=\"br0\">{</span><br/>    Array<span class=\"br0\">[</span><span class=\"re0\">%qIndex%</span><span class=\"br0\">]</span><span class=\"sy0\">++</span><br/>    <span class=\"kw1\">While</span> <span class=\"br0\">(</span> <span class=\"br0\">(</span>Array<span class=\"br0\">[</span><span class=\"re0\">%qIndex%</span><span class=\"br0\">]</span> <span class=\"sy0\">&lt;</span> nQueens<span class=\"br0\">)</span> <span class=\"sy0\">&amp;&amp;</span> Unsafe<span class=\"br0\">(</span>qIndex<span class=\"br0\">)</span> <span class=\"br0\">)</span><br/>      Array<span class=\"br0\">[</span><span class=\"re0\">%qIndex%</span><span class=\"br0\">]</span><span class=\"sy0\">++</span><br/>    <span class=\"kw1\">If</span> <span class=\"br0\">(</span> Array<span class=\"br0\">[</span><span class=\"re0\">%qIndex%</span><span class=\"br0\">]</span> <span class=\"sy0\">&lt;</span> nQueens <span class=\"br0\">)</span><br/>    <span class=\"br0\">{</span><br/>      <span class=\"kw1\">If</span> <span class=\"br0\">(</span> qIndex <span class=\"sy0\">&lt;</span> nQueens<span class=\"sy0\">-</span><span class=\"nu0\">1</span> <span class=\"br0\">)</span><br/>        qIndex<span class=\"sy0\">++</span>  <span class=\"sy0\">,</span>  Array<span class=\"br0\">[</span><span class=\"re0\">%qIndex%</span><span class=\"br0\">]</span> <span class=\"sy0\">:=</span> <span class=\"sy0\">-</span><span class=\"nu0\">1</span><br/>      <span class=\"kw1\">Else</span><br/>        PutBoard<span class=\"br0\">(</span>OutText<span class=\"sy0\">,</span>nQueens<span class=\"br0\">)</span><br/>    <span class=\"br0\">}</span><br/>    <span class=\"kw1\">Else</span><br/>      qIndex<span class=\"sy0\">--</span><br/>  <span class=\"br0\">}</span><br/>  <span class=\"kw1\">Return</span> OutText<br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"co1\">;------------------------------------------</span><br/>\u00a0<br/>Unsafe<span class=\"br0\">(</span>nIndex<span class=\"br0\">)</span><br/><span class=\"br0\">{</span><br/>  Global<br/>  Local Idx <span class=\"sy0\">:=</span> <span class=\"nu0\">1</span>  <span class=\"sy0\">,</span>  Tmp <span class=\"sy0\">:=</span> <span class=\"nu0\">0</span>  <span class=\"sy0\">,</span>  Aux <span class=\"sy0\">:=</span> Array<span class=\"br0\">[</span><span class=\"re0\">%nIndex%</span><span class=\"br0\">]</span><br/>  <span class=\"kw1\">While</span> <span class=\"br0\">(</span> Idx <span class=\"sy0\">&lt;=</span> nIndex <span class=\"br0\">)</span><br/>  <span class=\"br0\">{</span><br/>    Tmp <span class=\"sy0\">:=</span> <span class=\"st0\">\"Array[\"</span> nIndex <span class=\"sy0\">-</span> Idx <span class=\"st0\">\"]\"</span><br/>    Tmp <span class=\"sy0\">:=</span>\u00a0% <span class=\"re0\">%Tmp%</span><br/>    <span class=\"kw1\">If</span> <span class=\"br0\">(</span> <span class=\"br0\">(</span> Tmp <span class=\"sy0\">=</span> Aux <span class=\"br0\">)</span> || <span class=\"br0\">(</span> Tmp <span class=\"sy0\">=</span> Aux<span class=\"sy0\">-</span>Idx <span class=\"br0\">)</span> || <span class=\"br0\">(</span> Tmp <span class=\"sy0\">=</span> Aux<span class=\"sy0\">+</span>Idx <span class=\"br0\">)</span> <span class=\"br0\">)</span><br/>      <span class=\"kw1\">Return</span> <span class=\"nu0\">1</span><br/>    Idx<span class=\"sy0\">++</span><br/>  <span class=\"br0\">}</span><br/>  <span class=\"kw1\">Return</span> <span class=\"nu0\">0</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"co1\">;------------------------------------------</span><br/>\u00a0<br/>PutBoard<span class=\"br0\">(</span>ByRef Output<span class=\"sy0\">,</span>QueensN<span class=\"br0\">)</span><br/><span class=\"br0\">{</span><br/>  Global<br/>  Static Stc <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><br/>  Local xxx <span class=\"sy0\">:=</span> <span class=\"nu0\">0</span> <span class=\"sy0\">,</span> yyy <span class=\"sy0\">:=</span> <span class=\"nu0\">0</span><br/>  Output <span class=\"sy0\">.=</span> <span class=\"st0\">\"`n`nSolution #\"</span> <span class=\"br0\">(</span><span class=\"sy0\">++</span>Stc<span class=\"br0\">)</span> <span class=\"st0\">\"`n\"</span><br/>  <span class=\"kw1\">While</span> <span class=\"br0\">(</span> yyy <span class=\"sy0\">&lt;</span> QueensN <span class=\"br0\">)</span><br/>  <span class=\"br0\">{</span><br/>    xxx <span class=\"sy0\">:=</span> <span class=\"nu0\">0</span><br/>    <span class=\"kw1\">While</span> <span class=\"br0\">(</span> xxx <span class=\"sy0\">&lt;</span> QueensN <span class=\"br0\">)</span><br/>      Output <span class=\"sy0\">.=</span> <span class=\"br0\">(</span> <span class=\"st0\">\"|\"</span> <span class=\"br0\">(</span> <span class=\"br0\">(</span> Array<span class=\"br0\">[</span><span class=\"re0\">%yyy%</span><span class=\"br0\">]</span> <span class=\"sy0\">=</span> xxx <span class=\"br0\">)</span>\u00a0? <span class=\"st0\">\"Q\"</span>\u00a0: <span class=\"st0\">\"_\"</span> <span class=\"br0\">)</span> <span class=\"br0\">)</span>  <span class=\"sy0\">,</span>  xxx<span class=\"sy0\">++</span><br/>    Output <span class=\"sy0\">.=</span> <span class=\"st0\">\"|`n\"</span>  <span class=\"sy0\">,</span>  yyy<span class=\"sy0\">++</span><br/>  <span class=\"br0\">}</span><br/><span class=\"br0\">}</span></pre>"}, {"lang": "BBC BASIC", "loc": 61, "block": "<pre class=\"text highlighted_source\">      Size% = 8<br/>      Cell% = 32<br/>      VDU 23,22,Size%*Cell%;Size%*Cell%;Cell%,Cell%,16,128+8,5<br/>      *font Arial Unicode MS,16<br/>      GCOL 3,11<br/>      FOR i% = 0 TO Size%-1 STEP 2<br/>        RECTANGLE FILL i%*Cell%*2,0,Cell%*2,Size%*Cell%*2<br/>        RECTANGLE FILL 0,i%*Cell%*2,Size%*Cell%*2,Cell%*2<br/>      NEXT<br/>      num% = FNqueens(Size%, Cell%)<br/>      SYS \"SetWindowText\", @hwnd%, \"Total \" + STR$(num%) + \" solutions\"<br/>      REPEAT\u00a0: WAIT 1\u00a0: UNTIL FALSE<br/>      END<br/>\u00a0<br/>      DEF FNqueens(n%, s%)<br/>      LOCAL i%, j%, m%, p%, q%, r%, a%(), b%(), c%()<br/>      DIM a%(n%), b%(n%), c%(4*n%-2)<br/>      FOR i% = 1 TO DIM(a%(),1)\u00a0: a%(i%) = i%\u00a0: NEXT<br/>      m% = 0<br/>      i% = 1<br/>      j% = 0<br/>      r% = 2*n%-1<br/>      REPEAT<br/>        i% -= 1<br/>        j% += 1<br/>        p% = 0<br/>        q% = -r%<br/>        REPEAT<br/>          i% += 1<br/>          c%(p%) = 1<br/>          c%(q%+r%) = 1<br/>          SWAP a%(i%),a%(j%)<br/>          p% = i% - a%(i%) + n%<br/>          q% = i% + a%(i%) - 1<br/>          b%(i%) = j%<br/>          j% = i% + 1<br/>        UNTIL j% &gt; n% OR c%(p%) OR c%(q%+r%)<br/>        IF c%(p%)=0 IF c%(q%+r%)=0 THEN<br/>          IF m% = 0 THEN<br/>            FOR p% = 1 TO n%<br/>              MOVE 2*s%*(a%(p%)-1)+6, 2*s%*p%+6<br/>              PRINT \"\u265b\";<br/>            NEXT<br/>          ENDIF<br/>          m% += 1<br/>        ENDIF<br/>        j% = b%(i%)<br/>        WHILE j% &gt;= n% AND i% &lt;&gt; 0<br/>          REPEAT<br/>            SWAP a%(i%), a%(j%)<br/>            j% = j%-1<br/>          UNTIL j% &lt; i%<br/>          i% -= 1<br/>          p% = i% - a%(i%) + n%<br/>          q% = i% + a%(i%) - 1<br/>          j% = b%(i%)<br/>          c%(p%) = 0<br/>          c%(q%+r%) = 0<br/>        ENDWHILE<br/>      UNTIL i% = 0<br/>      = m%</pre>"}, {"lang": "BCPL", "loc": 31, "block": "<pre class=\"text highlighted_source\">// This can be run using Cintcode BCPL freely available from www.cl.cam.ac.uk/users/mr10.<br/>\u00a0<br/>GET \"libhdr.h\"<br/>\u00a0<br/>GLOBAL { count:ug; all  }<br/>\u00a0<br/>LET try(ld, row, rd) BE TEST row=all<br/>\u00a0<br/>                        THEN count\u00a0:= count + 1<br/>\u00a0<br/>                        ELSE { LET poss = all &amp; ~(ld | row | rd)<br/>                               WHILE poss DO<br/>                               { LET p = poss &amp; -poss<br/>                                 poss\u00a0:= poss - p<br/>                                 try(ld+p &lt;&lt; 1, row+p, rd+p &gt;&gt; 1)<br/>                               }<br/>                             }<br/>\u00a0<br/>LET start() = VALOF<br/>{ all\u00a0:= 1<br/>\u00a0<br/>  FOR i = 1 TO 16 DO<br/>  { count\u00a0:= 0<br/>    try(0, 0, 0)<br/>    writef(\"Number of solutions to\u00a0%i2-queens is\u00a0%i7*n\", i, count)<br/>    all\u00a0:= 2*all + 1<br/>  }<br/>\u00a0<br/>  RESULTIS 0<br/>}<br/>\u00a0</pre>"}, {"lang": "Befunge", "loc": 4, "block": "<pre class=\"text highlighted_source\">&lt;<a class=\"__cf_email__\" data-cfemail=\"dbf0f6f683839b\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>_v#!:-1,+55,g\\1$_:00g2%-0vv:,+55&lt;&amp;,,,,,,\"Size: \"<br/>\"| Q\"$$$&gt;:01p:2%!00g0&gt;&gt;^&lt;&lt;!:-1\\&lt;1&gt;00p::2%-:40p2/50p2*1+<br/>!77**48*+31p\\:1\\g,::2\\g:,\\3\\g,,^g&gt;0g++40g%40g\\-\\40g\\`*-<br/>2g05\\**!!%6g04-g052!:`\\g05::-1/2&lt;^4*2%g05\\+*+1*!!%6g04-</pre>"}, {"lang": "Bracmat", "loc": 61, "block": "<pre class=\"text highlighted_source\">(   ( printBoard<br/>    =   board M L x y S R row line<br/>      .  \u00a0:?board<br/>        &amp;\u00a0!ups:? [?M<br/>        &amp;   whl<br/>          ' (\u00a0!arg:(?x.?y)\u00a0?arg<br/>            &amp;\u00a0!M:?L<br/>            &amp;\u00a0:?row:?line<br/>            &amp;   whl<br/>              ' (\u00a0!L+-1:~&lt;0:?L<br/>                &amp;\u00a0!x+1:~&gt;!M:?x<br/>                &amp; \"---+\"\u00a0!line:?line<br/>                &amp; \"   |\"\u00a0!row:?row<br/>                )<br/>            &amp; \"---+\"\u00a0!line:?line<br/>            &amp; \" Q |\"\u00a0!row:?row<br/>            &amp;   whl<br/>              ' (\u00a0!L+-1:~&lt;0:?L<br/>                &amp; \"---+\"\u00a0!line:?line<br/>                &amp; \"   |\"\u00a0!row:?row<br/>                )<br/>            &amp; \"\\n|\"\u00a0!row \"\\n+\"\u00a0!line\u00a0!board:?board<br/>            )<br/>        &amp; str$(\"\\n+\"\u00a0!line\u00a0!board)<br/>    )<br/>    ( queens<br/>    =   hor ver up down ups downs a z A Z x y Q<br/>      .  \u00a0!arg:(?hor.?ver.?ups.?downs.?Q)<br/>        &amp;  \u00a0!ver<br/>         \u00a0: (   <br/>              &amp; 1+!solutions:?solutions<br/>              { Comment the line below if you only want a count. }<br/>              &amp; out$(str$(\"\\nsolution \"\u00a0!solutions) printBoard$!Q)<br/>              &amp; ~  { Fail! (and backtrack to find more solutions)}<br/>            |   #%?y<br/>                (\u00a0?z<br/>                &amp;  \u00a0!hor<br/>                 \u00a0:  \u00a0?A<br/>                      #%?x<br/>                      (\u00a0?Z<br/>                      &amp;\u00a0!x+!y:?up<br/>                      &amp;\u00a0!x+-1*!y:?down<br/>                      &amp; ~(!ups:?\u00a0!up\u00a0?)<br/>                      &amp; ~(!downs:?\u00a0!down\u00a0?)<br/>                      &amp;   queens<br/>                        $ (\u00a0!A\u00a0!Z<br/>                          .\u00a0!z<br/>                          .\u00a0!up\u00a0!ups<br/>                          .\u00a0!down\u00a0!downs<br/>                          . (!x.!y)\u00a0!Q<br/>                          )<br/>                      )<br/>                )<br/>            )<br/>    )<br/>&amp; 0:?solutions<br/>&amp; 1 2 3 4 5 6 7 8:?H:?V   {You can edit this line to find solutions for other sizes.}<br/>&amp; ( queens$(!H.!V...) <br/>  | out$(found\u00a0!solutions solutions)<br/>  )<br/>);</pre>"}, {"lang": "C", "loc": 31, "block": "<pre class=\"c highlighted_source\"><span class=\"co2\">#include &lt;stdio.h&gt;</span><br/><span class=\"co2\">#include &lt;stdlib.h&gt;</span><br/>\u00a0<br/><span class=\"kw4\">int</span> count <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span><br/><span class=\"kw4\">void</span> solve<span class=\"br0\">(</span><span class=\"kw4\">int</span> n<span class=\"sy0\">,</span> <span class=\"kw4\">int</span> col<span class=\"sy0\">,</span> <span class=\"kw4\">int</span> <span class=\"sy0\">*</span>hist<span class=\"br0\">)</span><br/><span class=\"br0\">{</span><br/>\t<span class=\"kw1\">if</span> <span class=\"br0\">(</span>col <span class=\"sy0\">==</span> n<span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>\t\t<a href=\"http://www.opengroup.org/onlinepubs/009695399/functions/printf.html\"><span class=\"kw3\">printf</span></a><span class=\"br0\">(</span><span class=\"st0\">\"<span class=\"es1\">\\n</span>No.\u00a0%d<span class=\"es1\">\\n</span>-----<span class=\"es1\">\\n</span>\"</span><span class=\"sy0\">,</span> <span class=\"sy0\">++</span>count<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>\t\t<span class=\"kw1\">for</span> <span class=\"br0\">(</span><span class=\"kw4\">int</span> i <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span> i <span class=\"sy0\">&lt;</span> n<span class=\"sy0\">;</span> i<span class=\"sy0\">++,</span> <a href=\"http://www.opengroup.org/onlinepubs/009695399/functions/putchar.html\"><span class=\"kw3\">putchar</span></a><span class=\"br0\">(</span><span class=\"st0\">'<span class=\"es1\">\\n</span>'</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\t\t\t<span class=\"kw1\">for</span> <span class=\"br0\">(</span><span class=\"kw4\">int</span> j <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span> j <span class=\"sy0\">&lt;</span> n<span class=\"sy0\">;</span> j<span class=\"sy0\">++</span><span class=\"br0\">)</span><br/>\t\t\t\t<a href=\"http://www.opengroup.org/onlinepubs/009695399/functions/putchar.html\"><span class=\"kw3\">putchar</span></a><span class=\"br0\">(</span>j <span class=\"sy0\">==</span> hist<span class=\"br0\">[</span>i<span class=\"br0\">]</span> <span class=\"sy0\">?</span> <span class=\"st0\">'Q'</span> <span class=\"sy0\">:</span> <span class=\"br0\">(</span><span class=\"br0\">(</span>i <span class=\"sy0\">+</span> j<span class=\"br0\">)</span> <span class=\"sy0\">&amp;</span> <span class=\"nu0\">1</span><span class=\"br0\">)</span> <span class=\"sy0\">?</span> <span class=\"st0\">' '</span> <span class=\"sy0\">:</span> <span class=\"st0\">'.'</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>\u00a0<br/>\t\t<span class=\"kw1\">return</span><span class=\"sy0\">;</span><br/>\t<span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"co2\">#\tdefine attack(i, j) (hist[j] == i || abs(hist[j] - i) == col - j)</span><br/>\t<span class=\"kw1\">for</span> <span class=\"br0\">(</span><span class=\"kw4\">int</span> i <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><span class=\"sy0\">,</span> j <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span> i <span class=\"sy0\">&lt;</span> n<span class=\"sy0\">;</span> i<span class=\"sy0\">++</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>\t\t<span class=\"kw1\">for</span> <span class=\"br0\">(</span>j <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span> j <span class=\"sy0\">&lt;</span> col <span class=\"sy0\">&amp;&amp;</span> <span class=\"sy0\">!</span>attack<span class=\"br0\">(</span>i<span class=\"sy0\">,</span> j<span class=\"br0\">)</span><span class=\"sy0\">;</span> j<span class=\"sy0\">++</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>\t\t<span class=\"kw1\">if</span> <span class=\"br0\">(</span>j <span class=\"sy0\">&lt;</span> col<span class=\"br0\">)</span> <span class=\"kw1\">continue</span><span class=\"sy0\">;</span><br/>\u00a0<br/>\t\thist<span class=\"br0\">[</span>col<span class=\"br0\">]</span> <span class=\"sy0\">=</span> i<span class=\"sy0\">;</span><br/>\t\tsolve<span class=\"br0\">(</span>n<span class=\"sy0\">,</span> col <span class=\"sy0\">+</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> hist<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>\t<span class=\"br0\">}</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"kw4\">int</span> main<span class=\"br0\">(</span><span class=\"kw4\">int</span> n<span class=\"sy0\">,</span> <span class=\"kw4\">char</span> <span class=\"sy0\">**</span>argv<span class=\"br0\">)</span><br/><span class=\"br0\">{</span><br/>\t<span class=\"kw1\">if</span> <span class=\"br0\">(</span>n <span class=\"sy0\">&lt;=</span> <span class=\"nu0\">1</span> <span class=\"sy0\">||</span> <span class=\"br0\">(</span>n <span class=\"sy0\">=</span> <a href=\"http://www.opengroup.org/onlinepubs/009695399/functions/atoi.html\"><span class=\"kw3\">atoi</span></a><span class=\"br0\">(</span>argv<span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"sy0\">&lt;=</span> <span class=\"nu0\">0</span><span class=\"br0\">)</span> n <span class=\"sy0\">=</span> <span class=\"nu0\">8</span><span class=\"sy0\">;</span><br/>\t<span class=\"kw4\">int</span> hist<span class=\"br0\">[</span>n<span class=\"br0\">]</span><span class=\"sy0\">;</span><br/>\tsolve<span class=\"br0\">(</span>n<span class=\"sy0\">,</span> <span class=\"nu0\">0</span><span class=\"sy0\">,</span> hist<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/><span class=\"br0\">}</span></pre>"}, {"lang": "C++", "loc": 104, "block": "<pre class=\"cpp highlighted_source\"><span class=\"co1\">// Much shorter than the version below;</span><br/><span class=\"co1\">// uses C++11 threads to parallelize the computation; also uses backtracking</span><br/><span class=\"co1\">// Outputs all solutions for any table size</span><br/><span class=\"co2\">#include &lt;vector&gt;</span><br/><span class=\"co2\">#include &lt;iostream&gt;</span><br/><span class=\"co2\">#include &lt;iomanip&gt;</span><br/><span class=\"co2\">#include &lt;thread&gt;</span><br/><span class=\"co2\">#include &lt;future&gt;</span><br/>\u00a0<br/><span class=\"co1\">// Print table. 'pos' is a vector of positions \u2013 the index in pos is the row,</span><br/><span class=\"co1\">// and the number at that index is the column where the queen is placed.</span><br/><span class=\"kw4\">static</span> <span class=\"kw4\">void</span> print<span class=\"br0\">(</span><span class=\"kw4\">const</span> std<span class=\"sy4\">::</span><span class=\"me2\">vector</span><span class=\"sy1\">&lt;</span><span class=\"kw4\">int</span><span class=\"sy1\">&gt;</span> <span class=\"sy3\">&amp;</span>pos<span class=\"br0\">)</span><br/><span class=\"br0\">{</span><br/>\t<span class=\"co1\">// print table header</span><br/>\t<span class=\"kw1\">for</span> <span class=\"br0\">(</span><span class=\"kw4\">int</span> i <span class=\"sy1\">=</span> <span class=\"nu0\">0</span><span class=\"sy4\">;</span> i <span class=\"sy1\">&lt;</span> pos.<span class=\"me1\">size</span><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"sy4\">;</span> i<span class=\"sy2\">++</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>\t\tstd<span class=\"sy4\">::</span><span class=\"kw3\">cout</span> <span class=\"sy1\">&lt;&lt;</span> std<span class=\"sy4\">::</span><span class=\"me2\">setw</span><span class=\"br0\">(</span><span class=\"nu0\">3</span><span class=\"br0\">)</span> <span class=\"sy1\">&lt;&lt;</span> <span class=\"kw4\">char</span><span class=\"br0\">(</span><span class=\"st0\">'a'</span> <span class=\"sy2\">+</span> i<span class=\"br0\">)</span><span class=\"sy4\">;</span><br/>\t<span class=\"br0\">}</span><br/>\u00a0<br/>\tstd<span class=\"sy4\">::</span><span class=\"kw3\">cout</span> <span class=\"sy1\">&lt;&lt;</span> <span class=\"st0\">'<span class=\"es1\">\\n</span>'</span><span class=\"sy4\">;</span><br/>\u00a0<br/>\t<span class=\"kw1\">for</span> <span class=\"br0\">(</span><span class=\"kw4\">int</span> row <span class=\"sy1\">=</span> <span class=\"nu0\">0</span><span class=\"sy4\">;</span> row <span class=\"sy1\">&lt;</span> pos.<span class=\"me1\">size</span><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"sy4\">;</span> row<span class=\"sy2\">++</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>\t\t<span class=\"kw4\">int</span> col <span class=\"sy1\">=</span> pos<span class=\"br0\">[</span>row<span class=\"br0\">]</span><span class=\"sy4\">;</span><br/>\t\tstd<span class=\"sy4\">::</span><span class=\"kw3\">cout</span> <span class=\"sy1\">&lt;&lt;</span> row <span class=\"sy2\">+</span> <span class=\"nu0\">1</span> <span class=\"sy1\">&lt;&lt;</span> std<span class=\"sy4\">::</span><span class=\"me2\">setw</span><span class=\"br0\">(</span><span class=\"nu0\">3</span> <span class=\"sy2\">*</span> col <span class=\"sy2\">+</span> <span class=\"nu0\">3</span><span class=\"br0\">)</span> <span class=\"sy1\">&lt;&lt;</span> <span class=\"st0\">\" # \"</span><span class=\"sy4\">;</span><br/>\t\tstd<span class=\"sy4\">::</span><span class=\"kw3\">cout</span> <span class=\"sy1\">&lt;&lt;</span> <span class=\"st0\">'<span class=\"es1\">\\n</span>'</span><span class=\"sy4\">;</span><br/>\t<span class=\"br0\">}</span><br/>\u00a0<br/>\tstd<span class=\"sy4\">::</span><span class=\"kw3\">cout</span> <span class=\"sy1\">&lt;&lt;</span> <span class=\"st0\">\"<span class=\"es1\">\\n</span><span class=\"es1\">\\n</span>\"</span><span class=\"sy4\">;</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"kw4\">static</span> <span class=\"kw4\">bool</span> threatens<span class=\"br0\">(</span><span class=\"kw4\">int</span> row_a, <span class=\"kw4\">int</span> col_a, <span class=\"kw4\">int</span> row_b, <span class=\"kw4\">int</span> col_b<span class=\"br0\">)</span><br/><span class=\"br0\">{</span><br/>\t<span class=\"kw1\">return</span> row_a <span class=\"sy1\">==</span> row_b <span class=\"co1\">// same row</span><br/>\t\tor col_a <span class=\"sy1\">==</span> col_b <span class=\"co1\">// same column</span><br/>\t\tor std<span class=\"sy4\">::</span><span class=\"kw3\">abs</span><span class=\"br0\">(</span>row_a <span class=\"sy2\">-</span> row_b<span class=\"br0\">)</span> <span class=\"sy1\">==</span> std<span class=\"sy4\">::</span><span class=\"kw3\">abs</span><span class=\"br0\">(</span>col_a <span class=\"sy2\">-</span> col_b<span class=\"br0\">)</span><span class=\"sy4\">;</span> <span class=\"co1\">// diagonal</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"co1\">// the i-th queen is in the i-th row</span><br/><span class=\"co1\">// we only check rows up to end_idx</span><br/><span class=\"co1\">// so that the same function can be used for backtracking and checking the final solution</span><br/><span class=\"kw4\">static</span> <span class=\"kw4\">bool</span> good<span class=\"br0\">(</span><span class=\"kw4\">const</span> std<span class=\"sy4\">::</span><span class=\"me2\">vector</span><span class=\"sy1\">&lt;</span><span class=\"kw4\">int</span><span class=\"sy1\">&gt;</span> <span class=\"sy3\">&amp;</span>pos, <span class=\"kw4\">int</span> end_idx<span class=\"br0\">)</span><br/><span class=\"br0\">{</span><br/>\t<span class=\"kw1\">for</span> <span class=\"br0\">(</span><span class=\"kw4\">int</span> row_a <span class=\"sy1\">=</span> <span class=\"nu0\">0</span><span class=\"sy4\">;</span> row_a <span class=\"sy1\">&lt;</span> end_idx<span class=\"sy4\">;</span> row_a<span class=\"sy2\">++</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>\t\t<span class=\"kw1\">for</span> <span class=\"br0\">(</span><span class=\"kw4\">int</span> row_b <span class=\"sy1\">=</span> row_a <span class=\"sy2\">+</span> <span class=\"nu0\">1</span><span class=\"sy4\">;</span> row_b <span class=\"sy1\">&lt;</span> end_idx<span class=\"sy4\">;</span> row_b<span class=\"sy2\">++</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>\t\t\t<span class=\"kw4\">int</span> col_a <span class=\"sy1\">=</span> pos<span class=\"br0\">[</span>row_a<span class=\"br0\">]</span><span class=\"sy4\">;</span><br/>\t\t\t<span class=\"kw4\">int</span> col_b <span class=\"sy1\">=</span> pos<span class=\"br0\">[</span>row_b<span class=\"br0\">]</span><span class=\"sy4\">;</span><br/>\t\t\t<span class=\"kw1\">if</span> <span class=\"br0\">(</span>threatens<span class=\"br0\">(</span>row_a, col_a, row_b, col_b<span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>\t\t\t\t<span class=\"kw1\">return</span> <span class=\"kw2\">false</span><span class=\"sy4\">;</span><br/>\t\t\t<span class=\"br0\">}</span><br/>\t\t<span class=\"br0\">}</span><br/>\t<span class=\"br0\">}</span><br/>\u00a0<br/>\t<span class=\"kw1\">return</span> <span class=\"kw2\">true</span><span class=\"sy4\">;</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"kw4\">static</span> std<span class=\"sy4\">::</span><span class=\"me2\">mutex</span> print_count_mutex<span class=\"sy4\">;</span> <span class=\"co1\">// mutex protecting 'n_sols'</span><br/><span class=\"kw4\">static</span> <span class=\"kw4\">int</span> n_sols <span class=\"sy1\">=</span> <span class=\"nu0\">0</span><span class=\"sy4\">;</span> <span class=\"co1\">// number of solutions</span><br/>\u00a0<br/><span class=\"co1\">// recursive DFS backtracking solver</span><br/><span class=\"kw4\">static</span> <span class=\"kw4\">void</span> n_queens<span class=\"br0\">(</span>std<span class=\"sy4\">::</span><span class=\"me2\">vector</span><span class=\"sy1\">&lt;</span><span class=\"kw4\">int</span><span class=\"sy1\">&gt;</span> <span class=\"sy3\">&amp;</span>pos, <span class=\"kw4\">int</span> index<span class=\"br0\">)</span><br/><span class=\"br0\">{</span><br/>\t<span class=\"co1\">// if we have placed a queen in each row (i. e. we are at a leaf of the search tree), check solution and return</span><br/>\t<span class=\"kw1\">if</span> <span class=\"br0\">(</span>index <span class=\"sy1\">&gt;=</span> pos.<span class=\"me1\">size</span><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>\t\t<span class=\"kw1\">if</span> <span class=\"br0\">(</span>good<span class=\"br0\">(</span>pos, index<span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>\t\t\tstd<span class=\"sy4\">::</span><span class=\"me2\">lock_guard</span><span class=\"sy1\">&lt;</span>std<span class=\"sy4\">::</span><span class=\"me2\">mutex</span><span class=\"sy1\">&gt;</span> lock<span class=\"br0\">(</span>print_count_mutex<span class=\"br0\">)</span><span class=\"sy4\">;</span><br/>\t\t\tprint<span class=\"br0\">(</span>pos<span class=\"br0\">)</span><span class=\"sy4\">;</span><br/>\t\t\tn_sols<span class=\"sy2\">++</span><span class=\"sy4\">;</span><br/>\t\t<span class=\"br0\">}</span><br/>\u00a0<br/>\t\t<span class=\"kw1\">return</span><span class=\"sy4\">;</span><br/>\t<span class=\"br0\">}</span><br/>\u00a0<br/>\t<span class=\"co1\">// backtracking step</span><br/>\t<span class=\"kw1\">if</span> <span class=\"br0\">(</span>not good<span class=\"br0\">(</span>pos, index<span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>\t\t<span class=\"kw1\">return</span><span class=\"sy4\">;</span><br/>\t<span class=\"br0\">}</span><br/>\u00a0<br/>\t<span class=\"co1\">// optimization: the first level of the search tree is parallelized</span><br/>\t<span class=\"kw1\">if</span> <span class=\"br0\">(</span>index <span class=\"sy1\">==</span> <span class=\"nu0\">0</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>\t\tstd<span class=\"sy4\">::</span><span class=\"me2\">vector</span><span class=\"sy1\">&lt;</span>std<span class=\"sy4\">::</span><span class=\"me2\">future</span><span class=\"sy1\">&lt;</span><span class=\"kw4\">void</span><span class=\"sy1\">&gt;&gt;</span> fts<span class=\"sy4\">;</span><br/>\t\t<span class=\"kw1\">for</span> <span class=\"br0\">(</span><span class=\"kw4\">int</span> col <span class=\"sy1\">=</span> <span class=\"nu0\">0</span><span class=\"sy4\">;</span> col <span class=\"sy1\">&lt;</span> pos.<span class=\"me1\">size</span><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"sy4\">;</span> col<span class=\"sy2\">++</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>\t\t\tpos<span class=\"br0\">[</span>index<span class=\"br0\">]</span> <span class=\"sy1\">=</span> col<span class=\"sy4\">;</span><br/>\t\t\t<span class=\"kw4\">auto</span> ft <span class=\"sy1\">=</span> std<span class=\"sy4\">::</span><span class=\"me2\">async</span><span class=\"br0\">(</span>std<span class=\"sy4\">::</span><span class=\"me2\">launch</span><span class=\"sy4\">::</span><span class=\"me2\">async</span>, <span class=\"br0\">[</span><span class=\"sy1\">=</span><span class=\"br0\">]</span><span class=\"br0\">{</span> <span class=\"kw4\">auto</span> cpos<span class=\"br0\">(</span>pos<span class=\"br0\">)</span><span class=\"sy4\">;</span> n_queens<span class=\"br0\">(</span>cpos, index <span class=\"sy2\">+</span> <span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"sy4\">;</span> <span class=\"br0\">}</span><span class=\"br0\">)</span><span class=\"sy4\">;</span><br/>\t\t\tfts.<span class=\"me1\">push_back</span><span class=\"br0\">(</span>std<span class=\"sy4\">::</span><span class=\"me2\">move</span><span class=\"br0\">(</span>ft<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"sy4\">;</span><br/>\t\t<span class=\"br0\">}</span><br/>\u00a0<br/>\t\t<span class=\"kw1\">for</span> <span class=\"br0\">(</span><span class=\"kw4\">const</span> <span class=\"kw4\">auto</span> <span class=\"sy3\">&amp;</span>ft <span class=\"sy4\">:</span> fts<span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>\t\t\tft.<span class=\"me1\">wait</span><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"sy4\">;</span><br/>\t\t<span class=\"br0\">}</span><br/>\t<span class=\"br0\">}</span> <span class=\"kw1\">else</span> <span class=\"br0\">{</span> <span class=\"co1\">// deeper levels are not</span><br/>\t\t<span class=\"kw1\">for</span> <span class=\"br0\">(</span><span class=\"kw4\">int</span> col <span class=\"sy1\">=</span> <span class=\"nu0\">0</span><span class=\"sy4\">;</span> col <span class=\"sy1\">&lt;</span> pos.<span class=\"me1\">size</span><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"sy4\">;</span> col<span class=\"sy2\">++</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>\t\t\tpos<span class=\"br0\">[</span>index<span class=\"br0\">]</span> <span class=\"sy1\">=</span> col<span class=\"sy4\">;</span><br/>\t\t\tn_queens<span class=\"br0\">(</span>pos, index <span class=\"sy2\">+</span> <span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"sy4\">;</span><br/>\t\t<span class=\"br0\">}</span><br/>\t<span class=\"br0\">}</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"kw4\">int</span> main<span class=\"br0\">(</span><span class=\"br0\">)</span><br/><span class=\"br0\">{</span><br/>\tstd<span class=\"sy4\">::</span><span class=\"me2\">vector</span><span class=\"sy1\">&lt;</span><span class=\"kw4\">int</span><span class=\"sy1\">&gt;</span> start<span class=\"br0\">(</span><span class=\"nu0\">12</span><span class=\"br0\">)</span><span class=\"sy4\">;</span> <span class=\"co1\">// 12: table size</span><br/>\tn_queens<span class=\"br0\">(</span>start, <span class=\"nu0\">0</span><span class=\"br0\">)</span><span class=\"sy4\">;</span><br/>\tstd<span class=\"sy4\">::</span><span class=\"kw3\">cout</span> <span class=\"sy1\">&lt;&lt;</span> n_sols <span class=\"sy1\">&lt;&lt;</span> <span class=\"st0\">\" solutions found.<span class=\"es1\">\\n</span>\"</span><span class=\"sy4\">;</span><br/>\t<span class=\"kw1\">return</span> <span class=\"nu0\">0</span><span class=\"sy4\">;</span><br/><span class=\"br0\">}</span><br/>\u00a0</pre>"}, {"lang": "C#", "loc": 64, "block": "<pre class=\"csharp highlighted_source\"><span class=\"kw1\">using</span> <span class=\"co3\">System</span><span class=\"sy0\">;</span><br/><span class=\"kw1\">using</span> <span class=\"co3\">System.Collections.Generic</span><span class=\"sy0\">;</span><br/><span class=\"kw1\">using</span> <span class=\"co3\">System.Linq</span><span class=\"sy0\">;</span><br/><span class=\"kw1\">using</span> <span class=\"co3\">System.Text</span><span class=\"sy0\">;</span><br/>\u00a0<br/><span class=\"kw1\">namespace</span> NQueens<br/><span class=\"br0\">{</span><br/>    <span class=\"kw4\">class</span> Program<br/>    <span class=\"br0\">{</span><br/>        <span class=\"kw1\">const</span> <span class=\"kw4\">int</span> N <span class=\"sy0\">=</span> <span class=\"nu0\">8</span><span class=\"sy0\">;</span><br/>\u00a0<br/>        <span class=\"kw1\">static</span> <span class=\"kw4\">bool</span> Allowed<span class=\"br0\">(</span><span class=\"kw4\">bool</span><span class=\"br0\">[</span>,<span class=\"br0\">]</span> board, <span class=\"kw4\">int</span> x, <span class=\"kw4\">int</span> y<span class=\"br0\">)</span><br/>        <span class=\"br0\">{</span><br/>            <span class=\"kw1\">for</span> <span class=\"br0\">(</span><span class=\"kw4\">int</span> i<span class=\"sy0\">=</span><span class=\"nu0\">0</span><span class=\"sy0\">;</span> i<span class=\"sy0\">&lt;=</span>x<span class=\"sy0\">;</span> i<span class=\"sy0\">++</span><span class=\"br0\">)</span><br/>            <span class=\"br0\">{</span><br/>                <span class=\"kw1\">if</span> <span class=\"br0\">(</span>board<span class=\"br0\">[</span>i,y<span class=\"br0\">]</span> <span class=\"sy0\">||</span> <span class=\"br0\">(</span>i <span class=\"sy0\">&lt;=</span> y <span class=\"sy0\">&amp;&amp;</span> board<span class=\"br0\">[</span>x<span class=\"sy0\">-</span>i,y<span class=\"sy0\">-</span>i<span class=\"br0\">]</span><span class=\"br0\">)</span> <span class=\"sy0\">||</span> <span class=\"br0\">(</span>y<span class=\"sy0\">+</span>i <span class=\"sy0\">&lt;</span> N <span class=\"sy0\">&amp;&amp;</span> board<span class=\"br0\">[</span>x<span class=\"sy0\">-</span>i,y<span class=\"sy0\">+</span>i<span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>                <span class=\"br0\">{</span><br/>                    <span class=\"kw1\">return</span> <span class=\"kw1\">false</span><span class=\"sy0\">;</span><br/>                <span class=\"br0\">}</span><br/>            <span class=\"br0\">}</span><br/>            <span class=\"kw1\">return</span> <span class=\"kw1\">true</span><span class=\"sy0\">;</span><br/>        <span class=\"br0\">}</span><br/>\u00a0<br/>        <span class=\"kw1\">static</span> <span class=\"kw4\">bool</span> FindSolution<span class=\"br0\">(</span><span class=\"kw4\">bool</span><span class=\"br0\">[</span>,<span class=\"br0\">]</span> board, <span class=\"kw4\">int</span> x<span class=\"br0\">)</span><br/>        <span class=\"br0\">{</span><br/>            <span class=\"kw1\">for</span> <span class=\"br0\">(</span><span class=\"kw4\">int</span> y <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span> y <span class=\"sy0\">&lt;</span> N<span class=\"sy0\">;</span> y<span class=\"sy0\">++</span><span class=\"br0\">)</span><br/>            <span class=\"br0\">{</span><br/>                <span class=\"kw1\">if</span> <span class=\"br0\">(</span>Allowed<span class=\"br0\">(</span>board, x, y<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>                <span class=\"br0\">{</span><br/>                    board<span class=\"br0\">[</span>x, y<span class=\"br0\">]</span> <span class=\"sy0\">=</span> <span class=\"kw1\">true</span><span class=\"sy0\">;</span><br/>                    <span class=\"kw1\">if</span> <span class=\"br0\">(</span>x <span class=\"sy0\">==</span> N<span class=\"sy0\">-</span><span class=\"nu0\">1</span> <span class=\"sy0\">||</span> FindSolution<span class=\"br0\">(</span>board, x <span class=\"sy0\">+</span> <span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>                    <span class=\"br0\">{</span><br/>                        <span class=\"kw1\">return</span> <span class=\"kw1\">true</span><span class=\"sy0\">;</span><br/>                    <span class=\"br0\">}</span><br/>                    board<span class=\"br0\">[</span>x, y<span class=\"br0\">]</span> <span class=\"sy0\">=</span> <span class=\"kw1\">false</span><span class=\"sy0\">;</span><br/>                <span class=\"br0\">}</span><br/>            <span class=\"br0\">}</span><br/>            <span class=\"kw1\">return</span> <span class=\"kw1\">false</span><span class=\"sy0\">;</span><br/>        <span class=\"br0\">}</span><br/>\u00a0<br/>        <span class=\"kw1\">static</span> <span class=\"kw4\">void</span> Main<span class=\"br0\">(</span><span class=\"kw4\">string</span><span class=\"br0\">[</span><span class=\"br0\">]</span> args<span class=\"br0\">)</span><br/>        <span class=\"br0\">{</span><br/>            <span class=\"kw4\">bool</span><span class=\"br0\">[</span>,<span class=\"br0\">]</span> board <span class=\"sy0\">=</span> <a href=\"http://www.google.com/search?q=new+msdn.microsoft.com\"><span class=\"kw3\">new</span></a> <span class=\"kw4\">bool</span><span class=\"br0\">[</span>N, N<span class=\"br0\">]</span><span class=\"sy0\">;</span><br/>\u00a0<br/>            <span class=\"kw1\">if</span> <span class=\"br0\">(</span>FindSolution<span class=\"br0\">(</span>board, <span class=\"nu0\">0</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>            <span class=\"br0\">{</span><br/>                <span class=\"kw1\">for</span> <span class=\"br0\">(</span><span class=\"kw4\">int</span> i <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span> i <span class=\"sy0\">&lt;</span> N<span class=\"sy0\">;</span> i<span class=\"sy0\">++</span><span class=\"br0\">)</span><br/>                <span class=\"br0\">{</span><br/>                    <span class=\"kw1\">for</span> <span class=\"br0\">(</span><span class=\"kw4\">int</span> j <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span> j <span class=\"sy0\">&lt;</span> N<span class=\"sy0\">;</span> j<span class=\"sy0\">++</span><span class=\"br0\">)</span><br/>                    <span class=\"br0\">{</span><br/>                        Console<span class=\"sy0\">.</span><span class=\"me1\">Write</span><span class=\"br0\">(</span>board<span class=\"br0\">[</span>i, j<span class=\"br0\">]</span> <span class=\"sy0\">?</span> <span class=\"st0\">\"|Q\"</span> <span class=\"sy0\">:</span> <span class=\"st0\">\"| \"</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>                    <span class=\"br0\">}</span><br/>                    Console<span class=\"sy0\">.</span><span class=\"me1\">WriteLine</span><span class=\"br0\">(</span><span class=\"st0\">\"|\"</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>                <span class=\"br0\">}</span><br/>            <span class=\"br0\">}</span><br/>            <span class=\"kw1\">else</span><br/>            <span class=\"br0\">{</span><br/>                Console<span class=\"sy0\">.</span><span class=\"me1\">WriteLine</span><span class=\"br0\">(</span><span class=\"st0\">\"No solution found for n = \"</span> <span class=\"sy0\">+</span> N <span class=\"sy0\">+</span> <span class=\"st0\">\".\"</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>            <span class=\"br0\">}</span><br/>\u00a0<br/>            Console<span class=\"sy0\">.</span><span class=\"me1\">ReadKey</span><span class=\"br0\">(</span><span class=\"kw1\">true</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        <span class=\"br0\">}</span><br/>    <span class=\"br0\">}</span><br/><span class=\"br0\">}</span></pre>"}, {"lang": "Clojure", "loc": 23, "block": "<pre class=\"clojure highlighted_source\"><span class=\"br0\">(</span><span class=\"kw1\">def</span> size <span class=\"nu0\">8</span><span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"br0\">(</span><span class=\"kw1\">defn</span> extends? <span class=\"br0\">[</span>v n<span class=\"br0\">]</span><br/>  <span class=\"br0\">(</span><span class=\"kw1\">let</span> <span class=\"br0\">[</span>k <span class=\"br0\">(</span><span class=\"kw1\">count</span> v<span class=\"br0\">)</span><span class=\"br0\">]</span><br/>    <span class=\"br0\">(</span><span class=\"kw1\">not-any?</span> true?<br/>      <span class=\"br0\">(</span><span class=\"kw1\">for</span> <span class=\"br0\">[</span>i <span class=\"br0\">(</span><span class=\"kw1\">range</span> k<span class=\"br0\">)</span>\u00a0:<span class=\"kw1\">let</span> <span class=\"br0\">[</span>vi <span class=\"br0\">(</span>v i<span class=\"br0\">)</span><span class=\"br0\">]</span><span class=\"br0\">]</span><br/>        <span class=\"br0\">(</span><span class=\"kw1\">or</span><br/>          <span class=\"br0\">(</span><span class=\"sy0\">=</span> vi n<span class=\"br0\">)</span>  <span class=\"co1\">;check for shared row</span><br/>          <span class=\"br0\">(</span><span class=\"sy0\">=</span> <span class=\"br0\">(</span><span class=\"sy0\">-</span> k i<span class=\"br0\">)</span> <span class=\"br0\">(</span>Math<span class=\"sy0\">/</span>abs <span class=\"br0\">(</span><span class=\"sy0\">-</span> n vi<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"co1\">;check for shared diagonal</span><br/>\u00a0<br/><span class=\"br0\">(</span><span class=\"kw1\">defn</span> extend <span class=\"br0\">[</span>vs<span class=\"br0\">]</span><br/>  <span class=\"br0\">(</span><span class=\"kw1\">for</span> <span class=\"br0\">[</span>v vs<br/>        n <span class=\"br0\">(</span><span class=\"kw1\">range</span> <span class=\"nu0\">1</span> <span class=\"br0\">(</span><span class=\"kw1\">inc</span> size<span class=\"br0\">)</span><span class=\"br0\">)</span>\u00a0:<span class=\"kw1\">when</span> <span class=\"br0\">(</span>extends? v n<span class=\"br0\">)</span><span class=\"br0\">]</span><br/>    <span class=\"br0\">(</span><span class=\"kw1\">conj</span> v n<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\u00a0<br/>\u00a0<br/><span class=\"br0\">(</span><span class=\"kw1\">def</span> solutions<br/>  <span class=\"br0\">(</span>nth <span class=\"br0\">(</span><span class=\"kw1\">iterate</span> extend <span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"br0\">)</span> size<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"br0\">(</span><span class=\"kw1\">doseq</span> <span class=\"br0\">[</span>s solutions<span class=\"br0\">]</span><br/>  <span class=\"br0\">(</span>println s<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"br0\">(</span>println <span class=\"br0\">(</span><span class=\"kw1\">count</span> solutions<span class=\"br0\">)</span> <span class=\"st0\">\"solutions\"</span><span class=\"br0\">)</span></pre>"}, {"lang": "CoffeeScript", "loc": 113, "block": "<pre class=\"coffeescript highlighted_source\">\u00a0<br/><span class=\"co1\"># Unlike traditional N-Queens solutions that use recursion, this</span><br/><span class=\"co1\"># program attempts to more closely model the \"human\" algorithm.</span><br/><span class=\"co1\"># </span><br/><span class=\"co1\"># In this algorithm, the function keeps placing queens on the board</span><br/><span class=\"co1\"># until there is no longer a safe square.  If the 8th queen has been</span><br/><span class=\"co1\"># placed, the solution is noted.  If fewer than 8th queens have been</span><br/><span class=\"co1\"># placed, then you are at a dead end.  In either case, backtracking occurs.</span><br/><span class=\"co1\"># The LAST queen placed on the board gets pulled, then it gets moved</span><br/><span class=\"co1\"># to the next safe square.  (We backtrack even after a \"good\" attempt in </span><br/><span class=\"co1\"># order to get to a new solution.)  This backtracking may repeat itself</span><br/><span class=\"co1\"># several times until the original misplaced queen finally is proven to</span><br/><span class=\"co1\"># be a dead end.</span><br/><span class=\"co1\">#</span><br/><span class=\"co1\"># Many N-Queens solutions use lazy logic (along with geometry shortcuts)</span><br/><span class=\"co1\"># to determine whether a queen is under attack.  In this algorithm, we</span><br/><span class=\"co1\"># are more proactive, essentially updating a sieve every time we lay a</span><br/><span class=\"co1\"># queen down.  To make backtracking easier, the sieve uses ref-counts vs.</span><br/><span class=\"co1\"># a simple safe/unsafe boolean.</span><br/><span class=\"co1\">#</span><br/><span class=\"co1\"># We precompute the \"attack graph\" up front, and then we essentially ignore</span><br/><span class=\"co1\"># the geometry of the problem.  This approach, while perhaps suboptimal for</span><br/><span class=\"co1\"># queens, probably is more flexible for general \"coexistence\" problems.</span><br/>nqueens = <span class=\"br0\">(</span>n<span class=\"br0\">)</span> <span class=\"sy0\">-&gt;</span><br/>  neighbors = precompute_neighbors<span class=\"br0\">(</span>n<span class=\"br0\">)</span><br/>\u00a0<br/>  board = <span class=\"br0\">[</span><span class=\"br0\">]</span><br/>  num_solutions = <span class=\"nu0\">0</span><br/>  num_backtracks = <span class=\"nu0\">0</span><br/>  queens = <span class=\"br0\">[</span><span class=\"br0\">]</span><br/>  pos = <span class=\"nu0\">0</span><br/>\u00a0<br/>  <span class=\"kw1\">for</span> p <span class=\"kw1\">in</span> <span class=\"br0\">[</span><span class=\"nu0\">0</span>...<span class=\"me1\">n</span><span class=\"sy0\">*</span>n<span class=\"br0\">]</span><br/>    board.<span class=\"me1\">push</span> <span class=\"nu0\">0</span><br/>\u00a0<br/>  attack = <span class=\"br0\">(</span>pos<span class=\"sy0\">,</span> delta=<span class=\"nu0\">1</span><span class=\"br0\">)</span> <span class=\"sy0\">-&gt;</span><br/>    <span class=\"kw1\">for</span> neighbor <span class=\"kw1\">in</span> neighbors<span class=\"br0\">[</span>pos<span class=\"br0\">]</span><br/>      board<span class=\"br0\">[</span>neighbor<span class=\"br0\">]</span> <span class=\"sy0\">+</span>= delta<br/>\u00a0<br/>  backtrack = <span class=\"sy0\">-&gt;</span><br/>    pos = queens.<span class=\"me1\">pop</span><span class=\"br0\">(</span><span class=\"br0\">)</span><br/>    attack pos<span class=\"sy0\">,</span> <span class=\"sy0\">-</span><span class=\"nu0\">1</span> <span class=\"co1\"># unattack queen you just pulled</span><br/>    pos <span class=\"sy0\">+</span>= <span class=\"nu0\">1</span><br/>    num_backtracks <span class=\"sy0\">+</span>= <span class=\"nu0\">1</span><br/>\u00a0<br/>  <span class=\"co1\"># The following loop finds all 92 solutions to </span><br/>  <span class=\"co1\"># the 8-queens problem (for n=8).</span><br/>  <span class=\"kw1\">while</span> <span class=\"kw4\">true</span>  <br/>    <span class=\"kw1\">if</span> pos <span class=\"sy0\">&gt;</span>= n<span class=\"sy0\">*</span>n<br/>      <span class=\"kw1\">if</span> queens.<span class=\"me1\">length</span> == <span class=\"nu0\">0</span><br/>        <span class=\"kw1\">break</span><br/>      backtrack<span class=\"br0\">(</span><span class=\"br0\">)</span><br/>      <span class=\"kw1\">continue</span><br/>\u00a0<br/>    <span class=\"co1\"># If a square is empty</span><br/>    <span class=\"kw1\">if</span> board<span class=\"br0\">[</span>pos<span class=\"br0\">]</span> == <span class=\"nu0\">0</span><br/>      attack pos<br/>      queens.<span class=\"me1\">push</span> pos<br/>      <span class=\"kw1\">if</span> queens.<span class=\"me1\">length</span> == n<br/>        num_solutions <span class=\"sy0\">+</span>= <span class=\"nu0\">1</span><br/>        show_queens queens<span class=\"sy0\">,</span> n<br/>        backtrack<span class=\"br0\">(</span><span class=\"br0\">)</span><br/>    pos <span class=\"sy0\">+</span>= <span class=\"nu0\">1</span><br/>\u00a0<br/>  console.<span class=\"me1\">log</span> <span class=\"st0\">\"#{num_solutions} solutions\"</span><br/>  console.<span class=\"me1\">log</span> <span class=\"st0\">\"#{num_backtracks} backtracks\"</span><br/>\u00a0<br/>\u00a0<br/>precompute_neighbors = <span class=\"br0\">(</span>n<span class=\"br0\">)</span> <span class=\"sy0\">-&gt;</span><br/>  <span class=\"co1\"># For each board position, build a list of all</span><br/>  <span class=\"co1\"># the board positions that would be under attack if</span><br/>  <span class=\"co1\"># you placed a queen on it.  This assumes a 1d array</span><br/>  <span class=\"co1\"># of squares.</span><br/>  neighbors = <span class=\"br0\">[</span><span class=\"br0\">]</span><br/>\u00a0<br/>  find_neighbors = <span class=\"br0\">(</span>pos<span class=\"br0\">)</span> <span class=\"sy0\">-&gt;</span><br/>    arr = <span class=\"br0\">[</span><span class=\"br0\">]</span><br/>    row = Math.<span class=\"me1\">floor</span> pos <span class=\"sy0\">/</span> n<br/>    col = pos <span class=\"sy0\">%</span> n<br/>    <span class=\"kw1\">for</span> i <span class=\"kw1\">in</span> <span class=\"br0\">[</span><span class=\"nu0\">0</span>...<span class=\"me1\">n</span><span class=\"br0\">]</span><br/>      <span class=\"kw1\">if</span> i <span class=\"sy0\">!</span>= col<br/>        arr.<span class=\"me1\">push</span> row<span class=\"sy0\">*</span>n <span class=\"sy0\">+</span> i<br/>        r1 = row <span class=\"sy0\">+</span> col <span class=\"sy0\">-</span> i<br/>        r2 = row <span class=\"sy0\">+</span> i <span class=\"sy0\">-</span> col<br/>        <span class=\"kw1\">if</span> <span class=\"nu0\">0</span> <span class=\"sy0\">&lt;</span>= r1 <span class=\"kw2\">and</span> r1 <span class=\"sy0\">&lt;</span> n<br/>          arr.<span class=\"me1\">push</span> r1<span class=\"sy0\">*</span>n <span class=\"sy0\">+</span> i<br/>        <span class=\"kw1\">if</span> <span class=\"nu0\">0</span> <span class=\"sy0\">&lt;</span>= r2 <span class=\"kw2\">and</span> r2 <span class=\"sy0\">&lt;</span> n<br/>          arr.<span class=\"me1\">push</span> r2<span class=\"sy0\">*</span>n <span class=\"sy0\">+</span> i<br/>      <span class=\"kw1\">if</span> i <span class=\"sy0\">!</span>= row<br/>        arr.<span class=\"me1\">push</span> i<span class=\"sy0\">*</span>n <span class=\"sy0\">+</span> col<br/>    arr<br/>\u00a0<br/>  <span class=\"kw1\">for</span> pos <span class=\"kw1\">in</span> <span class=\"br0\">[</span><span class=\"nu0\">0</span>...<span class=\"me1\">n</span><span class=\"sy0\">*</span>n<span class=\"br0\">]</span><br/>    neighbors.<span class=\"me1\">push</span> find_neighbors<span class=\"br0\">(</span>pos<span class=\"br0\">)</span> <br/>  neighbors<br/>\u00a0<br/>\u00a0<br/>show_queens = <span class=\"br0\">(</span>queens<span class=\"sy0\">,</span> n<span class=\"br0\">)</span> <span class=\"sy0\">-&gt;</span><br/>  <span class=\"co1\"># precondition: queens is a sorted array of integers,</span><br/>  <span class=\"co1\"># and each row is represented</span><br/>  console.<span class=\"me1\">log</span> <span class=\"st0\">\"<span class=\"es0\">\\n</span>------\"</span><br/>  <span class=\"kw1\">for</span> q <span class=\"kw1\">in</span> queens<br/>    col = q <span class=\"sy0\">%</span> n<br/>    s = <span class=\"st0\">''</span><br/>    <span class=\"kw1\">for</span> c <span class=\"kw1\">in</span> <span class=\"br0\">[</span><span class=\"nu0\">0</span>...<span class=\"me1\">n</span><span class=\"br0\">]</span><br/>      <span class=\"kw1\">if</span> c == col<br/>        s <span class=\"sy0\">+</span>= <span class=\"st0\">\"Q \"</span><br/>      <span class=\"kw1\">else</span><br/>        s <span class=\"sy0\">+</span>= <span class=\"st0\">\"* \"</span><br/>    console.<span class=\"me1\">log</span> s <span class=\"sy0\">+</span> <span class=\"st0\">\"<span class=\"es0\">\\n</span>\"</span><br/>\u00a0<br/>nqueens<span class=\"br0\">(</span><span class=\"nu0\">8</span><span class=\"br0\">)</span><br/>\u00a0</pre>"}, {"lang": "Common Lisp", "loc": 19, "block": "<pre class=\"lisp highlighted_source\"><span class=\"br0\">(</span><span class=\"kw1\">defun</span> queens <span class=\"br0\">(</span>n <span class=\"sy0\">&amp;</span>optional <span class=\"br0\">(</span>m n<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>  <span class=\"br0\">(</span><span class=\"kw1\">if</span> <span class=\"br0\">(</span><span class=\"kw1\">zerop</span> n<span class=\"br0\">)</span><br/>      <span class=\"br0\">(</span><span class=\"kw1\">list</span> <span class=\"kw1\">nil</span><span class=\"br0\">)</span><br/>      <span class=\"br0\">(</span>loop for solution in <span class=\"br0\">(</span>queens <span class=\"br0\">(</span><span class=\"nu0\">1</span>- n<span class=\"br0\">)</span> m<span class=\"br0\">)</span><br/>            <span class=\"kw1\">nconc</span> <span class=\"br0\">(</span>loop for new-col from <span class=\"nu0\">1</span> to m<br/>                         <span class=\"kw1\">when</span> <span class=\"br0\">(</span>loop for row from <span class=\"nu0\">1</span> to n<br/>                                     for col in solution<br/>                                     always <span class=\"br0\">(</span>/<span class=\"sy0\">=</span> new-col col <span class=\"br0\">(</span>+ col row<span class=\"br0\">)</span> <span class=\"br0\">(</span>- col row<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>                         collect <span class=\"br0\">(</span><span class=\"kw1\">cons</span> new-col solution<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"br0\">(</span><span class=\"kw1\">defun</span> print-solution <span class=\"br0\">(</span>solution<span class=\"br0\">)</span><br/>  <span class=\"br0\">(</span>loop for queen-col in solution<br/>        <span class=\"kw1\">do</span> <span class=\"br0\">(</span>loop for col from <span class=\"nu0\">1</span> to <span class=\"br0\">(</span><span class=\"kw1\">length</span> solution<span class=\"br0\">)</span><br/>                  <span class=\"kw1\">do</span> <span class=\"br0\">(</span>write-char <span class=\"br0\">(</span><span class=\"kw1\">if</span> <span class=\"br0\">(</span><span class=\"sy0\">=</span> col queen-col<span class=\"br0\">)</span> #\\Q #\\<span class=\"sy0\">.</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>           <span class=\"br0\">(</span>terpri<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>  <span class=\"br0\">(</span>terpri<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"br0\">(</span><span class=\"kw1\">defun</span> print-queens <span class=\"br0\">(</span>n<span class=\"br0\">)</span><br/>  <span class=\"br0\">(</span><span class=\"kw1\">mapc</span> #'print-solution <span class=\"br0\">(</span>queens n<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span></pre>"}, {"lang": "Curry", "loc": 60, "block": "<pre class=\"text highlighted_source\">\u00a0<br/>-- 8-queens implementation with the Constrained Constructor pattern<br/>-- Sergio Antoy<br/>-- Fri Jul 13 07:05:32 PDT 2001<br/>\u00a0<br/>-- Place 8 queens on a chessboard so that no queen can capture<br/>-- (and be captured by) any other queen.<br/>\u00a0<br/>-- Non-deterministic choice operator<br/>\u00a0<br/>infixl 0\u00a0!<br/>X\u00a0! _ = X<br/>_\u00a0! Y = Y<br/>\u00a0<br/>-- A solution is represented by a list of integers.<br/>-- The i-th integer in the list is the column of the board<br/>-- in which the queen in the i-th row is placed.<br/>-- Rows and columns are numbered from 1 to 8.<br/>-- For example, [4,2,7,3,6,8,5,1] is a solution where the<br/>-- the queen in row 1 is in column 4, etc.<br/>-- Any solution must be a permutation of [1,2,...,8].<br/>\u00a0<br/>-- The state of a queen is its position, row and column, on the board.<br/>-- Operation column is a particularly simple instance<br/>-- of a Constrained Constructor pattern.<br/>-- When it is invoked, it produces only valid states.<br/>\u00a0<br/>column = 1\u00a0! 2\u00a0! 3\u00a0! 4\u00a0! 5\u00a0! 6\u00a0! 7\u00a0! 8<br/>\u00a0<br/>-- A path of the puzzle is a sequence of successive placements of<br/>-- queens on the board.  It is not explicitly defined as a type.<br/>-- A path is a potential solution in the making.<br/>\u00a0<br/>-- Constrained Constructor on a path<br/>-- Any path must be valid, i.e., any column must be in the range 1..8<br/>-- and different from any other column in the path.<br/>-- Furthermore, the path must be safe for the queens.<br/>-- No queen in a path may capture any other queen in the path.<br/>-- Operation makePath add column n to path c or fails.<br/>\u00a0<br/>makePath c n | valid c &amp;&amp; safe c 1 = n:c<br/>    where valid c | n =:= column = uniq c<br/>             where uniq [] = True<br/>                   uniq (c:cs) = n /= c &amp;&amp; uniq cs<br/>          safe [] _ = True<br/>          safe (c:cs) k = abs (n-c) /= k &amp;&amp; safe cs (k+1)<br/>             where abs x = if x &lt; 0 then -x else x<br/>\u00a0<br/>-- extend the path argument till all the queens are on the board<br/>-- see the Incremental Solution pattern<br/>\u00a0<br/>extend p = if (length p == 8)<br/>             then p<br/>             else extend (makePath p x)<br/>      where x free<br/>\u00a0<br/>-- solve the puzzle<br/>\u00a0<br/>main = extend []<br/>\u00a0</pre>"}, {"lang": "D", "loc": 9, "block": "<pre class=\"d highlighted_source\"><span class=\"kw4\">void</span> main<span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>    <span class=\"kw2\">import</span> std.<span class=\"me1\">stdio</span><span class=\"sy0\">,</span> std.<span class=\"me1\">algorithm</span><span class=\"sy0\">,</span> std.<span class=\"me1\">range</span><span class=\"sy0\">,</span> permutations2<span class=\"sy0\">;</span><br/>\u00a0<br/>    <span class=\"kw4\">enum</span> n <span class=\"sy0\">=</span> <span class=\"nu0\">8</span><span class=\"sy0\">;</span><br/>    n.<span class=\"me1\">iota</span>.<span class=\"me1\">array</span>.<span class=\"me1\">permutations</span>.<span class=\"me1\">filter</span><span class=\"sy0\">!</span><span class=\"br0\">(</span>p <span class=\"sy0\">=&gt;</span><br/>        n.<span class=\"me1\">iota</span>.<span class=\"me1\">map</span><span class=\"sy0\">!</span><span class=\"br0\">(</span>i <span class=\"sy0\">=&gt;</span> p<span class=\"br0\">[</span>i<span class=\"br0\">]</span> <span class=\"sy0\">+</span> i<span class=\"br0\">)</span>.<span class=\"me1\">array</span>.<span class=\"me1\">sort</span><span class=\"br0\">(</span><span class=\"br0\">)</span>.<span class=\"me1\">uniq</span>.<span class=\"me1\">count</span> <span class=\"sy0\">==</span> n <span class=\"sy0\">&amp;&amp;</span><br/>        n.<span class=\"me1\">iota</span>.<span class=\"me1\">map</span><span class=\"sy0\">!</span><span class=\"br0\">(</span>i <span class=\"sy0\">=&gt;</span> p<span class=\"br0\">[</span>i<span class=\"br0\">]</span> <span class=\"sy0\">-</span> i<span class=\"br0\">)</span>.<span class=\"me1\">array</span>.<span class=\"me1\">sort</span><span class=\"br0\">(</span><span class=\"br0\">)</span>.<span class=\"me1\">uniq</span>.<span class=\"me1\">count</span> <span class=\"sy0\">==</span> n<span class=\"br0\">)</span><br/>    .<span class=\"me1\">count</span>.<span class=\"me1\">writeln</span><span class=\"sy0\">;</span><br/><span class=\"br0\">}</span></pre>"}, {"lang": "Dart", "loc": 65, "block": "<pre class=\"text highlighted_source\">/**<br/>Return true if queen placement q[n] does not conflict with<br/>other queens q[0] through q[n-1]<br/>*/<br/>isConsistent(List q, int n) {<br/>  for (int i=0; i&lt;n; i++) {<br/>    if (q[i] == q[n]) {<br/>      return false; // Same column<br/>    }<br/>\u00a0<br/>    if ((q[i] - q[n]) == (n - i)) {<br/>      return false; // Same major diagonal<br/>    }<br/>\u00a0<br/>    if ((q[n] - q[i]) == (n - i)) {<br/>      return false; // Same minor diagonal<br/>    }<br/>  }<br/>\u00a0<br/>  return true;<br/>}<br/>\u00a0<br/>/**<br/>Print out N-by-N placement of queens from permutation q in ASCII. <br/>*/<br/>printQueens(List q) {<br/>  int N = q.length;<br/>  for (int i=0; i&lt;N; i++) {<br/>    StringBuffer sb = new StringBuffer();<br/>    for (int j=0; j&lt;N; j++) {<br/>      if (q[i] == j) {<br/>        sb.write(\"Q \");<br/>      } else {<br/>        sb.write(\"* \");<br/>      }<br/>    }<br/>    print(sb.toString());<br/>  }<br/>  print(\"\");<br/>}<br/>\u00a0<br/>/**<br/>Try all permutations using backtracking<br/>*/<br/>enumerate(int N) {<br/>  var a = new List(N);<br/>  _enumerate(a, 0);<br/>}<br/>\u00a0<br/>_enumerate(List q, int n) {<br/>  if (n == q.length) {<br/>    printQueens(q);<br/>  } else {<br/>    for (int i = 0; i &lt; q.length; i++) {<br/>      q[n] = i;<br/>      if (isConsistent(q, n)){<br/>        _enumerate(q, n+1);<br/>      }<br/>    } <br/>  }<br/>}<br/>\u00a0<br/>void main() {<br/>  enumerate(4);<br/>}</pre>"}, {"lang": "EchoLisp", "loc": 59, "block": "<pre class=\"scheme highlighted_source\">\u00a0<br/><span class=\"co1\">;; square num is i + j*N</span><br/><span class=\"br0\">(</span>define<span class=\"sy0\">-</span>syntax<span class=\"sy0\">-</span>rule <span class=\"br0\">(</span>sq i j<span class=\"br0\">)</span> <span class=\"br0\">(</span><span class=\"sy0\">+</span> i <span class=\"br0\">(</span><span class=\"sy0\">*</span> j N<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"co1\">;; compute diag number for each square</span><br/><span class=\"br0\">(</span><span class=\"kw1\">define</span> <span class=\"br0\">(</span>do<span class=\"sy0\">-</span>diag1 i0 j0  dnum  into: dnum1 N<span class=\"br0\">)</span> <span class=\"co1\">;; ++i and ++j diags</span><br/>\t<span class=\"br0\">(</span>for <span class=\"br0\">[</span><span class=\"br0\">(</span>i <span class=\"br0\">(</span>in<span class=\"sy0\">-</span>range i0 N<span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"br0\">(</span>j <span class=\"br0\">(</span>in<span class=\"sy0\">-</span>range j0 N<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">]</span><br/>\t\t<span class=\"co1\">;;(writeln   i j 'diag1 dnum)</span><br/>\t\t<span class=\"br0\">(</span><span class=\"kw1\">vector-set!</span> dnum1 <span class=\"br0\">(</span>sq i j<span class=\"br0\">)</span> dnum<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"br0\">(</span><span class=\"kw1\">define</span> <span class=\"br0\">(</span>do<span class=\"sy0\">-</span>diag2 i0 j0  dnum into: dnum2 N<span class=\"br0\">)</span> <span class=\"co1\">;; --i and ++j diags</span><br/>\t<span class=\"br0\">(</span>for <span class=\"br0\">[</span><span class=\"br0\">(</span>i <span class=\"br0\">(</span>in<span class=\"sy0\">-</span>range i0 <span class=\"sy0\">-</span><span class=\"nu0\">1</span> <span class=\"sy0\">-</span><span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"br0\">(</span>j <span class=\"br0\">(</span>in<span class=\"sy0\">-</span>range j0 N<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">]</span><br/>\t\t<span class=\"co1\">;; (writeln i j 'diag2 dnum)</span><br/>\t\t<span class=\"br0\">(</span><span class=\"kw1\">vector-set!</span> dnum2 <span class=\"br0\">(</span>sq i j<span class=\"br0\">)</span> dnum<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"br0\">(</span><span class=\"kw1\">define</span> <span class=\"br0\">(</span>init<span class=\"sy0\">-</span>diags dnum1 dnum2 N<span class=\"br0\">)</span><br/>\t<span class=\"br0\">(</span><span class=\"kw1\">define</span> dnum <span class=\"nu0\">0</span><span class=\"br0\">)</span><br/>\t\t<span class=\"br0\">(</span>for <span class=\"br0\">(</span><span class=\"br0\">(</span>j N<span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"br0\">(</span>do<span class=\"sy0\">-</span>diag1 <span class=\"nu0\">0</span> j dnum dnum1 N<span class=\"br0\">)</span> <span class=\"br0\">(</span><span class=\"sy0\">++</span> dnum<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\t\t<span class=\"br0\">(</span>for <span class=\"br0\">(</span><span class=\"br0\">(</span>i <span class=\"br0\">(</span>in<span class=\"sy0\">-</span>range <span class=\"nu0\">1</span> N<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span> <br/>                     <span class=\"br0\">(</span>do<span class=\"sy0\">-</span>diag1 i <span class=\"nu0\">0</span> dnum dnum1  N<span class=\"br0\">)</span> <span class=\"br0\">(</span><span class=\"sy0\">++</span> dnum<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\t<span class=\"br0\">(</span><span class=\"kw1\">set!</span> dnum <span class=\"nu0\">0</span><span class=\"br0\">)</span><br/>\t\t<span class=\"br0\">(</span>for <span class=\"br0\">(</span><span class=\"br0\">(</span>j N<span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"br0\">(</span>do<span class=\"sy0\">-</span>diag2 <span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">-</span> N<span class=\"br0\">)</span> j dnum dnum2 N<span class=\"br0\">)</span> <span class=\"br0\">(</span><span class=\"sy0\">++</span> dnum<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\t\t<span class=\"br0\">(</span>for <span class=\"br0\">(</span><span class=\"br0\">(</span>i <span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">-</span> N<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"br0\">(</span>do<span class=\"sy0\">-</span>diag2 i <span class=\"nu0\">0</span> dnum dnum2 N<span class=\"br0\">)</span> <span class=\"br0\">(</span><span class=\"sy0\">++</span> dnum<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/><span class=\"co1\">;; end boring diags part</span><br/>\u00a0<br/><span class=\"br0\">(</span><span class=\"kw1\">define</span> <span class=\"br0\">(</span>q<span class=\"sy0\">-</span>search i  N col diag1 diag2 dnum1 dnum2    <span class=\"sy0\">&amp;</span>hits <span class=\"br0\">(</span>ns<span class=\"br0\">)</span><span class=\"br0\">)</span><br/><span class=\"br0\">(</span><span class=\"kw1\">cond</span><br/><span class=\"br0\">[</span><span class=\"br0\">(</span><span class=\"sy0\">=</span> i N<span class=\"br0\">)</span>  <span class=\"br0\">(</span>set<span class=\"sy0\">-</span>box<span class=\"sy0\">!</span> <span class=\"sy0\">&amp;</span>hits <span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">+</span> <span class=\"br0\">(</span>unbox <span class=\"sy0\">&amp;</span>hits<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"br0\">]</span> <span class=\"co1\">;;  (writeln  'HIT col)</span><br/>\t<span class=\"br0\">[</span><span class=\"kw1\">else</span><br/>\u00a0<br/>\t\t<span class=\"br0\">(</span>for <span class=\"br0\">(</span><span class=\"br0\">(</span>j N<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\t\t<span class=\"br0\">(</span><span class=\"kw1\">set!</span> ns <span class=\"br0\">(</span>sq i j<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\t\t#:continue <span class=\"br0\">(</span><span class=\"kw1\">or</span> <span class=\"br0\">[</span>col j<span class=\"br0\">]</span> <span class=\"br0\">[</span>diag1 <span class=\"br0\">[</span>dnum1 ns<span class=\"br0\">]</span><span class=\"br0\">]</span> <span class=\"br0\">[</span>diag2 <span class=\"br0\">[</span>dnum2 ns<span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"br0\">)</span><br/>\t\t     <span class=\"br0\">(</span><span class=\"kw1\">vector-set!</span> col j i<span class=\"br0\">)</span> <span class=\"co1\">;; move</span><br/>\t\t     <span class=\"br0\">(</span><span class=\"kw1\">vector-set!</span> diag1 <span class=\"br0\">[</span>dnum1 ns<span class=\"br0\">]</span> #t<span class=\"br0\">)</span> <span class=\"co1\">;; flag busy diagonal</span><br/>\t\t\t<span class=\"br0\">(</span><span class=\"kw1\">vector-set!</span> diag2 <span class=\"br0\">[</span>dnum2 ns<span class=\"br0\">]</span> #t<span class=\"br0\">)</span><br/>\t\t\t<span class=\"br0\">(</span>q<span class=\"sy0\">-</span>search <span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy0\">+</span> i<span class=\"br0\">)</span> N col diag1 diag2 dnum1 dnum2 <span class=\"sy0\">&amp;</span>hits<span class=\"br0\">)</span><br/>\t\t\t<span class=\"br0\">(</span><span class=\"kw1\">vector-set!</span> col j #f<span class=\"br0\">)</span> <span class=\"co1\">;; unmove</span><br/>\t\t\t<span class=\"br0\">(</span><span class=\"kw1\">vector-set!</span> diag1 <span class=\"br0\">[</span>dnum1 ns<span class=\"br0\">]</span> #f<span class=\"br0\">)</span><br/>\t\t\t<span class=\"br0\">(</span><span class=\"kw1\">vector-set!</span> diag2 <span class=\"br0\">[</span>dnum2 ns<span class=\"br0\">]</span> #f<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\t\t\t<span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"br0\">(</span><span class=\"kw1\">define</span> <span class=\"br0\">(</span>q<span class=\"sy0\">-</span>count <span class=\"br0\">(</span>N <span class=\"nu0\">8</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\t<span class=\"br0\">(</span><span class=\"kw1\">define</span> dnum1 <span class=\"br0\">(</span><span class=\"kw1\">make-vector</span> <span class=\"br0\">(</span><span class=\"sy0\">*</span> N N<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\t<span class=\"br0\">(</span><span class=\"kw1\">define</span> dnum2 <span class=\"br0\">(</span><span class=\"kw1\">make-vector</span> <span class=\"br0\">(</span><span class=\"sy0\">*</span> N N <span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\t<span class=\"br0\">(</span>init<span class=\"sy0\">-</span>diags dnum1 dnum2 N<span class=\"br0\">)</span><br/>\u00a0<br/>\t<span class=\"br0\">(</span><span class=\"kw1\">define</span> diag1 <span class=\"br0\">(</span><span class=\"kw1\">make-vector</span> <span class=\"br0\">(</span><span class=\"sy0\">*</span> <span class=\"nu0\">2</span> N<span class=\"br0\">)</span> #f<span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"co1\">; busy diag's</span><br/>\t<span class=\"br0\">(</span><span class=\"kw1\">define</span> diag2 <span class=\"br0\">(</span><span class=\"kw1\">make-vector</span> <span class=\"br0\">(</span><span class=\"sy0\">*</span> <span class=\"nu0\">2</span> N<span class=\"br0\">)</span> #f<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\t<span class=\"br0\">(</span><span class=\"kw1\">define</span> col <span class=\"br0\">(</span><span class=\"kw1\">make-vector</span> N  #f<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\t<span class=\"br0\">(</span><span class=\"kw1\">define</span> <span class=\"sy0\">&amp;</span>hits <span class=\"br0\">(</span>box <span class=\"nu0\">0</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\u00a0<br/>\u00a0<br/>\t<span class=\"br0\">(</span>q<span class=\"sy0\">-</span>search <span class=\"nu0\">0</span> N col diag1 diag2 dnum1 dnum2  <span class=\"sy0\">&amp;</span>hits<span class=\"br0\">)</span><br/>\t<span class=\"br0\">(</span>unbox <span class=\"sy0\">&amp;</span>hits<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"br0\">(</span><span class=\"kw1\">define</span> <span class=\"br0\">(</span>task up<span class=\"sy0\">-</span>to<span class=\"sy0\">-</span>n<span class=\"br0\">)</span><br/>\t<span class=\"br0\">(</span>for <span class=\"br0\">(</span><span class=\"br0\">(</span>i up<span class=\"sy0\">-</span>to<span class=\"sy0\">-</span>n<span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"br0\">(</span>writeln i ' \u2655 <span class=\"br0\">(</span>q<span class=\"sy0\">-</span>count i<span class=\"br0\">)</span> 'solutions<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\u00a0</pre>"}, {"lang": "Eiffel", "loc": 70, "block": "<pre class=\"eiffel highlighted_source\">\u00a0<br/><span class=\"kw1\">class</span><br/>\tQUEENS<br/>\u00a0<br/><span class=\"kw2\">create</span><br/>\tmake<br/>\u00a0<br/><span class=\"kw1\">feature</span> <span class=\"br0\">{</span><a href=\"http://www.google.com/search?q=site%3Ahttp%3A%2F%2Fdocs.eiffel.com%2Feiffelstudio%2Flibraries+none&amp;btnI=I%27m+Feeling+Lucky\"><span class=\"kw4\">NONE</span></a><span class=\"br0\">}</span><br/>\tcounter<span class=\"sy0\">:</span> <a href=\"http://www.google.com/search?q=site%3Ahttp%3A%2F%2Fdocs.eiffel.com%2Feiffelstudio%2Flibraries+integer&amp;btnI=I%27m+Feeling+Lucky\"><span class=\"kw4\">INTEGER</span></a><br/>\u00a0<br/>\tplace_queens<span class=\"br0\">(</span>board<span class=\"sy0\">:</span> <a href=\"http://www.google.com/search?q=site%3Ahttp%3A%2F%2Fdocs.eiffel.com%2Feiffelstudio%2Flibraries+array&amp;btnI=I%27m+Feeling+Lucky\"><span class=\"kw4\">ARRAY</span></a><span class=\"br0\">[</span><a href=\"http://www.google.com/search?q=site%3Ahttp%3A%2F%2Fdocs.eiffel.com%2Feiffelstudio%2Flibraries+integer&amp;btnI=I%27m+Feeling+Lucky\"><span class=\"kw4\">INTEGER</span></a><span class=\"br0\">]</span>; level<span class=\"sy0\">:</span> <a href=\"http://www.google.com/search?q=site%3Ahttp%3A%2F%2Fdocs.eiffel.com%2Feiffelstudio%2Flibraries+integer&amp;btnI=I%27m+Feeling+Lucky\"><span class=\"kw4\">INTEGER</span></a><span class=\"br0\">)</span><br/>\t\t<span class=\"kw2\">local</span><br/>\t\t\ti, j<span class=\"sy0\">:</span> <a href=\"http://www.google.com/search?q=site%3Ahttp%3A%2F%2Fdocs.eiffel.com%2Feiffelstudio%2Flibraries+integer&amp;btnI=I%27m+Feeling+Lucky\"><span class=\"kw4\">INTEGER</span></a><br/>\t\t\tsafe<span class=\"sy0\">:</span> <a href=\"http://www.google.com/search?q=site%3Ahttp%3A%2F%2Fdocs.eiffel.com%2Feiffelstudio%2Flibraries+boolean&amp;btnI=I%27m+Feeling+Lucky\"><span class=\"kw4\">BOOLEAN</span></a><br/>\t\t<span class=\"kw2\">do</span><br/>\t\t\t<span class=\"kw2\">if</span> level <span class=\"sy0\">&gt;</span> board.<span class=\"me1\">count</span><br/>\t\t\t<span class=\"kw2\">then</span><br/>\t\t\t\tcounter <span class=\"sy0\">:=</span> counter <span class=\"sy0\">+</span> <span class=\"nu0\">1</span><br/>\t\t\t<span class=\"kw2\">else</span><br/>\t\t\t\t<span class=\"kw2\">from</span><br/>\t\t\t\t\ti <span class=\"sy0\">:=</span> <span class=\"nu0\">1</span><br/>\t\t\t\t<span class=\"kw2\">until</span><br/>\t\t\t\t\ti <span class=\"sy0\">&gt;</span> board.<span class=\"me1\">count</span><br/>\t\t\t\t<span class=\"kw2\">loop</span><br/>\t\t\t\t\tsafe <span class=\"sy0\">:=</span> <span class=\"kw3\">True</span><br/>\t\t\t\t\t<span class=\"kw2\">from</span><br/>\t\t\t\t\t\tj <span class=\"sy0\">:=</span> <span class=\"nu0\">1</span><br/>\t\t\t\t\t<span class=\"kw2\">until</span><br/>\t\t\t\t\t\tj <span class=\"sy0\">=</span> level <span class=\"kw2\">or</span> <span class=\"kw2\">not</span> safe<br/>\t\t\t\t\t<span class=\"kw2\">loop</span><br/>\t\t\t\t\t\t<span class=\"kw2\">if</span> <span class=\"br0\">(</span>board<span class=\"br0\">[</span>j<span class=\"br0\">]</span> <span class=\"sy0\">=</span> i<span class=\"br0\">)</span><br/>\t\t\t\t\t\t\t<span class=\"kw2\">or</span> <span class=\"br0\">(</span>j <span class=\"sy0\">-</span> level <span class=\"sy0\">=</span> i <span class=\"sy0\">-</span> board<span class=\"br0\">[</span>j<span class=\"br0\">]</span><span class=\"br0\">)</span><br/>\t\t\t\t\t\t\t<span class=\"kw2\">or</span> <span class=\"br0\">(</span>j <span class=\"sy0\">-</span> level <span class=\"sy0\">=</span> board<span class=\"br0\">[</span>j<span class=\"br0\">]</span> <span class=\"sy0\">-</span> i<span class=\"br0\">)</span><br/>\t\t\t\t\t\t<span class=\"kw2\">then</span><br/>\t\t\t\t\t\t\tsafe <span class=\"sy0\">:=</span> <span class=\"kw3\">False</span><br/>\t\t\t\t\t\t<span class=\"kw2\">end</span><br/>\t\t\t\t\t\tj <span class=\"sy0\">:=</span> j <span class=\"sy0\">+</span> <span class=\"nu0\">1</span><br/>\t\t\t\t\t<span class=\"kw2\">end</span><br/>\t\t\t\t\t<span class=\"kw2\">if</span> safe<br/>\t\t\t\t\t<span class=\"kw2\">then</span><br/>\t\t\t\t\t\tboard<span class=\"br0\">[</span>level<span class=\"br0\">]</span> <span class=\"sy0\">:=</span> i<br/>\t\t\t\t\t\tplace_queens<span class=\"br0\">(</span>board, level <span class=\"sy0\">+</span> <span class=\"nu0\">1</span><span class=\"br0\">)</span><br/>\t\t\t\t\t<span class=\"kw2\">end</span><br/>\t\t\t\t\ti <span class=\"sy0\">:=</span> i <span class=\"sy0\">+</span> <span class=\"nu0\">1</span><br/>\t\t\t\t<span class=\"kw2\">end</span><br/>\t\t\t<span class=\"kw2\">end</span><br/>\t\t<span class=\"kw2\">end</span><br/>\u00a0<br/><span class=\"kw1\">feature</span><br/>\tpossible_positions_of_n_queens<span class=\"br0\">(</span>n<span class=\"sy0\">:</span> <a href=\"http://www.google.com/search?q=site%3Ahttp%3A%2F%2Fdocs.eiffel.com%2Feiffelstudio%2Flibraries+integer&amp;btnI=I%27m+Feeling+Lucky\"><span class=\"kw4\">INTEGER</span></a><span class=\"br0\">)</span><span class=\"sy0\">:</span> <a href=\"http://www.google.com/search?q=site%3Ahttp%3A%2F%2Fdocs.eiffel.com%2Feiffelstudio%2Flibraries+integer&amp;btnI=I%27m+Feeling+Lucky\"><span class=\"kw4\">INTEGER</span></a><br/>\t\t<span class=\"kw2\">local</span><br/>\t\t\tboard<span class=\"sy0\">:</span> <a href=\"http://www.google.com/search?q=site%3Ahttp%3A%2F%2Fdocs.eiffel.com%2Feiffelstudio%2Flibraries+array&amp;btnI=I%27m+Feeling+Lucky\"><span class=\"kw4\">ARRAY</span></a><span class=\"br0\">[</span><a href=\"http://www.google.com/search?q=site%3Ahttp%3A%2F%2Fdocs.eiffel.com%2Feiffelstudio%2Flibraries+integer&amp;btnI=I%27m+Feeling+Lucky\"><span class=\"kw4\">INTEGER</span></a><span class=\"br0\">]</span><br/>\t\t<span class=\"kw2\">do</span><br/>\t\t\t<span class=\"kw2\">create</span> board.<span class=\"me1\">make_filled</span> <span class=\"br0\">(</span><span class=\"nu0\">0</span>, <span class=\"nu0\">1</span>, n<span class=\"br0\">)</span><br/>\t\t\tcounter <span class=\"sy0\">:=</span> <span class=\"nu0\">0</span><br/>\t\t\tplace_queens<span class=\"br0\">(</span>board, <span class=\"nu0\">1</span><span class=\"br0\">)</span><br/>\t\t\t<span class=\"kw3\">Result</span> <span class=\"sy0\">:=</span> counter<br/>\t\t<span class=\"kw2\">end</span><br/>\u00a0<br/>\tmake<br/>\t\t<span class=\"kw2\">local</span><br/>\t\t\tn<span class=\"sy0\">:</span> <a href=\"http://www.google.com/search?q=site%3Ahttp%3A%2F%2Fdocs.eiffel.com%2Feiffelstudio%2Flibraries+integer&amp;btnI=I%27m+Feeling+Lucky\"><span class=\"kw4\">INTEGER</span></a><br/>\t\t<span class=\"kw2\">do</span><br/>\t\t\tio.<span class=\"me1\">put_string</span> <span class=\"br0\">(</span><span class=\"st0\">\"Please enter the number of queens: \"</span><span class=\"br0\">)</span><br/>\t\t\tio.<span class=\"me1\">read_integer</span><br/>\t\t\tn <span class=\"sy0\">:=</span> io.<span class=\"me1\">last_integer</span><br/>\t\t\tprint<span class=\"br0\">(</span><span class=\"st0\">\"<span class=\"es0\">%N</span>Possible number of placings: \"</span> <span class=\"sy0\">+</span> possible_positions_of_n_queens<span class=\"br0\">(</span>n<span class=\"br0\">)</span>.<span class=\"me1\">out</span> <span class=\"sy0\">+</span> <span class=\"st0\">\"<span class=\"es0\">%N</span>\"</span><span class=\"br0\">)</span><br/>\t\t<span class=\"kw2\">end</span><br/><span class=\"kw2\">end</span><br/>\u00a0</pre>"}, {"lang": "Elixir", "loc": 38, "block": "<pre class=\"text highlighted_source\">defmodule RC do<br/>  def queen(n, display \\\\ true) do<br/>    solve(n, [], [], [], display)<br/>  end<br/>\u00a0<br/>  defp solve(n, row, _, _, display) when n==length(row) do<br/>    if display, do: print(n,row)<br/>    1<br/>  end<br/>  defp solve(n, row, add_list, sub_list, display) do<br/>    Enum.map(Enum.to_list(0..n-1) -- row, fn x -&gt;<br/>      add = x + length(row)             # \\ diagonal check<br/>      sub = x - length(row)             # / diagonal check<br/>      if (add in add_list) or (sub in sub_list) do<br/>        0<br/>      else<br/>        solve(n, [x|row], [add | add_list], [sub | sub_list], display)<br/>      end<br/>    end) |&gt; Enum.sum                    # total of the solution<br/>  end<br/>\u00a0<br/>  defp print(n, row) do<br/>    IO.puts frame = \"+\" &lt;&gt; String.duplicate(\"-\", 2*n+1) &lt;&gt; \"+\"<br/>    Enum.each(row, fn x -&gt;<br/>      line = Enum.map_join(0..n-1, fn i -&gt; if x==i, do: \"Q \", else: \". \" end)<br/>      IO.puts \"| #{line}|\"<br/>    end)<br/>    IO.puts frame<br/>  end<br/>end<br/>\u00a0<br/>Enum.each(1..6, fn n -&gt;<br/>  IO.puts \" #{n} Queen\u00a0: #{RC.queen(n)}\"<br/>end)<br/>\u00a0<br/>Enum.each(7..12, fn n -&gt;<br/>  IO.puts \" #{n} Queen\u00a0: #{RC.queen(n, false)}\"             # no display<br/>end)</pre>"}, {"lang": "Erlang", "loc": 85, "block": "<pre class=\"erlang highlighted_source\">\u00a0<br/><span class=\"sy3\">-</span><span class=\"re2\">module</span><span class=\"br0\">(</span> n_queens <span class=\"br0\">)</span><span class=\"sy1\">.</span><br/>\u00a0<br/><span class=\"sy3\">-</span><span class=\"re2\">export</span><span class=\"br0\">(</span> <span class=\"br0\">[</span>display<span class=\"sy3\">/</span><span class=\"nu0\">1</span><span class=\"sy1\">,</span> solve<span class=\"sy3\">/</span><span class=\"nu0\">1</span><span class=\"sy1\">,</span> task<span class=\"sy3\">/</span><span class=\"nu0\">0</span><span class=\"br0\">]</span> <span class=\"br0\">)</span><span class=\"sy1\">.</span><br/>\u00a0<br/><span class=\"re3\">display</span><span class=\"br0\">(</span> <span class=\"re5\">Board</span> <span class=\"br0\">)</span> <span class=\"sy1\">-&gt;</span><br/>\t<span class=\"co1\">%% Queens are in the positions in the Board list.</span><br/>\t<span class=\"co1\">%% Top left corner is {1, 1}, Bottom right is {N, N}. There is a queen in the max column.</span><br/>\t<span class=\"re5\">N</span> <span class=\"sy3\">=</span> <a href=\"http://erlang.org/doc/man/lists.html\"><span class=\"kw5\">lists</span></a>:<span class=\"re3\">max</span><span class=\"br0\">(</span> <span class=\"br0\">[</span><span class=\"re5\">X</span> <span class=\"sy3\">||</span> <span class=\"br0\">{</span><span class=\"re5\">X</span><span class=\"sy1\">,</span> <span class=\"re5\">_Y</span><span class=\"br0\">}</span> <span class=\"sy3\">&lt;-</span> <span class=\"re5\">Board</span><span class=\"br0\">]</span> <span class=\"br0\">)</span><span class=\"sy1\">,</span><br/>\t<span class=\"br0\">[</span><span class=\"re3\">display_row</span><span class=\"br0\">(</span><span class=\"re5\">Y</span><span class=\"sy1\">,</span> <span class=\"re5\">N</span><span class=\"sy1\">,</span> <span class=\"re5\">Board</span><span class=\"br0\">)</span> <span class=\"sy3\">||</span> <span class=\"re5\">Y</span> <span class=\"sy3\">&lt;-</span> <a href=\"http://erlang.org/doc/man/lists.html\"><span class=\"kw5\">lists</span></a>:<span class=\"re3\">seq</span><span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"re5\">N</span><span class=\"br0\">)</span><span class=\"br0\">]</span><span class=\"sy1\">.</span><br/>\u00a0<br/><span class=\"re3\">solve</span><span class=\"br0\">(</span> <span class=\"re5\">N</span> <span class=\"br0\">)</span> <span class=\"sy1\">-&gt;</span><br/>    <span class=\"re5\">Positions</span> <span class=\"sy3\">=</span> <span class=\"br0\">[</span><span class=\"br0\">{</span><span class=\"re5\">X</span><span class=\"sy1\">,</span> <span class=\"re5\">Y</span><span class=\"br0\">}</span> <span class=\"sy3\">||</span> <span class=\"re5\">X</span> <span class=\"sy3\">&lt;-</span> <a href=\"http://erlang.org/doc/man/lists.html\"><span class=\"kw5\">lists</span></a>:<span class=\"re3\">seq</span><span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"re5\">N</span><span class=\"br0\">)</span><span class=\"sy1\">,</span> <span class=\"re5\">Y</span> <span class=\"sy3\">&lt;-</span> <a href=\"http://erlang.org/doc/man/lists.html\"><span class=\"kw5\">lists</span></a>:<span class=\"re3\">seq</span><span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"re5\">N</span><span class=\"br0\">)</span><span class=\"br0\">]</span><span class=\"sy1\">,</span><br/>    <span class=\"kw1\">try</span><br/>    <span class=\"re3\">bt</span><span class=\"br0\">(</span> <span class=\"re5\">N</span><span class=\"sy1\">,</span> <span class=\"re5\">Positions</span><span class=\"sy1\">,</span> <span class=\"br0\">[</span><span class=\"br0\">]</span> <span class=\"br0\">)</span><br/>\u00a0<br/>    <span class=\"kw1\">catch</span><br/>    <span class=\"re5\">_</span>:<span class=\"br0\">{</span>ok<span class=\"sy1\">,</span> <span class=\"re5\">Board</span><span class=\"br0\">}</span> <span class=\"sy1\">-&gt;</span> <span class=\"re5\">Board</span><br/>\u00a0<br/>    <span class=\"kw1\">end</span><span class=\"sy1\">.</span><br/>\u00a0<br/><span class=\"re3\">task</span><span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"sy1\">-&gt;</span><br/>    <span class=\"re3\">task</span><span class=\"br0\">(</span> <span class=\"nu0\">4</span> <span class=\"br0\">)</span><span class=\"sy1\">,</span><br/>    <span class=\"re3\">task</span><span class=\"br0\">(</span> <span class=\"nu0\">8</span> <span class=\"br0\">)</span><span class=\"sy1\">.</span><br/>\u00a0<br/>\u00a0<br/>\u00a0<br/><span class=\"re3\">bt</span><span class=\"br0\">(</span> <span class=\"re5\">N</span><span class=\"sy1\">,</span> <span class=\"re5\">Positions</span><span class=\"sy1\">,</span> <span class=\"re5\">Board</span> <span class=\"br0\">)</span> <span class=\"sy1\">-&gt;</span> <span class=\"re3\">bt_reject</span><span class=\"br0\">(</span> <span class=\"re3\">is_not_allowed_queen_placement</span><span class=\"br0\">(</span><span class=\"re5\">N</span><span class=\"sy1\">,</span> <span class=\"re5\">Board</span><span class=\"br0\">)</span><span class=\"sy1\">,</span> <span class=\"re5\">N</span><span class=\"sy1\">,</span> <span class=\"re5\">Positions</span><span class=\"sy1\">,</span> <span class=\"re5\">Board</span> <span class=\"br0\">)</span><span class=\"sy1\">.</span><br/>\u00a0<br/><span class=\"re3\">bt_accept</span><span class=\"br0\">(</span> true<span class=\"sy1\">,</span> <span class=\"re5\">_N</span><span class=\"sy1\">,</span> <span class=\"re5\">_Positions</span><span class=\"sy1\">,</span> <span class=\"re5\">Board</span> <span class=\"br0\">)</span> <span class=\"sy1\">-&gt;</span> <a href=\"http://erlang.org/doc/man/erlang.html\"><span class=\"kw5\">erlang</span></a>:<span class=\"kw3\">throw</span><span class=\"br0\">(</span> <span class=\"br0\">{</span>ok<span class=\"sy1\">,</span> <span class=\"re5\">Board</span><span class=\"br0\">}</span> <span class=\"br0\">)</span><span class=\"sy1\">;</span><br/><span class=\"re3\">bt_accept</span><span class=\"br0\">(</span> false<span class=\"sy1\">,</span> <span class=\"re5\">N</span><span class=\"sy1\">,</span> <span class=\"re5\">Positions</span><span class=\"sy1\">,</span> <span class=\"re5\">Board</span> <span class=\"br0\">)</span> <span class=\"sy1\">-&gt;</span> <span class=\"re3\">bt_loop</span><span class=\"br0\">(</span> <span class=\"re5\">N</span><span class=\"sy1\">,</span> <span class=\"re5\">Positions</span><span class=\"sy1\">,</span> <span class=\"br0\">[</span><span class=\"br0\">]</span><span class=\"sy1\">,</span> <span class=\"re5\">Board</span> <span class=\"br0\">)</span><span class=\"sy1\">.</span><br/>\u00a0<br/><span class=\"re3\">bt_loop</span><span class=\"br0\">(</span> <span class=\"re5\">_N</span><span class=\"sy1\">,</span> <span class=\"br0\">[</span><span class=\"br0\">]</span><span class=\"sy1\">,</span> <span class=\"re5\">_Rejects</span><span class=\"sy1\">,</span> <span class=\"re5\">_Board</span> <span class=\"br0\">)</span> <span class=\"sy1\">-&gt;</span> <span class=\"me1\">failed</span><span class=\"sy1\">;</span><br/><span class=\"re3\">bt_loop</span><span class=\"br0\">(</span> <span class=\"re5\">N</span><span class=\"sy1\">,</span> <span class=\"br0\">[</span><span class=\"re5\">Position</span> | <span class=\"re5\">T</span><span class=\"br0\">]</span><span class=\"sy1\">,</span> <span class=\"re5\">Rejects</span><span class=\"sy1\">,</span> <span class=\"re5\">Board</span> <span class=\"br0\">)</span> <span class=\"sy1\">-&gt;</span><br/>\t<span class=\"re3\">bt</span><span class=\"br0\">(</span> <span class=\"re5\">N</span><span class=\"sy1\">,</span> <span class=\"re5\">T</span> <span class=\"sy3\">++</span> <span class=\"re5\">Rejects</span><span class=\"sy1\">,</span> <span class=\"br0\">[</span><span class=\"re5\">Position</span> | <span class=\"re5\">Board</span><span class=\"br0\">]</span> <span class=\"br0\">)</span><span class=\"sy1\">,</span><br/>\t<span class=\"re3\">bt_loop</span><span class=\"br0\">(</span> <span class=\"re5\">N</span><span class=\"sy1\">,</span> <span class=\"re5\">T</span><span class=\"sy1\">,</span> <span class=\"br0\">[</span><span class=\"re5\">Position</span> | <span class=\"re5\">Rejects</span><span class=\"br0\">]</span><span class=\"sy1\">,</span> <span class=\"re5\">Board</span> <span class=\"br0\">)</span><span class=\"sy1\">.</span><br/>\u00a0<br/><span class=\"re3\">bt_reject</span><span class=\"br0\">(</span> true<span class=\"sy1\">,</span> <span class=\"re5\">_N</span><span class=\"sy1\">,</span> <span class=\"re5\">_Positions</span><span class=\"sy1\">,</span> <span class=\"re5\">_Board</span> <span class=\"br0\">)</span> <span class=\"sy1\">-&gt;</span> <span class=\"me1\">backtrack</span><span class=\"sy1\">;</span><br/><span class=\"re3\">bt_reject</span><span class=\"br0\">(</span> false<span class=\"sy1\">,</span> <span class=\"re5\">N</span><span class=\"sy1\">,</span> <span class=\"re5\">Positions</span><span class=\"sy1\">,</span> <span class=\"re5\">Board</span> <span class=\"br0\">)</span> <span class=\"sy1\">-&gt;</span> <span class=\"re3\">bt_accept</span><span class=\"br0\">(</span> <span class=\"re3\">is_all_queens</span><span class=\"br0\">(</span><span class=\"re5\">N</span><span class=\"sy1\">,</span> <span class=\"re5\">Board</span><span class=\"br0\">)</span><span class=\"sy1\">,</span> <span class=\"re5\">N</span><span class=\"sy1\">,</span> <span class=\"re5\">Positions</span><span class=\"sy1\">,</span> <span class=\"re5\">Board</span> <span class=\"br0\">)</span><span class=\"sy1\">.</span><br/>\u00a0<br/><span class=\"re3\">diagonals</span><span class=\"br0\">(</span> <span class=\"re5\">N</span><span class=\"sy1\">,</span> <span class=\"br0\">{</span><span class=\"re5\">X</span><span class=\"sy1\">,</span> <span class=\"re5\">Y</span><span class=\"br0\">}</span> <span class=\"br0\">)</span> <span class=\"sy1\">-&gt;</span><br/>\t<span class=\"re5\">D1</span> <span class=\"sy3\">=</span> <span class=\"re3\">diagonals</span><span class=\"br0\">(</span> <span class=\"re5\">N</span><span class=\"sy1\">,</span> <span class=\"re5\">X</span> <span class=\"sy3\">+</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"kw1\">fun</span> diagonals_add1<span class=\"sy3\">/</span><span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"re5\">Y</span> <span class=\"sy3\">+</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"kw1\">fun</span> diagonals_add1<span class=\"sy3\">/</span><span class=\"nu0\">1</span> <span class=\"br0\">)</span><span class=\"sy1\">,</span><br/>\t<span class=\"re5\">D2</span> <span class=\"sy3\">=</span> <span class=\"re3\">diagonals</span><span class=\"br0\">(</span> <span class=\"re5\">N</span><span class=\"sy1\">,</span> <span class=\"re5\">X</span> <span class=\"sy3\">+</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"kw1\">fun</span> diagonals_add1<span class=\"sy3\">/</span><span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"re5\">Y</span> <span class=\"sy3\">-</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"kw1\">fun</span> diagonals_subtract1<span class=\"sy3\">/</span><span class=\"nu0\">1</span> <span class=\"br0\">)</span><span class=\"sy1\">,</span><br/>\t<span class=\"re5\">D3</span> <span class=\"sy3\">=</span> <span class=\"re3\">diagonals</span><span class=\"br0\">(</span> <span class=\"re5\">N</span><span class=\"sy1\">,</span> <span class=\"re5\">X</span> <span class=\"sy3\">-</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"kw1\">fun</span> diagonals_subtract1<span class=\"sy3\">/</span><span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"re5\">Y</span> <span class=\"sy3\">+</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"kw1\">fun</span> diagonals_add1<span class=\"sy3\">/</span><span class=\"nu0\">1</span> <span class=\"br0\">)</span><span class=\"sy1\">,</span><br/>\t<span class=\"re5\">D4</span> <span class=\"sy3\">=</span> <span class=\"re3\">diagonals</span><span class=\"br0\">(</span> <span class=\"re5\">N</span><span class=\"sy1\">,</span> <span class=\"re5\">X</span> <span class=\"sy3\">-</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"kw1\">fun</span> diagonals_subtract1<span class=\"sy3\">/</span><span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"re5\">Y</span> <span class=\"sy3\">-</span> <span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"kw1\">fun</span> diagonals_subtract1<span class=\"sy3\">/</span><span class=\"nu0\">1</span> <span class=\"br0\">)</span><span class=\"sy1\">,</span><br/>\t<span class=\"re5\">D1</span> <span class=\"sy3\">++</span> <span class=\"re5\">D2</span> <span class=\"sy3\">++</span> <span class=\"re5\">D3</span> <span class=\"sy3\">++</span> <span class=\"re5\">D4</span><span class=\"sy1\">.</span><br/>\u00a0<br/><span class=\"re3\">diagonals</span><span class=\"br0\">(</span> <span class=\"re5\">_N</span><span class=\"sy1\">,</span> <span class=\"nu0\">0</span><span class=\"sy1\">,</span> <span class=\"re5\">_Change_x</span><span class=\"sy1\">,</span> <span class=\"re5\">_Y</span><span class=\"sy1\">,</span> <span class=\"re5\">_Change_y</span> <span class=\"br0\">)</span> <span class=\"sy1\">-&gt;</span> <span class=\"br0\">[</span><span class=\"br0\">]</span><span class=\"sy1\">;</span><br/><span class=\"re3\">diagonals</span><span class=\"br0\">(</span> <span class=\"re5\">_N</span><span class=\"sy1\">,</span> <span class=\"re5\">_X</span><span class=\"sy1\">,</span> <span class=\"re5\">_Change_x</span><span class=\"sy1\">,</span> <span class=\"nu0\">0</span><span class=\"sy1\">,</span> <span class=\"re5\">_Change_y</span> <span class=\"br0\">)</span> <span class=\"sy1\">-&gt;</span> <span class=\"br0\">[</span><span class=\"br0\">]</span><span class=\"sy1\">;</span><br/><span class=\"re3\">diagonals</span><span class=\"br0\">(</span> <span class=\"re5\">N</span><span class=\"sy1\">,</span> <span class=\"re5\">X</span><span class=\"sy1\">,</span> <span class=\"re5\">_Change_x</span><span class=\"sy1\">,</span> <span class=\"re5\">_Y</span><span class=\"sy1\">,</span> <span class=\"re5\">_Change_y</span> <span class=\"br0\">)</span> <span class=\"kw1\">when</span> <span class=\"re5\">X</span> <span class=\"sy3\">&gt;</span> <span class=\"re5\">N</span> <span class=\"sy1\">-&gt;</span> <span class=\"br0\">[</span><span class=\"br0\">]</span><span class=\"sy1\">;</span><br/><span class=\"re3\">diagonals</span><span class=\"br0\">(</span> <span class=\"re5\">N</span><span class=\"sy1\">,</span> <span class=\"re5\">_X</span><span class=\"sy1\">,</span> <span class=\"re5\">_Change_x</span><span class=\"sy1\">,</span> <span class=\"re5\">Y</span><span class=\"sy1\">,</span> <span class=\"re5\">_Change_y</span> <span class=\"br0\">)</span> <span class=\"kw1\">when</span> <span class=\"re5\">Y</span> <span class=\"sy3\">&gt;</span> <span class=\"re5\">N</span> <span class=\"sy1\">-&gt;</span> <span class=\"br0\">[</span><span class=\"br0\">]</span><span class=\"sy1\">;</span><br/><span class=\"re3\">diagonals</span><span class=\"br0\">(</span> <span class=\"re5\">N</span><span class=\"sy1\">,</span> <span class=\"re5\">X</span><span class=\"sy1\">,</span> <span class=\"re5\">Change_x</span><span class=\"sy1\">,</span> <span class=\"re5\">Y</span><span class=\"sy1\">,</span> <span class=\"re5\">Change_y</span> <span class=\"br0\">)</span> <span class=\"sy1\">-&gt;</span> <span class=\"br0\">[</span><span class=\"br0\">{</span><span class=\"re5\">X</span><span class=\"sy1\">,</span> <span class=\"re5\">Y</span><span class=\"br0\">}</span> | <span class=\"re3\">diagonals</span><span class=\"br0\">(</span> <span class=\"re5\">N</span><span class=\"sy1\">,</span> <span class=\"re5\">C</span><span class=\"re3\">hange_x</span><span class=\"br0\">(</span><span class=\"re5\">X</span><span class=\"br0\">)</span><span class=\"sy1\">,</span> <span class=\"re5\">Change_x</span><span class=\"sy1\">,</span> <span class=\"re5\">C</span><span class=\"re3\">hange_y</span><span class=\"br0\">(</span><span class=\"re5\">Y</span><span class=\"br0\">)</span><span class=\"sy1\">,</span> <span class=\"re5\">Change_y</span> <span class=\"br0\">)</span><span class=\"br0\">]</span><span class=\"sy1\">.</span><br/>\u00a0<br/><span class=\"re3\">diagonals_add1</span><span class=\"br0\">(</span> <span class=\"re5\">N</span> <span class=\"br0\">)</span> <span class=\"sy1\">-&gt;</span> <span class=\"re5\">N</span> <span class=\"sy3\">+</span> <span class=\"nu0\">1</span><span class=\"sy1\">.</span><br/>\u00a0<br/><span class=\"re3\">diagonals_subtract1</span><span class=\"br0\">(</span> <span class=\"re5\">N</span> <span class=\"br0\">)</span> <span class=\"sy1\">-&gt;</span> <span class=\"re5\">N</span> <span class=\"sy3\">-</span> <span class=\"nu0\">1</span><span class=\"sy1\">.</span><br/>\u00a0<br/><span class=\"re3\">display_row</span><span class=\"br0\">(</span> <span class=\"re5\">Row</span><span class=\"sy1\">,</span> <span class=\"re5\">N</span><span class=\"sy1\">,</span> <span class=\"re5\">Board</span> <span class=\"br0\">)</span> <span class=\"sy1\">-&gt;</span><br/>\t<span class=\"br0\">[</span><a href=\"http://erlang.org/doc/man/io.html\"><span class=\"kw5\">io</span></a>:<span class=\"re3\">fwrite</span><span class=\"br0\">(</span><span class=\"st0\">\"~s\"</span><span class=\"sy1\">,</span> <span class=\"br0\">[</span><span class=\"re3\">display_queen</span><span class=\"br0\">(</span><span class=\"re5\">X</span><span class=\"sy1\">,</span> <span class=\"re5\">Row</span><span class=\"sy1\">,</span> <span class=\"re5\">Board</span><span class=\"br0\">)</span><span class=\"br0\">]</span><span class=\"br0\">)</span> <span class=\"sy3\">||</span> <span class=\"re5\">X</span> <span class=\"sy3\">&lt;-</span> <a href=\"http://erlang.org/doc/man/lists.html\"><span class=\"kw5\">lists</span></a>:<span class=\"re3\">seq</span><span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"sy1\">,</span> <span class=\"re5\">N</span><span class=\"br0\">)</span><span class=\"br0\">]</span><span class=\"sy1\">,</span><br/>\t<a href=\"http://erlang.org/doc/man/io.html\"><span class=\"kw5\">io</span></a>:<span class=\"re3\">nl</span><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"sy1\">.</span><br/>\u00a0<br/><span class=\"re3\">display_queen</span><span class=\"br0\">(</span> <span class=\"re5\">X</span><span class=\"sy1\">,</span> <span class=\"re5\">Y</span><span class=\"sy1\">,</span> <span class=\"re5\">Board</span> <span class=\"br0\">)</span> <span class=\"sy1\">-&gt;</span> <span class=\"re3\">display_queen</span><span class=\"br0\">(</span> <a href=\"http://erlang.org/doc/man/lists.html\"><span class=\"kw5\">lists</span></a>:<span class=\"re3\">member</span><span class=\"br0\">(</span><span class=\"br0\">{</span><span class=\"re5\">X</span><span class=\"sy1\">,</span> <span class=\"re5\">Y</span><span class=\"br0\">}</span><span class=\"sy1\">,</span> <span class=\"re5\">Board</span><span class=\"br0\">)</span> <span class=\"br0\">)</span><span class=\"sy1\">.</span><br/><span class=\"re3\">display_queen</span><span class=\"br0\">(</span> true <span class=\"br0\">)</span> <span class=\"sy1\">-&gt;</span> <span class=\"st0\">\" Q\"</span><span class=\"sy1\">;</span><br/><span class=\"re3\">display_queen</span><span class=\"br0\">(</span> false <span class=\"br0\">)</span> <span class=\"sy1\">-&gt;</span> <span class=\"st0\">\" .\"</span><span class=\"sy1\">.</span><br/>\u00a0<br/><span class=\"re3\">is_all_queens</span><span class=\"br0\">(</span> <span class=\"re5\">N</span><span class=\"sy1\">,</span> <span class=\"re5\">Board</span> <span class=\"br0\">)</span> <span class=\"sy1\">-&gt;</span> <span class=\"re5\">N</span> <span class=\"sy3\">=:=</span> <a href=\"http://erlang.org/doc/man/erlang.html\"><span class=\"kw5\">erlang</span></a>:<span class=\"kw3\">length</span><span class=\"br0\">(</span> <span class=\"re5\">Board</span> <span class=\"br0\">)</span><span class=\"sy1\">.</span><br/>\u00a0<br/><span class=\"re3\">is_diagonal</span><span class=\"br0\">(</span> <span class=\"re5\">_N</span><span class=\"sy1\">,</span> <span class=\"br0\">[</span><span class=\"br0\">]</span> <span class=\"br0\">)</span> <span class=\"sy1\">-&gt;</span> <span class=\"me1\">false</span><span class=\"sy1\">;</span><br/><span class=\"re3\">is_diagonal</span><span class=\"br0\">(</span> <span class=\"re5\">N</span><span class=\"sy1\">,</span> <span class=\"br0\">[</span><span class=\"re5\">Position</span> | <span class=\"re5\">T</span><span class=\"br0\">]</span> <span class=\"br0\">)</span> <span class=\"sy1\">-&gt;</span><br/>\t<span class=\"re5\">Diagonals</span> <span class=\"sy3\">=</span> <span class=\"re3\">diagonals</span><span class=\"br0\">(</span> <span class=\"re5\">N</span><span class=\"sy1\">,</span> <span class=\"re5\">Position</span> <span class=\"br0\">)</span><span class=\"sy1\">,</span><br/>\t<span class=\"re5\">T</span> <span class=\"sy3\">=/=</span> <span class=\"br0\">(</span><span class=\"re5\">T</span> <span class=\"sy3\">--</span> <span class=\"re5\">Diagonals</span><span class=\"br0\">)</span><br/>\t<span class=\"kw1\">orelse</span> <span class=\"re3\">is_diagonal</span><span class=\"br0\">(</span> <span class=\"re5\">N</span><span class=\"sy1\">,</span> <span class=\"re5\">T</span> <span class=\"br0\">)</span><span class=\"sy1\">.</span><br/>\u00a0<br/><span class=\"re3\">is_not_allowed_queen_placement</span><span class=\"br0\">(</span> <span class=\"re5\">N</span><span class=\"sy1\">,</span> <span class=\"re5\">Board</span> <span class=\"br0\">)</span> <span class=\"sy1\">-&gt;</span><br/>\t<span class=\"re5\">Pieces</span> <span class=\"sy3\">=</span> <a href=\"http://erlang.org/doc/man/erlang.html\"><span class=\"kw5\">erlang</span></a>:<span class=\"kw3\">length</span><span class=\"br0\">(</span> <span class=\"re5\">Board</span> <span class=\"br0\">)</span><span class=\"sy1\">,</span><br/>\t<span class=\"br0\">{</span><span class=\"re5\">Xs</span><span class=\"sy1\">,</span> <span class=\"re5\">Ys</span><span class=\"br0\">}</span> <span class=\"sy3\">=</span> <a href=\"http://erlang.org/doc/man/lists.html\"><span class=\"kw5\">lists</span></a>:<span class=\"re3\">unzip</span><span class=\"br0\">(</span> <span class=\"re5\">Board</span> <span class=\"br0\">)</span><span class=\"sy1\">,</span><br/>\t<span class=\"re5\">Pieces</span> <span class=\"sy3\">=/=</span> <a href=\"http://erlang.org/doc/man/erlang.html\"><span class=\"kw5\">erlang</span></a>:<span class=\"kw3\">length</span><span class=\"br0\">(</span> <a href=\"http://erlang.org/doc/man/lists.html\"><span class=\"kw5\">lists</span></a>:<span class=\"re3\">usort</span><span class=\"br0\">(</span><span class=\"re5\">Xs</span><span class=\"br0\">)</span> <span class=\"br0\">)</span><br/>\t<span class=\"kw1\">orelse</span> <span class=\"re5\">Pieces</span> <span class=\"sy3\">=/=</span> <a href=\"http://erlang.org/doc/man/erlang.html\"><span class=\"kw5\">erlang</span></a>:<span class=\"kw3\">length</span><span class=\"br0\">(</span> <a href=\"http://erlang.org/doc/man/lists.html\"><span class=\"kw5\">lists</span></a>:<span class=\"re3\">usort</span><span class=\"br0\">(</span><span class=\"re5\">Ys</span><span class=\"br0\">)</span> <span class=\"br0\">)</span><br/>\t<span class=\"kw1\">orelse</span> <span class=\"re3\">is_diagonal</span><span class=\"br0\">(</span> <span class=\"re5\">N</span><span class=\"sy1\">,</span> <span class=\"re5\">Board</span> <span class=\"br0\">)</span><span class=\"sy1\">.</span><br/>\u00a0<br/><span class=\"re3\">task</span><span class=\"br0\">(</span> <span class=\"re5\">N</span> <span class=\"br0\">)</span> <span class=\"sy1\">-&gt;</span><br/>    <a href=\"http://erlang.org/doc/man/io.html\"><span class=\"kw5\">io</span></a>:<span class=\"re3\">fwrite</span><span class=\"br0\">(</span> <span class=\"st0\">\"N = ~p. One solution.~n\"</span><span class=\"sy1\">,</span> <span class=\"br0\">[</span><span class=\"re5\">N</span><span class=\"br0\">]</span> <span class=\"br0\">)</span><span class=\"sy1\">,</span><br/>    <span class=\"re5\">Board</span> <span class=\"sy3\">=</span> <span class=\"re3\">solve</span><span class=\"br0\">(</span> <span class=\"re5\">N</span> <span class=\"br0\">)</span><span class=\"sy1\">,</span><br/>    <span class=\"re3\">display</span><span class=\"br0\">(</span> <span class=\"re5\">Board</span> <span class=\"br0\">)</span><span class=\"sy1\">.</span><br/>\u00a0</pre>"}, {"lang": "ERRE", "loc": 86, "block": "<pre class=\"text highlighted_source\">\u00a0<br/>!------------------------------------------------<br/>! QUEENS.R\u00a0: solve queens problem on a NxN board<br/>!------------------------------------------------<br/>\u00a0<br/>PROGRAM QUEENS<br/>\u00a0<br/>DIM COL%[15]<br/>\u00a0<br/>BEGIN<br/>  MAXSIZE%=15<br/>  PRINT(TAB(25);\" --- PROBLEMA DELLE REGINE --- \")<br/>  PRINT<br/>  PRINT(\"Board dimension \";)<br/>  INPUT(N%)<br/>  PRINT<br/>  IF (N%&lt;1 OR N%&gt;MAXSIZE%)<br/>    THEN<br/>      PRINT(\"Illegal dimension!!\")<br/>    ELSE<br/>      FOR CURCOLNBR%=1 TO N%<br/>        COL%[CURCOLNBR%]=0<br/>      END FOR<br/>      CURCOLNBR%=1<br/>      WHILE CURCOLNBR%&gt;0 DO<br/>        PLACEDAQUEEN%=FALSE<br/>        I%=COL%[CURCOLNBR%]+1<br/>        WHILE (I%&lt;=N%) AND NOT PLACEDAQUEEN% DO<br/>          PLACEDAQUEEN%=TRUE<br/>          J%=1<br/>          WHILE PLACEDAQUEEN% AND (J%&lt;CURCOLNBR%) DO<br/>            PLACEDAQUEEN%=COL%[J%]&lt;&gt;I%<br/>            J%=J%+1<br/>          END WHILE<br/>          IF PLACEDAQUEEN%<br/>            THEN<br/>              DIAGNBR%=I%+CURCOLNBR%<br/>              J%=1<br/>              WHILE PLACEDAQUEEN% AND (J%&lt;CURCOLNBR%) DO<br/>                PLACEDAQUEEN%=(COL%[J%]+J%)&lt;&gt;DIAGNBR%<br/>                J%=J%+1<br/>              END WHILE<br/>            ELSE<br/>          END IF<br/>          IF PLACEDAQUEEN%<br/>            THEN<br/>              DIAGNBR%=I%-CURCOLNBR%<br/>              J%=1<br/>              WHILE PLACEDAQUEEN% AND (J%&lt;CURCOLNBR%) DO<br/>                 PLACEDAQUEEN%=(COL%[J%]-J%)&lt;&gt;DIAGNBR%<br/>                 J%=J%+1<br/>              END WHILE<br/>            ELSE<br/>          END IF<br/>          IF NOT PLACEDAQUEEN%<br/>            THEN<br/>              I%=I%+1<br/>            ELSE<br/>              COL%[CURCOLNBR%]=I%<br/>          END IF<br/>        END WHILE<br/>        IF NOT PLACEDAQUEEN%<br/>          THEN<br/>            COL%[CURCOLNBR%]=0<br/>            CURCOLNBR%=CURCOLNBR%-1<br/>          ELSE<br/>            IF CURCOLNBR%=N%<br/>              THEN<br/>                NSOL%=NSOL%+1<br/>                PRINT(\"Soluzione\";NSOL%;\":\";)<br/>                FOR I%=1 TO N%<br/>                  PRINT(COL%[I%];)<br/>                END FOR<br/>                PRINT<br/>              ELSE<br/>                CURCOLNBR%=CURCOLNBR%+1<br/>            END IF<br/>        END IF<br/>      END WHILE<br/>      PRINT(\"Search completed\")<br/>      REPEAT<br/>         GET(CH$)<br/>      UNTIL CH$&lt;&gt;\"\"<br/>    END IF<br/>END PROGRAM<br/>\u00a0</pre>"}, {"lang": "F#", "loc": 44, "block": "<pre class=\"fsharp highlighted_source\">\u00a0<br/><span class=\"kw1\">let</span> <span class=\"kw1\">rec</span> iterate f value <span class=\"sy0\">=</span> <span class=\"kw4\">seq</span> <span class=\"br0\">{</span> <br/>    <span class=\"kw1\">yield</span> value<br/>    <span class=\"kw1\">yield!</span> iterate f <span class=\"br0\">(</span>f value<span class=\"br0\">)</span> <span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"kw1\">let</span> up i <span class=\"sy0\">=</span> i <span class=\"sy0\">+</span> <span class=\"nu0\">1</span><br/><span class=\"kw1\">let</span> right i <span class=\"sy0\">=</span> i<br/><span class=\"kw1\">let</span> down i <span class=\"sy0\">=</span> i <span class=\"sy0\">-</span> <span class=\"nu0\">1</span><br/>\u00a0<br/><span class=\"kw1\">let</span> noCollisionGivenDir solution number dir <span class=\"sy0\">=</span><br/>    <a href=\"http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/namespaces.html\"><span class=\"kw2\">Seq</span></a>.<span class=\"me1\">forall2</span> <span class=\"br0\">(</span><span class=\"sy0\">&lt;&gt;</span><span class=\"br0\">)</span> solution <span class=\"br0\">(</span><a href=\"http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/namespaces.html\"><span class=\"kw2\">Seq</span></a>.<span class=\"me1\">skip</span> <span class=\"nu0\">1</span> <span class=\"br0\">(</span>iterate dir number<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"kw1\">let</span> goodAddition solution number <span class=\"sy0\">=</span><br/>    <a href=\"http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/namespaces.html\"><span class=\"kw2\">List</span></a>.<span class=\"me1\">forall</span> <span class=\"br0\">(</span>noCollisionGivenDir solution number<span class=\"br0\">)</span> <span class=\"br0\">[</span> up<span class=\"sy0\">;</span> right<span class=\"sy0\">;</span> down <span class=\"br0\">]</span><br/>\u00a0<br/><span class=\"kw1\">let</span> <span class=\"kw1\">rec</span> extendSolution n ps <span class=\"sy0\">=</span><br/>    <span class=\"br0\">[</span><span class=\"nu0\">0</span>..<span class=\"me1\">n</span> <span class=\"sy0\">-</span> <span class=\"nu0\">1</span><span class=\"br0\">]</span><br/>    <span class=\"sy0\">|&gt;</span> <a href=\"http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/namespaces.html\"><span class=\"kw2\">List</span></a>.<span class=\"me1\">filter</span> <span class=\"br0\">(</span>goodAddition ps<span class=\"br0\">)</span><br/>    <span class=\"sy0\">|&gt;</span> <a href=\"http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/namespaces.html\"><span class=\"kw2\">List</span></a>.<span class=\"me1\">map</span> <span class=\"br0\">(</span><span class=\"kw1\">fun</span> num <span class=\"sy0\">-&gt;</span> num\u00a0:: ps<span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"kw1\">let</span> allSolutions n <span class=\"sy0\">=</span><br/>    iterate <span class=\"br0\">(</span><a href=\"http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/namespaces.html\"><span class=\"kw2\">List</span></a>.<span class=\"me1\">collect</span> <span class=\"br0\">(</span>extendSolution n<span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"br0\">]</span><span class=\"br0\">]</span><br/>\u00a0<br/><span class=\"co1\">// Print one solution for the 8x8 case</span><br/><span class=\"kw1\">let</span> printOneSolution <span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"sy0\">=</span><br/>    allSolutions <span class=\"nu0\">8</span><br/>    <span class=\"sy0\">|&gt;</span> <a href=\"http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/namespaces.html\"><span class=\"kw2\">Seq</span></a>.<span class=\"me1\">item</span> <span class=\"nu0\">8</span><br/>    <span class=\"sy0\">|&gt;</span> <a href=\"http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/namespaces.html\"><span class=\"kw2\">Seq</span></a>.<span class=\"me1\">head</span><br/>    <span class=\"sy0\">|&gt;</span> <a href=\"http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/namespaces.html\"><span class=\"kw2\">List</span></a>.<span class=\"me1\">iter</span> <span class=\"br0\">(</span><span class=\"kw1\">fun</span> rowIndex <span class=\"sy0\">-&gt;</span><br/>        printf <span class=\"st0\">\"|\"</span><br/>        <span class=\"br0\">[</span><span class=\"nu0\">0</span>..<span class=\"nu0\">8</span><span class=\"br0\">]</span> <span class=\"sy0\">|&gt;</span> <a href=\"http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/namespaces.html\"><span class=\"kw2\">List</span></a>.<span class=\"me1\">iter</span> <span class=\"br0\">(</span><span class=\"kw1\">fun</span> i <span class=\"sy0\">-&gt;</span> printf <span class=\"br0\">(</span><span class=\"kw1\">if</span> i <span class=\"sy0\">=</span> rowIndex <span class=\"kw1\">then</span> <span class=\"st0\">\"X|\"</span> <span class=\"kw1\">else</span> <span class=\"st0\">\" |\"</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>        printfn <span class=\"st0\">\"\"</span><span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"co1\">// Print number of solution for the other cases</span><br/><span class=\"kw1\">let</span> printNumberOfSolutions <span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"sy0\">=</span><br/>    printfn <span class=\"st0\">\"Size<span class=\"es0\">\\t</span>Nr of solutions\"</span><br/>    <span class=\"br0\">[</span><span class=\"nu0\">1</span>..<span class=\"nu0\">11</span><span class=\"br0\">]</span><br/>    <span class=\"sy0\">|&gt;</span> <a href=\"http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/namespaces.html\"><span class=\"kw2\">List</span></a>.<span class=\"me1\">map</span> <span class=\"br0\">(</span><span class=\"br0\">(</span><span class=\"kw1\">fun</span> i <span class=\"sy0\">-&gt;</span> <a href=\"http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/namespaces.html\"><span class=\"kw2\">Seq</span></a>.<span class=\"me1\">item</span> i <span class=\"br0\">(</span>allSolutions i<span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"sy0\">&gt;&gt;</span> <a href=\"http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/namespaces.html\"><span class=\"kw2\">List</span></a>.<span class=\"me1\">length</span><span class=\"br0\">)</span><br/>    <span class=\"sy0\">|&gt;</span> <a href=\"http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/namespaces.html\"><span class=\"kw2\">List</span></a>.<span class=\"me1\">iteri</span> <span class=\"br0\">(</span><span class=\"kw1\">fun</span> i cnt <span class=\"sy0\">-&gt;</span> printfn <span class=\"st0\">\"%d<span class=\"es0\">\\t</span>%d\"</span> <span class=\"br0\">(</span>i<span class=\"sy0\">+</span><span class=\"nu0\">1</span><span class=\"br0\">)</span> cnt<span class=\"br0\">)</span><br/>\u00a0<br/>printOneSolution<span class=\"br0\">(</span><span class=\"br0\">)</span><br/>\u00a0<br/>printNumberOfSolutions<span class=\"br0\">(</span><span class=\"br0\">)</span><br/>\u00a0</pre>"}, {"lang": "Factor", "loc": 27, "block": "<pre class=\"text highlighted_source\">USING: kernel sequences math math.combinatorics formatting io locals\u00a0;<br/>IN: queens<br/>\u00a0<br/>: /=  ( x y --\u00a0? )   = not\u00a0; inline<br/>\u00a0<br/>:: safe?  ( board q --\u00a0? )<br/>    [let  q board nth\u00a0:&gt; x<br/>      q iota [<br/>         x swap<br/>         [ board nth ] keep<br/>         q swap -<br/>           [ + /= ]<br/>           [ - /= ] 3bi and<br/>      ] all?<br/>    ]\u00a0;<br/>\u00a0<br/>: solution? ( board --\u00a0? )<br/>    dup length iota [ dupd safe? ] all? nip\u00a0;<br/>\u00a0<br/>: queens ( n -- l )<br/>    iota all-permutations [ solution? ] filter\u00a0;<br/>\u00a0<br/>: .queens ( n -- )<br/>    queens<br/>    [ <br/>      [ 1 + \"%d \" printf ] each nl<br/>    ] each\u00a0;</pre>"}, {"lang": "Forth", "loc": 29, "block": "<pre class=\"text highlighted_source\">variable solutions<br/>variable nodes<br/>\u00a0<br/>: bits ( n -- mask ) 1 swap lshift 1-\u00a0;<br/>: lowBit  ( mask -- bit ) dup negate and\u00a0;<br/>: lowBit- ( mask -- bits ) dup 1- and\u00a0;<br/>\u00a0<br/>: next3 ( dl dr f files -- dl dr f dl' dr' f' )<br/>  invert &gt;r<br/>  2 pick <a class=\"__cf_email__\" data-cfemail=\"720032\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a> and 2* 1+<br/>  2 pick <a class=\"__cf_email__\" data-cfemail=\"deac9e\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a> and 2/<br/>  2 pick r&gt; and\u00a0;<br/>\u00a0<br/>: try ( dl dr f -- )<br/>  dup if<br/>    1 nodes +!<br/>    dup 2over and and<br/>    begin\u00a0?dup while<br/>      dup &gt;r lowBit next3 recurse r&gt; lowBit-<br/>    repeat<br/>  else 1 solutions +! then<br/>  drop 2drop\u00a0;<br/>\u00a0<br/>: queens ( n -- )<br/>  0 solutions\u00a0! 0 nodes\u00a0!<br/>  -1 -1 rot bits try<br/>  solutions @ . .\" solutions, \" nodes @ . .\" nodes\"\u00a0;<br/>\u00a0<br/>8 queens  \\ 92 solutions, 1965 nodes</pre>"}, {"lang": "Fortran", "loc": 101, "block": "<pre class=\"fortran highlighted_source\"><span class=\"kw1\">program</span> Nqueens<br/>  <span class=\"kw3\">implicit</span> <span class=\"kw3\">none</span><br/>\u00a0<br/>  <span class=\"kw3\">integer</span>, <span class=\"kw3\">parameter</span> <span class=\"sy0\">::</span> <span class=\"me2\">n</span> <span class=\"sy0\">=</span> <span class=\"nu0\">8</span>  <span class=\"co1\">! size of board</span><br/>  <span class=\"kw3\">integer</span> <span class=\"sy0\">::</span> <span class=\"kw1\">file</span> <span class=\"sy0\">=</span> <span class=\"nu0\">1</span>, rank <span class=\"sy0\">=</span> <span class=\"nu0\">1</span>, queens <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><br/>  <span class=\"kw3\">integer</span> <span class=\"sy0\">::</span> <span class=\"me2\">i</span><br/>  <span class=\"kw3\">logical</span> <span class=\"sy0\">::</span> <span class=\"me2\">board</span><span class=\"br0\">(</span>n,n<span class=\"br0\">)</span> <span class=\"sy0\">=</span> <span class=\"kw2\">.<span class=\"me1\">false</span>.</span><br/>\u00a0<br/>  <span class=\"kw1\">do</span> <span class=\"kw1\">while</span> <span class=\"br0\">(</span>queens &lt; n<span class=\"br0\">)</span><br/>    board<span class=\"br0\">(</span><span class=\"kw1\">file</span>, rank<span class=\"br0\">)</span> <span class=\"sy0\">=</span> <span class=\"kw2\">.<span class=\"me1\">true</span>.</span><br/>    <span class=\"kw1\">if</span><span class=\"br0\">(</span>is_safe<span class=\"br0\">(</span>board, <span class=\"kw1\">file</span>, rank<span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"kw1\">then</span><br/>      queens <span class=\"sy0\">=</span> queens <span class=\"sy0\">+</span> <span class=\"nu0\">1</span><br/>      <span class=\"kw1\">file</span> <span class=\"sy0\">=</span> <span class=\"nu0\">1</span><br/>      rank <span class=\"sy0\">=</span> rank <span class=\"sy0\">+</span> <span class=\"nu0\">1</span><br/>    <span class=\"kw1\">else</span><br/>      board<span class=\"br0\">(</span><span class=\"kw1\">file</span>, rank<span class=\"br0\">)</span> <span class=\"sy0\">=</span> <span class=\"kw2\">.<span class=\"me1\">false</span>.</span><br/>      <span class=\"kw1\">file</span> <span class=\"sy0\">=</span> <span class=\"kw1\">file</span> <span class=\"sy0\">+</span> <span class=\"nu0\">1</span><br/>      <span class=\"kw1\">do</span> <span class=\"kw1\">while</span><span class=\"br0\">(</span><span class=\"kw1\">file</span> &gt; n<span class=\"br0\">)</span><br/>         rank <span class=\"sy0\">=</span> rank <span class=\"sy0\">-</span> <span class=\"nu0\">1</span><br/>         <span class=\"kw1\">if</span> <span class=\"br0\">(</span>rank &lt; <span class=\"nu0\">1</span><span class=\"br0\">)</span> <span class=\"kw1\">then</span><br/>           write<span class=\"br0\">(</span><span class=\"sy0\">*</span>, <span class=\"st0\">\"(a,i0)\"</span><span class=\"br0\">)</span> <span class=\"st0\">\"No solution for n = \"</span>, n<br/>           <span class=\"kw1\">stop</span><br/>         <span class=\"kw1\">end</span> <span class=\"kw1\">if</span>  <br/>         <span class=\"kw1\">do</span> i <span class=\"sy0\">=</span> <span class=\"nu0\">1</span>, n<br/>           <span class=\"kw1\">if</span> <span class=\"br0\">(</span>board<span class=\"br0\">(</span>i, rank<span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"kw1\">then</span><br/>             <span class=\"kw1\">file</span> <span class=\"sy0\">=</span> i<br/>             board<span class=\"br0\">(</span><span class=\"kw1\">file</span>, rank<span class=\"br0\">)</span> <span class=\"sy0\">=</span> <span class=\"kw2\">.<span class=\"me1\">false</span>.</span><br/>             queens <span class=\"sy0\">=</span> queens <span class=\"sy0\">-</span> <span class=\"nu0\">1</span><br/>             <span class=\"kw1\">file</span> <span class=\"sy0\">=</span> i <span class=\"sy0\">+</span> <span class=\"nu0\">1</span><br/>             <span class=\"kw1\">exit</span><br/>           <span class=\"kw1\">end</span> <span class=\"kw1\">if</span><br/>         <span class=\"kw1\">end</span> <span class=\"kw1\">do</span><br/>       <span class=\"kw1\">end</span> <span class=\"kw1\">do</span><br/>    <span class=\"kw1\">end</span> <span class=\"kw1\">if</span><br/>  <span class=\"kw1\">end</span> <span class=\"kw1\">do</span><br/>\u00a0<br/>  <span class=\"kw1\">call</span> Printboard<span class=\"br0\">(</span>board<span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"co1\">contains</span><br/>\u00a0<br/><span class=\"kw1\">function</span> is_safe<span class=\"br0\">(</span>board, <span class=\"kw1\">file</span>, rank<span class=\"br0\">)</span><br/>  <span class=\"kw3\">logical</span> <span class=\"sy0\">::</span> <span class=\"me2\">is_safe</span><br/>  <span class=\"kw3\">logical</span>, <span class=\"kw3\">intent</span><span class=\"br0\">(</span><span class=\"kw3\">in</span><span class=\"br0\">)</span> <span class=\"sy0\">::</span> <span class=\"me2\">board</span><span class=\"br0\">(</span><span class=\"sy0\">:</span>,<span class=\"sy0\">:</span><span class=\"br0\">)</span><br/>  <span class=\"kw3\">integer</span>, <span class=\"kw3\">intent</span><span class=\"br0\">(</span><span class=\"kw3\">in</span><span class=\"br0\">)</span> <span class=\"sy0\">::</span> <span class=\"kw1\">file</span>, rank<br/>  <span class=\"kw3\">integer</span> <span class=\"sy0\">::</span> <span class=\"me2\">i</span>, f, r<br/>\u00a0<br/>  is_safe <span class=\"sy0\">=</span> <span class=\"kw2\">.<span class=\"me1\">true</span>.</span><br/>  <span class=\"kw1\">do</span> i <span class=\"sy0\">=</span> rank<span class=\"sy0\">-</span><span class=\"nu0\">1</span>, <span class=\"nu0\">1</span>, <span class=\"sy0\">-</span><span class=\"nu0\">1</span><br/>    <span class=\"kw1\">if</span><span class=\"br0\">(</span>board<span class=\"br0\">(</span><span class=\"kw1\">file</span>, i<span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"kw1\">then</span><br/>      is_safe <span class=\"sy0\">=</span> <span class=\"kw2\">.<span class=\"me1\">false</span>.</span><br/>      <span class=\"kw1\">return</span><br/>    <span class=\"kw1\">end</span> <span class=\"kw1\">if</span><br/>  <span class=\"kw1\">end</span> <span class=\"kw1\">do</span><br/>\u00a0<br/>  f <span class=\"sy0\">=</span> <span class=\"kw1\">file</span> <span class=\"sy0\">-</span> <span class=\"nu0\">1</span><br/>  r <span class=\"sy0\">=</span> rank <span class=\"sy0\">-</span> <span class=\"nu0\">1</span><br/>  <span class=\"kw1\">do</span> <span class=\"kw1\">while</span><span class=\"br0\">(</span>f &gt; <span class=\"nu0\">0</span> <span class=\"kw2\">.<span class=\"me1\">and</span>.</span> r &gt; <span class=\"nu0\">0</span><span class=\"br0\">)</span><br/>    <span class=\"kw1\">if</span><span class=\"br0\">(</span>board<span class=\"br0\">(</span>f, r<span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"kw1\">then</span><br/>      is_safe <span class=\"sy0\">=</span> <span class=\"kw2\">.<span class=\"me1\">false</span>.</span><br/>      <span class=\"kw1\">return</span><br/>    <span class=\"kw1\">end</span> <span class=\"kw1\">if</span><br/>    f <span class=\"sy0\">=</span> f <span class=\"sy0\">-</span> <span class=\"nu0\">1</span><br/>    r <span class=\"sy0\">=</span> r <span class=\"sy0\">-</span> <span class=\"nu0\">1</span><br/>  <span class=\"kw1\">end</span> <span class=\"kw1\">do</span><br/>\u00a0<br/>  f <span class=\"sy0\">=</span> <span class=\"kw1\">file</span> <span class=\"sy0\">+</span> <span class=\"nu0\">1</span><br/>  r <span class=\"sy0\">=</span> rank <span class=\"sy0\">-</span> <span class=\"nu0\">1</span><br/>  <span class=\"kw1\">do</span> <span class=\"kw1\">while</span><span class=\"br0\">(</span>f &lt;<span class=\"sy0\">=</span> n <span class=\"kw2\">.<span class=\"me1\">and</span>.</span> r &gt; <span class=\"nu0\">0</span><span class=\"br0\">)</span><br/>    <span class=\"kw1\">if</span><span class=\"br0\">(</span>board<span class=\"br0\">(</span>f, r<span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"kw1\">then</span><br/>      is_safe <span class=\"sy0\">=</span> <span class=\"kw2\">.<span class=\"me1\">false</span>.</span><br/>      <span class=\"kw1\">return</span><br/>    <span class=\"kw1\">end</span> <span class=\"kw1\">if</span><br/>    f <span class=\"sy0\">=</span> f <span class=\"sy0\">+</span> <span class=\"nu0\">1</span><br/>    r <span class=\"sy0\">=</span> r <span class=\"sy0\">-</span> <span class=\"nu0\">1</span><br/>  <span class=\"kw1\">end</span> <span class=\"kw1\">do</span><br/><span class=\"kw1\">end</span> <span class=\"kw1\">function</span>    <br/>\u00a0<br/><span class=\"kw1\">subroutine</span> Printboard<span class=\"br0\">(</span>board<span class=\"br0\">)</span><br/>  <span class=\"kw3\">logical</span>, <span class=\"kw3\">intent</span><span class=\"br0\">(</span><span class=\"kw3\">in</span><span class=\"br0\">)</span> <span class=\"sy0\">::</span> <span class=\"me2\">board</span><span class=\"br0\">(</span><span class=\"sy0\">:</span>,<span class=\"sy0\">:</span><span class=\"br0\">)</span><br/>  <span class=\"kw3\">character</span><span class=\"br0\">(</span>n<span class=\"sy0\">*</span><span class=\"nu0\">4</span><span class=\"sy0\">+</span><span class=\"nu0\">1</span><span class=\"br0\">)</span> <span class=\"sy0\">::</span> <span class=\"me2\">line</span><br/>  <span class=\"kw3\">integer</span> <span class=\"sy0\">::</span> <span class=\"me2\">f</span>, r<br/>\u00a0<br/>  write<span class=\"br0\">(</span><span class=\"sy0\">*</span>, <span class=\"st0\">\"(a, i0)\"</span><span class=\"br0\">)</span> <span class=\"st0\">\"n = \"</span>, n<br/>  line <span class=\"sy0\">=</span> <span class=\"kw4\">repeat</span><span class=\"br0\">(</span><span class=\"st0\">\"+---\"</span>, n<span class=\"br0\">)</span> <span class=\"sy0\">//</span> <span class=\"st0\">\"+\"</span><br/>  <span class=\"kw1\">do</span> r <span class=\"sy0\">=</span> <span class=\"nu0\">1</span>, n<br/>    write<span class=\"br0\">(</span><span class=\"sy0\">*</span>, <span class=\"st0\">\"(a)\"</span><span class=\"br0\">)</span> line<br/>    <span class=\"kw1\">do</span> f <span class=\"sy0\">=</span> <span class=\"nu0\">1</span>, n<br/>      write<span class=\"br0\">(</span><span class=\"sy0\">*</span>, <span class=\"st0\">\"(a)\"</span>, <span class=\"kw1\">advance</span><span class=\"sy0\">=</span><span class=\"st0\">\"no\"</span><span class=\"br0\">)</span> <span class=\"st0\">\"|\"</span><br/>      <span class=\"kw1\">if</span><span class=\"br0\">(</span>board<span class=\"br0\">(</span>f, r<span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"kw1\">then</span><br/>        write<span class=\"br0\">(</span><span class=\"sy0\">*</span>, <span class=\"st0\">\"(a)\"</span>, <span class=\"kw1\">advance</span><span class=\"sy0\">=</span><span class=\"st0\">\"no\"</span><span class=\"br0\">)</span> <span class=\"st0\">\" Q \"</span><br/>      <span class=\"kw1\">else</span> <span class=\"kw1\">if</span><span class=\"br0\">(</span><span class=\"kw4\">mod</span><span class=\"br0\">(</span>f<span class=\"sy0\">+</span>r, <span class=\"nu0\">2</span><span class=\"br0\">)</span> <span class=\"sy0\">==</span> <span class=\"nu0\">0</span><span class=\"br0\">)</span> <span class=\"kw1\">then</span><br/>        write<span class=\"br0\">(</span><span class=\"sy0\">*</span>, <span class=\"st0\">\"(a)\"</span>, <span class=\"kw1\">advance</span><span class=\"sy0\">=</span><span class=\"st0\">\"no\"</span><span class=\"br0\">)</span> <span class=\"st0\">\"   \"</span><br/>      <span class=\"kw1\">else</span><br/>        write<span class=\"br0\">(</span><span class=\"sy0\">*</span>, <span class=\"st0\">\"(a)\"</span>, <span class=\"kw1\">advance</span><span class=\"sy0\">=</span><span class=\"st0\">\"no\"</span><span class=\"br0\">)</span> <span class=\"st0\">\"###\"</span><br/>      <span class=\"kw1\">end</span> <span class=\"kw1\">if</span><br/>    <span class=\"kw1\">end</span> <span class=\"kw1\">do</span><br/>    write<span class=\"br0\">(</span><span class=\"sy0\">*</span>, <span class=\"st0\">\"(a)\"</span><span class=\"br0\">)</span> <span class=\"st0\">\"|\"</span><br/>  <span class=\"kw1\">end</span> <span class=\"kw1\">do</span><br/>  write<span class=\"br0\">(</span><span class=\"sy0\">*</span>, <span class=\"st0\">\"(a)\"</span><span class=\"br0\">)</span> line<br/><span class=\"kw1\">end</span> <span class=\"kw1\">subroutine</span><br/><span class=\"kw1\">end</span> <span class=\"kw1\">program</span></pre>"}, {"lang": "FreeBASIC", "loc": 56, "block": "<pre class=\"freebasic highlighted_source\"><span class=\"co1\">' version 13-04-2017</span><br/><span class=\"co1\">' compile with: fbc -s console</span><br/><span class=\"kw1\">Dim</span> <span class=\"kw1\">Shared</span> <span class=\"kw1\">As</span> ULong count, c<span class=\"br0\">(</span><span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"kw1\">Sub</span> n_queens<span class=\"br0\">(</span>row <span class=\"kw1\">As</span> ULong, n <span class=\"kw1\">As</span> ULong, show <span class=\"kw1\">As</span> ULong = <span class=\"nu0\">0</span><span class=\"br0\">)</span><br/>\u00a0<br/>    <span class=\"kw1\">Dim</span> <span class=\"kw1\">As</span> ULong x, y<br/>\u00a0<br/>    <span class=\"kw1\">For</span> x = <span class=\"nu0\">1</span> <span class=\"kw1\">To</span> n<br/>\u00a0<br/>        <span class=\"kw1\">For</span> y = <span class=\"nu0\">1</span> <span class=\"kw1\">To</span> row -<span class=\"nu0\">1</span><br/>            <span class=\"kw1\">If</span> c<span class=\"br0\">(</span>y<span class=\"br0\">)</span> = x OrElse <span class=\"br0\">(</span><span class=\"br0\">(</span>row - y<span class=\"br0\">)</span> - Abs<span class=\"br0\">(</span>x - c<span class=\"br0\">(</span>y<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span> = <span class=\"nu0\">0</span> <span class=\"kw1\">Then</span><br/>                <span class=\"kw1\">Continue</span> <span class=\"kw1\">For</span>, <span class=\"kw1\">For</span><br/>            <span class=\"kw1\">End</span> <span class=\"kw1\">If</span><br/>        <span class=\"kw1\">Next</span><br/>\u00a0<br/>        c<span class=\"br0\">(</span>row<span class=\"br0\">)</span> = x<br/>        <span class=\"kw1\">If</span> row &lt; n <span class=\"kw1\">Then</span><br/>            n_queens<span class=\"br0\">(</span>row +<span class=\"nu0\">1</span> , n, show<span class=\"br0\">)</span><br/>        <span class=\"kw1\">Else</span><br/>            count += <span class=\"nu0\">1</span><br/>\u00a0<br/>            <span class=\"kw1\">If</span> show &lt;&gt; <span class=\"nu0\">0</span> <span class=\"kw1\">Then</span><br/>                <span class=\"kw1\">For</span> y = <span class=\"nu0\">1</span> <span class=\"kw1\">To</span> n<br/>                    <span class=\"kw1\">Print</span> <span class=\"kw1\">Using</span> <span class=\"st0\">\"###\"</span>; c<span class=\"br0\">(</span>y<span class=\"br0\">)</span>;<br/>                <span class=\"kw1\">Next</span><br/>                <span class=\"kw1\">Print</span><br/>            <span class=\"kw1\">End</span> <span class=\"kw1\">If</span><br/>\u00a0<br/>        <span class=\"kw1\">End</span> <span class=\"kw1\">If</span><br/>\u00a0<br/>    <span class=\"kw1\">Next</span><br/>\u00a0<br/><span class=\"kw1\">End</span> <span class=\"kw1\">Sub</span><br/>\u00a0<br/><span class=\"co1\">' ------=&lt; MAIN &gt;=------</span><br/>\u00a0<br/><span class=\"kw1\">Dim</span> <span class=\"kw1\">As</span> ULong n = <span class=\"nu0\">5</span><br/><span class=\"kw1\">ReDim</span> c<span class=\"br0\">(</span>n<span class=\"br0\">)</span><br/><span class=\"co1\">' n_queens(1, n, show = 0 only show total | show &lt;&gt; 0 show every solution</span><br/>n_queens<span class=\"br0\">(</span><span class=\"nu0\">1</span>, n, <span class=\"nu0\">1</span><span class=\"br0\">)</span><br/><span class=\"kw1\">Print</span> <span class=\"kw1\">Using</span> <span class=\"st0\">\"## x ## board, ##### solutions\"</span>; n; n; count<br/><span class=\"kw1\">Print</span><br/>\u00a0<br/><span class=\"kw1\">For</span> n = <span class=\"nu0\">1</span> <span class=\"kw1\">To</span> <span class=\"nu0\">14</span><br/>    <span class=\"kw1\">ReDim</span> c<span class=\"br0\">(</span>n<span class=\"br0\">)</span><br/>    count = <span class=\"nu0\">0</span><br/>    n_queens<span class=\"br0\">(</span><span class=\"nu0\">1</span>, n<span class=\"br0\">)</span><br/>    <span class=\"kw1\">Print</span> <span class=\"kw1\">Using</span> <span class=\"st0\">\"A ## x ## board has ######## solutions\"</span>; n; n; count<br/><span class=\"kw1\">Next</span><br/>\u00a0<br/><span class=\"co1\">' empty keyboard buffer</span><br/><span class=\"kw1\">While</span> <span class=\"kw1\">Inkey</span> &lt;&gt; <span class=\"st0\">\"\"</span>\u00a0: <span class=\"kw1\">Wend</span><br/><span class=\"kw1\">Print</span>\u00a0: <span class=\"kw1\">Print</span> <span class=\"st0\">\"hit any key to end program\"</span><br/><span class=\"kw1\">Sleep</span><br/><span class=\"kw1\">End</span></pre>"}, {"lang": "GAP", "loc": 78, "block": "<pre class=\"text highlighted_source\">NrQueens\u00a0:= function(n)<br/>    local a, up, down, m, sub;<br/>    a\u00a0:= [1 .. n];<br/>    up\u00a0:= ListWithIdenticalEntries(2*n - 1, true);<br/>    down\u00a0:= ListWithIdenticalEntries(2*n - 1, true);<br/>    m\u00a0:= 0;<br/>    sub\u00a0:= function(i)<br/>        local j, k, p, q;<br/>        for k in [i .. n] do<br/>            j\u00a0:= a[k];<br/>            p\u00a0:= i + j - 1;<br/>            q\u00a0:= i - j + n;<br/>            if up[p] and down[q] then<br/>                if i = n then<br/>                    m\u00a0:= m + 1;<br/>                else<br/>                    up[p]\u00a0:= false;<br/>                    down[q]\u00a0:= false;<br/>                    a[k]\u00a0:= a[i];<br/>                    a[i]\u00a0:= j;<br/>                    sub(i + 1);<br/>                    up[p]\u00a0:= true;<br/>                    down[q]\u00a0:= true;<br/>                    a[i]\u00a0:= a[k];<br/>                    a[k]\u00a0:= j;<br/>                fi;<br/>            fi;<br/>        od;<br/>    end;<br/>    sub(1);<br/>    return m;<br/>end;<br/>\u00a0<br/>Queens\u00a0:= function(n)<br/>    local a, up, down, v, sub;<br/>    a\u00a0:= [1 .. n];<br/>    up\u00a0:= ListWithIdenticalEntries(2*n - 1, true);<br/>    down\u00a0:= ListWithIdenticalEntries(2*n - 1, true);<br/>    v\u00a0:= [];<br/>    sub\u00a0:= function(i)<br/>        local j, k, p, q;<br/>        for k in [i .. n] do<br/>            j\u00a0:= a[k];<br/>            p\u00a0:= i + j - 1;<br/>            q\u00a0:= i - j + n;<br/>            if up[p] and down[q] then<br/>                if i = n then<br/>                    Add(v, ShallowCopy(a));<br/>                else<br/>                    up[p]\u00a0:= false;<br/>                    down[q]\u00a0:= false;<br/>                    a[k]\u00a0:= a[i];<br/>                    a[i]\u00a0:= j;<br/>                    sub(i + 1);<br/>                    up[p]\u00a0:= true;<br/>                    down[q]\u00a0:= true;<br/>                    a[i]\u00a0:= a[k];<br/>                    a[k]\u00a0:= j;<br/>                fi;<br/>            fi;<br/>        od;<br/>    end;<br/>    sub(1);<br/>    return v;<br/>end;<br/>\u00a0<br/>NrQueens(8);<br/>a\u00a0:= Queens(8);;<br/>PrintArray(PermutationMat(PermList(a[1]), 8));<br/>\u00a0<br/>[ [  1,  0,  0,  0,  0,  0,  0,  0 ],<br/>  [  0,  0,  0,  0,  1,  0,  0,  0 ],<br/>  [  0,  0,  0,  0,  0,  0,  0,  1 ],<br/>  [  0,  0,  0,  0,  0,  1,  0,  0 ],<br/>  [  0,  0,  1,  0,  0,  0,  0,  0 ],<br/>  [  0,  0,  0,  0,  0,  0,  1,  0 ],<br/>  [  0,  1,  0,  0,  0,  0,  0,  0 ],<br/>  [  0,  0,  0,  1,  0,  0,  0,  0 ] ]</pre>"}, {"lang": "Go", "loc": 61, "block": "<pre class=\"go highlighted_source\"><span class=\"co1\">// A fairly literal translation of the example program on the referenced</span><br/><span class=\"co1\">// WP page.  Well, it happened to be the example program the day I completed</span><br/><span class=\"co1\">// the task.  It seems from the WP history that there has been some churn</span><br/><span class=\"co1\">// in the posted example program.  The example program of the day was in</span><br/><span class=\"co1\">// Pascal and was credited to Niklaus Wirth, from his \"Algorithms +</span><br/><span class=\"co1\">// Data Structures = Programs.\"</span><br/><span class=\"kw1\">package</span> main<br/>\u00a0<br/><span class=\"kw1\">import</span> <span class=\"st0\">\"fmt\"</span><br/>\u00a0<br/><span class=\"kw1\">var</span> <span class=\"sy1\">(</span><br/>    <span class=\"nu2\">i</span> <span class=\"kw4\">int</span><br/>    q <span class=\"kw4\">bool</span><br/>    a <span class=\"sy1\">[</span><span class=\"nu0\">9</span><span class=\"sy1\">]</span><span class=\"kw4\">bool</span><br/>    b <span class=\"sy1\">[</span><span class=\"nu0\">17</span><span class=\"sy1\">]</span><span class=\"kw4\">bool</span><br/>    c <span class=\"sy1\">[</span><span class=\"nu0\">15</span><span class=\"sy1\">]</span><span class=\"kw4\">bool</span> <span class=\"co1\">// offset by 7 relative to the Pascal version</span><br/>    x <span class=\"sy1\">[</span><span class=\"nu0\">9</span><span class=\"sy1\">]</span><span class=\"kw4\">int</span><br/><span class=\"sy1\">)</span><br/>\u00a0<br/><span class=\"kw4\">func</span> try<span class=\"sy1\">(</span><span class=\"nu2\">i</span> <span class=\"kw4\">int</span><span class=\"sy1\">)</span> <span class=\"sy1\">{</span><br/>    <span class=\"kw1\">for</span> j <span class=\"sy2\">:=</span> <span class=\"nu0\">1</span><span class=\"sy1\">;</span> <span class=\"sy1\">;</span> j<span class=\"sy2\">++</span> <span class=\"sy1\">{</span><br/>        q <span class=\"sy2\">=</span> <span class=\"kw2\">false</span><br/>        <span class=\"kw1\">if</span> a<span class=\"sy1\">[</span>j<span class=\"sy1\">]</span> &amp;&amp; b<span class=\"sy1\">[</span><span class=\"nu2\">i</span><span class=\"sy3\">+</span>j<span class=\"sy1\">]</span> &amp;&amp; c<span class=\"sy1\">[</span><span class=\"nu2\">i</span><span class=\"sy3\">-</span>j<span class=\"sy3\">+</span><span class=\"nu0\">7</span><span class=\"sy1\">]</span> <span class=\"sy1\">{</span><br/>            x<span class=\"sy1\">[</span><span class=\"nu2\">i</span><span class=\"sy1\">]</span> <span class=\"sy2\">=</span> j<br/>            a<span class=\"sy1\">[</span>j<span class=\"sy1\">]</span> <span class=\"sy2\">=</span> <span class=\"kw2\">false</span><br/>            b<span class=\"sy1\">[</span><span class=\"nu2\">i</span><span class=\"sy3\">+</span>j<span class=\"sy1\">]</span> <span class=\"sy2\">=</span> <span class=\"kw2\">false</span><br/>            c<span class=\"sy1\">[</span><span class=\"nu2\">i</span><span class=\"sy3\">-</span>j<span class=\"sy3\">+</span><span class=\"nu0\">7</span><span class=\"sy1\">]</span> <span class=\"sy2\">=</span> <span class=\"kw2\">false</span><br/>            <span class=\"kw1\">if</span> <span class=\"nu2\">i</span> &lt; <span class=\"nu0\">8</span> <span class=\"sy1\">{</span><br/>                try<span class=\"sy1\">(</span><span class=\"nu2\">i</span> <span class=\"sy3\">+</span> <span class=\"nu0\">1</span><span class=\"sy1\">)</span><br/>                <span class=\"kw1\">if</span> <span class=\"sy3\">!</span>q <span class=\"sy1\">{</span><br/>                    a<span class=\"sy1\">[</span>j<span class=\"sy1\">]</span> <span class=\"sy2\">=</span> <span class=\"kw2\">true</span><br/>                    b<span class=\"sy1\">[</span><span class=\"nu2\">i</span><span class=\"sy3\">+</span>j<span class=\"sy1\">]</span> <span class=\"sy2\">=</span> <span class=\"kw2\">true</span><br/>                    c<span class=\"sy1\">[</span><span class=\"nu2\">i</span><span class=\"sy3\">-</span>j<span class=\"sy3\">+</span><span class=\"nu0\">7</span><span class=\"sy1\">]</span> <span class=\"sy2\">=</span> <span class=\"kw2\">true</span><br/>                <span class=\"sy1\">}</span><br/>            <span class=\"sy1\">}</span> <span class=\"kw1\">else</span> <span class=\"sy1\">{</span><br/>                q <span class=\"sy2\">=</span> <span class=\"kw2\">true</span><br/>            <span class=\"sy1\">}</span><br/>        <span class=\"sy1\">}</span><br/>        <span class=\"kw1\">if</span> q <span class=\"sy3\">||</span> j <span class=\"sy3\">==</span> <span class=\"nu0\">8</span> <span class=\"sy1\">{</span><br/>            <span class=\"kw1\">break</span><br/>        <span class=\"sy1\">}</span><br/>    <span class=\"sy1\">}</span><br/><span class=\"sy1\">}</span><br/>\u00a0<br/><span class=\"kw4\">func</span> main<span class=\"sy1\">()</span> <span class=\"sy1\">{</span><br/>    <span class=\"kw1\">for</span> <span class=\"nu2\">i</span> <span class=\"sy2\">:=</span> <span class=\"nu0\">1</span><span class=\"sy1\">;</span> <span class=\"nu2\">i</span> &lt;<span class=\"sy2\">=</span> <span class=\"nu0\">8</span><span class=\"sy1\">;</span> <span class=\"nu2\">i</span><span class=\"sy2\">++</span> <span class=\"sy1\">{</span><br/>        a<span class=\"sy1\">[</span><span class=\"nu2\">i</span><span class=\"sy1\">]</span> <span class=\"sy2\">=</span> <span class=\"kw2\">true</span><br/>    <span class=\"sy1\">}</span><br/>    <span class=\"kw1\">for</span> <span class=\"nu2\">i</span> <span class=\"sy2\">:=</span> <span class=\"nu0\">2</span><span class=\"sy1\">;</span> <span class=\"nu2\">i</span> &lt;<span class=\"sy2\">=</span> <span class=\"nu0\">16</span><span class=\"sy1\">;</span> <span class=\"nu2\">i</span><span class=\"sy2\">++</span> <span class=\"sy1\">{</span><br/>        b<span class=\"sy1\">[</span><span class=\"nu2\">i</span><span class=\"sy1\">]</span> <span class=\"sy2\">=</span> <span class=\"kw2\">true</span><br/>    <span class=\"sy1\">}</span><br/>    <span class=\"kw1\">for</span> <span class=\"nu2\">i</span> <span class=\"sy2\">:=</span> <span class=\"nu0\">0</span><span class=\"sy1\">;</span> <span class=\"nu2\">i</span> &lt;<span class=\"sy2\">=</span> <span class=\"nu0\">14</span><span class=\"sy1\">;</span> <span class=\"nu2\">i</span><span class=\"sy2\">++</span> <span class=\"sy1\">{</span><br/>        c<span class=\"sy1\">[</span><span class=\"nu2\">i</span><span class=\"sy1\">]</span> <span class=\"sy2\">=</span> <span class=\"kw2\">true</span><br/>    <span class=\"sy1\">}</span><br/>    try<span class=\"sy1\">(</span><span class=\"nu0\">1</span><span class=\"sy1\">)</span><br/>    <span class=\"kw1\">if</span> q <span class=\"sy1\">{</span><br/>        <span class=\"kw1\">for</span> <span class=\"nu2\">i</span> <span class=\"sy2\">:=</span> <span class=\"nu0\">1</span><span class=\"sy1\">;</span> <span class=\"nu2\">i</span> &lt;<span class=\"sy2\">=</span> <span class=\"nu0\">8</span><span class=\"sy1\">;</span> <span class=\"nu2\">i</span><span class=\"sy2\">++</span> <span class=\"sy1\">{</span><br/>            fmt<span class=\"sy3\">.</span>Println<span class=\"sy1\">(</span><span class=\"nu2\">i</span><span class=\"sy1\">,</span> x<span class=\"sy1\">[</span><span class=\"nu2\">i</span><span class=\"sy1\">])</span><br/>        <span class=\"sy1\">}</span><br/>    <span class=\"sy1\">}</span><br/><span class=\"sy1\">}</span></pre>"}, {"lang": "Groovy", "loc": 24, "block": "<pre class=\"groovy highlighted_source\"><a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20def\"><span class=\"kw2\">def</span></a> listOrder <span class=\"sy0\">=</span> <span class=\"br0\">{</span> a, b <span class=\"sy0\">-&gt;</span><br/>    <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20def\"><span class=\"kw2\">def</span></a> k <span class=\"sy0\">=</span> <span class=\"br0\">[</span>a.<a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20size\"><span class=\"kw5\">size</span></a><span class=\"br0\">(</span><span class=\"br0\">)</span>, b.<a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20size\"><span class=\"kw5\">size</span></a><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"br0\">]</span>.<a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20min\"><span class=\"kw5\">min</span></a><span class=\"br0\">(</span><span class=\"br0\">)</span><br/>    <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20def\"><span class=\"kw2\">def</span></a> i <span class=\"sy0\">=</span> <span class=\"br0\">(</span><span class=\"nu0\">0</span>..<span class=\"sy0\">&lt;</span>k<span class=\"br0\">)</span>.<a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20find\"><span class=\"kw5\">find</span></a> <span class=\"br0\">{</span> a<span class=\"br0\">[</span>it<span class=\"br0\">]</span> <span class=\"sy0\">!=</span> b<span class=\"br0\">[</span>it<span class=\"br0\">]</span> <span class=\"br0\">}</span><br/>    <span class=\"br0\">(</span>i <span class=\"sy0\">!=</span> <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20null\"><span class=\"kw2\">null</span></a><span class=\"br0\">)</span> <span class=\"sy0\">?</span> a<span class=\"br0\">[</span>i<span class=\"br0\">]</span> <span class=\"sy0\">&lt;=&gt;</span> b<span class=\"br0\">[</span>i<span class=\"br0\">]</span>\u00a0: a.<a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20size\"><span class=\"kw5\">size</span></a><span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"sy0\">&lt;=&gt;</span> b.<a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20size\"><span class=\"kw5\">size</span></a><span class=\"br0\">(</span><span class=\"br0\">)</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20def\"><span class=\"kw2\">def</span></a> orderedPermutations <span class=\"sy0\">=</span> <span class=\"br0\">{</span> list <span class=\"sy0\">-&gt;</span><br/>    <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20def\"><span class=\"kw2\">def</span></a> n <span class=\"sy0\">=</span> list.<a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20size\"><span class=\"kw5\">size</span></a><span class=\"br0\">(</span><span class=\"br0\">)</span><br/>    <span class=\"br0\">(</span><span class=\"nu0\">0</span>..<span class=\"sy0\">&lt;</span>n<span class=\"br0\">)</span>.<span class=\"me1\">permutations</span><span class=\"br0\">(</span><span class=\"br0\">)</span>.<a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20sort\"><span class=\"kw5\">sort</span></a><span class=\"br0\">(</span>listOrder<span class=\"br0\">)</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20def\"><span class=\"kw2\">def</span></a> diagonalSafe <span class=\"sy0\">=</span> <span class=\"br0\">{</span> list <span class=\"sy0\">-&gt;</span><br/>    <a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20def\"><span class=\"kw2\">def</span></a> n <span class=\"sy0\">=</span> list.<a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20size\"><span class=\"kw5\">size</span></a><span class=\"br0\">(</span><span class=\"br0\">)</span><br/>    n <span class=\"sy0\">==</span> <span class=\"nu0\">1</span> <span class=\"sy0\">||</span> <span class=\"br0\">(</span><span class=\"nu0\">0</span>..<span class=\"sy0\">&lt;</span><span class=\"br0\">(</span>n<span class=\"sy0\">-</span><span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"br0\">)</span>.<span class=\"me1\">every</span><span class=\"br0\">{</span> i <span class=\"sy0\">-&gt;</span><br/>        <span class=\"br0\">(</span><span class=\"br0\">(</span>i<span class=\"sy0\">+</span><span class=\"nu0\">1</span><span class=\"br0\">)</span>..<span class=\"sy0\">&lt;</span>n<span class=\"br0\">)</span>.<span class=\"me1\">every</span><span class=\"br0\">{</span> j <span class=\"sy0\">-&gt;</span><br/>            <span class=\"sy0\">!</span><span class=\"br0\">(</span><span class=\"br0\">[</span>list<span class=\"br0\">[</span>i<span class=\"br0\">]</span><span class=\"sy0\">+</span>j<span class=\"sy0\">-</span>i, list<span class=\"br0\">[</span>i<span class=\"br0\">]</span><span class=\"sy0\">+</span>i<span class=\"sy0\">-</span>j<span class=\"br0\">]</span>.<a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20contains\"><span class=\"kw6\">contains</span></a><span class=\"br0\">(</span>list<span class=\"br0\">[</span>j<span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>        <span class=\"br0\">}</span><br/>    <span class=\"br0\">}</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20def\"><span class=\"kw2\">def</span></a> queensDistinctSolutions <span class=\"sy0\">=</span> <span class=\"br0\">{</span> n <span class=\"sy0\">-&gt;</span><br/>    <span class=\"co1\">// each permutation is an N-Rooks solution</span><br/>    orderedPermutations<span class=\"br0\">(</span><span class=\"br0\">(</span><span class=\"nu0\">0</span>..<span class=\"sy0\">&lt;</span>n<span class=\"br0\">)</span><span class=\"br0\">)</span>.<a href=\"http://www.google.de/search?q=site%3Agroovy.codehaus.org/%20findAll\"><span class=\"kw5\">findAll</span></a> <span class=\"br0\">(</span>diagonalSafe<span class=\"br0\">)</span><br/><span class=\"br0\">}</span></pre>"}, {"lang": "Haskell", "loc": 30, "block": "<pre class=\"haskell highlighted_source\"><span class=\"kw1\">import</span> Control<span class=\"sy0\">.</span><a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t:Monad\"><span class=\"kw4\">Monad</span></a><br/><span class=\"kw1\">import</span> Data<span class=\"sy0\">.</span>List<br/>\u00a0<br/><span class=\"co1\">-- given n, \"queens n\" solves the n-queens problem, returning a list of all the</span><br/><span class=\"co1\">-- safe arrangements. each solution is a list of the columns where the queens are</span><br/><span class=\"co1\">-- located for each row</span><br/>queens <span class=\"sy0\">::</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t:Int\"><span class=\"kw4\">Int</span></a> <span class=\"sy0\">-&gt;</span> <span class=\"br0\">[</span><span class=\"br0\">[</span><a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t:Int\"><span class=\"kw4\">Int</span></a><span class=\"br0\">]</span><span class=\"br0\">]</span><br/>queens n <span class=\"sy0\">=</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:map\"><span class=\"kw3\">map</span></a> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:fst\"><span class=\"kw3\">fst</span></a> <span class=\"sy0\">$</span> foldM oneMoreQueen <span class=\"br0\">(</span><span class=\"br0\">[</span><span class=\"br0\">]</span><span class=\"sy0\">,</span><span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"sy0\">..</span>n<span class=\"br0\">]</span><span class=\"br0\">)</span> <span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"sy0\">..</span>n<span class=\"br0\">]</span>  <span class=\"kw1\">where</span> <br/>\u00a0<br/>  <span class=\"co1\">-- foldM\u00a0:: (Monad m) =&gt; (a -&gt; b -&gt; m a) -&gt; a -&gt; [b] -&gt; m a</span><br/>  <span class=\"co1\">-- foldM folds (from left to right) in the list monad, which is convenient for </span><br/>  <span class=\"co1\">-- \"nondeterminstically\" finding \"all possible solutions\" of something. the </span><br/>  <span class=\"co1\">-- initial value [] corresponds to the only safe arrangement of queens in 0 rows</span><br/>\u00a0<br/>  <span class=\"co1\">-- given a safe arrangement y of queens in the first i rows, and a list of </span><br/>  <span class=\"co1\">-- possible choices, \"oneMoreQueen y _\" returns a list of all the safe </span><br/>  <span class=\"co1\">-- arrangements of queens in the first (i+1) rows along with remaining choices </span><br/>  oneMoreQueen <span class=\"br0\">(</span>y<span class=\"sy0\">,</span>d<span class=\"br0\">)</span> <span class=\"sy0\">_</span> <span class=\"sy0\">=</span> <span class=\"br0\">[</span><span class=\"br0\">(</span>x:y<span class=\"sy0\">,</span> delete x d<span class=\"br0\">)</span> <span class=\"sy0\">|</span> x <span class=\"sy0\">&lt;-</span> d<span class=\"sy0\">,</span> safe x<span class=\"br0\">]</span>  <span class=\"kw1\">where</span><br/>\u00a0<br/>    <span class=\"co1\">-- \"safe x\" tests whether a queen at column x is safe from previous queens</span><br/>    safe x <span class=\"sy0\">=</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:and\"><span class=\"kw3\">and</span></a> <span class=\"br0\">[</span>x <span class=\"sy0\">/=</span> c <span class=\"sy0\">+</span> n <span class=\"sy0\">&amp;&amp;</span> x <span class=\"sy0\">/=</span> c <span class=\"sy0\">-</span> n <span class=\"sy0\">|</span> <span class=\"br0\">(</span>n<span class=\"sy0\">,</span>c<span class=\"br0\">)</span> <span class=\"sy0\">&lt;-</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:zip\"><span class=\"kw3\">zip</span></a> <span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"sy0\">..</span><span class=\"br0\">]</span> y<span class=\"br0\">]</span><br/>\u00a0<br/><span class=\"co1\">-- prints what the board looks like for a solution; with an extra newline</span><br/>printSolution y <span class=\"sy0\">=</span> <span class=\"kw1\">do</span><br/>     <span class=\"kw1\">let</span> n <span class=\"sy0\">=</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:length\"><span class=\"kw3\">length</span></a> y<br/>     <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:mapM_\"><span class=\"kw3\">mapM_</span></a> <span class=\"br0\">(</span>\\x <span class=\"sy0\">-&gt;</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:putStrLn\"><span class=\"kw3\">putStrLn</span></a> <span class=\"br0\">[</span><span class=\"kw1\">if</span> z <span class=\"sy0\">==</span> x <span class=\"kw1\">then</span> <span class=\"st0\">'Q'</span> <span class=\"kw1\">else</span> <span class=\"st0\">'.'</span> <span class=\"sy0\">|</span> z <span class=\"sy0\">&lt;-</span> <span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"sy0\">..</span>n<span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"br0\">)</span> y<br/>     <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:putStrLn\"><span class=\"kw3\">putStrLn</span></a> <span class=\"st0\">\"\"</span><br/>\u00a0<br/><span class=\"co1\">-- prints all the solutions for 6 queens</span><br/>main <span class=\"sy0\">=</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:mapM_\"><span class=\"kw3\">mapM_</span></a> printSolution <span class=\"sy0\">$</span> queens <span class=\"nu0\">6</span></pre>"}, {"lang": "Heron", "loc": 95, "block": "<pre class=\"text highlighted_source\">module NQueens {<br/>    inherits {<br/>        Heron.Windows.Console;<br/>    }<br/>    fields {<br/>        n\u00a0: Int = 4;<br/>        sols\u00a0: List = new List();<br/>    }<br/>    methods {<br/>        PosToString(row\u00a0: Int, col\u00a0: Int)\u00a0: String {<br/>            return \"row \" + row.ToString() + \", col \" + col.ToString();<br/>        }<br/>        AddQueen(b\u00a0: Board, row\u00a0: Int, col\u00a0: Int)<br/>        {<br/>            if (!b.TryAddQueen(row, col))<br/>                return;            <br/>            if (row &lt; n - 1)<br/>                foreach (i in 0..n-1)<br/>                   AddQueen(new Board(b), row + 1, i);<br/>            else<br/>                sols.Add(b);<br/>        }        <br/>        Main() {<br/>            foreach (i in 0..n-1)<br/>                AddQueen(new Board(), 0, i);<br/>            foreach (b in sols) {<br/>                b.Output();<br/>                WriteLine(\"\");<br/>            }<br/>            WriteLine(\"Found \" + sols.Count().ToString() + \" solutions\");<br/>        }<br/>    }<br/>}<br/>\u00a0<br/>class Board {<br/>    fields {<br/>        rows = new List();<br/>    }<br/>    methods {<br/>        Constructor() {<br/>            foreach (r in 0..n-1) {<br/>                var col = new List();<br/>                foreach (c in 0..n-1)<br/>                    col.Add(false);<br/>                rows.Add(col);<br/>            }<br/>        }<br/>        Constructor(b\u00a0: Board) {<br/>            Constructor();<br/>            foreach (r in 0..n-1)<br/>                foreach (c in 0..n-1)<br/>                    SetSpaceOccupied(r, c, b.SpaceOccupied(r, c));<br/>        }<br/>        SpaceOccupied(row\u00a0: Int, col\u00a0: Int)\u00a0: Bool {<br/>            return rows[row][col];<br/>        }<br/>        SetSpaceOccupied(row\u00a0: Int, col\u00a0: Int, b\u00a0: Bool)  {<br/>            rows[row][col] = b;<br/>        }<br/>        ValidPos(row\u00a0: Int, col\u00a0: Int)\u00a0: Bool {<br/>            return ((row &gt;= 0) &amp;&amp; (row &lt; n)) &amp;&amp; ((col &gt;= 0) &amp;&amp; (col &lt; n)); <br/>        }<br/>        VectorOccupied(row\u00a0: Int, col\u00a0: Int, rowDir\u00a0: Int, colDir\u00a0: Int)\u00a0: Bool {<br/>            var nextRow = row + rowDir;<br/>            var nextCol = col + colDir;<br/>            if (!ValidPos(nextRow, nextCol)) <br/>                return false;<br/>            if (SpaceOccupied(nextRow, nextCol)) <br/>                return true;<br/>            return VectorOccupied(nextRow, nextCol, rowDir, colDir);<br/>        }<br/>        TryAddQueen(row\u00a0: Int, col\u00a0: Int)\u00a0: Bool {<br/>            foreach (rowDir in -1..1)<br/>                foreach (colDir in -1..1)<br/>                    if (rowDir\u00a0!= 0 || colDir\u00a0!= 0)<br/>                        if (VectorOccupied(row, col, rowDir, colDir))<br/>                            return false;<br/>            SetSpaceOccupied(row, col, true);<br/>            return true;<br/>        }<br/>        Output() {<br/>            foreach (row in 0..n-1) {<br/>                foreach (col in 0..n-1) {<br/>                    if (SpaceOccupied(row, col)) {<br/>                        Write(\"Q\");<br/>                    }<br/>                    else {<br/>                        Write(\".\");<br/>                    }<br/>                }<br/>                WriteLine(\"\");<br/>            }<br/>        }<br/>    }<br/>}</pre>"}, {"lang": "Icon and Unicon", "loc": 16, "block": "<pre class=\"icon highlighted_source\"><span class=\"kw1\">procedure</span> main<span class=\"br0\">(</span><span class=\"br0\">)</span><br/>    <span class=\"kw4\">write</span><span class=\"br0\">(</span>q<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"sy1\">,</span> <span class=\"st0\">\" \"</span><span class=\"sy1\">,</span> q<span class=\"br0\">(</span><span class=\"nu0\">2</span><span class=\"br0\">)</span><span class=\"sy1\">,</span> <span class=\"st0\">\" \"</span><span class=\"sy1\">,</span> q<span class=\"br0\">(</span><span class=\"nu0\">3</span><span class=\"br0\">)</span><span class=\"sy1\">,</span> <span class=\"st0\">\" \"</span><span class=\"sy1\">,</span> q<span class=\"br0\">(</span><span class=\"nu0\">4</span><span class=\"br0\">)</span><span class=\"sy1\">,</span> <span class=\"st0\">\" \"</span><span class=\"sy1\">,</span> q<span class=\"br0\">(</span><span class=\"nu0\">5</span><span class=\"br0\">)</span><span class=\"sy1\">,</span> <span class=\"st0\">\" \"</span><span class=\"sy1\">,</span> q<span class=\"br0\">(</span><span class=\"nu0\">6</span><span class=\"br0\">)</span><span class=\"sy1\">,</span> <span class=\"st0\">\" \"</span><span class=\"sy1\">,</span> q<span class=\"br0\">(</span><span class=\"nu0\">7</span><span class=\"br0\">)</span><span class=\"sy1\">,</span> <span class=\"st0\">\" \"</span><span class=\"sy1\">,</span> q<span class=\"br0\">(</span><span class=\"nu0\">8</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/><span class=\"kw1\">end</span><br/>\u00a0<br/><span class=\"kw1\">procedure</span> q<span class=\"br0\">(</span>c<span class=\"br0\">)</span><br/>    <span class=\"kw2\">static</span> udiag<span class=\"sy1\">,</span> ddiag<span class=\"sy1\">,</span> row<br/>\u00a0<br/>    <span class=\"kw1\">initial</span> <span class=\"br0\">{</span><br/>        udiag <span class=\"sy1\">:=</span> <span class=\"kw4\">list</span><span class=\"br0\">(</span><span class=\"nu0\">15</span><span class=\"sy1\">,</span> <span class=\"nu0\">0</span><span class=\"br0\">)</span><br/>        ddiag <span class=\"sy1\">:=</span> <span class=\"kw4\">list</span><span class=\"br0\">(</span><span class=\"nu0\">15</span><span class=\"sy1\">,</span> <span class=\"nu0\">0</span><span class=\"br0\">)</span><br/>        row <span class=\"sy1\">:=</span> <span class=\"kw4\">list</span><span class=\"br0\">(</span><span class=\"nu0\">8</span><span class=\"sy1\">,</span> <span class=\"nu0\">0</span><span class=\"br0\">)</span><br/>    <span class=\"br0\">}</span><br/>\u00a0<br/>    <span class=\"kw1\">every</span> <span class=\"nu0\">0</span> <span class=\"sy1\">=</span> row<span class=\"br0\">[</span>r <span class=\"sy1\">:=</span> <span class=\"nu0\">1</span> <span class=\"kw1\">to</span> <span class=\"nu0\">8</span><span class=\"br0\">]</span> <span class=\"sy1\">=</span> ddiag<span class=\"br0\">[</span>r <span class=\"sy1\">+</span> c <span class=\"sy1\">-</span> <span class=\"nu0\">1</span><span class=\"br0\">]</span> <span class=\"sy1\">=</span> udiag<span class=\"br0\">[</span><span class=\"nu0\">8</span> <span class=\"sy1\">+</span> r <span class=\"sy1\">-</span> c<span class=\"br0\">]</span> <span class=\"kw1\">do</span>   <span class=\"co1\"># test if free</span><br/>        <span class=\"kw1\">suspend</span> row<span class=\"br0\">[</span>r<span class=\"br0\">]</span> <span class=\"sy1\">&lt;-</span> ddiag<span class=\"br0\">[</span>r <span class=\"sy1\">+</span> c <span class=\"sy1\">-</span> <span class=\"nu0\">1</span><span class=\"br0\">]</span> <span class=\"sy1\">&lt;-</span> udiag<span class=\"br0\">[</span><span class=\"nu0\">8</span> <span class=\"sy1\">+</span> r <span class=\"sy1\">-</span> c<span class=\"br0\">]</span> <span class=\"sy1\">&lt;-</span> r       <span class=\"co1\"># place and yield</span><br/><span class=\"kw1\">end</span></pre>"}, {"lang": "J", "loc": 4, "block": "<pre class=\"j highlighted_source\">perm   =:\u00a0! A.&amp;i. ]               <span class=\"co1\">NB. all permutations of integers 0 to y</span><br/>comb2  =: <span class=\"sy0\">(</span>, #: <a class=\"__cf_email__\" data-cfemail=\"672e4927\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>,@<span class=\"sy0\">(</span>&lt;/<span class=\"sy0\">)</span>&amp;i.<span class=\"sy0\">)</span>~    <span class=\"co1\">NB. all size 2 combinations of integers 0 to y</span><br/>mask   =: [ */@:~:&amp;<span class=\"sy0\">(</span>|@-/<span class=\"sy0\">)</span> {<br/>queenst=: comb2 <span class=\"sy0\">(</span>] #\"<span class=\"nu0\">1</span>~ mask<span class=\"sy0\">)</span>&amp;.|: perm</pre>"}, {"lang": "Java", "loc": 48, "block": "<pre class=\"java highlighted_source\"><span class=\"kw1\">public</span> <span class=\"kw1\">class</span> NQueens <span class=\"br0\">{</span><br/>\u00a0<br/>  <span class=\"kw1\">private</span> <span class=\"kw1\">static</span> <span class=\"kw4\">int</span><span class=\"br0\">[</span><span class=\"br0\">]</span> b <span class=\"sy0\">=</span> <span class=\"kw1\">new</span> <span class=\"kw4\">int</span><span class=\"br0\">[</span><span class=\"nu0\">8</span><span class=\"br0\">]</span><span class=\"sy0\">;</span><br/>  <span class=\"kw1\">private</span> <span class=\"kw1\">static</span> <span class=\"kw4\">int</span> s <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span><br/>\u00a0<br/>  <span class=\"kw1\">static</span> <span class=\"kw4\">boolean</span> unsafe<span class=\"br0\">(</span><span class=\"kw4\">int</span> y<span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>    <span class=\"kw4\">int</span> x <span class=\"sy0\">=</span> b<span class=\"br0\">[</span>y<span class=\"br0\">]</span><span class=\"sy0\">;</span><br/>    <span class=\"kw1\">for</span> <span class=\"br0\">(</span><span class=\"kw4\">int</span> i <span class=\"sy0\">=</span> <span class=\"nu0\">1</span><span class=\"sy0\">;</span> i <span class=\"sy0\">&lt;=</span> y<span class=\"sy0\">;</span> i<span class=\"sy0\">++</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>      <span class=\"kw4\">int</span> t <span class=\"sy0\">=</span> b<span class=\"br0\">[</span>y <span class=\"sy0\">-</span> i<span class=\"br0\">]</span><span class=\"sy0\">;</span><br/>      <span class=\"kw1\">if</span> <span class=\"br0\">(</span>t <span class=\"sy0\">==</span> x <span class=\"sy0\">||</span><br/>          t <span class=\"sy0\">==</span> x <span class=\"sy0\">-</span> i <span class=\"sy0\">||</span><br/>          t <span class=\"sy0\">==</span> x <span class=\"sy0\">+</span> i<span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>        <span class=\"kw1\">return</span> <span class=\"kw2\">true</span><span class=\"sy0\">;</span><br/>      <span class=\"br0\">}</span><br/>    <span class=\"br0\">}</span><br/>\u00a0<br/>    <span class=\"kw1\">return</span> <span class=\"kw2\">false</span><span class=\"sy0\">;</span><br/>  <span class=\"br0\">}</span><br/>\u00a0<br/>  <span class=\"kw1\">public</span> <span class=\"kw1\">static</span> <span class=\"kw4\">void</span> putboard<span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>    <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Asystem+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">System</span></a>.<span class=\"me1\">out</span>.<span class=\"me1\">println</span><span class=\"br0\">(</span><span class=\"st0\">\"<span class=\"es0\">\\n</span><span class=\"es0\">\\n</span>Solution \"</span> <span class=\"sy0\">+</span> <span class=\"br0\">(</span><span class=\"sy0\">++</span>s<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>    <span class=\"kw1\">for</span> <span class=\"br0\">(</span><span class=\"kw4\">int</span> y <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span> y <span class=\"sy0\">&lt;</span> <span class=\"nu0\">8</span><span class=\"sy0\">;</span> y<span class=\"sy0\">++</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>      <span class=\"kw1\">for</span> <span class=\"br0\">(</span><span class=\"kw4\">int</span> x <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span> x <span class=\"sy0\">&lt;</span> <span class=\"nu0\">8</span><span class=\"sy0\">;</span> x<span class=\"sy0\">++</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>        <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Asystem+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">System</span></a>.<span class=\"me1\">out</span>.<span class=\"me1\">print</span><span class=\"br0\">(</span><span class=\"br0\">(</span>b<span class=\"br0\">[</span>y<span class=\"br0\">]</span> <span class=\"sy0\">==</span> x<span class=\"br0\">)</span> <span class=\"sy0\">?</span> <span class=\"st0\">\"|Q\"</span> <span class=\"sy0\">:</span> <span class=\"st0\">\"|_\"</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>      <span class=\"br0\">}</span><br/>      <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Asystem+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">System</span></a>.<span class=\"me1\">out</span>.<span class=\"me1\">println</span><span class=\"br0\">(</span><span class=\"st0\">\"|\"</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>    <span class=\"br0\">}</span><br/>  <span class=\"br0\">}</span><br/>\u00a0<br/>  <span class=\"kw1\">public</span> <span class=\"kw1\">static</span> <span class=\"kw4\">void</span> main<span class=\"br0\">(</span><a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Astring+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">String</span></a><span class=\"br0\">[</span><span class=\"br0\">]</span> args<span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>    <span class=\"kw4\">int</span> y <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span><br/>    b<span class=\"br0\">[</span><span class=\"nu0\">0</span><span class=\"br0\">]</span> <span class=\"sy0\">=</span> <span class=\"sy0\">-</span><span class=\"nu0\">1</span><span class=\"sy0\">;</span><br/>    <span class=\"kw1\">while</span> <span class=\"br0\">(</span>y <span class=\"sy0\">&gt;=</span> <span class=\"nu0\">0</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>      <span class=\"kw1\">do</span> <span class=\"br0\">{</span><br/>        b<span class=\"br0\">[</span>y<span class=\"br0\">]</span><span class=\"sy0\">++;</span><br/>      <span class=\"br0\">}</span> <span class=\"kw1\">while</span> <span class=\"br0\">(</span><span class=\"br0\">(</span>b<span class=\"br0\">[</span>y<span class=\"br0\">]</span> <span class=\"sy0\">&lt;</span> <span class=\"nu0\">8</span><span class=\"br0\">)</span> <span class=\"sy0\">&amp;&amp;</span> unsafe<span class=\"br0\">(</span>y<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>      <span class=\"kw1\">if</span> <span class=\"br0\">(</span>b<span class=\"br0\">[</span>y<span class=\"br0\">]</span> <span class=\"sy0\">&lt;</span> <span class=\"nu0\">8</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>        <span class=\"kw1\">if</span> <span class=\"br0\">(</span>y <span class=\"sy0\">&lt;</span> <span class=\"nu0\">7</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>          b<span class=\"br0\">[</span><span class=\"sy0\">++</span>y<span class=\"br0\">]</span> <span class=\"sy0\">=</span> <span class=\"sy0\">-</span><span class=\"nu0\">1</span><span class=\"sy0\">;</span><br/>        <span class=\"br0\">}</span> <span class=\"kw1\">else</span> <span class=\"br0\">{</span><br/>          putboard<span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        <span class=\"br0\">}</span><br/>      <span class=\"br0\">}</span> <span class=\"kw1\">else</span> <span class=\"br0\">{</span><br/>        y<span class=\"sy0\">--;</span><br/>      <span class=\"br0\">}</span><br/>    <span class=\"br0\">}</span><br/>  <span class=\"br0\">}</span><br/><span class=\"br0\">}</span></pre>"}, {"lang": "JavaScript", "loc": 33, "block": "<pre class=\"javascript highlighted_source\"><span class=\"kw1\">function</span> queenPuzzle<span class=\"br0\">(</span>rows<span class=\"sy0\">,</span> columns<span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>    <span class=\"kw1\">if</span> <span class=\"br0\">(</span>rows <span class=\"sy0\">&lt;=</span> <span class=\"nu0\">0</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>        <span class=\"kw1\">return</span> <span class=\"br0\">[</span><span class=\"br0\">[</span><span class=\"br0\">]</span><span class=\"br0\">]</span><span class=\"sy0\">;</span><br/>    <span class=\"br0\">}</span> <span class=\"kw1\">else</span> <span class=\"br0\">{</span><br/>        <span class=\"kw1\">return</span> addQueen<span class=\"br0\">(</span>rows <span class=\"sy0\">-</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> columns<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>    <span class=\"br0\">}</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"kw1\">function</span> addQueen<span class=\"br0\">(</span>newRow<span class=\"sy0\">,</span> columns<span class=\"sy0\">,</span> prevSolution<span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>    <span class=\"kw1\">var</span> newSolutions <span class=\"sy0\">=</span> <span class=\"br0\">[</span><span class=\"br0\">]</span><span class=\"sy0\">;</span><br/>    <span class=\"kw1\">var</span> prev <span class=\"sy0\">=</span> queenPuzzle<span class=\"br0\">(</span>newRow<span class=\"sy0\">,</span> columns<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>    <span class=\"kw1\">for</span> <span class=\"br0\">(</span><span class=\"kw1\">var</span> i <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span> i <span class=\"sy0\">&lt;</span> prev.<span class=\"me1\">length</span><span class=\"sy0\">;</span> i<span class=\"sy0\">++</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>        <span class=\"kw1\">var</span> solution <span class=\"sy0\">=</span> prev<span class=\"br0\">[</span>i<span class=\"br0\">]</span><span class=\"sy0\">;</span><br/>        <span class=\"kw1\">for</span> <span class=\"br0\">(</span><span class=\"kw1\">var</span> newColumn <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span> newColumn <span class=\"sy0\">&lt;</span> columns<span class=\"sy0\">;</span> newColumn<span class=\"sy0\">++</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>            <span class=\"kw1\">if</span> <span class=\"br0\">(</span><span class=\"sy0\">!</span>hasConflict<span class=\"br0\">(</span>newRow<span class=\"sy0\">,</span> newColumn<span class=\"sy0\">,</span> solution<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>                newSolutions.<span class=\"me1\">push</span><span class=\"br0\">(</span>solution.<span class=\"me1\">concat</span><span class=\"br0\">(</span><span class=\"br0\">[</span>newColumn<span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>        <span class=\"br0\">}</span><br/>    <span class=\"br0\">}</span><br/>    <span class=\"kw1\">return</span> newSolutions<span class=\"sy0\">;</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"kw1\">function</span> hasConflict<span class=\"br0\">(</span>newRow<span class=\"sy0\">,</span> newColumn<span class=\"sy0\">,</span> solution<span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>    <span class=\"kw1\">for</span> <span class=\"br0\">(</span><span class=\"kw1\">var</span> i <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span> i <span class=\"sy0\">&lt;</span> newRow<span class=\"sy0\">;</span> i<span class=\"sy0\">++</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>        <span class=\"kw1\">if</span> <span class=\"br0\">(</span>solution<span class=\"br0\">[</span>i<span class=\"br0\">]</span>     <span class=\"sy0\">==</span> newColumn          <span class=\"sy0\">||</span><br/>            solution<span class=\"br0\">[</span>i<span class=\"br0\">]</span> <span class=\"sy0\">+</span> i <span class=\"sy0\">==</span> newColumn <span class=\"sy0\">+</span> newRow <span class=\"sy0\">||</span> <br/>            solution<span class=\"br0\">[</span>i<span class=\"br0\">]</span> <span class=\"sy0\">-</span> i <span class=\"sy0\">==</span> newColumn <span class=\"sy0\">-</span> newRow<span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>                <span class=\"kw1\">return</span> <span class=\"kw2\">true</span><span class=\"sy0\">;</span><br/>        <span class=\"br0\">}</span><br/>    <span class=\"br0\">}</span><br/>    <span class=\"kw1\">return</span> <span class=\"kw2\">false</span><span class=\"sy0\">;</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/>console.<span class=\"me1\">log</span><span class=\"br0\">(</span>queenPuzzle<span class=\"br0\">(</span><span class=\"nu0\">8</span><span class=\"sy0\">,</span><span class=\"nu0\">8</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"sy0\">;</span></pre>"}, {"lang": "jq", "loc": 25, "block": "<pre class=\"text highlighted_source\">def single_solution_queens(n):<br/>  def q: \"\u265b\";<br/>  def init(k): reduce range(0;k) as $i ([]; . + [\".\"]);<br/>  def matrix(k): init(k) as $row | reduce range(0;k) as $i ([]; . + [$row]);<br/>  def place(stream; i; j):<br/>    # jq indexing is based on offsets but we are using the 1-based formulae:<br/>    reduce stream as $s (.; setpath([-1+($s|i), -1+($s|j)]; q) );<br/>  def even(k): <br/>    if ((k-2)\u00a0% 6)\u00a0!= 0 then<br/>         place( range(1; 1+(k/2));         .; 2*. )<br/>       | place( range(1; 1+(k/2)); (k/2) + .; 2*. -1 )<br/>    else place( range(1; 1+(k/2));         .; 1 + ((2*. + (k/2) - 3)\u00a0% k))  <br/>       | place( range(1; 1+(n/2)); n + 1 - .; n - ((2*. + (n/2) - 3)\u00a0% n))  <br/>    end;<br/>\u00a0<br/>  matrix(n)                          # the chess board<br/>  | if (n\u00a0% 2) == 0 then even(n)<br/>    else even(n-1) | .[n-1][n-1] = q<br/>    end;<br/>\u00a0<br/># Example:<br/>def pp: reduce .[] as $row<br/>  (\"\";  reduce $row[] as $x (.; . + $x) + \"\\n\");<br/>\u00a0<br/>single_solution_queens(8) | pp</pre>"}, {"lang": "Julia", "loc": 79, "block": "<pre class=\"ruby highlighted_source\">\u00a0<br/><span class=\"co1\">#!/usr/bin/env julia</span><br/>\u00a0<br/>__precompile__<span class=\"br0\">(</span><span class=\"kw2\">true</span><span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"st0\">\"\"</span><span class=\"st0\">\"<br/># EightQueensPuzzle<br/>\u00a0<br/>Ported to **Julia** from examples in several languages from<br/>here: https://hbfs.wordpress.com/2009/11/10/is-python-slow<br/>\"</span><span class=\"st0\">\"\"</span><br/><span class=\"kw1\">module</span> EightQueensPuzzle<br/>\u00a0<br/>export main<br/>\u00a0<br/>type Board<br/>    cols::Int<br/>    nodes::Int<br/>    diag45::Int<br/>    diag135::Int<br/>    solutions::Int<br/>\u00a0<br/>    Board<span class=\"br0\">(</span><span class=\"br0\">)</span> = new<span class=\"br0\">(</span><span class=\"nu0\">0</span>, <span class=\"nu0\">0</span>, <span class=\"nu0\">0</span>, <span class=\"nu0\">0</span>, <span class=\"nu0\">0</span><span class=\"br0\">)</span><br/><span class=\"kw1\">end</span><br/>\u00a0<br/><span class=\"st0\">\"Marks occupancy.\"</span><br/>function mark!<span class=\"br0\">(</span>b::Board, k::Int, j::Int<span class=\"br0\">)</span><br/>    b.<span class=\"me1\">cols</span>    $= <span class=\"br0\">(</span><span class=\"nu0\">1</span> <span class=\"sy0\">&lt;&lt;</span> j<span class=\"br0\">)</span><br/>    b.<span class=\"me1\">diag135</span> $= <span class=\"br0\">(</span><span class=\"nu0\">1</span> <span class=\"sy0\">&lt;&lt;</span> <span class=\"br0\">(</span>j<span class=\"sy0\">+</span>k<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>    b.<span class=\"me1\">diag45</span>  $= <span class=\"br0\">(</span><span class=\"nu0\">1</span> <span class=\"sy0\">&lt;&lt;</span> <span class=\"br0\">(</span><span class=\"nu0\">32</span><span class=\"sy0\">+</span>j<span class=\"sy0\">-</span>k<span class=\"br0\">)</span><span class=\"br0\">)</span><br/><span class=\"kw1\">end</span><br/>\u00a0<br/><span class=\"st0\">\"Tests if a square is menaced.\"</span><br/>function test<span class=\"br0\">(</span>b::Board, k::Int, j::Int<span class=\"br0\">)</span><br/>    b.<span class=\"me1\">cols</span>    <span class=\"sy0\">&amp;</span> <span class=\"br0\">(</span><span class=\"nu0\">1</span> <span class=\"sy0\">&lt;&lt;</span> j<span class=\"br0\">)</span>        <span class=\"sy0\">+</span><br/>    b.<span class=\"me1\">diag135</span> <span class=\"sy0\">&amp;</span> <span class=\"br0\">(</span><span class=\"nu0\">1</span> <span class=\"sy0\">&lt;&lt;</span> <span class=\"br0\">(</span>j<span class=\"sy0\">+</span>k<span class=\"br0\">)</span><span class=\"br0\">)</span>    <span class=\"sy0\">+</span><br/>    b.<span class=\"me1\">diag45</span>  <span class=\"sy0\">&amp;</span> <span class=\"br0\">(</span><span class=\"nu0\">1</span> <span class=\"sy0\">&lt;&lt;</span> <span class=\"br0\">(</span><span class=\"nu0\">32</span><span class=\"sy0\">+</span>j<span class=\"sy0\">-</span>k<span class=\"br0\">)</span><span class=\"br0\">)</span> == <span class=\"nu0\">0</span><br/><span class=\"kw1\">end</span><br/>\u00a0<br/><span class=\"st0\">\"Backtracking solver.\"</span><br/>function solve!<span class=\"br0\">(</span>b::Board, niv::Int, dx::Int<span class=\"br0\">)</span><br/>    <span class=\"kw1\">if</span> niv <span class=\"sy0\">&gt;</span> <span class=\"nu0\">0</span><br/>        <span class=\"kw1\">for</span> i <span class=\"kw1\">in</span> <span class=\"nu0\">0</span>:dx<span class=\"sy0\">-</span><span class=\"nu0\">1</span><br/>            <span class=\"kw1\">if</span> test<span class=\"br0\">(</span>b, niv, i<span class=\"br0\">)</span> == <span class=\"kw2\">true</span><br/>                mark!<span class=\"br0\">(</span>b, niv, i<span class=\"br0\">)</span><br/>                solve!<span class=\"br0\">(</span>b, niv<span class=\"sy0\">-</span><span class=\"nu0\">1</span>, dx<span class=\"br0\">)</span><br/>                mark!<span class=\"br0\">(</span>b, niv, i<span class=\"br0\">)</span><br/>            <span class=\"kw1\">end</span><br/>        <span class=\"kw1\">end</span><br/>    <span class=\"kw1\">else</span><br/>        <span class=\"kw1\">for</span> i <span class=\"kw1\">in</span> <span class=\"nu0\">0</span>:dx<span class=\"sy0\">-</span><span class=\"nu0\">1</span><br/>            <span class=\"kw1\">if</span> test<span class=\"br0\">(</span>b, <span class=\"nu0\">0</span>, i<span class=\"br0\">)</span> == <span class=\"kw2\">true</span><br/>                b.<span class=\"me1\">solutions</span> <span class=\"sy0\">+</span>= <span class=\"nu0\">1</span><br/>            <span class=\"kw1\">end</span><br/>        <span class=\"kw1\">end</span><br/>    <span class=\"kw1\">end</span><br/>    b.<span class=\"me1\">nodes</span> <span class=\"sy0\">+</span>= <span class=\"nu0\">1</span><br/>    b.<span class=\"me1\">solutions</span><br/><span class=\"kw1\">end</span><br/>\u00a0<br/><span class=\"st0\">\"C/C++-style `main` function.\"</span><br/>function main<span class=\"br0\">(</span><span class=\"br0\">)</span><br/>    <span class=\"kw1\">for</span> n = <span class=\"nu0\">1</span>:<span class=\"nu0\">17</span><br/>        gc<span class=\"br0\">(</span><span class=\"br0\">)</span><br/>        b = Board<span class=\"br0\">(</span><span class=\"br0\">)</span><br/>        <span class=\"re1\">@show</span> n<br/>        <span class=\"kw3\">print</span><span class=\"br0\">(</span><span class=\"st0\">\"elapsed:\"</span><span class=\"br0\">)</span><br/>        solutions = <span class=\"re1\">@time</span> solve!<span class=\"br0\">(</span>b, n<span class=\"sy0\">-</span><span class=\"nu0\">1</span>, n<span class=\"br0\">)</span><br/>        <span class=\"re1\">@show</span> solutions<br/>        println<span class=\"br0\">(</span><span class=\"br0\">)</span><br/>    <span class=\"kw1\">end</span><br/><span class=\"kw1\">end</span><br/>\u00a0<br/><span class=\"kw1\">end</span><br/>\u00a0<br/>using  EightQueensPuzzle<br/>\u00a0<br/>main<span class=\"br0\">(</span><span class=\"br0\">)</span><br/>\u00a0</pre>"}, {"lang": "Kotlin", "loc": 30, "block": "<pre class=\"scala highlighted_source\"><span class=\"co1\">// version 1.1.3</span><br/>\u00a0<br/><a href=\"http://scala-lang.org\"><span class=\"kw1\">var</span></a> count <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><br/><a href=\"http://scala-lang.org\"><span class=\"kw1\">var</span></a> c <span class=\"sy0\">=</span> IntArray<span class=\"br0\">(</span><span class=\"nu0\">0</span><span class=\"br0\">)</span><br/><a href=\"http://scala-lang.org\"><span class=\"kw1\">var</span></a> f <span class=\"sy0\">=</span> <span class=\"st0\">\"\"</span> <br/>\u00a0<br/>fun nQueens<span class=\"br0\">(</span>row<span class=\"sy0\">:</span> Int, n<span class=\"sy0\">:</span> Int<span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>    outer<span class=\"sy0\">@</span> <a href=\"http://scala-lang.org\"><span class=\"kw1\">for</span></a> <span class=\"br0\">(</span>x in <span class=\"nu0\">1</span>..<span class=\"me1\">n</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>        <a href=\"http://scala-lang.org\"><span class=\"kw1\">for</span></a> <span class=\"br0\">(</span>y in <span class=\"nu0\">1</span>..<span class=\"me1\">row</span> - <span class=\"nu0\">1</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>            <a href=\"http://scala-lang.org\"><span class=\"kw1\">if</span></a> <span class=\"br0\">(</span>c<span class=\"br0\">[</span>y<span class=\"br0\">]</span> <span class=\"sy0\">==</span> x<span class=\"br0\">)</span> continue<span class=\"sy0\">@</span>outer<br/>            <a href=\"http://scala-lang.org\"><span class=\"kw1\">if</span></a> <span class=\"br0\">(</span>row - y <span class=\"sy0\">==</span> Math.<span class=\"me1\">abs</span><span class=\"br0\">(</span>x - c<span class=\"br0\">[</span>y<span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"br0\">)</span> continue<span class=\"sy0\">@</span>outer           <br/>        <span class=\"br0\">}</span><br/>        c<span class=\"br0\">[</span>row<span class=\"br0\">]</span> <span class=\"sy0\">=</span> x<br/>        <a href=\"http://scala-lang.org\"><span class=\"kw1\">if</span></a> <span class=\"br0\">(</span>row <span class=\"sy0\">&lt;</span> n<span class=\"br0\">)</span> nQueens<span class=\"br0\">(</span>row + <span class=\"nu0\">1</span>, n<span class=\"br0\">)</span><br/>        <a href=\"http://scala-lang.org\"><span class=\"kw1\">else</span></a> <a href=\"http://scala-lang.org\"><span class=\"kw1\">if</span></a> <span class=\"br0\">(</span>++count <span class=\"sy0\">==</span> <span class=\"nu0\">1</span><span class=\"br0\">)</span> f <span class=\"sy0\">=</span> c.<span class=\"me1\">drop</span><span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"br0\">)</span>.<span class=\"me1\">map</span> <span class=\"br0\">{</span> it - <span class=\"nu0\">1</span> <span class=\"br0\">}</span>.<span class=\"me1\">toString</span><span class=\"br0\">(</span><span class=\"br0\">)</span><br/>    <span class=\"br0\">}</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/>fun main<span class=\"br0\">(</span>args<span class=\"sy0\">:</span> Array<span class=\"sy0\">&lt;</span>String<span class=\"sy0\">&gt;</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>   <a href=\"http://scala-lang.org\"><span class=\"kw1\">for</span></a> <span class=\"br0\">(</span>n in <span class=\"nu0\">1</span>..<span class=\"nu0\">14</span><span class=\"br0\">)</span> <span class=\"br0\">{</span> <br/>       count <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><br/>       c <span class=\"sy0\">=</span> IntArray<span class=\"br0\">(</span>n + <span class=\"nu0\">1</span><span class=\"br0\">)</span><br/>       f <span class=\"sy0\">=</span> <span class=\"st0\">\"\"</span><br/>       nQueens<span class=\"br0\">(</span><span class=\"nu0\">1</span>, n<span class=\"br0\">)</span><br/>       println<span class=\"br0\">(</span><span class=\"st0\">\"For a $n x $n board:\"</span><span class=\"br0\">)</span><br/>       println<span class=\"br0\">(</span><span class=\"st0\">\"  Solutions = $count\"</span><span class=\"br0\">)</span><br/>       <a href=\"http://scala-lang.org\"><span class=\"kw1\">if</span></a> <span class=\"br0\">(</span>count <span class=\"sy0\">&gt;</span> <span class=\"nu0\">0</span><span class=\"br0\">)</span> println<span class=\"br0\">(</span><span class=\"st0\">\"  First is $f\"</span><span class=\"br0\">)</span><br/>       println<span class=\"br0\">(</span><span class=\"br0\">)</span><br/>   <span class=\"br0\">}</span><br/><span class=\"br0\">}</span></pre>"}, {"lang": "Liberty BASIC", "loc": 87, "block": "<pre class=\"lb highlighted_source\">\u00a0<br/><span class=\"co1\">'N queens</span><br/><span class=\"co1\">'&gt;10 would not work due to way permutations used</span><br/><span class=\"co1\">'anyway, 10 doesn't fit in memory</span><br/><span class=\"kw1\">Input</span> <span class=\"st0\">\"Input N for N queens puzzle (4..9) \"</span>;N<br/><span class=\"kw1\">if</span> N<span class=\"sy0\">&lt;</span><span class=\"nu0\">4</span> <span class=\"kw1\">or</span> N<span class=\"sy0\">&gt;</span><span class=\"nu0\">9</span> <span class=\"kw1\">then</span> <span class=\"kw1\">print</span> <span class=\"st0\">\"N out of range - quitting\"</span><span class=\"sy0\">:</span> <span class=\"kw1\">end</span><br/>\u00a0<br/>ABC$<span class=\"sy0\">=</span> <span class=\"st0\">\" \"</span><br/>dash$ <span class=\"sy0\">=</span> <span class=\"st0\">\"\"</span><br/><span class=\"kw1\">for</span> i <span class=\"sy0\">=</span> <span class=\"nu0\">0</span> <span class=\"kw1\">to</span> N<span class=\"sy0\">-</span><span class=\"nu0\">1</span><br/>    ABC$<span class=\"sy0\">=</span>ABC$<span class=\"sy0\">+</span><span class=\"st0\">\" \"</span><span class=\"sy0\">+</span><span class=\"kw2\">chr$</span><span class=\"br0\">(</span><span class=\"kw2\">asc</span><span class=\"br0\">(</span><span class=\"st0\">\"a\"</span><span class=\"br0\">)</span><span class=\"sy0\">+</span>i<span class=\"br0\">)</span><br/>    dash$ <span class=\"sy0\">=</span> dash$<span class=\"sy0\">+</span><span class=\"st0\">\"--\"</span><br/><span class=\"kw1\">next</span><br/>\u00a0<br/><span class=\"kw1\">dim</span> q<span class=\"br0\">(</span>N<span class=\"br0\">)</span><br/>t0<span class=\"sy0\">=</span><span class=\"kw2\">time$</span><span class=\"br0\">(</span><span class=\"st0\">\"ms\"</span><span class=\"br0\">)</span><br/>\u00a0<br/>fact <span class=\"sy0\">=</span> <span class=\"nu0\">1</span><br/><span class=\"kw1\">for</span> i <span class=\"sy0\">=</span> <span class=\"nu0\">1</span> <span class=\"kw1\">to</span> N<br/>    fact <span class=\"sy0\">=</span> fact<span class=\"sy0\">*</span>i<br/><span class=\"kw1\">next</span><br/>\u00a0<br/><span class=\"kw1\">dim</span> anagram$<span class=\"br0\">(</span>fact<span class=\"br0\">)</span><br/><span class=\"kw1\">global</span> nPerms<br/><span class=\"kw1\">print</span> <span class=\"st0\">\"Filling permutations array\"</span><br/>t0<span class=\"sy0\">=</span><span class=\"kw2\">time$</span><span class=\"br0\">(</span><span class=\"st0\">\"ms\"</span><span class=\"br0\">)</span><br/>    res$<span class=\"sy0\">=</span>permutation$<span class=\"br0\">(</span><span class=\"st0\">\"\"</span><span class=\"sy0\">,</span> <span class=\"kw2\">left$</span><span class=\"br0\">(</span><span class=\"st0\">\"0123456789\"</span><span class=\"sy0\">,</span> N<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>t1<span class=\"sy0\">=</span><span class=\"kw2\">time$</span><span class=\"br0\">(</span><span class=\"st0\">\"ms\"</span><span class=\"br0\">)</span><br/><span class=\"kw1\">print</span> <span class=\"st0\">\"Created all possible permutations \"</span>;t1<span class=\"sy0\">-</span>t0<br/>\u00a0<br/>t0<span class=\"sy0\">=</span><span class=\"kw2\">time$</span><span class=\"br0\">(</span><span class=\"st0\">\"ms\"</span><span class=\"br0\">)</span><br/><span class=\"co1\">'actually fact = nPerms</span><br/><span class=\"kw1\">for</span> k<span class=\"sy0\">=</span><span class=\"nu0\">1</span> <span class=\"kw1\">to</span> nPerms<br/>    <span class=\"kw1\">for</span> i<span class=\"sy0\">=</span><span class=\"nu0\">0</span> <span class=\"kw1\">to</span> N<span class=\"sy0\">-</span><span class=\"nu0\">1</span><br/>        q<span class=\"br0\">(</span>i<span class=\"br0\">)</span><span class=\"sy0\">=</span><span class=\"kw2\">val</span><span class=\"br0\">(</span><span class=\"kw2\">mid$</span><span class=\"br0\">(</span>anagram$<span class=\"br0\">(</span>k<span class=\"br0\">)</span><span class=\"sy0\">,</span>i<span class=\"sy0\">+</span><span class=\"nu0\">1</span><span class=\"sy0\">,</span><span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>        <span class=\"co1\">'print q(i);</span><br/>    <span class=\"kw1\">next</span><br/>    <span class=\"co1\">'print</span><br/>\u00a0<br/>    fail <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><br/>    <span class=\"kw1\">for</span> i<span class=\"sy0\">=</span><span class=\"nu0\">0</span> <span class=\"kw1\">to</span> N<span class=\"sy0\">-</span><span class=\"nu0\">1</span><br/>        <span class=\"kw1\">for</span> j<span class=\"sy0\">=</span>i<span class=\"sy0\">+</span><span class=\"nu0\">1</span> <span class=\"kw1\">to</span> N<span class=\"sy0\">-</span><span class=\"nu0\">1</span><br/>            <span class=\"co1\">'check rows are different</span><br/>            <span class=\"kw1\">if</span> q<span class=\"br0\">(</span>i<span class=\"br0\">)</span><span class=\"sy0\">=</span>q<span class=\"br0\">(</span>j<span class=\"br0\">)</span> <span class=\"kw1\">then</span> fail <span class=\"sy0\">=</span> <span class=\"nu0\">1</span><span class=\"sy0\">:</span> <span class=\"kw1\">exit</span> <span class=\"kw1\">for</span><br/>            <span class=\"co1\">'check diagonals are different</span><br/>            <span class=\"kw1\">if</span> i<span class=\"sy0\">+</span>q<span class=\"br0\">(</span>i<span class=\"br0\">)</span><span class=\"sy0\">=</span>j<span class=\"sy0\">+</span>q<span class=\"br0\">(</span>j<span class=\"br0\">)</span> <span class=\"kw1\">then</span> fail <span class=\"sy0\">=</span> <span class=\"nu0\">1</span><span class=\"sy0\">:</span> <span class=\"kw1\">exit</span> <span class=\"kw1\">for</span><br/>            <span class=\"co1\">'check other diagonals are different</span><br/>            <span class=\"kw1\">if</span> i<span class=\"sy0\">-</span>q<span class=\"br0\">(</span>i<span class=\"br0\">)</span><span class=\"sy0\">=</span>j<span class=\"sy0\">-</span>q<span class=\"br0\">(</span>j<span class=\"br0\">)</span> <span class=\"kw1\">then</span> fail <span class=\"sy0\">=</span> <span class=\"nu0\">1</span><span class=\"sy0\">:</span> <span class=\"kw1\">exit</span> <span class=\"kw1\">for</span><br/>        <span class=\"kw1\">next</span><br/>        <span class=\"kw1\">if</span> fail <span class=\"kw1\">then</span> <span class=\"kw1\">exit</span> <span class=\"kw1\">for</span><br/>    <span class=\"kw1\">next</span><br/>\u00a0<br/>    <span class=\"kw1\">if</span> <span class=\"kw2\">not</span><span class=\"br0\">(</span>fail<span class=\"br0\">)</span> <span class=\"kw1\">then</span><br/>        num<span class=\"sy0\">=</span>num<span class=\"sy0\">+</span><span class=\"nu0\">1</span><br/>        <span class=\"kw1\">print</span> <span class=\"st0\">\" \"</span>;dash$<br/>            <span class=\"kw1\">for</span> i<span class=\"sy0\">=</span><span class=\"nu0\">0</span> <span class=\"kw1\">to</span> N<span class=\"sy0\">-</span><span class=\"nu0\">1</span><br/>                <span class=\"kw1\">print</span> N<span class=\"sy0\">-</span>i; <span class=\"kw2\">space$</span><span class=\"br0\">(</span><span class=\"nu0\">2</span><span class=\"sy0\">*</span>q<span class=\"br0\">(</span>i<span class=\"br0\">)</span><span class=\"br0\">)</span>;<span class=\"st0\">\" *\"</span><br/>            <span class=\"kw1\">next</span><br/>        <span class=\"kw1\">print</span> <span class=\"st0\">\" \"</span>;dash$<br/>        <span class=\"kw1\">print</span> ABC$<br/>    <span class=\"kw1\">end</span> <span class=\"kw1\">if</span><br/>\u00a0<br/><span class=\"kw1\">next</span><br/>\u00a0<br/>t1<span class=\"sy0\">=</span><span class=\"kw2\">time$</span><span class=\"br0\">(</span><span class=\"st0\">\"ms\"</span><span class=\"br0\">)</span><br/><span class=\"kw1\">print</span> <span class=\"st0\">\"Time taken \"</span>;t1<span class=\"sy0\">-</span>t0<br/><span class=\"kw1\">print</span> <span class=\"st0\">\"Number of solutions \"</span>;num<br/>\u00a0<br/><span class=\"co1\">'----------------------------------</span><br/><span class=\"co1\">'from</span><br/><span class=\"co1\">'http://babek.info/libertybasicfiles/lbnews/nl124/wordgames.htm</span><br/><span class=\"co1\">'Programming a Word Game by Janet Terra,</span><br/><span class=\"co1\">'The Liberty Basic Newsletter - Issue #124 - September 2004</span><br/><span class=\"kw1\">Function</span> permutation$<span class=\"br0\">(</span>pre$<span class=\"sy0\">,</span> post$<span class=\"br0\">)</span><br/><span class=\"co1\">'Note the variable nPerms must first be stated as a global variable.</span><br/>    lgth <span class=\"sy0\">=</span> <span class=\"kw2\">Len</span><span class=\"br0\">(</span>post$<span class=\"br0\">)</span><br/>    <span class=\"kw1\">If</span> lgth <span class=\"sy0\">&lt;</span> <span class=\"nu0\">2</span> <span class=\"kw1\">Then</span><br/>        nPerms <span class=\"sy0\">=</span> nPerms <span class=\"sy0\">+</span> <span class=\"nu0\">1</span><br/>        anagram$<span class=\"br0\">(</span>nPerms<span class=\"br0\">)</span> <span class=\"sy0\">=</span> pre$;post$<br/>    <span class=\"kw1\">Else</span><br/>        <span class=\"kw1\">For</span> i <span class=\"sy0\">=</span> <span class=\"nu0\">1</span> <span class=\"kw1\">To</span> lgth<br/>            tmp$<span class=\"sy0\">=</span>permutation$<span class=\"br0\">(</span>pre$<span class=\"sy0\">+</span><span class=\"kw2\">Mid$</span><span class=\"br0\">(</span>post$<span class=\"sy0\">,</span>i<span class=\"sy0\">,</span><span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"sy0\">,</span><span class=\"kw2\">Left$</span><span class=\"br0\">(</span>post$<span class=\"sy0\">,</span>i<span class=\"sy0\">-</span><span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"sy0\">+</span><span class=\"kw2\">Right$</span><span class=\"br0\">(</span>post$<span class=\"sy0\">,</span>lgth<span class=\"sy0\">-</span>i<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>        <span class=\"kw1\">Next</span> i<br/>    <span class=\"kw1\">End</span> <span class=\"kw1\">If</span><br/><span class=\"kw1\">End</span> <span class=\"kw1\">Function</span><br/>\u00a0<br/>\u00a0</pre>"}, {"lang": "Locomotive Basic", "loc": 52, "block": "<pre class=\"locobasic highlighted_source\"><span class=\"nu0\">10</span> <span class=\"kw1\">mode</span> <span class=\"nu0\">1</span>:<span class=\"kw1\">defint</span> a-z<br/><span class=\"nu0\">20</span> <span class=\"kw1\">while</span> n&lt;<span class=\"nu0\">4</span>:<span class=\"kw1\">input</span> <span class=\"st0\">\"How many queens (N&gt;=4)\"</span>;n:<span class=\"kw1\">wend</span><br/><span class=\"nu0\">30</span> <span class=\"kw1\">dim</span> q<span class=\"br0\">(</span>n<span class=\"br0\">)</span>,e<span class=\"br0\">(</span>n<span class=\"br0\">)</span>,o<span class=\"br0\">(</span>n<span class=\"br0\">)</span><br/><span class=\"nu0\">40</span> r=n <span class=\"kw2\">mod</span> <span class=\"nu0\">6</span><br/><span class=\"nu0\">50</span> <span class=\"kw1\">if</span> r&lt;&gt;<span class=\"nu0\">2</span> <span class=\"kw1\">and</span> r&lt;&gt;<span class=\"nu0\">3</span> <span class=\"kw1\">then</span> <span class=\"kw1\">gosub</span> <span class=\"nu0\">320</span>:<span class=\"kw1\">goto</span> <span class=\"nu0\">220</span><br/><span class=\"nu0\">60</span> <span class=\"kw1\">for</span> i=<span class=\"nu0\">1</span> <span class=\"kw1\">to</span> <span class=\"kw2\">int</span><span class=\"br0\">(</span>n/<span class=\"nu0\">2</span><span class=\"br0\">)</span><br/><span class=\"nu0\">70</span> e<span class=\"br0\">(</span>i<span class=\"br0\">)</span>=<span class=\"nu0\">2</span>*i<br/><span class=\"nu0\">80</span> <span class=\"kw1\">next</span><br/><span class=\"nu0\">90</span> <span class=\"kw1\">for</span> i=<span class=\"nu0\">1</span> <span class=\"kw1\">to</span> <span class=\"kw2\">round</span><span class=\"br0\">(</span>n/<span class=\"nu0\">2</span><span class=\"br0\">)</span><br/><span class=\"nu0\">100</span> o<span class=\"br0\">(</span>i<span class=\"br0\">)</span>=<span class=\"nu0\">2</span>*i-<span class=\"nu0\">1</span><br/><span class=\"nu0\">110</span> <span class=\"kw1\">next</span><br/><span class=\"nu0\">120</span> <span class=\"kw1\">if</span> r=<span class=\"nu0\">2</span> <span class=\"kw1\">then</span> <span class=\"kw1\">gosub</span> <span class=\"nu0\">410</span><br/><span class=\"nu0\">130</span> <span class=\"kw1\">if</span> r=<span class=\"nu0\">3</span> <span class=\"kw1\">then</span> <span class=\"kw1\">gosub</span> <span class=\"nu0\">460</span><br/><span class=\"nu0\">140</span> s=<span class=\"nu0\">1</span><br/><span class=\"nu0\">150</span> <span class=\"kw1\">for</span> i=<span class=\"nu0\">1</span> <span class=\"kw1\">to</span> n<br/><span class=\"nu0\">160</span> <span class=\"kw1\">if</span> e<span class=\"br0\">(</span>i<span class=\"br0\">)</span>&gt;<span class=\"nu0\">0</span> <span class=\"kw1\">then</span> q<span class=\"br0\">(</span>s<span class=\"br0\">)</span>=e<span class=\"br0\">(</span>i<span class=\"br0\">)</span>:s=s+<span class=\"nu0\">1</span><br/><span class=\"nu0\">170</span> <span class=\"kw1\">next</span><br/><span class=\"nu0\">180</span> <span class=\"kw1\">for</span> i=<span class=\"nu0\">1</span> <span class=\"kw1\">to</span> n<br/><span class=\"nu0\">190</span> <span class=\"kw1\">if</span> o<span class=\"br0\">(</span>i<span class=\"br0\">)</span>&gt;<span class=\"nu0\">0</span> <span class=\"kw1\">then</span> q<span class=\"br0\">(</span>s<span class=\"br0\">)</span>=o<span class=\"br0\">(</span>i<span class=\"br0\">)</span>:s=s+<span class=\"nu0\">1</span><br/><span class=\"nu0\">200</span> <span class=\"kw1\">next</span><br/><span class=\"nu0\">210</span> <span class=\"co1\">' print board</span><br/><span class=\"nu0\">220</span> <span class=\"kw1\">cls</span><br/><span class=\"nu0\">230</span> <span class=\"kw1\">for</span> i=<span class=\"nu0\">1</span> <span class=\"kw1\">to</span> n<br/><span class=\"nu0\">240</span> <span class=\"kw1\">locate</span> i,<span class=\"nu0\">26</span>-q<span class=\"br0\">(</span>i<span class=\"br0\">)</span>:<span class=\"kw1\">print</span> <span class=\"kw2\">chr</span>$<span class=\"br0\">(</span><span class=\"nu0\">238</span><span class=\"br0\">)</span>;<br/><span class=\"nu0\">250</span> <span class=\"kw1\">locate</span> i,<span class=\"nu0\">24</span>-n  \u00a0:<span class=\"kw1\">print</span> <span class=\"kw2\">chr</span>$<span class=\"br0\">(</span><span class=\"nu0\">96</span>+i<span class=\"br0\">)</span>;<br/><span class=\"nu0\">260</span> <span class=\"kw1\">locate</span> n+<span class=\"nu0\">1</span>,<span class=\"nu0\">26</span>-i\u00a0:<span class=\"kw1\">print</span> i;<br/><span class=\"nu0\">270</span> <span class=\"kw1\">next</span><br/><span class=\"nu0\">280</span> <span class=\"kw1\">locate</span> <span class=\"nu0\">1</span>,<span class=\"nu0\">1</span><br/><span class=\"nu0\">290</span> <span class=\"kw1\">call</span> &amp;bb06<br/><span class=\"nu0\">300</span> <span class=\"kw1\">end</span><br/><span class=\"nu0\">310</span> <span class=\"co1\">' the simple case</span><br/><span class=\"nu0\">320</span> p=<span class=\"nu0\">1</span><br/><span class=\"nu0\">330</span> <span class=\"kw1\">for</span> i=<span class=\"nu0\">1</span> <span class=\"kw1\">to</span> n<br/><span class=\"nu0\">340</span> <span class=\"kw1\">if</span> i <span class=\"kw2\">mod</span> <span class=\"nu0\">2</span>=<span class=\"nu0\">0</span> <span class=\"kw1\">then</span> q<span class=\"br0\">(</span>p<span class=\"br0\">)</span>=i:p=p+<span class=\"nu0\">1</span><br/><span class=\"nu0\">350</span> <span class=\"kw1\">next</span><br/><span class=\"nu0\">360</span> <span class=\"kw1\">for</span> i=<span class=\"nu0\">1</span> <span class=\"kw1\">to</span> n<br/><span class=\"nu0\">370</span> <span class=\"kw1\">if</span> i <span class=\"kw2\">mod</span> <span class=\"nu0\">2</span> <span class=\"kw1\">then</span> q<span class=\"br0\">(</span>p<span class=\"br0\">)</span>=i:p=p+<span class=\"nu0\">1</span><br/><span class=\"nu0\">380</span> <span class=\"kw1\">next</span><br/><span class=\"nu0\">390</span> <span class=\"kw1\">return</span><br/><span class=\"nu0\">400</span> <span class=\"co1\">' edit list when remainder is 2</span><br/><span class=\"nu0\">410</span> <span class=\"kw1\">for</span> i=<span class=\"nu0\">1</span> <span class=\"kw1\">to</span> n<br/><span class=\"nu0\">420</span> <span class=\"kw1\">if</span> o<span class=\"br0\">(</span>i<span class=\"br0\">)</span>=<span class=\"nu0\">3</span> <span class=\"kw1\">then</span> o<span class=\"br0\">(</span>i<span class=\"br0\">)</span>=<span class=\"nu0\">1</span> <span class=\"kw1\">else</span> <span class=\"kw1\">if</span> o<span class=\"br0\">(</span>i<span class=\"br0\">)</span>=<span class=\"nu0\">1</span> <span class=\"kw1\">then</span> o<span class=\"br0\">(</span>i<span class=\"br0\">)</span>=<span class=\"nu0\">3</span><br/><span class=\"nu0\">430</span> <span class=\"kw1\">if</span> o<span class=\"br0\">(</span>i<span class=\"br0\">)</span>=<span class=\"nu0\">5</span> <span class=\"kw1\">then</span> o<span class=\"br0\">(</span>i<span class=\"br0\">)</span>=-<span class=\"nu0\">1</span> <span class=\"kw1\">else</span> <span class=\"kw1\">if</span> o<span class=\"br0\">(</span>i<span class=\"br0\">)</span>=<span class=\"nu0\">0</span> <span class=\"kw1\">then</span> o<span class=\"br0\">(</span>i<span class=\"br0\">)</span>=<span class=\"nu0\">5</span>:<span class=\"kw1\">return</span><br/><span class=\"nu0\">440</span> <span class=\"kw1\">next</span><br/><span class=\"nu0\">450</span> <span class=\"co1\">' edit list when remainder is 3</span><br/><span class=\"nu0\">460</span> <span class=\"kw1\">for</span> i=<span class=\"nu0\">1</span> <span class=\"kw1\">to</span> n<br/><span class=\"nu0\">470</span> <span class=\"kw1\">if</span> e<span class=\"br0\">(</span>i<span class=\"br0\">)</span>=<span class=\"nu0\">2</span> <span class=\"kw1\">then</span> e<span class=\"br0\">(</span>i<span class=\"br0\">)</span>=-<span class=\"nu0\">1</span> <span class=\"kw1\">else</span> <span class=\"kw1\">if</span> e<span class=\"br0\">(</span>i<span class=\"br0\">)</span>=<span class=\"nu0\">0</span> <span class=\"kw1\">then</span> e<span class=\"br0\">(</span>i<span class=\"br0\">)</span>=<span class=\"nu0\">2</span>:<span class=\"kw1\">goto</span> <span class=\"nu0\">500</span><br/><span class=\"nu0\">480</span> <span class=\"kw1\">next</span><br/><span class=\"nu0\">490</span> <span class=\"co1\">' edit list some more</span><br/><span class=\"nu0\">500</span> <span class=\"kw1\">for</span> i=<span class=\"nu0\">1</span> <span class=\"kw1\">to</span> n<br/><span class=\"nu0\">510</span> <span class=\"kw1\">if</span> o<span class=\"br0\">(</span>i<span class=\"br0\">)</span>=<span class=\"nu0\">1</span> <span class=\"kw1\">or</span> o<span class=\"br0\">(</span>i<span class=\"br0\">)</span>=<span class=\"nu0\">3</span> <span class=\"kw1\">then</span> o<span class=\"br0\">(</span>i<span class=\"br0\">)</span>=-<span class=\"nu0\">1</span> <span class=\"kw1\">else</span> <span class=\"kw1\">if</span> o<span class=\"br0\">(</span>i<span class=\"br0\">)</span>=<span class=\"nu0\">0</span> <span class=\"kw1\">then</span> o<span class=\"br0\">(</span>i<span class=\"br0\">)</span>=<span class=\"nu0\">1</span>:o<span class=\"br0\">(</span>i+<span class=\"nu0\">1</span><span class=\"br0\">)</span>=<span class=\"nu0\">3</span>:<span class=\"kw1\">return</span><br/><span class=\"nu0\">520</span> <span class=\"kw1\">next</span></pre>"}, {"lang": "Logo", "loc": 17, "block": "<pre class=\"text highlighted_source\">to try\u00a0:files\u00a0:diag1\u00a0:diag2\u00a0:tried<br/>  if\u00a0:files = 0 [make \"solutions\u00a0:solutions+1  show\u00a0:tried  stop]<br/>  localmake \"safe (bitand\u00a0:files\u00a0:diag1\u00a0:diag2)<br/>  until [:safe = 0] [<br/>    localmake \"f bitnot bitand\u00a0:safe minus\u00a0:safe<br/>    try bitand\u00a0:files\u00a0:f  ashift bitand\u00a0:diag1\u00a0:f -1  (ashift bitand\u00a0:diag2\u00a0:f 1)+1  fput bitnot\u00a0:f\u00a0:tried<br/>    localmake \"safe bitand\u00a0:safe\u00a0:safe-1<br/>  ]<br/>end<br/>\u00a0<br/>to queens\u00a0:n<br/>  make \"solutions 0<br/>  try (lshift 1\u00a0:n)-1 -1 -1 []<br/>  output\u00a0:solutions<br/>end<br/>\u00a0<br/>print queens 8 \u00a0; 92</pre>"}, {"lang": "Lua", "loc": 35, "block": "<pre class=\"lua highlighted_source\">N <span class=\"sy0\">=</span> <span class=\"nu0\">8</span><br/>\u00a0<br/><span class=\"co1\">-- We'll use nil to indicate no queen is present.</span><br/>grid <span class=\"sy0\">=</span> <span class=\"br0\">{</span><span class=\"br0\">}</span><br/><span class=\"kw1\">for</span> i <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><span class=\"sy0\">,</span> N <span class=\"kw1\">do</span><br/>  grid<span class=\"br0\">[</span>i<span class=\"br0\">]</span> <span class=\"sy0\">=</span> <span class=\"br0\">{</span><span class=\"br0\">}</span><br/><span class=\"kw1\">end</span><br/>\u00a0<br/><span class=\"kw1\">function</span> can_find_solution<span class=\"br0\">(</span>x0<span class=\"sy0\">,</span> y0<span class=\"br0\">)</span><br/>  <span class=\"kw1\">local</span> x0<span class=\"sy0\">,</span> y0 <span class=\"sy0\">=</span> x0 <span class=\"kw2\">or</span> <span class=\"nu0\">0</span><span class=\"sy0\">,</span> y0 <span class=\"kw2\">or</span> <span class=\"nu0\">1</span>  <span class=\"co1\">-- Set default vals (0, 1).</span><br/>  <span class=\"kw1\">for</span> x <span class=\"sy0\">=</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> x0 <span class=\"sy0\">-</span> <span class=\"nu0\">1</span> <span class=\"kw1\">do</span><br/>    <span class=\"kw1\">if</span> grid<span class=\"br0\">[</span>x<span class=\"br0\">]</span><span class=\"br0\">[</span>y0<span class=\"br0\">]</span> <span class=\"kw2\">or</span> grid<span class=\"br0\">[</span>x<span class=\"br0\">]</span><span class=\"br0\">[</span>y0 <span class=\"sy0\">-</span> x0 <span class=\"sy0\">+</span> x<span class=\"br0\">]</span> <span class=\"kw2\">or</span> grid<span class=\"br0\">[</span>x<span class=\"br0\">]</span><span class=\"br0\">[</span>y0 <span class=\"sy0\">+</span> x0 <span class=\"sy0\">-</span> x<span class=\"br0\">]</span> <span class=\"kw1\">then</span><br/>      <span class=\"kw1\">return</span> <span class=\"kw4\">false</span><br/>    <span class=\"kw1\">end</span><br/>  <span class=\"kw1\">end</span><br/>  grid<span class=\"br0\">[</span>x0<span class=\"br0\">]</span><span class=\"br0\">[</span>y0<span class=\"br0\">]</span> <span class=\"sy0\">=</span> <span class=\"kw4\">true</span><br/>  <span class=\"kw1\">if</span> x0 <span class=\"sy0\">==</span> N <span class=\"kw1\">then</span> <span class=\"kw1\">return</span> <span class=\"kw4\">true</span> <span class=\"kw1\">end</span><br/>  <span class=\"kw1\">for</span> y0 <span class=\"sy0\">=</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> N <span class=\"kw1\">do</span><br/>    <span class=\"kw1\">if</span> can_find_solution<span class=\"br0\">(</span>x0 <span class=\"sy0\">+</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> y0<span class=\"br0\">)</span> <span class=\"kw1\">then</span> <span class=\"kw1\">return</span> <span class=\"kw4\">true</span> <span class=\"kw1\">end</span><br/>  <span class=\"kw1\">end</span><br/>  grid<span class=\"br0\">[</span>x0<span class=\"br0\">]</span><span class=\"br0\">[</span>y0<span class=\"br0\">]</span> <span class=\"sy0\">=</span> <span class=\"kw4\">nil</span><br/>  <span class=\"kw1\">return</span> <span class=\"kw4\">false</span><br/><span class=\"kw1\">end</span><br/>\u00a0<br/><span class=\"kw1\">if</span> can_find_solution<span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"kw1\">then</span><br/>  <span class=\"kw1\">for</span> y <span class=\"sy0\">=</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> N <span class=\"kw1\">do</span><br/>    <span class=\"kw1\">for</span> x <span class=\"sy0\">=</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> N <span class=\"kw1\">do</span><br/>      <span class=\"co1\">-- Print \"|Q\" if grid[x][y] is true; \"|_\" otherwise.</span><br/>      <span class=\"kw3\">io.write</span><span class=\"br0\">(</span>grid<span class=\"br0\">[</span>x<span class=\"br0\">]</span><span class=\"br0\">[</span>y<span class=\"br0\">]</span> <span class=\"kw2\">and</span> <span class=\"st0\">\"|Q\"</span> <span class=\"kw2\">or</span> <span class=\"st0\">\"|_\"</span><span class=\"br0\">)</span><br/>    <span class=\"kw1\">end</span><br/>    <span class=\"kw3\">print</span><span class=\"br0\">(</span><span class=\"st0\">\"|\"</span><span class=\"br0\">)</span><br/>  <span class=\"kw1\">end</span><br/><span class=\"kw1\">else</span><br/>  <span class=\"kw3\">print</span><span class=\"br0\">(</span><span class=\"kw3\">string.format</span><span class=\"br0\">(</span><span class=\"st0\">\"No solution for\u00a0%d queens.<span class=\"es1\">\\n</span>\"</span><span class=\"sy0\">,</span> N<span class=\"br0\">)</span><span class=\"br0\">)</span><br/><span class=\"kw1\">end</span></pre>"}, {"lang": "Mathematica", "loc": 9, "block": "<pre class=\"text highlighted_source\">safe[q_List, n_]\u00a0:= <br/> With[{l = <a class=\"__cf_email__\" data-cfemail=\"f3bf969d94879bb382\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>}, <br/>  <a class=\"__cf_email__\" data-cfemail=\"58143d363f2c30180d36313736\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>@q == <a class=\"__cf_email__\" data-cfemail=\"bcf0d9d2dbc8d4fce9d2d5d3d2\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>[q + <a class=\"__cf_email__\" data-cfemail=\"beecdfd0d9dbfed2\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>] == <br/>   <a class=\"__cf_email__\" data-cfemail=\"561a333831223e1603383f3938\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>[q - <a class=\"__cf_email__\" data-cfemail=\"efbd8e81888aaf83\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>] == l]<br/>nQueen[q_List: {}, n_]\u00a0:= <br/> If[safe[q, n], <br/>  If[Length[q] == n, {q}, <br/>   Cases[nQueen[Append[q, #], n] &amp; /@ Range[n], <br/>    Except[{Null} | {}], {2}]], Null]</pre>"}, {"lang": "Maxima", "loc": 18, "block": "<pre class=\"text highlighted_source\">/* translation of Fortran 77, return solutions as permutations */<br/>\u00a0<br/>queens(n)\u00a0:= block([a, i, j, m, p, q, r, s, u, v, w, y, z],<br/>a: makelist(i, i, 1, n), s: a*0, u: makelist(0, i, 1, 4*n - 2),<br/>m: 0, i: 1, r: 2*n - 1, w: [ ], go(L40), L30, s[i]: j, u[p]: 1,<br/>u[q + r]: 1, i: i + 1, L40, if i &gt; n then go(L80), j: i, L50,<br/>z: a[i], y: a[j], p: i - y + n, q: i + y - 1, a[i]: y, a[j]: z,<br/>if u[p] = 0 and u[q + r] = 0 then go(L30), L60, j: j + 1,<br/>if j &lt;= n then go(L50), L70, j: j - 1, if j = i then go(L90),<br/>z: a[i], a[i]: a[j], a[j]: z, go(L70), L80, m: m + 1,<br/>w: endcons(copylist(a), w), L90, i: i - 1, if i = 0 then go(L100),<br/>p: i - a[i] + n, q: i + a[i] - 1, j: s[i], u[p]: 0, u[q + r]: 0,<br/>go(L60), L100, w)$<br/>\u00a0<br/>queens(8); /* [[1, 5, 8, 6, 3, 7, 2, 4],<br/>               [1, 6, 8, 3, 7, 4, 2, 5],<br/>               ...]] */<br/>length(%); /* 92 */</pre>"}, {"lang": "MUMPS", "loc": 60, "block": "<pre class=\"text highlighted_source\">Queens\tNew count,flip,row,sol<br/>\tSet sol=0<br/>\tFor row(1)=1:1:4 Do try(2) \u00a0; Not 8, the other 4 are symmetric...<br/>\t;<br/>\t; Remove symmetric solutions<br/>\tSet sol=\"\" For  Set sol=$Order(sol(sol)) Quit:sol=\"\"  Do<br/>\t. New xx,yy<br/>\t. Kill sol($Translate(sol,12345678,87654321))\u00a0; Vertical flip<br/>\t. Kill sol($Reverse(sol))\u00a0; Horizontal flip<br/>\t. Set flip=\"--------\" for xx=1:1:8 Do \u00a0; Flip over top left to bottom right diagonal<br/>\t. . New nx,ny<br/>\t. . Set yy=$Extract(sol,xx),nx=8+1-xx,ny=8+1-yy<br/>\t. . Set $Extract(flip,ny)=nx<br/>\t. . Quit<br/>\t. Kill sol(flip)<br/>\t. Set flip=\"--------\" for xx=1:1:8 Do \u00a0; Flip over top right to bottom left diagonal<br/>\t. . New nx,ny<br/>\t. . Set yy=$Extract(sol,xx),nx=xx,ny=yy<br/>\t. . Set $Extract(flip,ny)=nx<br/>\t. . Quit<br/>\t. Kill sol(flip)<br/>\t. Quit<br/>\t;<br/>\t; Display remaining solutions<br/>\tSet count=0,sol=\"\" For  Set sol=$Order(sol(sol)) Quit:sol=\"\"  Do  Quit:sol=\"\"<br/>\t. New s1,s2,s3,txt,x,y<br/>\t. Set s1=sol,s2=$Order(sol(s1)),s3=\"\" Set:s2'=\"\" s3=$Order(sol(s2))<br/>\t. Set txt=\"+--+--+--+--+--+--+--+--+\"<br/>\t. Write\u00a0!,\"  \",txt Write:s2'=\"\" \" \",txt Write:s3'=\"\" \" \",txt<br/>\t. For y=8:-1:1 Do<br/>\t. . Write\u00a0!,y,\" |\"<br/>\t. . For x=1:1:8 Write $Select($Extract(s1,x)=y:\" Q\",x+y#2:\"  \",1:\"##\"),\"|\"<br/>\t. . If s2'=\"\" Write \" |\"<br/>\t. . If s2'=\"\" For x=1:1:8 Write $Select($Extract(s2,x)=y:\" Q\",x+y#2:\"  \",1:\"##\"),\"|\"<br/>\t. . If s3'=\"\" Write \" |\"<br/>\t. . If s3'=\"\" For x=1:1:8 Write $Select($Extract(s3,x)=y:\" Q\",x+y#2:\"  \",1:\"##\"),\"|\"<br/>\t. . Write\u00a0!,\"  \",txt Write:s2'=\"\" \" \",txt Write:s3'=\"\" \" \",txt<br/>\t. . Quit<br/>\t. Set txt=\"   A  B  C  D  E  F  G  H\"<br/>\t. Write\u00a0!,\"  \",txt Write:s2'=\"\" \" \",txt Write:s3'=\"\" \" \",txt Write\u00a0!<br/>\t. Set sol=s3<br/>\t. Quit<br/>\tQuit<br/>try(col)\tNew ok,pcol<br/>\tIf col&gt;8 Do  Quit<br/>\t. New out,x<br/>\t. Set out=\"\" For x=1:1:8 Set out=out_row(x)<br/>\t. Set sol(out)=1<br/>\t. Quit<br/>\tFor row(col)=1:1:8 Do<br/>\t. Set ok=1<br/>\t. For pcol=1:1:col-1 If row(pcol)=row(col) Set ok=0 Quit<br/>\t. Quit:'ok<br/>\t. For pcol=1:1:col-1 If col-pcol=$Translate(row(pcol)-row(col),\"-\") Set ok=0 Quit<br/>\t. Quit:'ok<br/>\t. Do try(col+1)<br/>\t. Quit<br/>\tQuit<br/>Do Queens<br/>\u00a0</pre>"}, {"lang": "Nim", "loc": 25, "block": "<pre class=\"text highlighted_source\">const boardSize = 8<br/>\u00a0<br/>proc underAttack(col, queens): bool =<br/>  if col in queens: return true<br/>  for i, x in queens:<br/>    if abs(col - x) == queens.len - i:<br/>      return true<br/>  return false<br/>\u00a0<br/>proc solve(n): auto =<br/>  result = newSeq[seq[int]]()<br/>  result.add(@[])<br/>  var newSolutions = newSeq[seq[int]]()<br/>  for row in 1..n:<br/>    for solution in result:<br/>      for i in 1..boardSize:<br/>        if not underAttack(i, solution):<br/>          newSolutions.add(solution &amp; i)<br/>    swap result, newSolutions<br/>    newSolutions.setLen(0)<br/>\u00a0<br/>for answer in solve(boardSize):<br/>  for i, x in answer:<br/>    if i &gt; 0: stdout.write \", \"<br/>    stdout.write \"(\",i,\", \",x,\")\"</pre>"}, {"lang": "Objeck", "loc": 58, "block": "<pre class=\"objeck highlighted_source\">\ufeff<span class=\"kw1\">bundle</span> Default <span class=\"br0\">{</span><br/>  <span class=\"kw1\">class</span> NQueens <span class=\"br0\">{</span><br/>    b <span class=\"sy0\">:</span> <span class=\"kw1\">static</span> <span class=\"sy0\">:</span> <span class=\"kw2\">Int</span><span class=\"br0\">[</span><span class=\"br0\">]</span><span class=\"sy0\">;</span><br/>    s <span class=\"sy0\">:</span> <span class=\"kw1\">static</span> <span class=\"sy0\">:</span> <span class=\"kw2\">Int</span><span class=\"sy0\">;</span><br/>\u00a0<br/>    <span class=\"kw1\">function</span> <span class=\"sy0\">:</span> Main<span class=\"br0\">(</span>args <span class=\"sy0\">:</span> <span class=\"kw2\">String</span><span class=\"br0\">[</span><span class=\"br0\">]</span><span class=\"br0\">)</span> ~ <span class=\"kw2\">Nil</span> <span class=\"br0\">{</span><br/>      b <span class=\"sy0\">:=</span> Int<span class=\"sy0\">-&gt;</span><span class=\"me1\">New</span><span class=\"br0\">[</span><span class=\"nu0\">8</span><span class=\"br0\">]</span><span class=\"sy0\">;</span><br/>      s <span class=\"sy0\">:=</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span><br/>\u00a0<br/>      y <span class=\"sy0\">:=</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span><br/>      b<span class=\"br0\">[</span><span class=\"nu0\">0</span><span class=\"br0\">]</span> <span class=\"sy0\">:=</span> <span class=\"sy0\">-</span><span class=\"nu0\">1</span><span class=\"sy0\">;</span><br/>\u00a0<br/>      <span class=\"kw1\">while</span> <span class=\"br0\">(</span>y <span class=\"sy0\">&gt;=</span> <span class=\"nu0\">0</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>        <span class=\"kw1\">do</span> <span class=\"br0\">{</span><br/>          b<span class=\"br0\">[</span>y<span class=\"br0\">]</span><span class=\"sy0\">+=</span><span class=\"nu0\">1</span><span class=\"sy0\">;</span><br/>        <span class=\"br0\">}</span> <br/>        <span class=\"kw1\">while</span><span class=\"br0\">(</span><span class=\"br0\">(</span>b<span class=\"br0\">[</span>y<span class=\"br0\">]</span> <span class=\"sy0\">&lt;</span> <span class=\"nu0\">8</span><span class=\"br0\">)</span> <span class=\"sy0\">&amp;</span> Unsafe<span class=\"br0\">(</span>y<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>\u00a0<br/>        <span class=\"kw1\">if</span><span class=\"br0\">(</span>b<span class=\"br0\">[</span>y<span class=\"br0\">]</span> <span class=\"sy0\">&lt;</span> <span class=\"nu0\">8</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>          <span class=\"kw1\">if</span> <span class=\"br0\">(</span>y <span class=\"sy0\">&lt;</span> <span class=\"nu0\">7</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>            b<span class=\"br0\">[</span>y <span class=\"sy0\">+</span> <span class=\"nu0\">1</span><span class=\"br0\">]</span> <span class=\"sy0\">:=</span> <span class=\"sy0\">-</span><span class=\"nu0\">1</span><span class=\"sy0\">;</span><br/>            y <span class=\"sy0\">+=</span> <span class=\"nu0\">1</span><span class=\"sy0\">;</span><br/>          <span class=\"br0\">}</span> <br/>          <span class=\"kw1\">else</span> <span class=\"br0\">{</span><br/>            PutBoard<span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>          <span class=\"br0\">}</span><span class=\"sy0\">;</span><br/>        <span class=\"br0\">}</span> <br/>        <span class=\"kw1\">else</span> <span class=\"br0\">{</span><br/>          y<span class=\"sy0\">-=</span><span class=\"nu0\">1</span><span class=\"sy0\">;</span><br/>        <span class=\"br0\">}</span><span class=\"sy0\">;</span><br/>      <span class=\"br0\">}</span><span class=\"sy0\">;</span><br/>    <span class=\"br0\">}</span><br/>\u00a0<br/>    <span class=\"kw1\">function</span> <span class=\"sy0\">:</span> Unsafe<span class=\"br0\">(</span>y <span class=\"sy0\">:</span> <span class=\"kw2\">Int</span><span class=\"br0\">)</span> ~ <span class=\"kw2\">Bool</span> <span class=\"br0\">{</span><br/>      x <span class=\"sy0\">:=</span> b<span class=\"br0\">[</span>y<span class=\"br0\">]</span><span class=\"sy0\">;</span><br/>      <span class=\"kw1\">for</span><span class=\"br0\">(</span>i <span class=\"sy0\">:=</span> <span class=\"nu0\">1</span><span class=\"sy0\">;</span> i <span class=\"sy0\">&lt;=</span> y<span class=\"sy0\">;</span> i<span class=\"sy0\">+=</span><span class=\"nu0\">1</span><span class=\"sy0\">;</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>        t <span class=\"sy0\">:=</span> b<span class=\"br0\">[</span>y <span class=\"sy0\">-</span> i<span class=\"br0\">]</span><span class=\"sy0\">;</span><br/>        <span class=\"kw1\">if</span><span class=\"br0\">(</span>t <span class=\"sy0\">=</span> x <span class=\"sy0\">|</span> t <span class=\"sy0\">=</span> x <span class=\"sy0\">-</span> i <span class=\"sy0\">|</span> t <span class=\"sy0\">=</span> x <span class=\"sy0\">+</span> i<span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>          <span class=\"kw1\">return</span> <span class=\"kw3\">true</span><span class=\"sy0\">;</span><br/>        <span class=\"br0\">}</span><span class=\"sy0\">;</span><br/>      <span class=\"br0\">}</span><span class=\"sy0\">;</span><br/>\u00a0<br/>      <span class=\"kw1\">return</span> <span class=\"kw3\">false</span><span class=\"sy0\">;</span><br/>    <span class=\"br0\">}</span><br/>\u00a0<br/>    <span class=\"kw1\">function</span> <span class=\"sy0\">:</span> PutBoard<span class=\"br0\">(</span><span class=\"br0\">)</span> ~ <span class=\"kw2\">Nil</span> <span class=\"br0\">{</span><br/>      IO.Console<span class=\"sy0\">-&gt;</span><span class=\"me1\">Print</span><span class=\"br0\">(</span><span class=\"st0\">\"<span class=\"es0\">\\n</span><span class=\"es0\">\\n</span>Solution \"</span><span class=\"br0\">)</span><span class=\"sy0\">-&gt;</span><span class=\"me1\">PrintLine</span><span class=\"br0\">(</span>s <span class=\"sy0\">+</span> <span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>      s <span class=\"sy0\">+=</span> <span class=\"nu0\">1</span><span class=\"sy0\">;</span><br/>      <span class=\"kw1\">for</span><span class=\"br0\">(</span>y <span class=\"sy0\">:=</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span> y <span class=\"sy0\">&lt;</span> <span class=\"nu0\">8</span><span class=\"sy0\">;</span> y<span class=\"sy0\">+=</span><span class=\"nu0\">1</span><span class=\"sy0\">;</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>        <span class=\"kw1\">for</span><span class=\"br0\">(</span>x <span class=\"sy0\">:=</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span> x <span class=\"sy0\">&lt;</span> <span class=\"nu0\">8</span><span class=\"sy0\">;</span> x<span class=\"sy0\">+=</span><span class=\"nu0\">1</span><span class=\"sy0\">;</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>          IO.Console<span class=\"sy0\">-&gt;</span><span class=\"me1\">Print</span><span class=\"br0\">(</span><span class=\"br0\">(</span>b<span class=\"br0\">[</span>y<span class=\"br0\">]</span> <span class=\"sy0\">=</span> x<span class=\"br0\">)</span>\u00a0? <span class=\"st0\">\"|Q\"</span> <span class=\"sy0\">:</span> <span class=\"st0\">\"|_\"</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        <span class=\"br0\">}</span><span class=\"sy0\">;</span><br/>        <span class=\"st0\">\"|\"</span><span class=\"sy0\">-&gt;</span><span class=\"me1\">PrintLine</span><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>      <span class=\"br0\">}</span><span class=\"sy0\">;</span><br/>    <span class=\"br0\">}</span><br/>  <span class=\"br0\">}</span><br/><span class=\"br0\">}</span><br/>\u00a0</pre>"}, {"lang": "OCaml", "loc": 59, "block": "<pre class=\"ocaml highlighted_source\"><span class=\"co1\">(* Authors: Nicolas Barnier, Pascal Brisset<br/>   Copyright 2004 CENA. All rights reserved.<br/>   This code is distributed under the terms of the GNU LGPL *)</span><br/>\u00a0<br/><span class=\"kw1\">open</span> Facile<br/><span class=\"kw1\">open</span> Easy<br/>\u00a0<br/><span class=\"co1\">(* Print a solution *)</span><br/><span class=\"kw1\">let</span> print queens <span class=\"sy0\">=</span><br/>  <span class=\"kw1\">let</span> n <span class=\"sy0\">=</span> <a href=\"http://caml.inria.fr/pub/docs/manual-ocaml/libref/Array.html\"><span class=\"kw2\">Array</span></a><span class=\"sy0\">.</span>length queens <span class=\"kw1\">in</span><br/>  <span class=\"kw1\">if</span> n <span class=\"sy0\">&lt;=</span> <span class=\"nu0\">10</span> <span class=\"kw1\">then</span> <span class=\"co1\">(* Pretty printing *)</span><br/>    <span class=\"kw1\">for</span> i <span class=\"sy0\">=</span> <span class=\"nu0\">0</span> <span class=\"kw1\">to</span> n <span class=\"sy0\">-</span> <span class=\"nu0\">1</span> <span class=\"kw1\">do</span><br/>      <span class=\"kw1\">let</span> c <span class=\"sy0\">=</span> Fd<span class=\"sy0\">.</span>int_value queens<span class=\"sy0\">.</span><span class=\"br0\">(</span>i<span class=\"br0\">)</span> <span class=\"kw1\">in</span> <span class=\"co1\">(* queens.(i) is bound *)</span><br/>      <span class=\"kw1\">for</span> j <span class=\"sy0\">=</span> <span class=\"nu0\">0</span> <span class=\"kw1\">to</span> n <span class=\"sy0\">-</span> <span class=\"nu0\">1</span> <span class=\"kw1\">do</span><br/>        <a href=\"http://caml.inria.fr/pub/docs/manual-ocaml/libref/Printf.html\"><span class=\"kw2\">Printf</span></a><span class=\"sy0\">.</span>printf <span class=\"st0\">\"%c \"</span> <span class=\"br0\">(</span><span class=\"kw1\">if</span> j <span class=\"sy0\">=</span> c <span class=\"kw1\">then</span> <span class=\"sy0\">'*'</span> <span class=\"kw1\">else</span> <span class=\"sy0\">'-'</span><span class=\"br0\">)</span><br/>      <span class=\"kw1\">done</span><span class=\"sy0\">;</span><br/>      <a href=\"http://caml.inria.fr/pub/docs/manual-ocaml/libref/Pervasives.html#VALprint_newline\"><span class=\"kw3\">print_newline</span></a> <span class=\"br0\">(</span><span class=\"br0\">)</span><br/>    <span class=\"kw1\">done</span><br/>  <span class=\"kw1\">else</span> <span class=\"co1\">(* Short print *)</span><br/>    <span class=\"kw1\">for</span> i <span class=\"sy0\">=</span> <span class=\"nu0\">0</span> <span class=\"kw1\">to</span> n<span class=\"sy0\">-</span><span class=\"nu0\">1</span> <span class=\"kw1\">do</span><br/>      <a href=\"http://caml.inria.fr/pub/docs/manual-ocaml/libref/Printf.html\"><span class=\"kw2\">Printf</span></a><span class=\"sy0\">.</span>printf <span class=\"st0\">\"line\u00a0%d\u00a0: col\u00a0%a\\n\"</span> i Fd<span class=\"sy0\">.</span>fprint queens<span class=\"sy0\">.</span><span class=\"br0\">(</span>i<span class=\"br0\">)</span><br/>    <span class=\"kw1\">done</span><span class=\"sy0\">;</span><br/>  <a href=\"http://caml.inria.fr/pub/docs/manual-ocaml/libref/Pervasives.html#VALflush\"><span class=\"kw3\">flush</span></a> <span class=\"kw1\">stdout</span><span class=\"sy0\">;</span><br/><span class=\"sy0\">;;</span><br/>\u00a0<br/><span class=\"co1\">(* Solve the n-queens problem *)</span><br/><span class=\"kw1\">let</span> queens n <span class=\"sy0\">=</span><br/>  <span class=\"co1\">(* n decision variables in 0..n-1 *)</span><br/>  <span class=\"kw1\">let</span> queens <span class=\"sy0\">=</span> Fd<span class=\"sy0\">.</span><a href=\"http://caml.inria.fr/pub/docs/manual-ocaml/libref/Pervasives.html#TYPEarray\"><span class=\"kw4\">array</span></a> n <span class=\"nu0\">0</span> <span class=\"br0\">(</span>n<span class=\"sy0\">-</span><span class=\"nu0\">1</span><span class=\"br0\">)</span> <span class=\"kw1\">in</span><br/>\u00a0<br/>  <span class=\"co1\">(* 2n auxiliary variables for diagonals *)</span><br/>  <span class=\"kw1\">let</span> shift op <span class=\"sy0\">=</span> <a href=\"http://caml.inria.fr/pub/docs/manual-ocaml/libref/Array.html\"><span class=\"kw2\">Array</span></a><span class=\"sy0\">.</span>mapi <span class=\"br0\">(</span><span class=\"kw1\">fun</span> i qi <span class=\"sy0\">-&gt;</span> Arith<span class=\"sy0\">.</span>e2fd <span class=\"br0\">(</span>op <span class=\"br0\">(</span>fd2e qi<span class=\"br0\">)</span> <span class=\"br0\">(</span>i2e i<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span> queens <span class=\"kw1\">in</span><br/>  <span class=\"kw1\">let</span> diag1 <span class=\"sy0\">=</span> shift <span class=\"br0\">(</span><span class=\"sy0\">+</span>~<span class=\"br0\">)</span> <span class=\"kw1\">and</span> diag2 <span class=\"sy0\">=</span> shift <span class=\"br0\">(</span><span class=\"sy0\">-</span>~<span class=\"br0\">)</span> <span class=\"kw1\">in</span><br/>\u00a0<br/>  <span class=\"co1\">(* Global constraints *)</span><br/>  Cstr<span class=\"sy0\">.</span>post <span class=\"br0\">(</span>Alldiff<span class=\"sy0\">.</span>cstr queens<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>  Cstr<span class=\"sy0\">.</span>post <span class=\"br0\">(</span>Alldiff<span class=\"sy0\">.</span>cstr diag1<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>  Cstr<span class=\"sy0\">.</span>post <span class=\"br0\">(</span>Alldiff<span class=\"sy0\">.</span>cstr diag2<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>\u00a0<br/>  <span class=\"co1\">(* Heuristic Min Size, Min Value *)</span><br/>  <span class=\"kw1\">let</span> h a <span class=\"sy0\">=</span> <span class=\"br0\">(</span>Var<span class=\"sy0\">.</span>Attr<span class=\"sy0\">.</span>size a, Var<span class=\"sy0\">.</span>Attr<span class=\"sy0\">.</span><a href=\"http://caml.inria.fr/pub/docs/manual-ocaml/libref/Pervasives.html#VALmin\"><span class=\"kw3\">min</span></a> a<span class=\"br0\">)</span> <span class=\"kw1\">in</span><br/>  <span class=\"kw1\">let</span> min_min <span class=\"sy0\">=</span> Goals<span class=\"sy0\">.</span><a href=\"http://caml.inria.fr/pub/docs/manual-ocaml/libref/Array.html\"><span class=\"kw2\">Array</span></a><span class=\"sy0\">.</span>choose_index <span class=\"br0\">(</span><span class=\"kw1\">fun</span> a1 a2 <span class=\"sy0\">-&gt;</span> h a1 <span class=\"sy0\">&lt;</span> h a2<span class=\"br0\">)</span> <span class=\"kw1\">in</span><br/>\u00a0<br/>  <span class=\"co1\">(* Search goal *)</span><br/>  <span class=\"kw1\">let</span> labeling <span class=\"sy0\">=</span> Goals<span class=\"sy0\">.</span><a href=\"http://caml.inria.fr/pub/docs/manual-ocaml/libref/Array.html\"><span class=\"kw2\">Array</span></a><span class=\"sy0\">.</span>forall <span class=\"re1\">~select</span><span class=\"sy0\">:</span>min_min Goals<span class=\"sy0\">.</span>indomain <span class=\"kw1\">in</span><br/>\u00a0<br/>  <span class=\"co1\">(* Solve *)</span><br/>  <span class=\"kw1\">let</span> bt <span class=\"sy0\">=</span> <span class=\"kw1\">ref</span> <span class=\"nu0\">0</span> <span class=\"kw1\">in</span><br/>  <span class=\"kw1\">if</span> Goals<span class=\"sy0\">.</span>solve <span class=\"re1\">~control</span><span class=\"sy0\">:</span><span class=\"br0\">(</span><span class=\"kw1\">fun</span> b <span class=\"sy0\">-&gt;</span> bt <span class=\"sy0\">:=</span> b<span class=\"br0\">)</span> <span class=\"br0\">(</span>labeling queens<span class=\"br0\">)</span> <span class=\"kw1\">then</span> <span class=\"kw1\">begin</span><br/>    <a href=\"http://caml.inria.fr/pub/docs/manual-ocaml/libref/Printf.html\"><span class=\"kw2\">Printf</span></a><span class=\"sy0\">.</span>printf <span class=\"st0\">\"%d backtracks\\n\"</span> <span class=\"sy0\">!</span>bt<span class=\"sy0\">;</span><br/>    print queens<br/>  <span class=\"kw1\">end</span> <span class=\"kw1\">else</span><br/>    <a href=\"http://caml.inria.fr/pub/docs/manual-ocaml/libref/Pervasives.html#VALprerr_endline\"><span class=\"kw3\">prerr_endline</span></a> <span class=\"st0\">\"No solution\"</span><br/>\u00a0<br/><span class=\"kw1\">let</span> _ <span class=\"sy0\">=</span><br/>  <span class=\"kw1\">if</span> <a href=\"http://caml.inria.fr/pub/docs/manual-ocaml/libref/Array.html\"><span class=\"kw2\">Array</span></a><span class=\"sy0\">.</span>length <a href=\"http://caml.inria.fr/pub/docs/manual-ocaml/libref/Sys.html\"><span class=\"kw2\">Sys</span></a><span class=\"sy0\">.</span>argv <span class=\"sy0\">&lt;&gt;</span> <span class=\"nu0\">2</span><br/>  <span class=\"kw1\">then</span> <span class=\"kw1\">raise</span> <span class=\"br0\">(</span><a href=\"http://caml.inria.fr/pub/docs/manual-ocaml/libref/Pervasives.html#EXCEPTIONFailure\"><span class=\"kw5\">Failure</span></a> <span class=\"st0\">\"Usage: queens &lt;nb of queens&gt;\"</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>  <a href=\"http://caml.inria.fr/pub/docs/manual-ocaml/libref/Gc.html\"><span class=\"kw2\">Gc</span></a><span class=\"sy0\">.</span>set <span class=\"br0\">(</span><span class=\"br0\">{</span><span class=\"br0\">(</span><a href=\"http://caml.inria.fr/pub/docs/manual-ocaml/libref/Gc.html\"><span class=\"kw2\">Gc</span></a><span class=\"sy0\">.</span>get <span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"kw1\">with</span> <a href=\"http://caml.inria.fr/pub/docs/manual-ocaml/libref/Gc.html\"><span class=\"kw2\">Gc</span></a><span class=\"sy0\">.</span>space_overhead <span class=\"sy0\">=</span> <span class=\"nu0\">500</span><span class=\"br0\">}</span><span class=\"br0\">)</span><span class=\"sy0\">;</span> <span class=\"co1\">(* May help except with an underRAMed system *)</span><br/>  queens <span class=\"br0\">(</span><a href=\"http://caml.inria.fr/pub/docs/manual-ocaml/libref/Pervasives.html#VALint_of_string\"><span class=\"kw3\">int_of_string</span></a> <a href=\"http://caml.inria.fr/pub/docs/manual-ocaml/libref/Sys.html\"><span class=\"kw2\">Sys</span></a><span class=\"sy0\">.</span>argv<span class=\"sy0\">.</span><span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"sy0\">;;</span></pre>"}, {"lang": "Oz", "loc": 68, "block": "<pre class=\"oz highlighted_source\"><span class=\"kw1\">declare</span><br/>  <span class=\"kw1\">fun</span> <span class=\"br0\">{</span><span class=\"re1\">Queens</span> N<span class=\"br0\">}</span><br/>     <span class=\"kw1\">proc</span> <span class=\"br0\">{</span><span class=\"re1\">$</span> Board<span class=\"br0\">}</span><br/>        <span class=\"co1\">%% a board is a N-tuple of rows</span><br/>        Board = <span class=\"br0\">{</span>MakeTuple queens N<span class=\"br0\">}</span><br/>        <span class=\"kw1\">for</span> Y <span class=\"kw1\">in</span> 1<span class=\"sy0\">..</span>N  <span class=\"kw1\">do</span><br/>           <span class=\"co1\">%% a row is a N-tuple of values in [0,1]</span><br/>           <span class=\"co1\">%% (0: no queen, 1: queen)</span><br/>           Board<span class=\"sy0\">.</span>Y = <span class=\"br0\">{</span>FD<span class=\"sy0\">.</span>tuple row N 0<span class=\"sy0\">#</span>1<span class=\"br0\">}</span><br/>        <span class=\"kw1\">end</span><br/>\u00a0<br/>        <span class=\"br0\">{</span>ForAll <span class=\"br0\">{</span>Rows Board<span class=\"br0\">}</span> SumIs1<span class=\"br0\">}</span><br/>        <span class=\"br0\">{</span>ForAll <span class=\"br0\">{</span>Columns Board<span class=\"br0\">}</span> SumIs1<span class=\"br0\">}</span><br/>\u00a0<br/>        <span class=\"co1\">%% for every two points on a diagonal</span><br/>        <span class=\"kw1\">for</span> <span class=\"br0\">[</span>X1<span class=\"sy0\">#</span>Y1 X2<span class=\"sy0\">#</span>Y2<span class=\"br0\">]</span> <span class=\"kw1\">in</span> <span class=\"br0\">{</span>DiagonalPairs N<span class=\"br0\">}</span> <span class=\"kw1\">do</span><br/>           <span class=\"co1\">%$ at most one of them has a queen</span><br/>           Board<span class=\"sy0\">.</span>Y1<span class=\"sy0\">.</span>X1 <span class=\"sy0\">+</span> Board<span class=\"sy0\">.</span>Y2<span class=\"sy0\">.</span>X2 <span class=\"sy0\">=&lt;:</span> 1<br/>        <span class=\"kw1\">end</span><br/>\u00a0<br/>        <span class=\"co1\">%% enumerate all such boards</span><br/>        <span class=\"br0\">{</span>FD<span class=\"sy0\">.</span>distribute naive <span class=\"br0\">{</span>FlatBoard Board<span class=\"br0\">}</span><span class=\"br0\">}</span><br/>     <span class=\"kw1\">end</span><br/>  <span class=\"kw1\">end</span><br/>\u00a0<br/>  <span class=\"kw1\">fun</span> <span class=\"br0\">{</span><span class=\"re1\">Rows</span> Board<span class=\"br0\">}</span><br/>     <span class=\"br0\">{</span>Record<span class=\"sy0\">.</span>toList Board<span class=\"br0\">}</span><br/>  <span class=\"kw1\">end</span><br/>\u00a0<br/>  <span class=\"kw1\">fun</span> <span class=\"br0\">{</span><span class=\"re1\">Columns</span> Board<span class=\"br0\">}</span><br/>     <span class=\"kw1\">for</span> X <span class=\"kw1\">in</span> <span class=\"br0\">{</span>Arity Board<span class=\"sy0\">.</span>1<span class=\"br0\">}</span> collect:C1 <span class=\"kw1\">do</span><br/>        <span class=\"br0\">{</span>C1<br/>         <span class=\"kw1\">for</span> Y <span class=\"kw1\">in</span> <span class=\"br0\">{</span>Arity Board<span class=\"br0\">}</span> collect:C2 <span class=\"kw1\">do</span><br/>            <span class=\"br0\">{</span>C2 Board<span class=\"sy0\">.</span>Y<span class=\"sy0\">.</span>X<span class=\"br0\">}</span><br/>         <span class=\"kw1\">end</span><span class=\"br0\">}</span><br/>     <span class=\"kw1\">end</span><br/>  <span class=\"kw1\">end</span><br/>\u00a0<br/>  <span class=\"kw1\">proc</span> <span class=\"br0\">{</span><span class=\"re1\">SumIs1</span> Xs<span class=\"br0\">}</span><br/>     <span class=\"br0\">{</span>FD<span class=\"sy0\">.</span>sum Xs <span class=\"st0\">'=:'</span> 1<span class=\"br0\">}</span><br/>  <span class=\"kw1\">end</span><br/>\u00a0<br/>  <span class=\"kw1\">fun</span> <span class=\"br0\">{</span><span class=\"re1\">DiagonalPairs</span> N<span class=\"br0\">}</span><br/>     <span class=\"kw1\">proc</span> <span class=\"br0\">{</span><span class=\"re1\">Coords</span> Root<span class=\"br0\">}</span><br/>        <span class=\"br0\">[</span>X1<span class=\"sy0\">#</span>Y1 X2<span class=\"sy0\">#</span>Y2<span class=\"br0\">]</span> = Root<br/>        Diff<br/>     <span class=\"kw1\">in</span><br/>        X1<span class=\"sy0\">::</span>1<span class=\"sy0\">#</span>N Y1<span class=\"sy0\">::</span>1<span class=\"sy0\">#</span>N<br/>        X2<span class=\"sy0\">::</span>1<span class=\"sy0\">#</span>N Y2<span class=\"sy0\">::</span>1<span class=\"sy0\">#</span>N<br/>        <span class=\"co1\">%% (X1,Y1) and (X2,Y2) are on a diagonal if {Abs X2-X1} = {Abs Y2-Y1}</span><br/>        Diff<span class=\"sy0\">::</span>1<span class=\"sy0\">#</span>N<span class=\"sy0\">-</span>1<br/>        <span class=\"br0\">{</span>FD<span class=\"sy0\">.</span>distance X2 X1 <span class=\"st0\">'=:'</span> Diff<span class=\"br0\">}</span><br/>        <span class=\"br0\">{</span>FD<span class=\"sy0\">.</span>distance Y2 Y1 <span class=\"st0\">'=:'</span> Diff<span class=\"br0\">}</span><br/>        <span class=\"co1\">%% enumerate all such coordinates</span><br/>        <span class=\"br0\">{</span>FD<span class=\"sy0\">.</span>distribute naive <span class=\"br0\">[</span>X1 Y1 X2 Y2<span class=\"br0\">]</span><span class=\"br0\">}</span><br/>     <span class=\"kw1\">end</span><br/>  <span class=\"kw1\">in</span><br/>     <span class=\"br0\">{</span>SearchAll Coords<span class=\"br0\">}</span><br/>  <span class=\"kw1\">end</span><br/>\u00a0<br/>  <span class=\"kw1\">fun</span> <span class=\"br0\">{</span><span class=\"re1\">FlatBoard</span> Board<span class=\"br0\">}</span><br/>     <span class=\"br0\">{</span>Flatten <span class=\"br0\">{</span>Record<span class=\"sy0\">.</span>toList <span class=\"br0\">{</span>Record<span class=\"sy0\">.</span>map Board Record<span class=\"sy0\">.</span>toList<span class=\"br0\">}</span><span class=\"br0\">}</span><span class=\"br0\">}</span><br/>  <span class=\"kw1\">end</span><br/>\u00a0<br/>  Solutions = <span class=\"br0\">{</span>SearchAll <span class=\"br0\">{</span>Queens 8<span class=\"br0\">}</span><span class=\"br0\">}</span><br/><span class=\"kw1\">in</span><br/>  <span class=\"br0\">{</span>Length Solutions<span class=\"br0\">}</span> = 92 <span class=\"co1\">%% assert</span><br/>  <span class=\"br0\">{</span>Inspect <span class=\"br0\">{</span>List<span class=\"sy0\">.</span>take Solutions 3<span class=\"br0\">}</span><span class=\"br0\">}</span></pre>"}, {"lang": "Pascal", "loc": 81, "block": "<pre class=\"pascal highlighted_source\"><span class=\"kw1\">program</span> queens<span class=\"sy1\">;</span><br/>\u00a0<br/><span class=\"kw1\">const</span> l<span class=\"sy3\">=</span><span class=\"nu0\">16</span><span class=\"sy1\">;</span><br/>\u00a0<br/><span class=\"kw1\">var</span> i<span class=\"sy1\">,</span>j<span class=\"sy1\">,</span>k<span class=\"sy1\">,</span>m<span class=\"sy1\">,</span>n<span class=\"sy1\">,</span>p<span class=\"sy1\">,</span>q<span class=\"sy1\">,</span>r<span class=\"sy1\">,</span>y<span class=\"sy1\">,</span>z<span class=\"sy1\">:</span> <span class=\"kw4\">integer</span><span class=\"sy1\">;</span><br/>    a<span class=\"sy1\">,</span>s<span class=\"sy1\">:</span> <span class=\"kw4\">array</span><span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"sy1\">..</span><span class=\"me1\">l</span><span class=\"br0\">]</span> <span class=\"kw1\">of</span> <span class=\"kw4\">integer</span><span class=\"sy1\">;</span><br/>    u<span class=\"sy1\">:</span> <span class=\"kw4\">array</span><span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"sy1\">..</span><span class=\"nu0\">4</span><span class=\"sy3\">*</span>l<span class=\"sy3\">-</span><span class=\"nu0\">2</span><span class=\"br0\">]</span> <span class=\"kw1\">of</span> <span class=\"kw4\">integer</span><span class=\"sy1\">;</span><br/>\u00a0<br/><span class=\"kw1\">label</span> L3<span class=\"sy1\">,</span>L4<span class=\"sy1\">,</span>L5<span class=\"sy1\">,</span>L6<span class=\"sy1\">,</span>L7<span class=\"sy1\">,</span>L8<span class=\"sy1\">,</span>L9<span class=\"sy1\">,</span>L10<span class=\"sy1\">;</span><br/>\u00a0<br/><span class=\"kw1\">begin</span><br/>   <span class=\"kw1\">for</span> i<span class=\"sy1\">:</span><span class=\"sy3\">=</span><span class=\"nu0\">1</span> <span class=\"kw1\">to</span> l <span class=\"kw1\">do</span> a<span class=\"br0\">[</span>i<span class=\"br0\">]</span><span class=\"sy1\">:</span><span class=\"sy3\">=</span>i<span class=\"sy1\">;</span><br/>   <span class=\"kw1\">for</span> i<span class=\"sy1\">:</span><span class=\"sy3\">=</span><span class=\"nu0\">1</span> <span class=\"kw1\">to</span> <span class=\"nu0\">4</span><span class=\"sy3\">*</span>l<span class=\"sy3\">-</span><span class=\"nu0\">2</span> <span class=\"kw1\">do</span> u<span class=\"br0\">[</span>i<span class=\"br0\">]</span><span class=\"sy1\">:</span><span class=\"sy3\">=</span><span class=\"nu0\">0</span><span class=\"sy1\">;</span><br/>   <span class=\"kw1\">for</span> n<span class=\"sy1\">:</span><span class=\"sy3\">=</span><span class=\"nu0\">1</span> <span class=\"kw1\">to</span> l <span class=\"kw1\">do</span><br/>   <span class=\"kw1\">begin</span><br/>      m<span class=\"sy1\">:</span><span class=\"sy3\">=</span><span class=\"nu0\">0</span><span class=\"sy1\">;</span><br/>      i<span class=\"sy1\">:</span><span class=\"sy3\">=</span><span class=\"nu0\">1</span><span class=\"sy1\">;</span><br/>      r<span class=\"sy1\">:</span><span class=\"sy3\">=</span><span class=\"nu0\">2</span><span class=\"sy3\">*</span>n<span class=\"sy3\">-</span><span class=\"nu0\">1</span><span class=\"sy1\">;</span><br/>      <span class=\"kw1\">goto</span> L4<span class=\"sy1\">;</span><br/>L3<span class=\"sy1\">:</span><br/>      s<span class=\"br0\">[</span>i<span class=\"br0\">]</span><span class=\"sy1\">:</span><span class=\"sy3\">=</span>j<span class=\"sy1\">;</span><br/>      u<span class=\"br0\">[</span>p<span class=\"br0\">]</span><span class=\"sy1\">:</span><span class=\"sy3\">=</span><span class=\"nu0\">1</span><span class=\"sy1\">;</span><br/>      u<span class=\"br0\">[</span>q<span class=\"sy3\">+</span>r<span class=\"br0\">]</span><span class=\"sy1\">:</span><span class=\"sy3\">=</span><span class=\"nu0\">1</span><span class=\"sy1\">;</span><br/>      i<span class=\"sy1\">:</span><span class=\"sy3\">=</span>i<span class=\"sy3\">+</span><span class=\"nu0\">1</span><span class=\"sy1\">;</span><br/>L4<span class=\"sy1\">:</span><br/>      <span class=\"kw1\">if</span> i&gt;n <span class=\"kw1\">then</span> <span class=\"kw1\">goto</span> L8<span class=\"sy1\">;</span><br/>      j<span class=\"sy1\">:</span><span class=\"sy3\">=</span>i<span class=\"sy1\">;</span><br/>L5<span class=\"sy1\">:</span><br/>      z<span class=\"sy1\">:</span><span class=\"sy3\">=</span>a<span class=\"br0\">[</span>i<span class=\"br0\">]</span><span class=\"sy1\">;</span><br/>      y<span class=\"sy1\">:</span><span class=\"sy3\">=</span>a<span class=\"br0\">[</span>j<span class=\"br0\">]</span><span class=\"sy1\">;</span><br/>      p<span class=\"sy1\">:</span><span class=\"sy3\">=</span>i<span class=\"sy3\">-</span>y<span class=\"sy3\">+</span>n<span class=\"sy1\">;</span><br/>      q<span class=\"sy1\">:</span><span class=\"sy3\">=</span>i<span class=\"sy3\">+</span>y<span class=\"sy3\">-</span><span class=\"nu0\">1</span><span class=\"sy1\">;</span><br/>      a<span class=\"br0\">[</span>i<span class=\"br0\">]</span><span class=\"sy1\">:</span><span class=\"sy3\">=</span>y<span class=\"sy1\">;</span><br/>      a<span class=\"br0\">[</span>j<span class=\"br0\">]</span><span class=\"sy1\">:</span><span class=\"sy3\">=</span>z<span class=\"sy1\">;</span><br/>      <span class=\"kw1\">if</span> <span class=\"br0\">(</span>u<span class=\"br0\">[</span>p<span class=\"br0\">]</span><span class=\"sy3\">=</span><span class=\"nu0\">0</span><span class=\"br0\">)</span> <span class=\"kw3\">and</span> <span class=\"br0\">(</span>u<span class=\"br0\">[</span>q<span class=\"sy3\">+</span>r<span class=\"br0\">]</span><span class=\"sy3\">=</span><span class=\"nu0\">0</span><span class=\"br0\">)</span> <span class=\"kw1\">then</span> <span class=\"kw1\">goto</span> L3<span class=\"sy1\">;</span><br/>L6<span class=\"sy1\">:</span><br/>      j<span class=\"sy1\">:</span><span class=\"sy3\">=</span>j<span class=\"sy3\">+</span><span class=\"nu0\">1</span><span class=\"sy1\">;</span><br/>      <span class=\"kw1\">if</span> j&lt;<span class=\"sy3\">=</span>n <span class=\"kw1\">then</span> <span class=\"kw1\">goto</span> L5<span class=\"sy1\">;</span><br/>L7<span class=\"sy1\">:</span><br/>      j<span class=\"sy1\">:</span><span class=\"sy3\">=</span>j<span class=\"sy3\">-</span><span class=\"nu0\">1</span><span class=\"sy1\">;</span><br/>      <span class=\"kw1\">if</span> j<span class=\"sy3\">=</span>i <span class=\"kw1\">then</span> <span class=\"kw1\">goto</span> L9<span class=\"sy1\">;</span><br/>      z<span class=\"sy1\">:</span><span class=\"sy3\">=</span>a<span class=\"br0\">[</span>i<span class=\"br0\">]</span><span class=\"sy1\">;</span><br/>      a<span class=\"br0\">[</span>i<span class=\"br0\">]</span><span class=\"sy1\">:</span><span class=\"sy3\">=</span>a<span class=\"br0\">[</span>j<span class=\"br0\">]</span><span class=\"sy1\">;</span><br/>      a<span class=\"br0\">[</span>j<span class=\"br0\">]</span><span class=\"sy1\">:</span><span class=\"sy3\">=</span>z<span class=\"sy1\">;</span><br/>      <span class=\"kw1\">goto</span> L7<span class=\"sy1\">;</span><br/>L8<span class=\"sy1\">:</span><br/>      m<span class=\"sy1\">:</span><span class=\"sy3\">=</span>m<span class=\"sy3\">+</span><span class=\"nu0\">1</span><span class=\"sy1\">;</span><br/>      <span class=\"coMULTI\">{ uncomment the following to print solutions }</span><br/>      <span class=\"coMULTI\">{ write(n,' ',m,':');<br/>      for k:=1 to n do write(' ',a[k]);<br/>      writeln; }</span><br/>L9<span class=\"sy1\">:</span><br/>      i<span class=\"sy1\">:</span><span class=\"sy3\">=</span>i<span class=\"sy3\">-</span><span class=\"nu0\">1</span><span class=\"sy1\">;</span><br/>      <span class=\"kw1\">if</span> i<span class=\"sy3\">=</span><span class=\"nu0\">0</span> <span class=\"kw1\">then</span> <span class=\"kw1\">goto</span> L10<span class=\"sy1\">;</span><br/>      p<span class=\"sy1\">:</span><span class=\"sy3\">=</span>i<span class=\"sy3\">-</span>a<span class=\"br0\">[</span>i<span class=\"br0\">]</span><span class=\"sy3\">+</span>n<span class=\"sy1\">;</span><br/>      q<span class=\"sy1\">:</span><span class=\"sy3\">=</span>i<span class=\"sy3\">+</span>a<span class=\"br0\">[</span>i<span class=\"br0\">]</span><span class=\"sy3\">-</span><span class=\"nu0\">1</span><span class=\"sy1\">;</span><br/>      j<span class=\"sy1\">:</span><span class=\"sy3\">=</span>s<span class=\"br0\">[</span>i<span class=\"br0\">]</span><span class=\"sy1\">;</span><br/>      u<span class=\"br0\">[</span>p<span class=\"br0\">]</span><span class=\"sy1\">:</span><span class=\"sy3\">=</span><span class=\"nu0\">0</span><span class=\"sy1\">;</span><br/>      u<span class=\"br0\">[</span>q<span class=\"sy3\">+</span>r<span class=\"br0\">]</span><span class=\"sy1\">:</span><span class=\"sy3\">=</span><span class=\"nu0\">0</span><span class=\"sy1\">;</span><br/>      <span class=\"kw1\">goto</span> L6<span class=\"sy1\">;</span><br/>L10<span class=\"sy1\">:</span><br/>      <span class=\"kw3\">writeln</span><span class=\"br0\">(</span>n<span class=\"sy1\">,</span><span class=\"st0\">' '</span><span class=\"sy1\">,</span>m<span class=\"br0\">)</span><span class=\"sy1\">;</span><br/>   <span class=\"kw1\">end</span><span class=\"sy1\">;</span><br/><span class=\"kw1\">end</span><span class=\"sy1\">.</span><br/>\u00a0<br/><span class=\"coMULTI\">{ 1 1<br/>  2 0<br/>  3 0<br/>  4 2<br/>  5 10<br/>  6 4<br/>  7 40<br/>  8 92<br/>  9 352<br/> 10 724<br/> 11 2680<br/> 12 14200<br/> 13 73712<br/> 14 365596<br/> 15 2279184<br/> 16 14772512 }</span></pre>"}, {"lang": "Perl", "loc": 41, "block": "<pre class=\"perl highlighted_source\"><span class=\"kw1\">my</span> <span class=\"br0\">(</span><span class=\"re0\">$board_size</span><span class=\"sy0\">,</span> <span class=\"re0\">@occupied</span><span class=\"sy0\">,</span> <span class=\"re0\">@past</span><span class=\"sy0\">,</span> <span class=\"re0\">@solutions</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>\u00a0<br/><span class=\"kw2\">sub</span> try_column <span class=\"br0\">{</span><br/>        <span class=\"kw1\">my</span> <span class=\"br0\">(</span><span class=\"re0\">$depth</span><span class=\"sy0\">,</span> <span class=\"re0\">@diag</span><span class=\"br0\">)</span> <span class=\"sy0\">=</span> <a href=\"http://perldoc.perl.org/functions/shift.html\"><span class=\"kw3\">shift</span></a><span class=\"sy0\">;</span><br/>        <span class=\"kw1\">if</span> <span class=\"br0\">(</span><span class=\"re0\">$depth</span> <span class=\"sy0\">==</span> <span class=\"re0\">$board_size</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>                <a href=\"http://perldoc.perl.org/functions/push.html\"><span class=\"kw3\">push</span></a> <span class=\"re0\">@solutions</span><span class=\"sy0\">,</span> <span class=\"st0\">\"@past<span class=\"es0\">\\n</span>\"</span><span class=\"sy0\">;</span><br/>                <a href=\"http://perldoc.perl.org/functions/return.html\"><span class=\"kw3\">return</span></a><span class=\"sy0\">;</span><br/>        <span class=\"br0\">}</span><br/>\u00a0<br/>        <span class=\"co1\"># @diag: marks cells diagonally attackable by any previous queens.</span><br/>        <span class=\"co1\">#        Here it's pre-allocated to double size just so we don't need</span><br/>        <span class=\"co1\">#        to worry about negative indices.</span><br/>        <span class=\"re0\">$#diag</span> <span class=\"sy0\">=</span> <span class=\"nu0\">2</span> <span class=\"sy0\">*</span> <span class=\"re0\">$board_size</span><span class=\"sy0\">;</span><br/>        <span class=\"kw1\">for</span> <span class=\"br0\">(</span><span class=\"nu0\">0</span> <span class=\"sy0\">..</span> <span class=\"re0\">$#past</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>                <span class=\"re0\">$diag</span><span class=\"br0\">[</span> <span class=\"re0\">$past</span><span class=\"br0\">[</span><span class=\"co5\">$_</span><span class=\"br0\">]</span> <span class=\"sy0\">+</span> <span class=\"re0\">$depth</span> <span class=\"sy0\">-</span> <span class=\"co5\">$_</span> <span class=\"br0\">]</span> <span class=\"sy0\">=</span> <span class=\"nu0\">1</span><span class=\"sy0\">;</span><br/>                <span class=\"re0\">$diag</span><span class=\"br0\">[</span> <span class=\"re0\">$past</span><span class=\"br0\">[</span><span class=\"co5\">$_</span><span class=\"br0\">]</span> <span class=\"sy0\">-</span> <span class=\"re0\">$depth</span> <span class=\"sy0\">+</span> <span class=\"co5\">$_</span> <span class=\"br0\">]</span> <span class=\"sy0\">=</span> <span class=\"nu0\">1</span><span class=\"sy0\">;</span><br/>        <span class=\"br0\">}</span><br/>\u00a0<br/>        <span class=\"kw1\">for</span> <span class=\"kw1\">my</span> <span class=\"re0\">$row</span> <span class=\"br0\">(</span><span class=\"nu0\">0</span> <span class=\"sy0\">..</span> <span class=\"re0\">$board_size</span> <span class=\"sy0\">-</span> <span class=\"nu0\">1</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>                <span class=\"kw1\">next</span> <span class=\"kw1\">if</span> <span class=\"re0\">$occupied</span><span class=\"br0\">[</span><span class=\"re0\">$row</span><span class=\"br0\">]</span> <span class=\"sy0\">||</span> <span class=\"re0\">$diag</span><span class=\"br0\">[</span><span class=\"re0\">$row</span><span class=\"br0\">]</span><span class=\"sy0\">;</span><br/>\u00a0<br/>                <span class=\"co1\"># @past:     row numbers of previous queens</span><br/>                <span class=\"co1\"># @occupied: rows already used. This gets inherited by each</span><br/>                <span class=\"co1\">#            recursion so we don't need to repeatedly look them up</span><br/>                <a href=\"http://perldoc.perl.org/functions/push.html\"><span class=\"kw3\">push</span></a> <span class=\"re0\">@past</span><span class=\"sy0\">,</span> <span class=\"re0\">$row</span><span class=\"sy0\">;</span><br/>                <span class=\"re0\">$occupied</span><span class=\"br0\">[</span><span class=\"re0\">$row</span><span class=\"br0\">]</span> <span class=\"sy0\">=</span> <span class=\"nu0\">1</span><span class=\"sy0\">;</span><br/>\u00a0<br/>                try_column<span class=\"br0\">(</span><span class=\"re0\">$depth</span> <span class=\"sy0\">+</span> <span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>\u00a0<br/>                <span class=\"co1\"># clean up, for next recursion</span><br/>                <span class=\"re0\">$occupied</span><span class=\"br0\">[</span><span class=\"re0\">$row</span><span class=\"br0\">]</span> <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span><br/>                <a href=\"http://perldoc.perl.org/functions/pop.html\"><span class=\"kw3\">pop</span></a> <span class=\"re0\">@past</span><span class=\"sy0\">;</span><br/>        <span class=\"br0\">}</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"re0\">$board_size</span> <span class=\"sy0\">=</span> <span class=\"nu0\">12</span><span class=\"sy0\">;</span>  <span class=\"co1\"># takes a minute or so, 14,200 solutions</span><br/>try_column<span class=\"br0\">(</span><span class=\"nu0\">0</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>\u00a0<br/><a href=\"http://perldoc.perl.org/functions/local.html\"><span class=\"kw3\">local</span></a> <span class=\"co5\">$\"</span> <span class=\"sy0\">=</span> <span class=\"st0\">\"<span class=\"es0\">\\n</span>\"</span><span class=\"sy0\">;</span><br/><a href=\"http://perldoc.perl.org/functions/print.html\"><span class=\"kw3\">print</span></a> <span class=\"re0\">@solutions</span><span class=\"sy0\">;</span><br/><a href=\"http://perldoc.perl.org/functions/print.html\"><span class=\"kw3\">print</span></a> <span class=\"st0\">\"total \"</span><span class=\"sy0\">,</span> <a href=\"http://perldoc.perl.org/functions/scalar.html\"><span class=\"kw3\">scalar</span></a><span class=\"br0\">(</span><span class=\"re0\">@solutions</span><span class=\"br0\">)</span><span class=\"sy0\">,</span> <span class=\"st0\">\" solutions<span class=\"es0\">\\n</span>\"</span><span class=\"sy0\">;</span></pre>"}, {"lang": "Perl 6", "loc": 24, "block": "<pre class=\"perl6 highlighted_source\"><span class=\"kw2\">sub</span> MAIN<span class=\"br0\">(</span>\\N <span class=\"sy0\">=</span> <span class=\"nu0\">8</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>    <span class=\"kw2\">sub</span> collision<span class=\"br0\">(</span><span class=\"re0\">@field</span><span class=\"sy0\">,</span> <span class=\"re0\">$row</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>        <span class=\"kw1\">for</span> <span class=\"sy0\">^</span><span class=\"re0\">$row</span> <span class=\"sy0\">-&gt;</span> <span class=\"re0\">$i</span> <span class=\"br0\">{</span><br/>            <span class=\"kw1\">my</span> <span class=\"re0\">$distance</span> <span class=\"sy0\">=</span> <span class=\"re0\">@field</span><span class=\"br0\">[</span><span class=\"re0\">$i</span><span class=\"br0\">]</span> <span class=\"sy0\">-</span> <span class=\"re0\">@field</span><span class=\"br0\">[</span><span class=\"re0\">$row</span><span class=\"br0\">]</span><span class=\"sy0\">;</span><br/>            <span class=\"kw1\">return</span> <span class=\"kw1\">True</span> <span class=\"kw1\">if</span> <span class=\"re0\">$distance</span> <span class=\"sy0\">==</span> <span class=\"kw3\">any</span><span class=\"br0\">(</span><span class=\"nu0\">0</span><span class=\"sy0\">,</span> <span class=\"re0\">$row</span> <span class=\"sy0\">-</span> <span class=\"re0\">$i</span><span class=\"sy0\">,</span> <span class=\"re0\">$i</span> <span class=\"sy0\">-</span> <span class=\"re0\">$row</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        <span class=\"br0\">}</span><br/>        <span class=\"kw1\">False</span><span class=\"sy0\">;</span><br/>    <span class=\"br0\">}</span><br/>    <span class=\"kw2\">sub</span> search<span class=\"br0\">(</span><span class=\"re0\">@field</span><span class=\"sy0\">,</span> <span class=\"re0\">$row</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>        <span class=\"kw1\">return</span> <span class=\"re0\">@field</span> <span class=\"kw1\">if</span> <span class=\"re0\">$row</span> <span class=\"sy0\">==</span> N<span class=\"sy0\">;</span><br/>        <span class=\"kw1\">for</span> <span class=\"sy0\">^</span>N <span class=\"sy0\">-&gt;</span> <span class=\"re0\">$i</span> <span class=\"br0\">{</span><br/>            <span class=\"re0\">@field</span><span class=\"br0\">[</span><span class=\"re0\">$row</span><span class=\"br0\">]</span> <span class=\"sy0\">=</span> <span class=\"re0\">$i</span><span class=\"sy0\">;</span><br/>            <span class=\"kw1\">return</span> search<span class=\"br0\">(</span><span class=\"re0\">@field</span><span class=\"sy0\">,</span> <span class=\"re0\">$row</span> <span class=\"sy0\">+</span> <span class=\"nu0\">1</span><span class=\"br0\">)</span> <span class=\"sy0\">||</span> <span class=\"kw1\">next</span><br/>                <span class=\"kw1\">unless</span> collision<span class=\"br0\">(</span><span class=\"re0\">@field</span><span class=\"sy0\">,</span> <span class=\"re0\">$row</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        <span class=\"br0\">}</span><br/>        <span class=\"br0\">(</span><span class=\"br0\">)</span><br/>    <span class=\"br0\">}</span><br/>    <span class=\"kw1\">for</span> <span class=\"nu0\">0</span> <span class=\"sy0\">..</span> <span class=\"me1\">N</span> <span class=\"sy0\">/</span> <span class=\"nu0\">2</span> <span class=\"br0\">{</span><br/>        <span class=\"kw1\">if</span> search <span class=\"br0\">[</span><span class=\"re0\">$_</span><span class=\"br0\">]</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span> <span class=\"sy0\">-&gt;</span> <span class=\"re0\">@f</span> <span class=\"br0\">{</span><br/>            <span class=\"kw3\">say</span> <span class=\"re0\">@f</span><span class=\"sy0\">;</span><br/>            <span class=\"kw1\">last</span><span class=\"sy0\">;</span><br/>        <span class=\"br0\">}</span><br/>    <span class=\"br0\">}</span><br/><span class=\"br0\">}</span></pre>"}, {"lang": "Phix", "loc": 54, "block": "<pre class=\"text highlighted_source\">--<br/>-- demo\\rosetta\\n_queens.exw<br/>-- =========================<br/>--<br/>sequence co,    -- columns occupied<br/>                -- (ro is implicit)<br/>         fd,    -- forward diagonals<br/>         bd,    -- backward diagonals<br/>         board<br/>\u00a0<br/>atom count<br/>\u00a0<br/>procedure solve(integer row, integer N, integer show)<br/>    for col=1 to N do<br/>        if not co[col] then<br/>            integer fdi = col+row-1,<br/>                    bdi = row-col+N<br/>            if not fd[fdi]<br/>            and not bd[bdi] then<br/>                board[row][col] = 'Q'<br/>                co[col] = 1<br/>                fd[fdi] = 1<br/>                bd[bdi] = 1<br/>                if row=N then<br/>                    if show then<br/>                        puts(1,join(board,\"\\n\")&amp;\"\\n\")<br/>                        puts(1,repeat('=',N)&amp;\"\\n\")<br/>                    end if<br/>                    count += 1<br/>                else<br/>                    solve(row+1,N,show)<br/>                end if<br/>                board[row][col] = '.'<br/>                co[col] = 0<br/>                fd[fdi] = 0<br/>                bd[bdi] = 0<br/>            end if<br/>        end if<br/>    end for<br/>end procedure<br/>\u00a0<br/>procedure n_queens(integer N=8, integer show=1)<br/>    co = repeat(0,N)<br/>    fd = repeat(0,N*2-1)<br/>    bd = repeat(0,N*2-1)<br/>    board  = repeat(repeat('.',N),N)<br/>    count = 0<br/>    solve(1,N,show)<br/>    printf(1,\"%d queens:\u00a0%d solutions\\n\",{N,count})<br/>end procedure<br/>\u00a0<br/>for N=1 to 14 do<br/>    n_queens(N,N&lt;5)<br/>end for</pre>"}, {"lang": "PHP", "loc": 177, "block": "<pre class=\"php highlighted_source\">\u00a0<br/>&lt;html&gt;<br/>&lt;head&gt;<br/>&lt;title&gt;<br/>n x n Queen solving program<br/>&lt;/title&gt;<br/>&lt;/head&gt;<br/>&lt;body&gt;<br/><span class=\"kw2\">&lt;?php</span><br/><span class=\"kw1\">echo</span> <span class=\"st0\">\"&lt;h1&gt;n x n Queen solving program&lt;/h1&gt;\"</span><span class=\"sy0\">;</span><br/>\u00a0<br/><span class=\"co1\">//Get the size of the board</span><br/><span class=\"re0\">$boardX</span> <span class=\"sy0\">=</span> <span class=\"re0\">$_POST</span><span class=\"br0\">[</span><span class=\"st_h\">'boardX'</span><span class=\"br0\">]</span><span class=\"sy0\">;</span><br/><span class=\"re0\">$boardY</span> <span class=\"sy0\">=</span> <span class=\"re0\">$_POST</span><span class=\"br0\">[</span><span class=\"st_h\">'boardX'</span><span class=\"br0\">]</span><span class=\"sy0\">;</span><br/>\u00a0<br/><span class=\"co1\">// Function to rotate a board 90 degrees</span><br/><span class=\"kw2\">function</span> rotateBoard<span class=\"br0\">(</span><span class=\"re0\">$p</span><span class=\"sy0\">,</span> <span class=\"re0\">$boardX</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/><span class=\"re0\">$a</span><span class=\"sy0\">=</span><span class=\"nu0\">0</span><span class=\"sy0\">;</span><br/><span class=\"kw1\">while</span> <span class=\"br0\">(</span><span class=\"re0\">$a</span> <span class=\"sy0\">&lt;</span> <a href=\"http://www.php.net/count\"><span class=\"kw3\">count</span></a><span class=\"br0\">(</span><span class=\"re0\">$p</span><span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>\t<span class=\"re0\">$b</span> <span class=\"sy0\">=</span> <a href=\"http://www.php.net/strlen\"><span class=\"kw3\">strlen</span></a><span class=\"br0\">(</span><a href=\"http://www.php.net/decbin\"><span class=\"kw3\">decbin</span></a><span class=\"br0\">(</span><span class=\"re0\">$p</span><span class=\"br0\">[</span><span class=\"re0\">$a</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"sy0\">-</span><span class=\"nu0\">1</span><span class=\"sy0\">;</span><br/>\t<span class=\"re0\">$tmp</span><span class=\"br0\">[</span><span class=\"re0\">$b</span><span class=\"br0\">]</span> <span class=\"sy0\">=</span> <span class=\"nu0\">1</span> <span class=\"sy0\">&lt;&lt;</span> <span class=\"br0\">(</span><span class=\"re0\">$boardX</span> <span class=\"sy0\">-</span> <span class=\"re0\">$a</span> <span class=\"sy0\">-</span> <span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>\t<span class=\"sy0\">++</span><span class=\"re0\">$a</span><span class=\"sy0\">;</span><br/>\t<span class=\"br0\">}</span><br/><a href=\"http://www.php.net/ksort\"><span class=\"kw3\">ksort</span></a><span class=\"br0\">(</span><span class=\"re0\">$tmp</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/><span class=\"kw1\">return</span> <span class=\"re0\">$tmp</span><span class=\"sy0\">;</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"co1\">// This function will find rotations of a solution</span><br/><span class=\"kw2\">function</span> findRotation<span class=\"br0\">(</span><span class=\"re0\">$p</span><span class=\"sy0\">,</span> <span class=\"re0\">$boardX</span><span class=\"sy0\">,</span><span class=\"re0\">$solutions</span><span class=\"br0\">)</span><span class=\"br0\">{</span><br/><span class=\"re0\">$tmp</span> <span class=\"sy0\">=</span> rotateBoard<span class=\"br0\">(</span><span class=\"re0\">$p</span><span class=\"sy0\">,</span><span class=\"re0\">$boardX</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/><span class=\"co1\">// Rotated 90</span><br/><span class=\"kw1\">if</span> <span class=\"br0\">(</span><a href=\"http://www.php.net/in_array\"><span class=\"kw3\">in_array</span></a><span class=\"br0\">(</span><span class=\"re0\">$tmp</span><span class=\"sy0\">,</span><span class=\"re0\">$solutions</span><span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><span class=\"br0\">}</span><br/><span class=\"kw1\">else</span> <span class=\"br0\">{</span><span class=\"re0\">$solutions</span><span class=\"br0\">[</span><span class=\"br0\">]</span> <span class=\"sy0\">=</span> <span class=\"re0\">$tmp</span><span class=\"sy0\">;</span><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"re0\">$tmp</span> <span class=\"sy0\">=</span> rotateBoard<span class=\"br0\">(</span><span class=\"re0\">$tmp</span><span class=\"sy0\">,</span><span class=\"re0\">$boardX</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/><span class=\"co1\">// Rotated 180</span><br/><span class=\"kw1\">if</span> <span class=\"br0\">(</span><a href=\"http://www.php.net/in_array\"><span class=\"kw3\">in_array</span></a><span class=\"br0\">(</span><span class=\"re0\">$tmp</span><span class=\"sy0\">,</span><span class=\"re0\">$solutions</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">{</span><span class=\"br0\">}</span><br/><span class=\"kw1\">else</span> <span class=\"br0\">{</span><span class=\"re0\">$solutions</span><span class=\"br0\">[</span><span class=\"br0\">]</span> <span class=\"sy0\">=</span> <span class=\"re0\">$tmp</span><span class=\"sy0\">;</span><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"re0\">$tmp</span> <span class=\"sy0\">=</span> rotateBoard<span class=\"br0\">(</span><span class=\"re0\">$tmp</span><span class=\"sy0\">,</span><span class=\"re0\">$boardX</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/><span class=\"co1\">// Rotated 270</span><br/><span class=\"kw1\">if</span> <span class=\"br0\">(</span><a href=\"http://www.php.net/in_array\"><span class=\"kw3\">in_array</span></a><span class=\"br0\">(</span><span class=\"re0\">$tmp</span><span class=\"sy0\">,</span><span class=\"re0\">$solutions</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">{</span><span class=\"br0\">}</span><br/><span class=\"kw1\">else</span> <span class=\"br0\">{</span><span class=\"re0\">$solutions</span><span class=\"br0\">[</span><span class=\"br0\">]</span> <span class=\"sy0\">=</span> <span class=\"re0\">$tmp</span><span class=\"sy0\">;</span><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"co1\">// Reflected</span><br/><span class=\"re0\">$tmp</span> <span class=\"sy0\">=</span> <a href=\"http://www.php.net/array_reverse\"><span class=\"kw3\">array_reverse</span></a><span class=\"br0\">(</span><span class=\"re0\">$p</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/><span class=\"kw1\">if</span> <span class=\"br0\">(</span><a href=\"http://www.php.net/in_array\"><span class=\"kw3\">in_array</span></a><span class=\"br0\">(</span><span class=\"re0\">$tmp</span><span class=\"sy0\">,</span><span class=\"re0\">$solutions</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">{</span><span class=\"br0\">}</span><br/><span class=\"kw1\">else</span> <span class=\"br0\">{</span><span class=\"re0\">$solutions</span><span class=\"br0\">[</span><span class=\"br0\">]</span> <span class=\"sy0\">=</span> <span class=\"re0\">$tmp</span><span class=\"sy0\">;</span><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"re0\">$tmp</span> <span class=\"sy0\">=</span> rotateBoard<span class=\"br0\">(</span><span class=\"re0\">$tmp</span><span class=\"sy0\">,</span><span class=\"re0\">$boardX</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/><span class=\"co1\">// Reflected and Rotated 90</span><br/><span class=\"kw1\">if</span> <span class=\"br0\">(</span><a href=\"http://www.php.net/in_array\"><span class=\"kw3\">in_array</span></a><span class=\"br0\">(</span><span class=\"re0\">$tmp</span><span class=\"sy0\">,</span><span class=\"re0\">$solutions</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">{</span><span class=\"br0\">}</span><br/><span class=\"kw1\">else</span> <span class=\"br0\">{</span><span class=\"re0\">$solutions</span><span class=\"br0\">[</span><span class=\"br0\">]</span> <span class=\"sy0\">=</span> <span class=\"re0\">$tmp</span><span class=\"sy0\">;</span><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"re0\">$tmp</span> <span class=\"sy0\">=</span> rotateBoard<span class=\"br0\">(</span><span class=\"re0\">$tmp</span><span class=\"sy0\">,</span><span class=\"re0\">$boardX</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/><span class=\"co1\">// Reflected and Rotated 180</span><br/><span class=\"kw1\">if</span> <span class=\"br0\">(</span><a href=\"http://www.php.net/in_array\"><span class=\"kw3\">in_array</span></a><span class=\"br0\">(</span><span class=\"re0\">$tmp</span><span class=\"sy0\">,</span><span class=\"re0\">$solutions</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">{</span><span class=\"br0\">}</span><br/><span class=\"kw1\">else</span> <span class=\"br0\">{</span><span class=\"re0\">$solutions</span><span class=\"br0\">[</span><span class=\"br0\">]</span> <span class=\"sy0\">=</span> <span class=\"re0\">$tmp</span><span class=\"sy0\">;</span><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"re0\">$tmp</span> <span class=\"sy0\">=</span> rotateBoard<span class=\"br0\">(</span><span class=\"re0\">$tmp</span><span class=\"sy0\">,</span><span class=\"re0\">$boardX</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/><span class=\"co1\">// Reflected and Rotated 270</span><br/><span class=\"kw1\">if</span> <span class=\"br0\">(</span><a href=\"http://www.php.net/in_array\"><span class=\"kw3\">in_array</span></a><span class=\"br0\">(</span><span class=\"re0\">$tmp</span><span class=\"sy0\">,</span><span class=\"re0\">$solutions</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">{</span><span class=\"br0\">}</span><br/><span class=\"kw1\">else</span> <span class=\"br0\">{</span><span class=\"re0\">$solutions</span><span class=\"br0\">[</span><span class=\"br0\">]</span> <span class=\"sy0\">=</span> <span class=\"re0\">$tmp</span><span class=\"sy0\">;</span><span class=\"br0\">}</span><br/><span class=\"kw1\">return</span> <span class=\"re0\">$solutions</span><span class=\"sy0\">;</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"co1\">// This is a function which will render the board</span><br/><span class=\"kw2\">function</span> renderBoard<span class=\"br0\">(</span><span class=\"re0\">$p</span><span class=\"sy0\">,</span><span class=\"re0\">$boardX</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/><span class=\"re0\">$img</span> <span class=\"sy0\">=</span> <span class=\"st_h\">'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAtCAYAAAA6GuKaAAAABmJLR0QA/wD/AP+gvaeTAAAGFUlEQVRYhe2YXWibVRjHf2lqP9JmaRi4YW1IalY3rbZsaddMgsquBm676b6KyNDhLiaUeSEMvPNCcNuNyJjgLiboCnoxKFlv6lcHy7AtMhhaWTVZWhisjDTEtEuW5PHiPWnfvH2TvNk6vekfDm/O+Z/zPP/3PM/5eAMb2MAG/nfYn4LNVuBj4ENgB/Ar8Ogp+KkJbwLfqvKGgbMBPwKiK+Oq3aqNdcebQEEnqAC8ruO7KBVcLF012KiKuhpFv0/prNlU239qw0x0pdBJFXt30NJDjx9Uu1Ub1TSYdq4UutcNfI61oW0Bflb8T6quRzUbNafPFdbm4zcmTucV91kZO18o/osy/GeKnzcRVFWDMT2shO4X4IL6/UqZPv2GpxHFcReUvVo1lMAYunKh+UTxeeB5A/cMkFF8RtX1eF6NE2XHTIN+ltekoHGmf0HLqe9V3Qb8ZWK4Xjf+HQP3KtCgfjeouh7v6PzWsxZ6f98De1kbjbIovumoCfcp2gzkgb8p3cJOUjpTJ3WcTfXPq/Gfmtge1Y01RaV9+jv1fAsYMnAu3XgfENJxfUoU6tmn40Kqf9Gvi1IMKX96/zWJnlLP4i7wrIEvzkQeeFfXvltnt07Vi3iX1RcyzuSzrO46ev81YS+rYcqjbUVFfIl2CSryS4ATcKCF3biQHIpf0rU/UnaKuMLqAhXlv2a4Dc4FOKi4bwyiBTgBvGYyRlT7CUPbI1b334MmY9zlhFVKjwQQ09ULaDNTNKYPbx54j9L81aNP8XldW3G8W9kt6LiY8m8Ksy1Hj0mgA+3eXYeWd2eBRkpf2A4MoO3JOYPdHPA2sMtgu07ZOavsFnegvPL72PiItWEroB0axtwtmPStxOeUHbNxH1USVe1qOm3SVkA7NIwX+1phU3YKJpyZX8swW4y1FOMsVotG1UUI1mbrH9ZeL/UQi3b0C7dS/2W0LbIsqi1E0K6PL5oRdrudHTt22Px+Pz6fD6/XS3NzM21tbSt9FhcXWVpaIhqN2mKxGLOzs8zMzJDP581MQukHw2OLPgt8VRQZDAbZv38/wWCQnTt30tKyGoRUKsWDBw/IZrOkUimcTicNDQ1s3rwZp9O50i+dTjM9Pc2NGzcIh8NEIhH9S3xuQVNV2IArp06dkoWFBRERefjwoUxMTMi5c+fk8OHD0tPTIy6Xq2Keulwu6enpkSNHjsj58+dlYmJCMpmMiIgsLCzIxYsXBe1UfNIFvoL6M2fO/Hn58uXC4OCgtLa2PsniXClOp1MGBwfl0qVLhdOnT/+BtcjX9FYe4Pe+vj6Hy+Vat9lIJpMyOTm5BLwExNfL7gpCodAFeQoIhUIXqntfhaVwFHH9+nXp7+8vuFyuWv8vKYtkMlmYnJwse+F/Urzi9/ulqanJ6gFhqTQ1NeW7u7sF6Fx3xd3d3bdERNLptITDYRkeHpZgMCgOh6MmkQ6HQ/bs2SPDw8MSDoclnU6LiMju3buvlHG9BlYX1F5gfGhoiEAgwL59+9i+fTsAuVyOWCxGPB4nHo+TSCTIZrMkEgncbjeNjY243W46OjrweDx4vV7q67WsnJmZYWxsjGvXrjE+Pm5Zj1XRX3d2dg7Nz8/bs9ksAFu2bGHXrl0EAgG2bduG1+vF4/HgdDrZtGkTdrudXC5HKpUilUpx9+5dYrEYd+7cYXp6mqmpKe7fvw9AQ0MDXV1d3L59+2Xgd4uaKqO3t/cnEZFkMikjIyNy9OhRaW9vf6Jcbm9vl2PHjsnIyIgkk0kRETl06NAHVvRYnenA8ePHJ4PBIAcOHGDr1q0AxONxbt68yezsLNFolLm5ORKJBMvLy6TTaVpaWmhubl5JD5/Ph9/vZ2BgAI/HA8C9e/cYHR3l6tWry2NjY88Bi+slGqAHOFVXVxfq7e3tGhgYqAsGgwQCAfH5fLbGxsaqBjKZDNFoVKampmyRSIRIJFK4devWn4VC4TpwEfjNipDHPdlagADaf3X9NpvthY6Ojk6Px+Mq3vLsdjv5fJ7FxUWWl5eJx+OJubm5mIjMon1O/Yr2N0G6VufrdhwrtAJtaN9+bWihzqB9pNYsbgMbeAz8C3N/JQD4H5KCAAAAAElFTkSuQmCC'</span><span class=\"sy0\">;</span><br/><span class=\"kw1\">echo</span> <span class=\"st0\">\"&lt;table border=1 cellspacing=0 style='text-align:center;display:inline'&gt;\"</span><span class=\"sy0\">;</span><br/><span class=\"kw1\">for</span> <span class=\"br0\">(</span><span class=\"re0\">$y</span> <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span> <span class=\"re0\">$y</span> <span class=\"sy0\">&lt;</span> <span class=\"re0\">$boardX</span><span class=\"sy0\">;</span> <span class=\"sy0\">++</span><span class=\"re0\">$y</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>\t<span class=\"kw1\">echo</span> <span class=\"st_h\">'&lt;tr&gt;'</span><span class=\"sy0\">;</span><br/>\t<span class=\"kw1\">for</span> <span class=\"br0\">(</span><span class=\"re0\">$x</span> <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span> <span class=\"re0\">$x</span> <span class=\"sy0\">&lt;</span> <span class=\"re0\">$boardX</span><span class=\"sy0\">;</span> <span class=\"sy0\">++</span><span class=\"re0\">$x</span><span class=\"br0\">)</span><span class=\"br0\">{</span><br/>\t<span class=\"kw1\">if</span> <span class=\"br0\">(</span><span class=\"br0\">(</span><span class=\"re0\">$x</span><span class=\"sy0\">+</span><span class=\"re0\">$y</span><span class=\"br0\">)</span> <span class=\"sy0\">&amp;</span> <span class=\"nu0\">1</span><span class=\"br0\">)</span> <span class=\"br0\">{</span> <span class=\"re0\">$cellCol</span> <span class=\"sy0\">=</span> <span class=\"st_h\">'#9C661F'</span><span class=\"sy0\">;</span><span class=\"br0\">}</span><br/>\t<span class=\"kw1\">else</span> <span class=\"br0\">{</span><span class=\"re0\">$cellCol</span> <span class=\"sy0\">=</span> <span class=\"st_h\">'#FCE6C9'</span><span class=\"sy0\">;</span><span class=\"br0\">}</span><br/>\u00a0<br/>\t<span class=\"kw1\">if</span> <span class=\"br0\">(</span><span class=\"re0\">$p</span><span class=\"br0\">[</span><span class=\"re0\">$y</span><span class=\"br0\">]</span> <span class=\"sy0\">==</span> <span class=\"nu0\">1</span> <span class=\"sy0\">&lt;&lt;</span> <span class=\"re0\">$x</span><span class=\"br0\">)</span> <span class=\"br0\">{</span> <span class=\"kw1\">echo</span> <span class=\"st0\">\"&lt;td bgcolor=\"</span><span class=\"sy0\">.</span><span class=\"re0\">$cellCol</span><span class=\"sy0\">.</span><span class=\"st0\">\"&gt;&lt;img width=30 height=30 src='\"</span><span class=\"sy0\">.</span><span class=\"re0\">$img</span><span class=\"sy0\">.</span><span class=\"st0\">\"'&gt;&lt;/td&gt;\"</span><span class=\"sy0\">;</span><span class=\"br0\">}</span><br/>\t<span class=\"kw1\">else</span> <span class=\"br0\">{</span> <span class=\"kw1\">echo</span> <span class=\"st0\">\"&lt;td bgcolor=\"</span><span class=\"sy0\">.</span><span class=\"re0\">$cellCol</span><span class=\"sy0\">.</span><span class=\"st0\">\"&gt; &lt;/td&gt;\"</span><span class=\"sy0\">;</span><span class=\"br0\">}</span><br/>\t<span class=\"br0\">}</span><br/>\t<span class=\"kw1\">echo</span> <span class=\"st_h\">'&lt;tr&gt;'</span><span class=\"sy0\">;</span><br/><span class=\"br0\">}</span><br/><span class=\"kw1\">echo</span> <span class=\"st_h\">'&lt;tr&gt;&lt;/tr&gt;&lt;/table&gt;&amp;nbsp'</span><span class=\"sy0\">;</span><br/>\u00a0<br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"co1\">//This function allows me to generate the next order of rows.</span><br/><span class=\"kw2\">function</span> pc_next_permutation<span class=\"br0\">(</span><span class=\"re0\">$p</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/><span class=\"re0\">$size</span> <span class=\"sy0\">=</span> <a href=\"http://www.php.net/count\"><span class=\"kw3\">count</span></a><span class=\"br0\">(</span><span class=\"re0\">$p</span><span class=\"br0\">)</span> <span class=\"sy0\">-</span> <span class=\"nu0\">1</span><span class=\"sy0\">;</span><br/><span class=\"co1\">// slide down the array looking for where we're smaller than the next guy </span><br/>\u00a0<br/><span class=\"kw1\">for</span> <span class=\"br0\">(</span><span class=\"re0\">$i</span> <span class=\"sy0\">=</span> <span class=\"re0\">$size</span> <span class=\"sy0\">-</span> <span class=\"nu0\">1</span><span class=\"sy0\">;</span> <span class=\"re0\">$p</span><span class=\"br0\">[</span><span class=\"re0\">$i</span><span class=\"br0\">]</span> <span class=\"sy0\">&gt;=</span> <span class=\"re0\">$p</span><span class=\"br0\">[</span><span class=\"re0\">$i</span><span class=\"sy0\">+</span><span class=\"nu0\">1</span><span class=\"br0\">]</span><span class=\"sy0\">;</span> <span class=\"sy0\">--</span><span class=\"re0\">$i</span><span class=\"br0\">)</span> <span class=\"br0\">{</span> <span class=\"br0\">}</span> <br/>\u00a0<br/><span class=\"co1\">// if this doesn't occur, we've finished our permutations </span><br/><span class=\"co1\">// the array is reversed: (1, 2, 3, 4) =&gt; (4, 3, 2, 1) </span><br/><span class=\"kw1\">if</span> <span class=\"br0\">(</span><span class=\"re0\">$i</span> <span class=\"sy0\">==</span> <span class=\"sy0\">-</span><span class=\"nu0\">1</span><span class=\"br0\">)</span> <span class=\"br0\">{</span> <span class=\"kw1\">return</span> <span class=\"kw4\">false</span><span class=\"sy0\">;</span> <span class=\"br0\">}</span> <br/>\u00a0<br/><span class=\"co1\">// slide down the array looking for a bigger number than what we found before </span><br/><span class=\"kw1\">for</span> <span class=\"br0\">(</span><span class=\"re0\">$j</span> <span class=\"sy0\">=</span> <span class=\"re0\">$size</span><span class=\"sy0\">;</span> <span class=\"re0\">$p</span><span class=\"br0\">[</span><span class=\"re0\">$j</span><span class=\"br0\">]</span> <span class=\"sy0\">&lt;=</span> <span class=\"re0\">$p</span><span class=\"br0\">[</span><span class=\"re0\">$i</span><span class=\"br0\">]</span><span class=\"sy0\">;</span> <span class=\"sy0\">--</span><span class=\"re0\">$j</span><span class=\"br0\">)</span> <span class=\"br0\">{</span> <span class=\"br0\">}</span> <br/><span class=\"co1\">// swap them </span><br/><span class=\"re0\">$tmp</span> <span class=\"sy0\">=</span> <span class=\"re0\">$p</span><span class=\"br0\">[</span><span class=\"re0\">$i</span><span class=\"br0\">]</span><span class=\"sy0\">;</span> <span class=\"re0\">$p</span><span class=\"br0\">[</span><span class=\"re0\">$i</span><span class=\"br0\">]</span> <span class=\"sy0\">=</span> <span class=\"re0\">$p</span><span class=\"br0\">[</span><span class=\"re0\">$j</span><span class=\"br0\">]</span><span class=\"sy0\">;</span> <span class=\"re0\">$p</span><span class=\"br0\">[</span><span class=\"re0\">$j</span><span class=\"br0\">]</span> <span class=\"sy0\">=</span> <span class=\"re0\">$tmp</span><span class=\"sy0\">;</span> <br/><span class=\"co1\">// now reverse the elements in between by swapping the ends </span><br/><span class=\"kw1\">for</span> <span class=\"br0\">(</span><span class=\"sy0\">++</span><span class=\"re0\">$i</span><span class=\"sy0\">,</span> <span class=\"re0\">$j</span> <span class=\"sy0\">=</span> <span class=\"re0\">$size</span><span class=\"sy0\">;</span> <span class=\"re0\">$i</span> <span class=\"sy0\">&lt;</span> <span class=\"re0\">$j</span><span class=\"sy0\">;</span> <span class=\"sy0\">++</span><span class=\"re0\">$i</span><span class=\"sy0\">,</span> <span class=\"sy0\">--</span><span class=\"re0\">$j</span><span class=\"br0\">)</span> <br/><span class=\"br0\">{</span> <span class=\"re0\">$tmp</span> <span class=\"sy0\">=</span> <span class=\"re0\">$p</span><span class=\"br0\">[</span><span class=\"re0\">$i</span><span class=\"br0\">]</span><span class=\"sy0\">;</span> <span class=\"re0\">$p</span><span class=\"br0\">[</span><span class=\"re0\">$i</span><span class=\"br0\">]</span> <span class=\"sy0\">=</span> <span class=\"re0\">$p</span><span class=\"br0\">[</span><span class=\"re0\">$j</span><span class=\"br0\">]</span><span class=\"sy0\">;</span> <span class=\"re0\">$p</span><span class=\"br0\">[</span><span class=\"re0\">$j</span><span class=\"br0\">]</span> <span class=\"sy0\">=</span> <span class=\"re0\">$tmp</span><span class=\"sy0\">;</span> <span class=\"br0\">}</span> <br/><span class=\"kw1\">return</span> <span class=\"re0\">$p</span><span class=\"sy0\">;</span> <br/><span class=\"br0\">}</span> <br/>\u00a0<br/><span class=\"co1\">//This function needs to check the current state to see if there are any </span><br/><span class=\"kw2\">function</span> checkBoard<span class=\"br0\">(</span><span class=\"re0\">$p</span><span class=\"sy0\">,</span><span class=\"re0\">$boardX</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>\t<span class=\"re0\">$a</span> <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span> <span class=\"co1\">//this is the row being checked</span><br/>\t<span class=\"kw1\">while</span> <span class=\"br0\">(</span><span class=\"re0\">$a</span> <span class=\"sy0\">&lt;</span> <a href=\"http://www.php.net/count\"><span class=\"kw3\">count</span></a><span class=\"br0\">(</span><span class=\"re0\">$p</span><span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"br0\">{</span> <br/>\t\t<span class=\"re0\">$b</span> <span class=\"sy0\">=</span> <span class=\"nu0\">1</span><span class=\"sy0\">;</span><br/>\t\t<span class=\"kw1\">while</span> <span class=\"br0\">(</span><span class=\"re0\">$b</span> <span class=\"sy0\">&lt;</span> <span class=\"br0\">(</span><span class=\"re0\">$boardX</span> <span class=\"sy0\">-</span> <span class=\"re0\">$a</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">{</span><br/>\t\t<span class=\"re0\">$x</span> <span class=\"sy0\">=</span> <span class=\"re0\">$p</span><span class=\"br0\">[</span><span class=\"re0\">$a</span><span class=\"sy0\">+</span><span class=\"re0\">$b</span><span class=\"br0\">]</span> <span class=\"sy0\">&lt;&lt;</span> <span class=\"re0\">$b</span><span class=\"sy0\">;</span><br/>\t\t<span class=\"re0\">$y</span> <span class=\"sy0\">=</span> <span class=\"re0\">$p</span><span class=\"br0\">[</span><span class=\"re0\">$a</span><span class=\"sy0\">+</span><span class=\"re0\">$b</span><span class=\"br0\">]</span> <span class=\"sy0\">&gt;&gt;</span> <span class=\"re0\">$b</span><span class=\"sy0\">;</span><br/>\t\t<span class=\"kw1\">if</span> <span class=\"br0\">(</span><span class=\"re0\">$p</span><span class=\"br0\">[</span><span class=\"re0\">$a</span><span class=\"br0\">]</span> <span class=\"sy0\">==</span> <span class=\"re0\">$x</span> <span class=\"sy0\">|</span> <span class=\"re0\">$p</span><span class=\"br0\">[</span><span class=\"re0\">$a</span><span class=\"br0\">]</span> <span class=\"sy0\">==</span> <span class=\"re0\">$y</span><span class=\"br0\">)</span> <span class=\"br0\">{</span> <span class=\"kw1\">return</span> <span class=\"kw4\">false</span><span class=\"sy0\">;</span><span class=\"br0\">}</span>\t\t<br/>\t\t<span class=\"sy0\">++</span><span class=\"re0\">$b</span><span class=\"sy0\">;</span><br/>\t\t<span class=\"br0\">}</span><br/>\t<span class=\"sy0\">++</span><span class=\"re0\">$a</span><span class=\"sy0\">;</span> <br/>\t<span class=\"br0\">}</span><br/>\t<span class=\"kw1\">return</span> <span class=\"kw4\">true</span><span class=\"sy0\">;</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/>\u00a0<br/><span class=\"kw1\">if</span> <span class=\"br0\">(</span><a href=\"http://www.php.net/isset\"><span class=\"kw3\">isset</span></a><span class=\"br0\">(</span><span class=\"re0\">$_POST</span><span class=\"br0\">[</span><span class=\"st_h\">'process'</span><span class=\"br0\">]</span><span class=\"br0\">)</span> <span class=\"sy0\">&amp;&amp;</span> <a href=\"http://www.php.net/isset\"><span class=\"kw3\">isset</span></a><span class=\"br0\">(</span><span class=\"re0\">$_POST</span><span class=\"br0\">[</span><span class=\"st_h\">'boardX'</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/><span class=\"br0\">{</span><br/><span class=\"co1\">//Within here is the code that needs to be run if process is clicked.</span><br/>\u00a0<br/>\u00a0<br/><span class=\"co1\">//First I need to create the different possible rows</span><br/><span class=\"kw1\">for</span> <span class=\"br0\">(</span><span class=\"re0\">$x</span> <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span> <span class=\"re0\">$x</span> <span class=\"sy0\">&lt;</span> <span class=\"re0\">$boardX</span><span class=\"sy0\">;</span> <span class=\"sy0\">++</span><span class=\"re0\">$x</span><span class=\"br0\">)</span><span class=\"br0\">{</span><br/>\t<span class=\"re0\">$row</span><span class=\"br0\">[</span><span class=\"re0\">$x</span><span class=\"br0\">]</span> <span class=\"sy0\">=</span> <span class=\"nu0\">1</span> <span class=\"sy0\">&lt;&lt;</span> <span class=\"re0\">$x</span><span class=\"sy0\">;</span><br/>\t<span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"co1\">//Now I need to create all the possible orders of rows, will be equal to [boardY]!</span><br/><span class=\"re0\">$solcount</span> <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span><br/><span class=\"re0\">$solutions</span> <span class=\"sy0\">=</span> <a href=\"http://www.php.net/array\"><span class=\"kw3\">array</span></a><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/><span class=\"kw1\">while</span> <span class=\"br0\">(</span><span class=\"re0\">$row</span> <span class=\"sy0\">!=</span> <span class=\"kw4\">false</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>\t<span class=\"kw1\">if</span> <span class=\"br0\">(</span>checkBoard<span class=\"br0\">(</span><span class=\"re0\">$row</span><span class=\"sy0\">,</span><span class=\"re0\">$boardX</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">{</span><br/>\t<span class=\"kw1\">if</span><span class=\"br0\">(</span><span class=\"sy0\">!</span><a href=\"http://www.php.net/in_array\"><span class=\"kw3\">in_array</span></a><span class=\"br0\">(</span><span class=\"re0\">$row</span><span class=\"sy0\">,</span><span class=\"re0\">$solutions</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">{</span><br/>\t\t<span class=\"re0\">$solutions</span><span class=\"br0\">[</span><span class=\"br0\">]</span> <span class=\"sy0\">=</span> <span class=\"re0\">$row</span><span class=\"sy0\">;</span><br/>\t\t\trenderBoard<span class=\"br0\">(</span><span class=\"re0\">$row</span><span class=\"sy0\">,</span><span class=\"re0\">$boardX</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>\t\t\t<span class=\"re0\">$solutions</span> <span class=\"sy0\">=</span> findRotation<span class=\"br0\">(</span><span class=\"re0\">$row</span><span class=\"sy0\">,</span><span class=\"re0\">$boardX</span><span class=\"sy0\">,</span><span class=\"re0\">$solutions</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>\t\t\t<span class=\"sy0\">++</span><span class=\"re0\">$solcount</span><span class=\"sy0\">;</span><br/>\t\t<span class=\"br0\">}</span><br/>\u00a0<br/>\t<span class=\"br0\">}</span><br/>\t<span class=\"re0\">$row</span> <span class=\"sy0\">=</span> pc_next_permutation<span class=\"br0\">(</span><span class=\"re0\">$row</span><span class=\"br0\">)</span><span class=\"sy0\">;</span>\t<br/>\u00a0<br/>\t<span class=\"br0\">}</span><br/><span class=\"kw1\">echo</span> <span class=\"st0\">\"&lt;br&gt;&lt;br&gt;&amp;nbsp&amp;nbsp&amp;nbsp&amp;nbspRows/Columns: \"</span><span class=\"sy0\">.</span><span class=\"re0\">$boardX</span><span class=\"sy0\">.</span><span class=\"st0\">\"&lt;br&gt;&amp;nbsp&amp;nbsp&amp;nbsp&amp;nbspUnique Solutions: \"</span><span class=\"sy0\">.</span><span class=\"re0\">$solcount</span><span class=\"sy0\">.</span><span class=\"st0\">\"&lt;br&gt;&amp;nbsp&amp;nbsp&amp;nbsp&amp;nbspTotal Solutions: \"</span><span class=\"sy0\">.</span><a href=\"http://www.php.net/count\"><span class=\"kw3\">count</span></a><span class=\"br0\">(</span><span class=\"re0\">$solutions</span><span class=\"br0\">)</span><span class=\"sy0\">.</span><span class=\"st0\">\"  - Note: This includes symmetrical solutions&lt;br&gt;\"</span><span class=\"sy0\">;</span><br/><span class=\"co1\">//print_r($solutions);</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"co1\">//This code collects the starting parameters</span><br/><span class=\"kw1\">echo</span> <span class=\"sy0\">&lt;&lt;&lt;</span>_END<br/><span class=\"sy0\">&lt;</span>form name<span class=\"sy0\">=</span><span class=\"st0\">\"input\"</span> action<span class=\"sy0\">=</span><span class=\"st0\">\"queens.php\"</span> method<span class=\"sy0\">=</span><span class=\"st0\">\"post\"</span><span class=\"sy0\">&gt;</span><br/><span class=\"sy0\">&amp;</span>nbsp<span class=\"sy0\">&amp;</span>nbsp<span class=\"sy0\">&amp;</span>nbsp<span class=\"sy0\">&amp;</span>nbspNumber of columns<span class=\"sy0\">/</span>rows <span class=\"sy0\">&lt;</span>select name<span class=\"sy0\">=</span><span class=\"st0\">\"boardX\"</span> <span class=\"sy0\">/&gt;</span><br/><span class=\"sy0\">&lt;</span>option value<span class=\"sy0\">=</span><span class=\"st0\">\"1\"</span><span class=\"sy0\">&gt;</span>One<span class=\"sy0\">&lt;/</span>option<span class=\"sy0\">&gt;</span><br/><span class=\"sy0\">&lt;</span>option value<span class=\"sy0\">=</span><span class=\"st0\">\"2\"</span><span class=\"sy0\">&gt;</span>Two<span class=\"sy0\">&lt;/</span>option<span class=\"sy0\">&gt;</span><br/><span class=\"sy0\">&lt;</span>option value<span class=\"sy0\">=</span><span class=\"st0\">\"3\"</span><span class=\"sy0\">&gt;</span>Three<span class=\"sy0\">&lt;/</span>option<span class=\"sy0\">&gt;</span><br/><span class=\"sy0\">&lt;</span>option value<span class=\"sy0\">=</span><span class=\"st0\">\"4\"</span> <span class=\"sy0\">&gt;</span>Four<span class=\"sy0\">&lt;/</span>option<span class=\"sy0\">&gt;</span><br/><span class=\"sy0\">&lt;</span>option value<span class=\"sy0\">=</span><span class=\"st0\">\"5\"</span><span class=\"sy0\">&gt;</span>Five<span class=\"sy0\">&lt;/</span>option<span class=\"sy0\">&gt;</span><br/><span class=\"sy0\">&lt;</span>option value<span class=\"sy0\">=</span><span class=\"st0\">\"6\"</span><span class=\"sy0\">&gt;</span>Six<span class=\"sy0\">&lt;/</span>option<span class=\"sy0\">&gt;</span><br/><span class=\"sy0\">&lt;</span>option value<span class=\"sy0\">=</span><span class=\"st0\">\"7\"</span><span class=\"sy0\">&gt;</span>Seven<span class=\"sy0\">&lt;/</span>option<span class=\"sy0\">&gt;</span><br/><span class=\"sy0\">&lt;</span>option value<span class=\"sy0\">=</span><span class=\"st0\">\"8\"</span> selected<span class=\"sy0\">=</span><span class=\"st0\">\"selected\"</span><span class=\"sy0\">&gt;</span>Eight<span class=\"sy0\">&lt;/</span>option<span class=\"sy0\">&gt;</span><br/><span class=\"sy0\">&lt;</span>option value<span class=\"sy0\">=</span><span class=\"st0\">\"9\"</span><span class=\"sy0\">&gt;</span>Nine<span class=\"sy0\">&lt;/</span>option<span class=\"sy0\">&gt;</span><br/><span class=\"sy0\">&lt;</span>option value<span class=\"sy0\">=</span><span class=\"st0\">\"10\"</span><span class=\"sy0\">&gt;</span>Ten<span class=\"sy0\">&lt;/</span>option<span class=\"sy0\">&gt;</span><br/><span class=\"sy0\">&lt;/</span>select<span class=\"sy0\">&gt;</span><br/>    <span class=\"sy0\">&lt;</span>input type<span class=\"sy0\">=</span><span class=\"st0\">\"hidden\"</span> name<span class=\"sy0\">=</span><span class=\"st0\">\"process\"</span> value<span class=\"sy0\">=</span><span class=\"st0\">\"yes\"</span> <span class=\"sy0\">/&gt;</span><br/><span class=\"sy0\">&amp;</span>nbsp<span class=\"sy0\">&lt;</span>input type<span class=\"sy0\">=</span><span class=\"st0\">\"submit\"</span> value<span class=\"sy0\">=</span><span class=\"st0\">\"Process\"</span> <span class=\"sy0\">/&gt;</span><br/><span class=\"sy0\">&lt;/</span>form<span class=\"sy0\">&gt;</span><br/>\u00a0<br/>_END<span class=\"sy0\">;</span><br/>\u00a0<br/><span class=\"sy1\">?&gt;</span><br/>&lt;/body&gt;<br/>&lt;/html&gt;</pre>"}, {"lang": "PicoLisp", "loc": 11, "block": "<pre class=\"text highlighted_source\">(load \"@lib/simul.l\")  # for 'permute'<br/>\u00a0<br/>(de queens (N)<br/>   (let (R (range 1 N)  Cnt 0)<br/>      (for L (permute (range 1 N))<br/>         (when<br/>            (= N  # from the Python solution<br/>               (length (uniq (mapcar + L R)))<br/>               (length (uniq (mapcar - L R))) )<br/>            (inc 'Cnt) ) )<br/>      Cnt ) )</pre>"}, {"lang": "PowerBASIC", "loc": 40, "block": "<pre class=\"text highlighted_source\">   defint a-z<br/>   option base 1<br/>   input \"n=\",n<br/>   dim a(n), s(n), u(4*n-2)<br/>   for i=1 to n: a(i)=i: next<br/>   for i=1 to 4*n-2: u(i)=0: next<br/>   m=0<br/>   i=1<br/>   r=2*n-1<br/>   goto 20<br/>10 s(i)=j<br/>   u(p)=1<br/>   u(q+r)=1<br/>   incr i<br/>20 if i&gt;n goto 60<br/>   j=i<br/>30 z=a(i)<br/>   y=a(j)<br/>   p=i-y+n<br/>   q=i+y-1<br/>   a(i)=y<br/>   a(j)=z<br/>   if u(p)=0 and u(q+r)=0 goto 10<br/>40 incr j<br/>   if j&lt;=n goto 30<br/>50 decr j<br/>   if j=i goto 70<br/>   swap a(i),a(j)<br/>   goto 50<br/>60 incr m<br/>   for k=1 to n: print a(k);: next: print<br/>70 decr i<br/>   if i=0 goto 80<br/>   p=i-a(i)+n<br/>   q=i+a(i)-1<br/>   j=s(i)<br/>   u(p)=0<br/>   u(q+r)=0<br/>   goto 40<br/>80 print m</pre>"}, {"lang": "PowerShell", "loc": 61, "block": "<pre class=\"powershell highlighted_source\">\u00a0<br/><span class=\"kw3\">function</span> PlaceQueen <span class=\"br0\">(</span> <span class=\"br0\">[</span><span class=\"re3\">ref</span><span class=\"br0\">]</span><span class=\"re0\">$Board</span><span class=\"sy0\">,</span> <span class=\"re0\">$Row</span><span class=\"sy0\">,</span> <span class=\"re0\">$N</span> <span class=\"br0\">)</span><br/>    <span class=\"br0\">{</span><br/>    <span class=\"co1\">#  For the current row, start with the first column</span><br/>    <span class=\"re0\">$Board</span>.Value<span class=\"br0\">[</span><span class=\"re0\">$Row</span><span class=\"br0\">]</span> <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><br/>\u00a0<br/>    <span class=\"co1\">#  While haven't exhausted all columns in the current row...</span><br/>    <span class=\"kw3\">While</span> <span class=\"br0\">(</span> <span class=\"re0\">$Board</span>.Value<span class=\"br0\">[</span><span class=\"re0\">$Row</span><span class=\"br0\">]</span> <span class=\"kw4\">-lt</span> <span class=\"re0\">$N</span> <span class=\"br0\">)</span><br/>        <span class=\"br0\">{</span><br/>        <span class=\"co1\">#  If not the first row, check for conflicts</span><br/>        <span class=\"re0\">$Conflict</span> <span class=\"sy0\">=</span> <span class=\"re0\">$Row</span> <span class=\"kw4\">-and</span><br/>                    <span class=\"br0\">(</span>   <span class=\"br0\">(</span><span class=\"nu0\">0</span>..<span class=\"br0\">(</span><span class=\"re0\">$Row</span><span class=\"sy0\">-</span><span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"br0\">)</span>.<span class=\"kw3\">Where</span><span class=\"br0\">{</span> <span class=\"re0\">$Board</span>.Value<span class=\"br0\">[</span><a href=\"about:blank\"><span class=\"kw6\">$_</span></a><span class=\"br0\">]</span> <span class=\"kw4\">-eq</span> <span class=\"re0\">$Board</span>.Value<span class=\"br0\">[</span><span class=\"re0\">$Row</span><span class=\"br0\">]</span> <span class=\"br0\">}</span>.Count <span class=\"kw4\">-or</span><br/>                        <span class=\"br0\">(</span><span class=\"nu0\">0</span>..<span class=\"br0\">(</span><span class=\"re0\">$Row</span><span class=\"sy0\">-</span><span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"br0\">)</span>.<span class=\"kw3\">Where</span><span class=\"br0\">{</span> <span class=\"re0\">$Board</span>.Value<span class=\"br0\">[</span><a href=\"about:blank\"><span class=\"kw6\">$_</span></a><span class=\"br0\">]</span> <span class=\"kw4\">-eq</span> <span class=\"re0\">$Board</span>.Value<span class=\"br0\">[</span><span class=\"re0\">$Row</span><span class=\"br0\">]</span> <span class=\"sy0\">-</span> <span class=\"re0\">$Row</span> <span class=\"sy0\">+</span> <a href=\"about:blank\"><span class=\"kw6\">$_</span></a> <span class=\"br0\">}</span>.Count <span class=\"kw4\">-or</span><br/>                        <span class=\"br0\">(</span><span class=\"nu0\">0</span>..<span class=\"br0\">(</span><span class=\"re0\">$Row</span><span class=\"sy0\">-</span><span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"br0\">)</span>.<span class=\"kw3\">Where</span><span class=\"br0\">{</span> <span class=\"re0\">$Board</span>.Value<span class=\"br0\">[</span><a href=\"about:blank\"><span class=\"kw6\">$_</span></a><span class=\"br0\">]</span> <span class=\"kw4\">-eq</span> <span class=\"re0\">$Board</span>.Value<span class=\"br0\">[</span><span class=\"re0\">$Row</span><span class=\"br0\">]</span> <span class=\"sy0\">+</span> <span class=\"re0\">$Row</span> <span class=\"sy0\">-</span> <a href=\"about:blank\"><span class=\"kw6\">$_</span></a> <span class=\"br0\">}</span>.Count <span class=\"br0\">)</span><br/>\u00a0<br/>        <span class=\"co1\">#  If no conflicts and the current column is a valid column...</span><br/>        <span class=\"kw3\">If</span> <span class=\"br0\">(</span> <span class=\"kw4\">-not</span> <span class=\"re0\">$Conflict</span> <span class=\"kw4\">-and</span> <span class=\"re0\">$Board</span>.Value<span class=\"br0\">[</span><span class=\"re0\">$Row</span><span class=\"br0\">]</span> <span class=\"kw4\">-lt</span> <span class=\"re0\">$N</span> <span class=\"br0\">)</span><br/>            <span class=\"br0\">{</span><br/>\u00a0<br/>            <span class=\"co1\">#  If this is the last row</span><br/>            <span class=\"co1\">#    Board completed successfully</span><br/>            <span class=\"kw3\">If</span> <span class=\"br0\">(</span> <span class=\"re0\">$Row</span> <span class=\"kw4\">-eq</span> <span class=\"br0\">(</span> <span class=\"re0\">$N</span> <span class=\"sy0\">-</span> <span class=\"nu0\">1</span> <span class=\"br0\">)</span> <span class=\"br0\">)</span><br/>                <span class=\"br0\">{</span><br/>                <span class=\"kw3\">return</span> <span class=\"re0\">$True</span><br/>                <span class=\"br0\">}</span><br/>\u00a0<br/>            <span class=\"co1\">#  Recurse</span><br/>            <span class=\"co1\">#  If all nested recursions were successful</span><br/>            <span class=\"co1\">#    Board completed successfully</span><br/>            <span class=\"kw3\">If</span> <span class=\"br0\">(</span> PlaceQueen <span class=\"re0\">$Board</span> <span class=\"br0\">(</span> <span class=\"re0\">$Row</span> <span class=\"sy0\">+</span> <span class=\"nu0\">1</span> <span class=\"br0\">)</span> <span class=\"re0\">$N</span> <span class=\"br0\">)</span><br/>                <span class=\"br0\">{</span><br/>                <span class=\"kw3\">return</span> <span class=\"re0\">$True</span><br/>                <span class=\"br0\">}</span><br/>            <span class=\"br0\">}</span><br/>\u00a0<br/>        <span class=\"co1\">#  Try the next column</span><br/>        <span class=\"re0\">$Board</span>.Value<span class=\"br0\">[</span><span class=\"re0\">$Row</span><span class=\"br0\">]</span><span class=\"sy0\">++</span><br/>        <span class=\"br0\">}</span><br/>\u00a0<br/>    <span class=\"co1\">#  Everything was tried, nothing worked</span><br/>    <span class=\"kw3\">Return</span> <span class=\"re0\">$False</span><br/>    <span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"kw3\">function</span> Get<span class=\"sy0\">-</span>NQueensBoard <span class=\"br0\">(</span> <span class=\"re0\">$N</span> <span class=\"br0\">)</span><br/>    <span class=\"br0\">{</span><br/>    <span class=\"co1\">#  Start with a default board (array of column positions for each row)</span><br/>    <span class=\"re0\">$Board</span> <span class=\"sy0\">=</span> <span class=\"sy0\">@</span><span class=\"br0\">(</span> <span class=\"nu0\">0</span> <span class=\"br0\">)</span> <span class=\"sy0\">*</span> <span class=\"re0\">$N</span><br/>\u00a0<br/>    <span class=\"co1\">#  Place queens on board</span><br/>    <span class=\"co1\">#  If successful...</span><br/>    <span class=\"kw3\">If</span> <span class=\"br0\">(</span> PlaceQueen <span class=\"sy0\">-</span>Board <span class=\"br0\">(</span><span class=\"br0\">[</span><span class=\"re3\">ref</span><span class=\"br0\">]</span><span class=\"re0\">$Board</span><span class=\"br0\">)</span> <span class=\"sy0\">-</span>Row <span class=\"nu0\">0</span> <span class=\"sy0\">-</span>N <span class=\"re0\">$N</span> <span class=\"br0\">)</span><br/>        <span class=\"br0\">{</span><br/>        <span class=\"co1\">#  Convert board to strings for display</span><br/>        <span class=\"re0\">$Board</span> <span class=\"sy0\">|</span> <span class=\"kw3\">ForEach</span> <span class=\"br0\">{</span> <span class=\"br0\">(</span> <span class=\"sy0\">@</span><span class=\"br0\">(</span> <span class=\"st0\">\"\"</span> <span class=\"br0\">)</span> <span class=\"sy0\">+</span> <span class=\"sy0\">@</span><span class=\"br0\">(</span><span class=\"st0\">\" \"</span><span class=\"br0\">)</span> <span class=\"sy0\">*</span> <a href=\"about:blank\"><span class=\"kw6\">$_</span></a> <span class=\"sy0\">+</span> <span class=\"st0\">\"Q\"</span> <span class=\"sy0\">+</span> <span class=\"sy0\">@</span><span class=\"br0\">(</span><span class=\"st0\">\" \"</span><span class=\"br0\">)</span> <span class=\"sy0\">*</span> <span class=\"br0\">(</span> <span class=\"re0\">$N</span> <span class=\"sy0\">-</span> <a href=\"about:blank\"><span class=\"kw6\">$_</span></a> <span class=\"br0\">)</span> <span class=\"br0\">)</span> <span class=\"sy0\">-</span>join <span class=\"st0\">\"|\"</span> <span class=\"br0\">}</span><br/>        <span class=\"br0\">}</span><br/>    <span class=\"kw3\">Else</span><br/>        <span class=\"br0\">{</span><br/>        <span class=\"st0\">\"There is no solution for N = $N\"</span><br/>        <span class=\"br0\">}</span><br/>    <span class=\"br0\">}</span><br/>\u00a0</pre>"}, {"lang": "PL/I", "loc": 79, "block": "<pre class=\"pli highlighted_source\">\u00a0<br/>NQUEENS<span class=\"sy0\">:</span> <span class=\"kw1\">PROC</span> <span class=\"kw1\">OPTIONS</span> <span class=\"br0\">(</span><span class=\"kw1\">MAIN</span><span class=\"br0\">)</span><span class=\"sy0\">;</span>                                  <br/> <span class=\"kw1\">DCL</span> A<span class=\"br0\">(</span><span class=\"nu0\">35</span><span class=\"br0\">)</span> <span class=\"kw1\">BIN</span> <span class=\"kw1\">FIXED</span><span class=\"br0\">(</span><span class=\"nu0\">31</span><span class=\"br0\">)</span> <span class=\"kw1\">EXTERNAL</span><span class=\"sy0\">;</span>                             <br/> <span class=\"kw1\">DCL</span> <span class=\"kw1\">COUNT</span> <span class=\"kw1\">BIN</span> <span class=\"kw1\">FIXED</span><span class=\"br0\">(</span><span class=\"nu0\">31</span><span class=\"br0\">)</span> <span class=\"kw1\">EXTERNAL</span><span class=\"sy0\">;</span>                             <br/> <span class=\"kw1\">COUNT</span> <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span>                                                    <br/> <span class=\"kw1\">DECLARE</span> <span class=\"kw1\">SYSIN</span> <span class=\"kw1\">FILE</span><span class=\"sy0\">;</span>                                           <br/> <span class=\"kw1\">DCL</span> <span class=\"kw1\">ABS</span> <span class=\"kw1\">BUILTIN</span><span class=\"sy0\">;</span>                                              <br/> <span class=\"kw1\">DECLARE</span> <span class=\"kw1\">SYSPRINT</span> <span class=\"kw1\">FILE</span><span class=\"sy0\">;</span>                                        <br/> <span class=\"kw1\">DECLARE</span> N <span class=\"kw1\">BINARY</span> <span class=\"kw1\">FIXED</span> <span class=\"br0\">(</span><span class=\"nu0\">31</span><span class=\"br0\">)</span><span class=\"sy0\">;</span> <span class=\"coMULTI\">/* COUNTER */</span>                    <br/> <span class=\"coMULTI\">/* MAIN LOOP STARTS HERE */</span>                                   <br/> <span class=\"kw1\">GET</span> <span class=\"kw1\">LIST</span> <span class=\"br0\">(</span>N<span class=\"br0\">)</span> <span class=\"kw1\">FILE</span><span class=\"br0\">(</span><span class=\"kw1\">SYSIN</span><span class=\"br0\">)</span><span class=\"sy0\">;</span> <span class=\"coMULTI\">/* N QUEENS, N X N BOARD */</span>        <br/> <span class=\"kw1\">PUT</span> <span class=\"kw1\">SKIP</span> <span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"br0\">)</span> <span class=\"kw1\">FILE</span><span class=\"br0\">(</span><span class=\"kw1\">SYSPRINT</span><span class=\"br0\">)</span><span class=\"sy0\">;</span>                                  <br/> <span class=\"kw1\">PUT</span> <span class=\"kw1\">SKIP</span> <span class=\"kw1\">LIST</span><span class=\"br0\">(</span><span class=\"st0\">'BEGIN N QUEENS PROCESSING *****'</span><span class=\"br0\">)</span> <span class=\"kw1\">FILE</span><span class=\"br0\">(</span><span class=\"kw1\">SYSPRINT</span><span class=\"br0\">)</span><span class=\"sy0\">;</span>    <br/> <span class=\"kw1\">PUT</span> <span class=\"kw1\">SKIP</span> <span class=\"kw1\">LIST</span><span class=\"br0\">(</span><span class=\"st0\">'SOLUTIONS FOR N: '</span><span class=\"sy0\">,</span>N<span class=\"br0\">)</span> <span class=\"kw1\">FILE</span><span class=\"br0\">(</span><span class=\"kw1\">SYSPRINT</span><span class=\"br0\">)</span><span class=\"sy0\">;</span>          <br/> <span class=\"kw1\">PUT</span> <span class=\"kw1\">SKIP</span> <span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"br0\">)</span> <span class=\"kw1\">FILE</span><span class=\"br0\">(</span><span class=\"kw1\">SYSPRINT</span><span class=\"br0\">)</span><span class=\"sy0\">;</span>                                  <br/>  <span class=\"kw1\">IF</span> N <span class=\"sy0\">&lt;</span> <span class=\"nu0\">4</span> <span class=\"kw1\">THEN</span> <span class=\"kw1\">DO</span><span class=\"sy0\">;</span>                                            <br/>    <span class=\"coMULTI\">/* LESS THAN 4 MAKES NO SENSE  */</span>                          <br/>      <span class=\"kw1\">PUT</span> <span class=\"kw1\">SKIP</span> <span class=\"br0\">(</span><span class=\"nu0\">2</span><span class=\"br0\">)</span> <span class=\"kw1\">FILE</span><span class=\"br0\">(</span><span class=\"kw1\">SYSPRINT</span><span class=\"br0\">)</span><span class=\"sy0\">;</span>                             <br/>      <span class=\"kw1\">PUT</span> <span class=\"kw1\">SKIP</span> <span class=\"kw1\">LIST</span> <span class=\"br0\">(</span>N<span class=\"sy0\">,</span><span class=\"st0\">' N TOO LOW'</span><span class=\"br0\">)</span> <span class=\"kw1\">FILE</span> <span class=\"br0\">(</span><span class=\"kw1\">SYSPRINT</span><span class=\"br0\">)</span><span class=\"sy0\">;</span>               <br/>      <span class=\"kw1\">PUT</span> <span class=\"kw1\">SKIP</span> <span class=\"br0\">(</span><span class=\"nu0\">2</span><span class=\"br0\">)</span> <span class=\"kw1\">FILE</span><span class=\"br0\">(</span><span class=\"kw1\">SYSPRINT</span><span class=\"br0\">)</span><span class=\"sy0\">;</span>                             <br/>      <span class=\"kw1\">RETURN</span> <span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"sy0\">;</span>                                              <br/>   <span class=\"kw1\">END</span><span class=\"sy0\">;</span>                                                        <br/>   <span class=\"kw1\">IF</span> N <span class=\"sy0\">&gt;</span> <span class=\"nu0\">35</span> <span class=\"kw1\">THEN</span> <span class=\"kw1\">DO</span><span class=\"sy0\">;</span>                                                <br/>     <span class=\"coMULTI\">/* WOULD TAKE WEEKS    */</span>                               <br/>       <span class=\"kw1\">PUT</span> <span class=\"kw1\">SKIP</span> <span class=\"br0\">(</span><span class=\"nu0\">2</span><span class=\"br0\">)</span> <span class=\"kw1\">FILE</span><span class=\"br0\">(</span><span class=\"kw1\">SYSPRINT</span><span class=\"br0\">)</span><span class=\"sy0\">;</span>                                  <br/>       <span class=\"kw1\">PUT</span> <span class=\"kw1\">SKIP</span> <span class=\"kw1\">LIST</span> <span class=\"br0\">(</span>N<span class=\"sy0\">,</span><span class=\"st0\">' N TOO HIGH'</span><span class=\"br0\">)</span> <span class=\"kw1\">FILE</span> <span class=\"br0\">(</span><span class=\"kw1\">SYSPRINT</span><span class=\"br0\">)</span><span class=\"sy0\">;</span>                   <br/>       <span class=\"kw1\">PUT</span> <span class=\"kw1\">SKIP</span> <span class=\"br0\">(</span><span class=\"nu0\">2</span><span class=\"br0\">)</span> <span class=\"kw1\">FILE</span><span class=\"br0\">(</span><span class=\"kw1\">SYSPRINT</span><span class=\"br0\">)</span><span class=\"sy0\">;</span>                                  <br/>       <span class=\"kw1\">RETURN</span> <span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"sy0\">;</span>                                                   <br/>    <span class=\"kw1\">END</span><span class=\"sy0\">;</span>                                                             <br/>\u00a0<br/>    <span class=\"kw1\">CALL</span> QUEEN<span class=\"br0\">(</span>N<span class=\"br0\">)</span><span class=\"sy0\">;</span>                                                   <br/>\u00a0<br/>     <span class=\"kw1\">PUT</span> <span class=\"kw1\">SKIP</span> <span class=\"br0\">(</span><span class=\"nu0\">2</span><span class=\"br0\">)</span> <span class=\"kw1\">FILE</span><span class=\"br0\">(</span><span class=\"kw1\">SYSPRINT</span><span class=\"br0\">)</span><span class=\"sy0\">;</span>                                    <br/>     <span class=\"kw1\">PUT</span> <span class=\"kw1\">SKIP</span> <span class=\"kw1\">LIST</span> <span class=\"br0\">(</span><span class=\"kw1\">COUNT</span><span class=\"sy0\">,</span><span class=\"st0\">' SOLUTIONS FOUND'</span><span class=\"br0\">)</span> <span class=\"kw1\">FILE</span><span class=\"br0\">(</span><span class=\"kw1\">SYSPRINT</span><span class=\"br0\">)</span><span class=\"sy0\">;</span>             <br/>     <span class=\"kw1\">PUT</span> <span class=\"kw1\">SKIP</span> <span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"br0\">)</span> <span class=\"kw1\">FILE</span><span class=\"br0\">(</span><span class=\"kw1\">SYSPRINT</span><span class=\"br0\">)</span><span class=\"sy0\">;</span>                                    <br/>     <span class=\"kw1\">PUT</span> <span class=\"kw1\">SKIP</span> <span class=\"kw1\">LIST</span> <span class=\"br0\">(</span><span class=\"st0\">'END OF PROCESSING ****'</span><span class=\"br0\">)</span> <span class=\"kw1\">FILE</span><span class=\"br0\">(</span><span class=\"kw1\">SYSPRINT</span><span class=\"br0\">)</span><span class=\"sy0\">;</span>             <br/>     <span class=\"kw1\">RETURN</span><span class=\"br0\">(</span><span class=\"nu0\">0</span><span class=\"br0\">)</span><span class=\"sy0\">;</span>                                                      <br/>  <span class=\"coMULTI\">/* MAIN LOOP ENDS ABOVE  */</span>                                        <br/>\u00a0<br/>  PLACE<span class=\"sy0\">:</span> <span class=\"kw1\">PROCEDURE</span> <span class=\"br0\">(</span>PS<span class=\"br0\">)</span><span class=\"sy0\">;</span>                                             <br/>     <span class=\"kw1\">DCL</span> PS <span class=\"kw1\">BIN</span> <span class=\"kw1\">FIXED</span><span class=\"br0\">(</span><span class=\"nu0\">31</span><span class=\"br0\">)</span><span class=\"sy0\">;</span>                                           <br/>     <span class=\"kw1\">DCL</span> I  <span class=\"kw1\">BIN</span> <span class=\"kw1\">FIXED</span><span class=\"br0\">(</span><span class=\"nu0\">31</span><span class=\"br0\">)</span> <span class=\"kw1\">INIT</span><span class=\"br0\">(</span><span class=\"nu0\">0</span><span class=\"br0\">)</span><span class=\"sy0\">;</span>                                  <br/>     <span class=\"kw1\">DCL</span> A<span class=\"br0\">(</span><span class=\"nu0\">50</span><span class=\"br0\">)</span> <span class=\"kw1\">BIN</span> <span class=\"kw1\">FIXED</span><span class=\"br0\">(</span><span class=\"nu0\">31</span><span class=\"br0\">)</span> <span class=\"kw1\">EXTERNAL</span><span class=\"sy0\">;</span>                               <br/>\u00a0<br/>  <span class=\"kw1\">DO</span> I<span class=\"sy0\">=</span><span class=\"nu0\">1</span> <span class=\"kw1\">TO</span> PS<span class=\"sy0\">-</span><span class=\"nu0\">1</span><span class=\"sy0\">;</span>                                                    <br/>       <span class=\"kw1\">IF</span> A<span class=\"br0\">(</span>I<span class=\"br0\">)</span> <span class=\"sy0\">=</span> A<span class=\"br0\">(</span>PS<span class=\"br0\">)</span> <span class=\"kw1\">THEN</span>  <span class=\"kw1\">RETURN</span><span class=\"br0\">(</span><span class=\"nu0\">0</span><span class=\"br0\">)</span><span class=\"sy0\">;</span>                              <br/>       <span class=\"kw1\">IF</span> <span class=\"kw1\">ABS</span> <span class=\"br0\">(</span> A<span class=\"br0\">(</span>I<span class=\"br0\">)</span> <span class=\"sy0\">-</span> A<span class=\"br0\">(</span>PS<span class=\"br0\">)</span> <span class=\"br0\">)</span> <span class=\"sy0\">=</span> <span class=\"br0\">(</span>PS<span class=\"sy0\">-</span>I<span class=\"br0\">)</span> <span class=\"kw1\">THEN</span> <span class=\"kw1\">RETURN</span><span class=\"br0\">(</span><span class=\"nu0\">0</span><span class=\"br0\">)</span><span class=\"sy0\">;</span>              <br/>  <span class=\"kw1\">END</span><span class=\"sy0\">;</span>                                                               <br/>    <span class=\"kw1\">RETURN</span> <span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"sy0\">;</span>                                                      <br/>  <span class=\"kw1\">END</span> PLACE<span class=\"sy0\">;</span>                                                         <br/>\u00a0<br/>  QUEEN<span class=\"sy0\">:</span> <span class=\"kw1\">PROCEDURE</span> <span class=\"br0\">(</span>N<span class=\"br0\">)</span><span class=\"sy0\">;</span>                                          <br/>      <span class=\"kw1\">DCL</span> N <span class=\"kw1\">BIN</span> <span class=\"kw1\">FIXED</span> <span class=\"br0\">(</span><span class=\"nu0\">31</span><span class=\"br0\">)</span><span class=\"sy0\">;</span>                                      <br/>      <span class=\"kw1\">DCL</span> K <span class=\"kw1\">BIN</span> <span class=\"kw1\">FIXED</span> <span class=\"br0\">(</span><span class=\"nu0\">31</span><span class=\"br0\">)</span><span class=\"sy0\">;</span>                                      <br/>      <span class=\"kw1\">DCL</span> A<span class=\"br0\">(</span><span class=\"nu0\">50</span><span class=\"br0\">)</span> <span class=\"kw1\">BIN</span> <span class=\"kw1\">FIXED</span><span class=\"br0\">(</span><span class=\"nu0\">31</span><span class=\"br0\">)</span> <span class=\"kw1\">EXTERNAL</span><span class=\"sy0\">;</span>                          <br/>      <span class=\"kw1\">DCL</span> <span class=\"kw1\">COUNT</span> <span class=\"kw1\">BIN</span> <span class=\"kw1\">FIXED</span><span class=\"br0\">(</span><span class=\"nu0\">31</span><span class=\"br0\">)</span> <span class=\"kw1\">EXTERNAL</span><span class=\"sy0\">;</span>                          <br/>      K <span class=\"sy0\">=</span> <span class=\"nu0\">1</span><span class=\"sy0\">;</span>                                                     <br/>      A<span class=\"br0\">(</span>K<span class=\"br0\">)</span> <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span>                                                  <br/>      <span class=\"kw1\">DO</span> <span class=\"kw1\">WHILE</span> <span class=\"br0\">(</span>K <span class=\"sy0\">&gt;</span> <span class=\"nu0\">0</span><span class=\"br0\">)</span><span class=\"sy0\">;</span>                                          <br/>         A<span class=\"br0\">(</span>K<span class=\"br0\">)</span> <span class=\"sy0\">=</span> A<span class=\"br0\">(</span>K<span class=\"br0\">)</span> <span class=\"sy0\">+</span> <span class=\"nu0\">1</span><span class=\"sy0\">;</span>                                        <br/>         <span class=\"kw1\">DO</span> <span class=\"kw1\">WHILE</span> <span class=\"br0\">(</span> <span class=\"br0\">(</span> A<span class=\"br0\">(</span>K<span class=\"br0\">)</span><span class=\"sy0\">&lt;=</span> N<span class=\"br0\">)</span> <span class=\"sy0\">&amp;</span> <span class=\"br0\">(</span>PLACE<span class=\"br0\">(</span>K<span class=\"br0\">)</span> <span class=\"sy0\">=</span><span class=\"nu0\">0</span><span class=\"br0\">)</span> <span class=\"br0\">)</span><span class=\"sy0\">;</span>               <br/>             A<span class=\"br0\">(</span>K<span class=\"br0\">)</span> <span class=\"sy0\">=</span> A<span class=\"br0\">(</span>K<span class=\"br0\">)</span> <span class=\"sy0\">+</span><span class=\"nu0\">1</span><span class=\"sy0\">;</span>                                     <br/>         <span class=\"kw1\">END</span><span class=\"sy0\">;</span>                                     <br/>         <span class=\"kw1\">IF</span> <span class=\"br0\">(</span>A<span class=\"br0\">(</span>K<span class=\"br0\">)</span> <span class=\"sy0\">&lt;=</span> N<span class=\"br0\">)</span> <span class=\"kw1\">THEN</span> <span class=\"kw1\">DO</span><span class=\"sy0\">;</span>                                 <br/>           <span class=\"kw1\">IF</span> <span class=\"br0\">(</span>K <span class=\"sy0\">=</span> N <span class=\"br0\">)</span> <span class=\"kw1\">THEN</span> <span class=\"kw1\">DO</span><span class=\"sy0\">;</span>                                  <br/>                         <span class=\"kw1\">COUNT</span> <span class=\"sy0\">=</span> <span class=\"kw1\">COUNT</span> <span class=\"sy0\">+</span> <span class=\"nu0\">1</span><span class=\"sy0\">;</span>                      <br/>                 <span class=\"kw1\">END</span><span class=\"sy0\">;</span>                                            <br/>           <span class=\"kw1\">ELSE</span> <span class=\"kw1\">DO</span><span class=\"sy0\">;</span>                                              <br/>             K<span class=\"sy0\">=</span> K <span class=\"sy0\">+</span><span class=\"nu0\">1</span><span class=\"sy0\">;</span>                                            <br/>             A<span class=\"br0\">(</span>K<span class=\"br0\">)</span> <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span>                                           <br/>           <span class=\"kw1\">END</span><span class=\"sy0\">;</span> <span class=\"coMULTI\">/* OF INSIDE ELSE */</span>                              <br/>         <span class=\"kw1\">END</span><span class=\"sy0\">;</span> <span class=\"coMULTI\">/* OF FIRST IF */</span>                                  <br/>         <span class=\"kw1\">ELSE</span> <span class=\"kw1\">DO</span><span class=\"sy0\">;</span>                                                <br/>              K <span class=\"sy0\">=</span> K <span class=\"sy0\">-</span><span class=\"nu0\">1</span><span class=\"sy0\">;</span>                                          <br/>         <span class=\"kw1\">END</span><span class=\"sy0\">;</span>                                                    <br/>      <span class=\"kw1\">END</span><span class=\"sy0\">;</span>  <span class=\"coMULTI\">/* OF EXTERNAL WHILE LOOP  */</span>                                         <br/>   <span class=\"kw1\">END</span> QUEEN<span class=\"sy0\">;</span>                                                    <br/>\u00a0<br/> <span class=\"kw1\">END</span> NQUEENS<span class=\"sy0\">;</span>  </pre>"}, {"lang": "Prolog", "loc": 21, "block": "<pre class=\"prolog highlighted_source\">solution<span class=\"br0\">(</span><span class=\"br0\">[</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy4\">.</span><br/>\u00a0<br/>solution<span class=\"br0\">(</span><span class=\"br0\">[</span>X<span class=\"sy3\">/</span>Y<span class=\"sy5\">|</span>Others<span class=\"br0\">]</span><span class=\"br0\">)</span> <span class=\"sy1\">:-</span><br/> solution<span class=\"br0\">(</span>Others<span class=\"br0\">)</span><span class=\"sy4\">,</span><br/> member<span class=\"br0\">(</span>Y<span class=\"sy4\">,</span> <span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"sy4\">,</span><span class=\"nu0\">2</span><span class=\"sy4\">,</span><span class=\"nu0\">3</span><span class=\"sy4\">,</span><span class=\"nu0\">4</span><span class=\"sy4\">,</span><span class=\"nu0\">5</span><span class=\"sy4\">,</span><span class=\"nu0\">6</span><span class=\"sy4\">,</span><span class=\"nu0\">7</span><span class=\"sy4\">,</span><span class=\"nu0\">8</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy4\">,</span><br/> noattack<span class=\"br0\">(</span>X<span class=\"sy3\">/</span>Y<span class=\"sy4\">,</span> Others<span class=\"br0\">)</span><span class=\"sy4\">.</span><br/>\u00a0<br/>noattack<span class=\"br0\">(</span>_<span class=\"sy4\">,</span><span class=\"br0\">[</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy4\">.</span><br/>\u00a0<br/>noattack<span class=\"br0\">(</span>X<span class=\"sy3\">/</span>Y<span class=\"sy4\">,</span><span class=\"br0\">[</span>X1<span class=\"sy3\">/</span>Y1<span class=\"sy5\">|</span>Others<span class=\"br0\">]</span><span class=\"br0\">)</span> <span class=\"sy1\">:-</span><br/> Y <span class=\"sy6\">=</span>\\<span class=\"sy6\">=</span> Y1<span class=\"sy4\">,</span><br/> Y1 <span class=\"sy3\">-</span> Y <span class=\"sy6\">=</span>\\<span class=\"sy6\">=</span> X1 <span class=\"sy3\">-</span> X<span class=\"sy4\">,</span><br/> Y1 <span class=\"sy3\">-</span> Y <span class=\"sy6\">=</span>\\<span class=\"sy6\">=</span> X <span class=\"sy3\">-</span> X1<span class=\"sy4\">,</span><br/> noattack<span class=\"br0\">(</span>X<span class=\"sy3\">/</span>Y<span class=\"sy4\">,</span>Others<span class=\"br0\">)</span><span class=\"sy4\">.</span><br/>\u00a0<br/>member<span class=\"br0\">(</span>Item<span class=\"sy4\">,</span><span class=\"br0\">[</span>Item<span class=\"sy5\">|</span>Rest<span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy4\">.</span><br/>\u00a0<br/>member<span class=\"br0\">(</span>Item<span class=\"sy4\">,</span><span class=\"br0\">[</span>First<span class=\"sy5\">|</span>Rest<span class=\"br0\">]</span><span class=\"br0\">)</span> <span class=\"sy1\">:-</span><br/> member<span class=\"br0\">(</span>Item<span class=\"sy4\">,</span>Rest<span class=\"br0\">)</span><span class=\"sy4\">.</span><br/>\u00a0<br/>template<span class=\"br0\">(</span><span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"sy3\">/</span>Y1<span class=\"sy4\">,</span><span class=\"nu0\">2</span><span class=\"sy3\">/</span>Y2<span class=\"sy4\">,</span><span class=\"nu0\">3</span><span class=\"sy3\">/</span>Y3<span class=\"sy4\">,</span><span class=\"nu0\">4</span><span class=\"sy3\">/</span>Y4<span class=\"sy4\">,</span><span class=\"nu0\">5</span><span class=\"sy3\">/</span>Y5<span class=\"sy4\">,</span><span class=\"nu0\">6</span><span class=\"sy3\">/</span>Y6<span class=\"sy4\">,</span><span class=\"nu0\">7</span><span class=\"sy3\">/</span>Y7<span class=\"sy4\">,</span><span class=\"nu0\">8</span><span class=\"sy3\">/</span>Y8<span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy4\">.</span></pre>"}, {"lang": "Pure", "loc": 19, "block": "<pre class=\"text highlighted_source\">/*<br/> n-queens.pure<br/> Tectonics:<br/>     pure -c queens.pure -o queens<br/>  or <br/>     pure -q -i queens.pure<br/>*/<br/>using system;<br/>\u00a0<br/>queens n = search n 1 [] with<br/>   search n i p  = [reverse p] if i&gt;n;<br/>                 = cat [search n (i+1) ((i,j):p) | j = 1..n; safe (i,j) p];<br/>   safe (i,j) p  = ~any (check (i,j)) p;<br/>   check (i1,j1) (i2,j2)<br/>                 = i1==i2 || j1==j2 || i1+j1==i2+j2 || i1-j1==i2-j2;<br/>end;<br/>\u00a0<br/>compiling || (puts(\"queens 4: \" + str(queens 4)) $$ <br/>              puts(\"Solutions to queens 7: \" + str(#queens 7)));</pre>"}, {"lang": "PureBasic", "loc": 80, "block": "<pre class=\"purebasic highlighted_source\"><span class=\"kw1\">Global</span> solutions<br/>\u00a0<br/><span class=\"kw1\">Procedure</span> showBoard<span class=\"br0\">(</span>Array queenCol<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>  <span class=\"kw1\">Protected</span> row, column, n <span class=\"sy0\">=</span> ArraySize<span class=\"br0\">(</span>queenCol<span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\u00a0<br/>  <span class=\"kw2\">PrintN</span><span class=\"br0\">(</span><span class=\"st0\">\" Solution \"</span> <span class=\"sy0\">+</span> <span class=\"kw2\">Str</span><span class=\"br0\">(</span>solutions<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>  <span class=\"kw1\">For</span> row <span class=\"sy0\">=</span> <span class=\"nu0\">0</span> <span class=\"kw1\">To</span> n<br/>    <span class=\"kw1\">For</span> column <span class=\"sy0\">=</span> <span class=\"nu0\">0</span> <span class=\"kw1\">To</span> n<br/>      <span class=\"kw1\">If</span> queenCol<span class=\"br0\">(</span>row<span class=\"br0\">)</span> <span class=\"sy0\">=</span> column<br/>        <span class=\"kw2\">Print</span><span class=\"br0\">(</span><span class=\"st0\">\"|Q\"</span><span class=\"br0\">)</span><br/>      <span class=\"kw1\">Else</span><br/>        <span class=\"kw2\">Print</span><span class=\"br0\">(</span><span class=\"st0\">\"| \"</span><span class=\"br0\">)</span><br/>      <span class=\"kw1\">EndIf</span><br/>    <span class=\"kw1\">Next</span><br/>    <span class=\"kw2\">PrintN</span><span class=\"br0\">(</span><span class=\"st0\">\"|\"</span><span class=\"br0\">)</span><br/>  <span class=\"kw1\">Next</span><br/><span class=\"kw1\">EndProcedure</span><br/>\u00a0<br/><span class=\"kw1\">Macro</span> advanceIfPossible<span class=\"br0\">(</span><span class=\"br0\">)</span><br/>  x <span class=\"sy0\">+</span> <span class=\"nu0\">1</span><br/>  <span class=\"kw1\">While</span> x <span class=\"sy0\">&lt;=</span> n <span class=\"kw1\">And</span> columns<span class=\"br0\">(</span>x<span class=\"br0\">)</span>: x <span class=\"sy0\">+</span> <span class=\"nu0\">1</span>: <span class=\"kw1\">Wend</span><br/>  <span class=\"kw1\">If</span> x <span class=\"sy0\">&gt;</span> n<br/>    <span class=\"kw1\">ProcedureReturn</span> #False <span class=\"co1\">;backtrack</span><br/>  <span class=\"kw1\">EndIf</span> <br/><span class=\"kw1\">EndMacro</span><br/>\u00a0<br/><span class=\"kw1\">Procedure</span> placeQueens<span class=\"br0\">(</span>Array queenCol<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"br0\">)</span>, Array columns<span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"br0\">)</span>, row <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><span class=\"br0\">)</span><br/>  <span class=\"kw1\">Protected</span> n <span class=\"sy0\">=</span> ArraySize<span class=\"br0\">(</span>queenCol<span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\u00a0<br/>  <span class=\"kw1\">If</span> row <span class=\"sy0\">&gt;</span> n<br/>    solutions <span class=\"sy0\">+</span> <span class=\"nu0\">1</span><br/>    showBoard<span class=\"br0\">(</span>queenCol<span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>    <span class=\"kw1\">ProcedureReturn</span> #False <span class=\"co1\">;backtrack</span><br/>  <span class=\"kw1\">EndIf</span><br/>\u00a0<br/>  <span class=\"kw1\">Protected</span> x, queen, passed<br/>  <span class=\"kw1\">While</span> columns<span class=\"br0\">(</span>x<span class=\"br0\">)</span>: x <span class=\"sy0\">+</span> <span class=\"nu0\">1</span>: <span class=\"kw1\">Wend</span><br/>\u00a0<br/>  <span class=\"co1\">;place a new queen in one of the available columns</span><br/>  <span class=\"kw1\">Repeat</span> <br/>    passed <span class=\"sy0\">=</span> #True<br/>    <span class=\"kw1\">For</span> queen <span class=\"sy0\">=</span> <span class=\"nu0\">0</span> <span class=\"kw1\">To</span> row <span class=\"sy0\">-</span> <span class=\"nu0\">1</span><br/>      <span class=\"kw1\">If</span> <span class=\"br0\">(</span><span class=\"br0\">(</span>queenCol<span class=\"br0\">(</span>queen<span class=\"br0\">)</span> <span class=\"sy0\">-</span> x<span class=\"br0\">)</span> <span class=\"sy0\">=</span> <span class=\"br0\">(</span>queen <span class=\"sy0\">-</span> row<span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"kw1\">Or</span> <span class=\"br0\">(</span><span class=\"br0\">(</span>queenCol<span class=\"br0\">(</span>queen<span class=\"br0\">)</span> <span class=\"sy0\">-</span> x<span class=\"br0\">)</span> <span class=\"sy0\">=</span> <span class=\"sy0\">-</span><span class=\"br0\">(</span>queen <span class=\"sy0\">-</span> row<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>        advanceIfPossible<span class=\"br0\">(</span><span class=\"br0\">)</span><br/>        passed <span class=\"sy0\">=</span> #False<br/>        <span class=\"kw1\">Break</span> <span class=\"co1\">;ForNext loop</span><br/>      <span class=\"kw1\">EndIf</span><br/>    <span class=\"kw1\">Next</span><br/>\u00a0<br/>    <span class=\"kw1\">If</span> passed<br/>      queenCol<span class=\"br0\">(</span>row<span class=\"br0\">)</span> <span class=\"sy0\">=</span> x: columns<span class=\"br0\">(</span>x<span class=\"br0\">)</span> <span class=\"sy0\">=</span> <span class=\"nu0\">1</span><br/>      <span class=\"kw1\">If</span> <span class=\"kw1\">Not</span> placeQueens<span class=\"br0\">(</span>queenCol<span class=\"br0\">(</span><span class=\"br0\">)</span>, columns<span class=\"br0\">(</span><span class=\"br0\">)</span>, row <span class=\"sy0\">+</span> <span class=\"nu0\">1</span><span class=\"br0\">)</span><br/>        columns<span class=\"br0\">(</span>x<span class=\"br0\">)</span> <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><br/>        advanceIfPossible<span class=\"br0\">(</span><span class=\"br0\">)</span><br/>      <span class=\"kw1\">EndIf</span> <br/>    <span class=\"kw1\">EndIf</span> <br/>  <span class=\"kw1\">ForEver</span><br/><span class=\"kw1\">EndProcedure</span><br/>\u00a0<br/><span class=\"kw1\">Procedure</span> queens<span class=\"br0\">(</span>n<span class=\"br0\">)</span><br/>  <span class=\"kw1\">If</span> n <span class=\"sy0\">&gt;</span> <span class=\"nu0\">0</span><br/>    <span class=\"kw1\">Dim</span> queenCol<span class=\"br0\">(</span>n <span class=\"sy0\">-</span> <span class=\"nu0\">1</span><span class=\"br0\">)</span><br/>    <span class=\"kw1\">Dim</span> columns<span class=\"br0\">(</span>n <span class=\"sy0\">-</span> <span class=\"nu0\">1</span><span class=\"br0\">)</span><br/>    placeQueens<span class=\"br0\">(</span>queenCol<span class=\"br0\">(</span><span class=\"br0\">)</span>, columns<span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"br0\">)</span> <br/>  <span class=\"kw1\">EndIf</span> <br/><span class=\"kw1\">EndProcedure</span><br/>\u00a0<br/><span class=\"kw1\">If</span> <span class=\"kw2\">OpenConsole</span><span class=\"br0\">(</span><span class=\"br0\">)</span><br/>  <span class=\"kw1\">Define</span> i<br/>  <span class=\"kw1\">For</span> i <span class=\"sy0\">=</span> <span class=\"nu0\">1</span> <span class=\"kw1\">To</span> <span class=\"nu0\">12</span><br/>    solutions <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><br/>    queens<span class=\"br0\">(</span>i<span class=\"br0\">)</span><br/>    <span class=\"kw2\">PrintN</span><span class=\"br0\">(</span>#CRLF$ <span class=\"sy0\">+</span> <span class=\"kw2\">Str</span><span class=\"br0\">(</span>solutions<span class=\"br0\">)</span> <span class=\"sy0\">+</span> <span class=\"st0\">\" solutions found for \"</span> <span class=\"sy0\">+</span> <span class=\"kw2\">Str</span><span class=\"br0\">(</span>i<span class=\"br0\">)</span> <span class=\"sy0\">+</span> <span class=\"st0\">\"-queens.\"</span><span class=\"br0\">)</span><br/>    <span class=\"kw2\">Input</span><span class=\"br0\">(</span><span class=\"br0\">)</span><br/>  <span class=\"kw1\">Next</span> <br/>\u00a0<br/>  <span class=\"kw2\">Print</span><span class=\"br0\">(</span>#CRLF$ <span class=\"sy0\">+</span> <span class=\"st0\">\"Press ENTER to exit\"</span><span class=\"br0\">)</span><br/>  <span class=\"kw2\">Input</span><span class=\"br0\">(</span><span class=\"br0\">)</span><br/>  <span class=\"kw2\">CloseConsole</span><span class=\"br0\">(</span><span class=\"br0\">)</span><br/><span class=\"kw1\">EndIf</span></pre>"}, {"lang": "Python", "loc": 8, "block": "<pre class=\"python highlighted_source\"><span class=\"kw1\">from</span> <span class=\"kw3\">itertools</span> <span class=\"kw1\">import</span> permutations<br/>\u00a0<br/>n <span class=\"sy0\">=</span> <span class=\"nu0\">8</span><br/>cols <span class=\"sy0\">=</span> <span class=\"kw2\">range</span><span class=\"br0\">(</span>n<span class=\"br0\">)</span><br/><span class=\"kw1\">for</span> vec <span class=\"kw1\">in</span> permutations<span class=\"br0\">(</span>cols<span class=\"br0\">)</span>:<br/>    <span class=\"kw1\">if</span> n <span class=\"sy0\">==</span> <span class=\"kw2\">len</span><span class=\"br0\">(</span><span class=\"kw2\">set</span><span class=\"br0\">(</span>vec<span class=\"br0\">[</span>i<span class=\"br0\">]</span>+i <span class=\"kw1\">for</span> i <span class=\"kw1\">in</span> cols<span class=\"br0\">)</span><span class=\"br0\">)</span> \\<br/>         <span class=\"sy0\">==</span> <span class=\"kw2\">len</span><span class=\"br0\">(</span><span class=\"kw2\">set</span><span class=\"br0\">(</span>vec<span class=\"br0\">[</span>i<span class=\"br0\">]</span>-i <span class=\"kw1\">for</span> i <span class=\"kw1\">in</span> cols<span class=\"br0\">)</span><span class=\"br0\">)</span>:<br/>        <span class=\"kw1\">print</span> <span class=\"br0\">(</span> vec <span class=\"br0\">)</span></pre>"}, {"lang": "QB64", "loc": 41, "block": "<pre class=\"text highlighted_source\">\u00a0<br/>DIM SHARED QUEENS AS INTEGER<br/>PRINT \"# of queens:\";: INPUT QUEENS<br/>IF QUEENS = 0 THEN END<br/>OPEN LTRIM$(STR$(QUEENS)) + \"queens.dat\" FOR OUTPUT AS #1<br/>PRINT \"Queens: Calculates\"; QUEENS; \" queens problem.\"<br/>DIM SHARED arrayqcol(QUEENS) AS LONG ' columns of queens<br/>DIM SHARED nsolutions AS LONG<br/>CALL dorow(1) ' start with row 1<br/>LOCATE 22, 1<br/>PRINT STR$(nsolutions) + \" solutions\"<br/>END<br/>SUB dorow (irow) ' starts with row irow<br/>    FOR icol = 1 TO QUEENS<br/>        FOR iqueen = 1 TO irow - 1 ' check for conflict with previous queens<br/>            IF arrayqcol(iqueen) = icol THEN GOTO continue1 ' same column?<br/>            ' iqueen is also row of queen<br/>            IF iqueen + arrayqcol(iqueen) = irow + icol THEN GOTO continue1 ' right diagonal?<br/>            IF iqueen - arrayqcol(iqueen) = irow - icol THEN GOTO continue1 ' left diagonal?<br/>        NEXT iqueen<br/>        ' at this point we can add a queen<br/>        arrayqcol(irow) = icol ' add to array<br/>        LOCATE irow + 2, icol: PRINT \"x\"; ' show progress<br/>        _DELAY (.001) ' slows processing<br/>        IF irow = QUEENS THEN ' solution?<br/>            nsolutions = nsolutions + 1<br/>            PRINT #1, \"Solution #\" + MID$(STR$(nsolutions), 2) + \".\"<br/>            FOR i1 = 1 TO QUEENS ' rows<br/>                s1$ = STRING$(QUEENS, \".\") ' columns<br/>                MID$(s1$, arrayqcol(i1), 1) = \"x\" ' x in queen column<br/>                PRINT #1, s1$<br/>            NEXT i1<br/>            PRINT #1, \"\"<br/>        ELSE<br/>            CALL dorow(irow + 1) ' recursive call to next row<br/>        END IF<br/>        LOCATE irow + 2, icol: PRINT \".\"; ' remove queen<br/>        continue1:<br/>    NEXT icol<br/>END SUB<br/>\u00a0</pre>"}, {"lang": "R", "loc": 28, "block": "<pre class=\"text highlighted_source\"># Brute force, see the \"Permutations\" page for the next.perm function<br/>safe &lt;- function(p) {<br/>  n &lt;- length(p)<br/>  for (i in seq(1, n - 1)) {<br/>    for (j in seq(i + 1, n)) {<br/>      if (abs(p[j] - p[i]) == abs(j - i)) return(F)<br/>    }<br/>  }<br/>  return(T)<br/>}<br/>\u00a0<br/>queens &lt;- function(n) {<br/>  p &lt;- 1:n<br/>  k &lt;- 0<br/>  while (!is.null(p)) {<br/>    if(safe(p)) {<br/>      cat(p, \"\\n\")<br/>      k &lt;- k + 1<br/>    }<br/>    p &lt;- next.perm(p)<br/>  }<br/>  return(k)<br/>}<br/>\u00a0<br/>queens(8)<br/># 1 5 8 6 3 7 2 4 <br/># ...<br/># 92</pre>"}, {"lang": "Racket", "loc": 32, "block": "<pre class=\"text highlighted_source\">\u00a0<br/>#lang racket<br/>\u00a0<br/>(struct Q (x y) #:transparent)<br/>\u00a0<br/>;; returns true if given q1 and q2 do not conflict<br/>(define (safe? q1 q2)<br/>  (match* (q1 q2)<br/>    [((Q x1 y1) (Q x2 y2))<br/>     (not (or (= x1 x2) (= y1 y2)<br/>              (= (abs (- x1 x2)) (abs (- y1 y2)))))]))<br/>\u00a0<br/>;; returns true if given q doesn't conflict with anything in given list of qs<br/>(define (safe-lst? q qs) (for/and ([q2 qs]) (safe? q q2)))<br/>\u00a0<br/>(define (nqueens n)<br/> \u00a0;; qs is partial solution; x y is current position to try<br/>  (let loop ([qs null] [x 0] [y 0])<br/>    (cond [(= (length qs) n) qs]         \u00a0; found a solution<br/>          [(&gt;= x n) (loop qs 0 (add1 y))]\u00a0; go to next row<br/>          [(&gt;= y n) #f]                  \u00a0; current solution is invalid<br/>          [else<br/>           (define q (Q x y))<br/>           (if (safe-lst? q qs)\u00a0; is current position safe?<br/>               (or (loop (cons q qs) 0 (add1 y))\u00a0; optimistically place a queen<br/>                                                \u00a0; (and move pos to next row)<br/>                   (loop qs (add1 x) y)) \u00a0; backtrack if it fails<br/>               (loop qs (add1 x) y))])))<br/>\u00a0<br/>(nqueens 8)<br/>; =&gt; (list (Q 3 7) (Q 1 6) (Q 6 5) (Q 2 4) (Q 5 3) (Q 7 2) (Q 4 1) (Q 0 0))<br/>\u00a0</pre>"}, {"lang": "Rascal", "loc": 10, "block": "<pre class=\"text highlighted_source\">import Prelude;<br/>\u00a0<br/>public set[list[int]] Nqueens(int n){<br/>\tcols = upTill(n);<br/>\tresult = {};<br/>\tfor (vector &lt;- permutations(cols)){<br/>\t\tif (n == size({vector[j] + j |j &lt;- cols}) &amp;&amp; n == size({vector[j] - j |j &lt;- cols})) <br/>\t\t\tresult += vector;}<br/>\treturn result;<br/>}</pre>"}, {"lang": "REXX", "loc": 48, "block": "<pre class=\"rexx highlighted_source\"><span class=\"coMULTI\">/*REXX program  places   N   queens on an  NxN  chessboard  (the eight queens problem). */</span><br/><span class=\"kw1\">parse</span> <span class=\"kw1\">arg</span> N <span class=\"sy0\">.</span>                                    <span class=\"coMULTI\">/*obtain optional argument from the CL.*/</span><br/><span class=\"kw1\">if</span> N==<span class=\"st0\">''</span> <span class=\"sy0\">|</span> N==<span class=\"st0\">\",\"</span>  <span class=\"kw3\">then</span> N=<span class=\"nu0\">8</span>                      <span class=\"coMULTI\">/*Not specified:  Then use the default.*/</span><br/><span class=\"kw1\">if</span> N<span class=\"sy0\">&lt;</span><span class=\"nu0\">1</span>  <span class=\"kw3\">then</span> <span class=\"kw1\">signal</span> nOK                          <span class=\"coMULTI\">/*display a message, the board is bad. */</span><br/>rank=<span class=\"nu0\">1</span>;   file=<span class=\"nu0\">1</span>;       #=<span class=\"nu0\">0</span>                      <span class=\"coMULTI\">/*starting rank&amp;file;  #\u2261number queens.*/</span><br/>@<span class=\"sy0\">.</span>=<span class=\"nu0\">0</span>;     pad=<span class=\"kw6\">left</span><span class=\"br0\">(</span><span class=\"st0\">''</span>, <span class=\"nu0\">9</span><span class=\"sy0\">*</span> <span class=\"br0\">(</span>N<span class=\"sy0\">&lt;</span><span class=\"nu0\">18</span><span class=\"br0\">)</span> <span class=\"br0\">)</span>               <span class=\"coMULTI\">/*define empty board;  set indentation.*/</span><br/>                                                 <span class=\"coMULTI\">/* [\u2193]  rank&amp;file \u2261 chessboard row&amp;cols*/</span><br/>  <span class=\"kw1\">do</span>  <span class=\"kw2\">while</span> #<span class=\"sy0\">&lt;</span>N;      @<span class=\"sy0\">.</span>file<span class=\"sy0\">.</span>rank=<span class=\"nu0\">1</span>              <span class=\"coMULTI\">/*keep placing queens until we're done.*/</span><br/>  <span class=\"kw1\">if</span> ok<span class=\"br0\">(</span>file, rank<span class=\"br0\">)</span>  <span class=\"kw3\">then</span> <span class=\"kw1\">do</span>; #=#+<span class=\"nu0\">1</span>;      file=<span class=\"nu0\">1</span> <span class=\"coMULTI\">/*Queen not being attacked? Then eureka*/</span><br/>                              rank=rank+<span class=\"nu0\">1</span>        <span class=\"coMULTI\">/*use another attempt at another rank. */</span><br/>                              <span class=\"kw1\">iterate</span>            <span class=\"coMULTI\">/*go and try another queen placement.  */</span><br/>                          <span class=\"kw3\">end</span>                    <span class=\"coMULTI\">/* [\u2191]  found a good queen placement.  */</span><br/>  @<span class=\"sy0\">.</span>file<span class=\"sy0\">.</span>rank=<span class=\"nu0\">0</span>                                  <span class=\"coMULTI\">/*It isn't safe.  So remove this queen.*/</span><br/>  file=file+<span class=\"nu0\">1</span>                                    <span class=\"coMULTI\">/*So, try the next (higher) chess file.*/</span><br/>              <span class=\"kw1\">do</span>  <span class=\"kw2\">while</span> file<span class=\"sy0\">&gt;</span>N;      rank=rank-<span class=\"nu0\">1</span>;                <span class=\"kw1\">if</span> rank==<span class=\"nu0\">0</span>  <span class=\"kw3\">then</span> <span class=\"kw1\">call</span> nOK<br/>                <span class=\"kw1\">do</span> j=<span class=\"nu0\">1</span>  <span class=\"kw2\">for</span> N;       <span class=\"kw1\">if</span> <span class=\"sy0\">\\</span>@<span class=\"sy0\">.</span>j<span class=\"sy0\">.</span>rank  <span class=\"kw3\">then</span> <span class=\"kw1\">iterate</span>              <span class=\"coMULTI\">/*\u00bfocupado?*/</span><br/>                @<span class=\"sy0\">.</span>j<span class=\"sy0\">.</span>rank=<span class=\"nu0\">0</span>;  #=#-<span class=\"nu0\">1</span>;  file=j+<span class=\"nu0\">1</span>;  <span class=\"kw1\">leave</span><br/>                <span class=\"kw3\">end</span>  <span class=\"coMULTI\">/*j*/</span><br/>              <span class=\"kw3\">end</span>    <span class=\"coMULTI\">/*while file&gt;N*/</span><br/>  <span class=\"kw3\">end</span>                <span class=\"coMULTI\">/*while    #&lt;N*/</span><br/>\u00a0<br/><span class=\"kw1\">say</span> <span class=\"st0\">'A solution for '</span>    N    <span class=\"st0\">\" queens:\"</span>;   g=<span class=\"kw6\">substr</span><span class=\"br0\">(</span> <span class=\"kw6\">copies</span><span class=\"br0\">(</span><span class=\"st0\">\"\u256c\u2550\u2550\u2550\"</span>,  N<span class=\"br0\">)</span>  ,<span class=\"nu0\">2</span><span class=\"br0\">)</span>;         <span class=\"kw1\">say</span><br/><span class=\"kw1\">say</span> pad  <span class=\"kw6\">translate</span><span class=\"br0\">(</span><span class=\"st0\">'\u2554'</span>g<span class=\"st0\">\"\u2557\"</span>, <span class=\"st0\">'\u2566'</span>, <span class=\"st0\">\"\u256c\"</span><span class=\"br0\">)</span>            <span class=\"coMULTI\">/*display the top rank  (of the board).*/</span><br/>line   = <span class=\"st0\">'\u2560'</span>g<span class=\"st0\">\"\u2563\"</span>;     dither= <span class=\"st0\">\"\u2592\"</span>                <span class=\"coMULTI\">/*define a line (bar) for cell boundary*/</span><br/>bar    = <span class=\"st0\">'\u2551'</span>   \u00a0;     queen = <span class=\"st0\">\"Q\"</span>                <span class=\"coMULTI\">/*kinds:  horizontal, vertical, salad. */</span><br/>Bqueen = dither <span class=\"sy0\">||</span> queen <span class=\"sy0\">||</span> dither               <span class=\"coMULTI\">/*glyph befitting a black\u2500square queen.*/</span><br/>Wqueen =        <span class=\"st0\">' '</span>queen<span class=\"st0\">\" \"</span>                      <span class=\"coMULTI\">/*  \"       \"     \" white\u2500square   \"   */</span><br/>\u00a0<br/>  <span class=\"kw1\">do</span>   rank=<span class=\"nu0\">1</span>  <span class=\"kw2\">for</span> N;     <span class=\"kw1\">if</span> rank<span class=\"sy0\">\\</span>==<span class=\"nu0\">1</span>  <span class=\"kw3\">then</span> <span class=\"kw1\">say</span> pad line;    _=  <span class=\"coMULTI\">/*display sep for rank.*/</span><br/>    <span class=\"kw1\">do</span> file=<span class=\"nu0\">1</span>  <span class=\"kw2\">for</span> N;         B = <span class=\"br0\">(</span>file+rank<span class=\"br0\">)</span> <span class=\"sy0\">//</span> <span class=\"nu0\">2</span>               <span class=\"coMULTI\">/*is the square black? */</span><br/>    Qgylph=Wqueen;        <span class=\"kw1\">if</span>  B  <span class=\"kw3\">then</span> Qgylph=Bqueen              <span class=\"coMULTI\">/*use a dithered queen.*/</span><br/>    <span class=\"kw1\">if</span> @<span class=\"sy0\">.</span>file<span class=\"sy0\">.</span>rank <span class=\"kw3\">then</span> _=_ <span class=\"sy0\">||</span> bar <span class=\"sy0\">||</span> Qgylph                     <span class=\"coMULTI\">/*3\u2500char queen symbol. */</span><br/>                   <span class=\"kw3\">else</span> <span class=\"kw1\">if</span> B <span class=\"kw3\">then</span> _=_ <span class=\"sy0\">||</span> bar <span class=\"sy0\">||</span> <span class=\"kw6\">copies</span><span class=\"br0\">(</span>dither,<span class=\"nu0\">3</span><span class=\"br0\">)</span> <span class=\"coMULTI\">/*use dithering for sq.*/</span><br/>                             <span class=\"kw3\">else</span> _=_ <span class=\"sy0\">||</span> bar <span class=\"sy0\">||</span> <span class=\"kw6\">copies</span><span class=\"br0\">(</span><span class=\"st0\">' '</span>   ,<span class=\"nu0\">3</span><span class=\"br0\">)</span> <span class=\"coMULTI\">/* \"   3 blanks  \"   \" */</span><br/>    <span class=\"kw3\">end</span>   <span class=\"coMULTI\">/*file*/</span>                               <span class=\"coMULTI\">/* [\u2191]  preserve square\u2500ish chessboard.*/</span><br/>  <span class=\"kw1\">say</span> pad  _ <span class=\"sy0\">||</span> bar                              <span class=\"coMULTI\">/*show a single rank of the chessboard.*/</span><br/>  <span class=\"kw3\">end</span>     <span class=\"coMULTI\">/*rank*/</span>                               <span class=\"coMULTI\">/*80 cols  can view a 19x19 chessboard.*/</span><br/>\u00a0<br/><span class=\"kw1\">say</span> pad  <span class=\"kw6\">translate</span><span class=\"br0\">(</span><span class=\"st0\">'\u255a'</span>g<span class=\"st0\">\"\u255d\"</span>, <span class=\"st0\">'\u2569'</span>, <span class=\"st0\">\"\u256c\"</span><span class=\"br0\">)</span>            <span class=\"coMULTI\">/*display the last rank (of the board).*/</span><br/><span class=\"kw1\">exit</span>  <span class=\"nu0\">1</span>                                          <span class=\"coMULTI\">/*stick a fork in it,  we're all done. */</span><br/><span class=\"coMULTI\">/*\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500*/</span><br/>nOK: <span class=\"kw1\">say</span>;      <span class=\"kw1\">say</span>  <span class=\"st0\">\"No solution for\"</span>      N      <span class=\"st0\">'queens.'</span>;          <span class=\"kw1\">say</span>;          <span class=\"kw1\">exit</span> <span class=\"nu0\">0</span><br/><span class=\"coMULTI\">/*\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500*/</span><br/>ok:  <span class=\"kw1\">parse</span> <span class=\"kw1\">arg</span> f,r;   fp=f+<span class=\"nu0\">1</span>;     rm=r-<span class=\"nu0\">1</span>         <span class=\"coMULTI\">/*if return\u22610,  then queen isn't safe. */</span><br/>              <span class=\"kw1\">do</span> k=<span class=\"nu0\">1</span>          <span class=\"kw2\">for</span> rm;                <span class=\"kw1\">if</span> @<span class=\"sy0\">.</span>f<span class=\"sy0\">.</span>k  <span class=\"kw3\">then</span> <span class=\"kw1\">return</span> <span class=\"nu0\">0</span>;          <span class=\"kw3\">end</span><br/>     f=f-<span class=\"nu0\">1</span>;   <span class=\"kw1\">do</span> k=rm  <span class=\"kw2\">by</span> -<span class=\"nu0\">1</span>  <span class=\"kw2\">for</span> rm  <span class=\"kw2\">while</span> f<span class=\"sy0\">\\</span>==<span class=\"nu0\">0</span>;   <span class=\"kw1\">if</span> @<span class=\"sy0\">.</span>f<span class=\"sy0\">.</span>k  <span class=\"kw3\">then</span> <span class=\"kw1\">return</span> <span class=\"nu0\">0</span>;  f=f-<span class=\"nu0\">1</span>;  <span class=\"kw3\">end</span><br/>     f=fp;    <span class=\"kw1\">do</span> k=rm  <span class=\"kw2\">by</span> -<span class=\"nu0\">1</span>  <span class=\"kw2\">for</span> rm  <span class=\"kw2\">while</span> f <span class=\"sy0\">&lt;</span>=N;   <span class=\"kw1\">if</span> @<span class=\"sy0\">.</span>f<span class=\"sy0\">.</span>k  <span class=\"kw3\">then</span> <span class=\"kw1\">return</span> <span class=\"nu0\">0</span>;  f=f+<span class=\"nu0\">1</span>;  <span class=\"kw3\">end</span><br/>     <span class=\"kw1\">return</span> <span class=\"nu0\">1</span>   <span class=\"coMULTI\">/*1\u2261queen is safe. */</span>            <span class=\"coMULTI\">/*  \u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191    is queen under attack? */</span></pre>"}, {"lang": "Ruby", "loc": 59, "block": "<pre class=\"ruby highlighted_source\"><span class=\"co1\"># 1. Divide n by 12. Remember the remainder (n is 8 for the eight queens</span><br/><span class=\"co1\">#    puzzle).</span><br/><span class=\"co1\"># 2. Write a list of the even numbers from 2 to n in order.</span><br/><span class=\"co1\"># 3. If the remainder is 3 or 9, move 2 to the end of the list.</span><br/><span class=\"co1\"># 4. Append the odd numbers from 1 to n in order, but, if the remainder is 8,</span><br/><span class=\"co1\">#    switch pairs (i.e. 3, 1, 7, 5, 11, 9, \u2026).</span><br/><span class=\"co1\"># 5. If the remainder is 2, switch the places of 1 and 3, then move 5 to the</span><br/><span class=\"co1\">#    end of the list.</span><br/><span class=\"co1\"># 6. If the remainder is 3 or 9, move 1 and 3 to the end of the list.</span><br/><span class=\"co1\"># 7. Place the first-column queen in the row with the first number in the</span><br/><span class=\"co1\">#    list, place the second-column queen in the row with the second number in</span><br/><span class=\"co1\">#    the list, etc.</span><br/>\u00a0<br/><span class=\"kw1\">def</span> n_queens<span class=\"br0\">(</span>n<span class=\"br0\">)</span><br/>  <span class=\"kw1\">if</span> n == <span class=\"nu0\">1</span><br/>    <span class=\"kw2\">return</span> <span class=\"st0\">\"Q\"</span><br/>  <span class=\"kw1\">elsif</span> n <span class=\"sy0\">&lt;</span> <span class=\"nu0\">4</span><br/>    <span class=\"kw3\">puts</span> <span class=\"st0\">\"no solutions for n=#{n}\"</span><br/>    <span class=\"kw2\">return</span> <span class=\"st0\">\"\"</span><br/>  <span class=\"kw1\">end</span><br/>\u00a0<br/>  evens = <span class=\"br0\">(</span><span class=\"nu0\">2</span>..<span class=\"me1\">n</span><span class=\"br0\">)</span>.<span class=\"me1\">step</span><span class=\"br0\">(</span><span class=\"nu0\">2</span><span class=\"br0\">)</span>.<span class=\"me1\">to_a</span><br/>  odds = <span class=\"br0\">(</span><span class=\"nu0\">1</span>..<span class=\"me1\">n</span><span class=\"br0\">)</span>.<span class=\"me1\">step</span><span class=\"br0\">(</span><span class=\"nu0\">2</span><span class=\"br0\">)</span>.<span class=\"me1\">to_a</span><br/>\u00a0<br/>  rem = n <span class=\"sy0\">%</span> <span class=\"nu0\">12</span>  <span class=\"co1\"># (1)</span><br/>  nums = evens  <span class=\"co1\"># (2)</span><br/>\u00a0<br/>  nums.<span class=\"me1\">push</span><span class=\"br0\">(</span>nums.<span class=\"me1\">shift</span><span class=\"br0\">)</span> <span class=\"kw1\">if</span> rem == <span class=\"nu0\">3</span> <span class=\"kw1\">or</span> rem == <span class=\"nu0\">9</span>  <span class=\"co1\"># (3)</span><br/>\u00a0<br/>  <span class=\"co1\"># (4)</span><br/>  <span class=\"kw1\">if</span> rem == <span class=\"nu0\">8</span><br/>    odds = odds.<span class=\"me1\">each_slice</span><span class=\"br0\">(</span><span class=\"nu0\">2</span><span class=\"br0\">)</span>.<span class=\"me1\">inject</span><span class=\"br0\">(</span><span class=\"br0\">[</span><span class=\"br0\">]</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><span class=\"sy0\">|</span>ary, <span class=\"br0\">(</span>a,b<span class=\"br0\">)</span><span class=\"sy0\">|</span> ary <span class=\"sy0\">+</span>= <span class=\"br0\">[</span>b,a<span class=\"br0\">]</span><span class=\"br0\">}</span><br/>  <span class=\"kw1\">end</span><br/>  nums.<span class=\"me1\">concat</span><span class=\"br0\">(</span>odds<span class=\"br0\">)</span><br/>\u00a0<br/>  <span class=\"co1\"># (5)</span><br/>  <span class=\"kw1\">if</span> rem == <span class=\"nu0\">2</span><br/>    idx = <span class=\"br0\">[</span><span class=\"br0\">]</span><br/>    <span class=\"br0\">[</span><span class=\"nu0\">1</span>,<span class=\"nu0\">3</span>,<span class=\"nu0\">5</span><span class=\"br0\">]</span>.<span class=\"me1\">each</span> <span class=\"br0\">{</span><span class=\"sy0\">|</span>i<span class=\"sy0\">|</span> idx<span class=\"br0\">[</span>i<span class=\"br0\">]</span> = nums.<span class=\"me1\">index</span><span class=\"br0\">(</span>i<span class=\"br0\">)</span><span class=\"br0\">}</span><br/>    nums<span class=\"br0\">[</span>idx<span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"br0\">]</span><span class=\"br0\">]</span>, nums<span class=\"br0\">[</span>idx<span class=\"br0\">[</span><span class=\"nu0\">3</span><span class=\"br0\">]</span><span class=\"br0\">]</span> = nums<span class=\"br0\">[</span>idx<span class=\"br0\">[</span><span class=\"nu0\">3</span><span class=\"br0\">]</span><span class=\"br0\">]</span>, nums<span class=\"br0\">[</span>idx<span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"br0\">]</span><span class=\"br0\">]</span><br/>    nums.<span class=\"me1\">slice</span>!<span class=\"br0\">(</span>idx<span class=\"br0\">[</span><span class=\"nu0\">5</span><span class=\"br0\">]</span><span class=\"br0\">)</span><br/>    nums.<span class=\"me1\">push</span><span class=\"br0\">(</span><span class=\"nu0\">5</span><span class=\"br0\">)</span><br/>  <span class=\"kw1\">end</span><br/>\u00a0<br/>  <span class=\"co1\"># (6)</span><br/>  <span class=\"kw1\">if</span> rem == <span class=\"nu0\">3</span> <span class=\"kw1\">or</span> rem == <span class=\"nu0\">9</span><br/>    <span class=\"br0\">[</span><span class=\"nu0\">1</span>,<span class=\"nu0\">3</span><span class=\"br0\">]</span>.<span class=\"me1\">each</span> <span class=\"kw1\">do</span> <span class=\"sy0\">|</span>i<span class=\"sy0\">|</span><br/>      nums.<span class=\"me1\">slice</span>!<span class=\"br0\">(</span> nums.<span class=\"me1\">index</span><span class=\"br0\">(</span>i<span class=\"br0\">)</span> <span class=\"br0\">)</span><br/>      nums.<span class=\"me1\">push</span><span class=\"br0\">(</span>i<span class=\"br0\">)</span><br/>    <span class=\"kw1\">end</span><br/>  <span class=\"kw1\">end</span><br/>\u00a0<br/>  <span class=\"co1\"># (7)</span><br/>  board = <span class=\"kw3\">Array</span>.<span class=\"me1\">new</span><span class=\"br0\">(</span>n<span class=\"br0\">)</span> <span class=\"br0\">{</span><span class=\"kw3\">Array</span>.<span class=\"me1\">new</span><span class=\"br0\">(</span>n<span class=\"br0\">)</span> <span class=\"br0\">{</span><span class=\"st0\">\".\"</span><span class=\"br0\">}</span><span class=\"br0\">}</span><br/>  n.<span class=\"me1\">times</span> <span class=\"br0\">{</span><span class=\"sy0\">|</span>i<span class=\"sy0\">|</span> board<span class=\"br0\">[</span>i<span class=\"br0\">]</span><span class=\"br0\">[</span>nums<span class=\"br0\">[</span>i<span class=\"br0\">]</span> <span class=\"sy0\">-</span> <span class=\"nu0\">1</span><span class=\"br0\">]</span> = <span class=\"st0\">\"Q\"</span><span class=\"br0\">}</span><br/>  board.<span class=\"me1\">inject</span><span class=\"br0\">(</span><span class=\"st0\">\"\"</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><span class=\"sy0\">|</span>str, row<span class=\"sy0\">|</span> str <span class=\"sy0\">&lt;&lt;</span> row.<span class=\"me1\">join</span><span class=\"br0\">(</span><span class=\"st0\">\" \"</span><span class=\"br0\">)</span> <span class=\"sy0\">&lt;&lt;</span> <span class=\"st0\">\"<span class=\"es0\">\\n</span>\"</span><span class=\"br0\">}</span><br/><span class=\"kw1\">end</span><br/>\u00a0<br/><span class=\"br0\">(</span><span class=\"nu0\">1</span> .. <span class=\"nu0\">15</span><span class=\"br0\">)</span>.<span class=\"me1\">each</span> <span class=\"br0\">{</span><span class=\"sy0\">|</span>n<span class=\"sy0\">|</span> <span class=\"kw3\">puts</span> <span class=\"st0\">\"n=#{n}\"</span>; <span class=\"kw3\">puts</span> n_queens<span class=\"br0\">(</span>n<span class=\"br0\">)</span>; <span class=\"kw3\">puts</span><span class=\"br0\">}</span></pre>"}, {"lang": "Run BASIC", "loc": 112, "block": "<pre class=\"text highlighted_source\">[loop]<br/>input \"How many queens (N&gt;=4)\";n<br/>if n &lt; 4 then<br/> print \"Must be greater than 4\"<br/> goto [loop]<br/>end if<br/>\u00a0<br/>dim plot$(100,100)<br/>dim q(n+20)<br/>dim e(n+20)<br/>dim o(n+20)<br/>r=n mod 6<br/>if r&lt;&gt;2 and r&lt;&gt;3 then <br/>  gosub [samp]<br/>  goto [shoBoard]<br/>end if<br/>for i=1 to int(n/2)<br/>  e(i) = 2 * i<br/>next<br/>for i=1 to int((n/2)+.5)<br/> o(i) = 2 *i-1<br/>next<br/>if r = 2 then gosub [edt2]<br/>if r = 3 then gosub [edt3]<br/>s = 1<br/>for i=1 to n<br/>  if e(i)&gt;0 then <br/>    q(s) = e(i)<br/>    s    = s+1<br/>  end if<br/>next<br/>for i=1 to n<br/>  if o(i) &gt; 0 then <br/>    q(s) = o(i)<br/>    s    = s + 1<br/>  end if<br/>next<br/>' print board<br/>[shoBoard]<br/>cls<br/>for i = 1 to n<br/>  plot$(i,26-q(i)) = \"*\"<br/>  plot$(i,24-n)    = chr$(96+i)<br/>  plot$(n+1,26-i)  = str$(i)<br/>next i<br/>for ii = 1 to 100<br/> for jj = 1 to 100<br/>  print left$(plot$(jj,ii)+\" \",1);<br/> next jj<br/>print<br/>next ii<br/>end<br/>\u00a0<br/>' the simple case<br/>[samp] <br/>p = 1<br/>for i = 1 to n<br/>  if i mod 2=0 then <br/>    q(p) = i<br/>    p    = p + 1<br/>  end if<br/>next i<br/>for i = 1 to n<br/>  if i mod 2 then <br/>    q(p) = i<br/>    p    = p + 1<br/>  end if<br/>next<br/>return<br/>' edit list when remainder is 2<br/>[edt2]<br/>for i=1 to n<br/>  if o(i) = 3 then <br/>    o(i) = 1 <br/>   else <br/>    if o(i)=1 then o(i) = 3<br/>  end if<br/>  if o(i) = 5 then <br/>    o(i)= o(i) -1 <br/>   else <br/>    if o(i) = 0 then <br/>      o(i) = 5<br/>      return<br/>    end if<br/>  end if<br/>next<br/>\u00a0<br/>' edit list when remainder is 3<br/>[edt3]<br/>for i = 1 to n<br/>  if e(i) = 2 then <br/>    e(i)  = e(i)-1 <br/>   else <br/>    if e(i) = 0 then <br/>      e(i) = 2<br/>      goto [more]<br/>    end if<br/>  end if<br/>next i<br/>' edit list some more<br/>[more]<br/>for i = 1 to n<br/>  if (o(i)=1 or o(i)=3) then <br/>    o(i) = o(i)-1 <br/>   else <br/>    if o(i) = 0 then <br/>      o(i)   = 1<br/>      o(i+1) = 3<br/>      return<br/>    end if<br/>  end if<br/>next</pre>"}, {"lang": "Rust", "loc": 33, "block": "<pre class=\"text highlighted_source\">const N: usize = 8;<br/>\u00a0<br/>fn try(mut board: &amp;mut [[bool; N]; N], row: usize, mut count: &amp;mut i64) {<br/>   if row == N {<br/>       *count += 1;<br/>       for r in board.iter() {<br/>           println!(\"{}\", r.iter().map(|&amp;x| if x {\"x\"} else {\".\"}.to_string()).collect::&lt;Vec&lt;String&gt;&gt;().join(\" \"))<br/>       }<br/>       println!(\"\");<br/>       return<br/>   }<br/>   for i in 0..N {<br/>       let mut ok: bool = true;<br/>       for j in 0..row {<br/>           if board[j][i]<br/>               || i+j &gt;= row &amp;&amp; board[j][i+j-row]<br/>               || i+row &lt; N+j &amp;&amp; board[j][i+row-j]<br/>           { ok = false }<br/>       }<br/>       if ok {<br/>           board[row][i] = true;<br/>           try(&amp;mut board, row+1, &amp;mut count);<br/>           board[row][i] = false;<br/>       }<br/>   }<br/>}<br/>\u00a0<br/>fn main() {<br/>   let mut board: [[bool; N]; N] = [[false; N]; N];<br/>   let mut count: i64 = 0;<br/>   try (&amp;mut board, 0, &amp;mut count);<br/>   println!(\"Found {} solutions\", count)<br/>}</pre>"}, {"lang": "SAS", "loc": 58, "block": "<pre class=\"sas highlighted_source\"><span class=\"coMULTI\">/* Store all 92 permutations in a SAS dataset. Translation of Fortran 77 */</span><br/><span class=\"kw6\">data</span> queens;<br/><span class=\"kw4\">array</span> a<span class=\"br0\">{</span><span class=\"nu0\">8</span><span class=\"br0\">}</span> p1-p8;<br/><span class=\"kw4\">array</span> s<span class=\"br0\">{</span><span class=\"nu0\">8</span><span class=\"br0\">}</span>;<br/><span class=\"kw4\">array</span> u<span class=\"br0\">{</span><span class=\"nu0\">30</span><span class=\"br0\">}</span>;<br/><span class=\"kw3\">n</span>=<span class=\"nu0\">8</span>;<br/><span class=\"kw5\">do</span> i=<span class=\"nu0\">1</span> to <span class=\"kw3\">n</span>;<br/>a<span class=\"br0\">(</span>i<span class=\"br0\">)</span>=i;<br/><span class=\"kw5\">end</span>;<br/><span class=\"kw5\">do</span> i=<span class=\"nu0\">1</span> to <span class=\"nu0\">4</span><span class=\"coMULTI\">*n-2;</span><br/>u<span class=\"br0\">(</span>i<span class=\"br0\">)</span>=<span class=\"nu0\">0</span>;<br/><span class=\"kw5\">end</span>;<br/>m=<span class=\"nu0\">0</span>;<br/>i=<span class=\"nu0\">1</span>;<br/>r=<span class=\"nu0\">2</span><span class=\"coMULTI\">*n-1;</span><br/><span class=\"kw4\">goto</span> L40;<br/>L30:<br/>s<span class=\"br0\">(</span>i<span class=\"br0\">)</span>=j;<br/>u<span class=\"br0\">(</span>p<span class=\"br0\">)</span>=<span class=\"nu0\">1</span>;<br/>u<span class=\"br0\">(</span>q+r<span class=\"br0\">)</span>=<span class=\"nu0\">1</span>;<br/>i=i+<span class=\"nu0\">1</span>;<br/>L40:<br/><span class=\"kw5\">if</span> i&gt;<span class=\"kw3\">n</span> <span class=\"kw5\">then</span> <span class=\"kw4\">goto</span> L80;<br/>j=i;<br/>L50:<br/>z=a<span class=\"br0\">(</span>i<span class=\"br0\">)</span>;<br/>y=a<span class=\"br0\">(</span>j<span class=\"br0\">)</span>;<br/>p=i-y+<span class=\"kw3\">n</span>;<br/>q=i+y-<span class=\"nu0\">1</span>;<br/>a<span class=\"br0\">(</span>i<span class=\"br0\">)</span>=y;<br/>a<span class=\"br0\">(</span>j<span class=\"br0\">)</span>=z;<br/><span class=\"kw5\">if</span> u<span class=\"br0\">(</span>p<span class=\"br0\">)</span>=<span class=\"nu0\">0</span> <span class=\"kw4\">and</span> u<span class=\"br0\">(</span>q+r<span class=\"br0\">)</span>=<span class=\"nu0\">0</span> <span class=\"kw5\">then</span> <span class=\"kw4\">goto</span> L30;<br/>L60:<br/>j=j+<span class=\"nu0\">1</span>;<br/><span class=\"kw5\">if</span> j&lt;=<span class=\"kw3\">n</span> <span class=\"kw5\">then</span> <span class=\"kw4\">goto</span> L50;<br/>L70:<br/>j=j-<span class=\"nu0\">1</span>;<br/><span class=\"kw5\">if</span> j=i <span class=\"kw5\">then</span> <span class=\"kw4\">goto</span> L90;<br/>z=a<span class=\"br0\">(</span>i<span class=\"br0\">)</span>;<br/>a<span class=\"br0\">(</span>i<span class=\"br0\">)</span>=a<span class=\"br0\">(</span>j<span class=\"br0\">)</span>;<br/>a<span class=\"br0\">(</span>j<span class=\"br0\">)</span>=z;<br/><span class=\"kw4\">goto</span> L70;<br/>L80:<br/>m=m+<span class=\"nu0\">1</span>;<br/><span class=\"kw4\">output</span>;<br/>L90:<br/>i=i-<span class=\"nu0\">1</span>;<br/><span class=\"kw5\">if</span> i=<span class=\"nu0\">0</span> <span class=\"kw5\">then</span> <span class=\"kw4\">goto</span> L100;<br/>p=i-a<span class=\"br0\">(</span>i<span class=\"br0\">)</span>+<span class=\"kw3\">n</span>;<br/>q=i+a<span class=\"br0\">(</span>i<span class=\"br0\">)</span>-<span class=\"nu0\">1</span>;<br/>j=s<span class=\"br0\">(</span>i<span class=\"br0\">)</span>;<br/>u<span class=\"br0\">(</span>p<span class=\"br0\">)</span>=<span class=\"nu0\">0</span>;<br/>u<span class=\"br0\">(</span>q+r<span class=\"br0\">)</span>=<span class=\"nu0\">0</span>;<br/><span class=\"kw4\">goto</span> L60;<br/>L100:<br/><span class=\"kw3\">put</span> <span class=\"kw3\">n</span> m;<br/><span class=\"kw4\">keep</span> p1-p8;<br/><span class=\"kw6\">run</span>;</pre>"}, {"lang": "Scala", "loc": 18, "block": "<pre class=\"scala highlighted_source\"><a href=\"http://scala-lang.org\"><span class=\"kw1\">case</span></a> <a href=\"http://scala-lang.org\"><span class=\"kw1\">class</span></a> Pos<span class=\"br0\">(</span>row<span class=\"sy0\">:</span> Int, column<span class=\"sy0\">:</span> Int<span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>  <a href=\"http://scala-lang.org\"><span class=\"kw1\">def</span></a> sameRow<span class=\"br0\">(</span>p<span class=\"sy0\">:</span> Pos<span class=\"br0\">)</span> <span class=\"sy0\">=</span> row <span class=\"sy0\">==</span> p.<span class=\"me1\">row</span><br/>  <a href=\"http://scala-lang.org\"><span class=\"kw1\">def</span></a> sameColumn<span class=\"br0\">(</span>p<span class=\"sy0\">:</span> Pos<span class=\"br0\">)</span> <span class=\"sy0\">=</span> column <span class=\"sy0\">==</span> p.<span class=\"me1\">column</span><br/>  <a href=\"http://scala-lang.org\"><span class=\"kw1\">def</span></a> sameDiag<span class=\"br0\">(</span>p<span class=\"sy0\">:</span> Pos<span class=\"br0\">)</span> <span class=\"sy0\">=</span> <span class=\"br0\">(</span>p.<span class=\"me1\">column</span> - column<span class=\"br0\">)</span>.<span class=\"me1\">abs</span> <span class=\"sy0\">==</span> <span class=\"br0\">(</span>p.<span class=\"me1\">row</span> - row<span class=\"br0\">)</span>.<span class=\"me1\">abs</span><br/>  <a href=\"http://scala-lang.org\"><span class=\"kw1\">def</span></a> illegal<span class=\"br0\">(</span>p<span class=\"sy0\">:</span> Pos<span class=\"br0\">)</span> <span class=\"sy0\">=</span> sameRow<span class=\"br0\">(</span>p<span class=\"br0\">)</span> || sameColumn<span class=\"br0\">(</span>p<span class=\"br0\">)</span> || sameDiag<span class=\"br0\">(</span>p<span class=\"br0\">)</span><br/>  <a href=\"http://scala-lang.org\"><span class=\"kw1\">def</span></a> legal<span class=\"br0\">(</span>p<span class=\"sy0\">:</span> Pos<span class=\"br0\">)</span> <span class=\"sy0\">=</span> <span class=\"sy0\">!</span>illegal<span class=\"br0\">(</span>p<span class=\"br0\">)</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><a href=\"http://scala-lang.org\"><span class=\"kw1\">def</span></a> rowSet<span class=\"br0\">(</span>size<span class=\"sy0\">:</span> Int, row<span class=\"sy0\">:</span> Int<span class=\"br0\">)</span> <span class=\"sy0\">=</span> Iterator.<span class=\"me1\">tabulate</span><span class=\"br0\">(</span>size<span class=\"br0\">)</span><span class=\"br0\">(</span>column <span class=\"sy0\">=&gt;</span> Pos<span class=\"br0\">(</span>row, column<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\u00a0<br/><a href=\"http://scala-lang.org\"><span class=\"kw1\">def</span></a> expand<span class=\"br0\">(</span>solutions<span class=\"sy0\">:</span> Iterator<span class=\"br0\">[</span>List<span class=\"br0\">[</span>Pos<span class=\"br0\">]</span><span class=\"br0\">]</span>, size<span class=\"sy0\">:</span> Int, row<span class=\"sy0\">:</span> Int<span class=\"br0\">)</span> <span class=\"sy0\">=</span><br/>  <a href=\"http://scala-lang.org\"><span class=\"kw1\">for</span></a> <span class=\"br0\">{</span><br/>    solution <span class=\"sy0\">&lt;</span>- solutions<br/>    pos <span class=\"sy0\">&lt;</span>- rowSet<span class=\"br0\">(</span>size, row<span class=\"br0\">)</span><br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">if</span></a> solution forall <span class=\"br0\">(</span><span class=\"sy0\">_</span> legal pos<span class=\"br0\">)</span><br/>  <span class=\"br0\">}</span> <a href=\"http://scala-lang.org\"><span class=\"kw1\">yield</span></a> pos <span class=\"sy0\">::</span> solution<br/>\u00a0<br/>\u00a0</pre>"}, {"lang": "Scheme", "loc": 76, "block": "<pre class=\"scheme highlighted_source\">\u00a0<br/><span class=\"br0\">(</span>import <span class=\"br0\">(</span>scheme base<span class=\"br0\">)</span><br/>        <span class=\"br0\">(</span>scheme <span class=\"kw1\">write</span><span class=\"br0\">)</span><br/>        <span class=\"br0\">(</span>srfi <span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"co1\">;; return list of solutions to n-queens problem</span><br/><span class=\"br0\">(</span><span class=\"kw1\">define</span> <span class=\"br0\">(</span>n<span class=\"sy0\">-</span>queens n<span class=\"br0\">)</span> <span class=\"co1\">; breadth-first solution</span><br/>  <span class=\"br0\">(</span><span class=\"kw1\">define</span> <span class=\"br0\">(</span>place<span class=\"sy0\">-</span>initial<span class=\"sy0\">-</span>row<span class=\"br0\">)</span> <span class=\"co1\">; puts a queen on each column of row 0</span><br/>    <span class=\"br0\">(</span>list<span class=\"sy0\">-</span>tabulate n <span class=\"br0\">(</span><span class=\"kw1\">lambda</span> <span class=\"br0\">(</span>col<span class=\"br0\">)</span> <span class=\"br0\">(</span><span class=\"kw1\">list</span> <span class=\"br0\">(</span><span class=\"kw1\">cons</span> <span class=\"nu0\">0</span> col<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>  <span class=\"br0\">(</span><span class=\"kw1\">define</span> <span class=\"br0\">(</span>place<span class=\"sy0\">-</span>on<span class=\"sy0\">-</span>row soln<span class=\"sy0\">-</span>so<span class=\"sy0\">-</span>far row<span class=\"br0\">)</span><br/>    <span class=\"br0\">(</span><span class=\"kw1\">define</span> <span class=\"br0\">(</span>invalid? col<span class=\"br0\">)</span><br/>      <span class=\"br0\">(</span>any <span class=\"br0\">(</span><span class=\"kw1\">lambda</span> <span class=\"br0\">(</span>posn<span class=\"br0\">)</span> <br/>             <span class=\"br0\">(</span><span class=\"kw1\">or</span> <span class=\"br0\">(</span><span class=\"sy0\">=</span> col <span class=\"br0\">(</span><span class=\"kw1\">cdr</span> posn<span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"co1\">; on same column</span><br/>                 <span class=\"br0\">(</span><span class=\"sy0\">=</span> <span class=\"br0\">(</span><span class=\"kw1\">abs</span> <span class=\"br0\">(</span><span class=\"sy0\">-</span> row <span class=\"br0\">(</span><span class=\"kw1\">car</span> posn<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"co1\">; on same diagonal</span><br/>                    <span class=\"br0\">(</span><span class=\"kw1\">abs</span> <span class=\"br0\">(</span><span class=\"sy0\">-</span> col <span class=\"br0\">(</span><span class=\"kw1\">cdr</span> posn<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>           soln<span class=\"sy0\">-</span>so<span class=\"sy0\">-</span>far<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>    <span class=\"co1\">;</span><br/>    <span class=\"br0\">(</span><span class=\"kw1\">do</span> <span class=\"br0\">(</span><span class=\"br0\">(</span>col <span class=\"nu0\">0</span> <span class=\"br0\">(</span><span class=\"sy0\">+</span> <span class=\"nu0\">1</span> col<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>         <span class=\"br0\">(</span>res '<span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"br0\">(</span><span class=\"kw1\">if</span> <span class=\"br0\">(</span>invalid? col<span class=\"br0\">)</span><br/>                    res<br/>                    <span class=\"br0\">(</span><span class=\"kw1\">cons</span> <span class=\"br0\">(</span><span class=\"kw1\">cons</span> <span class=\"br0\">(</span><span class=\"kw1\">cons</span> row col<span class=\"br0\">)</span> soln<span class=\"sy0\">-</span>so<span class=\"sy0\">-</span>far<span class=\"br0\">)</span><br/>                          res<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>      <span class=\"br0\">(</span><span class=\"br0\">(</span><span class=\"sy0\">=</span> col n<span class=\"br0\">)</span> res<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>  <span class=\"co1\">;</span><br/>  <span class=\"br0\">(</span><span class=\"kw1\">do</span> <span class=\"br0\">(</span><span class=\"br0\">(</span>res <span class=\"br0\">(</span>place<span class=\"sy0\">-</span>initial<span class=\"sy0\">-</span>row<span class=\"br0\">)</span> <br/>            <span class=\"br0\">(</span>apply <span class=\"kw1\">append</span> <br/>                   <span class=\"br0\">(</span><span class=\"kw1\">map</span> <span class=\"br0\">(</span><span class=\"kw1\">lambda</span> <span class=\"br0\">(</span>soln<span class=\"sy0\">-</span>so<span class=\"sy0\">-</span>far<span class=\"br0\">)</span> <span class=\"br0\">(</span>place<span class=\"sy0\">-</span>on<span class=\"sy0\">-</span>row soln<span class=\"sy0\">-</span>so<span class=\"sy0\">-</span>far row<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>                        res<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>       <span class=\"br0\">(</span>row <span class=\"nu0\">1</span> <span class=\"br0\">(</span><span class=\"sy0\">+</span> <span class=\"nu0\">1</span> row<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>    <span class=\"br0\">(</span><span class=\"br0\">(</span><span class=\"sy0\">=</span> row n<span class=\"br0\">)</span> res<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"co1\">;; display solutions in 2-d array form</span><br/><span class=\"br0\">(</span><span class=\"kw1\">define</span> <span class=\"br0\">(</span>pretty<span class=\"sy0\">-</span>print solutions n<span class=\"br0\">)</span><br/>  <span class=\"br0\">(</span><span class=\"kw1\">define</span> <span class=\"br0\">(</span>posn<span class=\"sy0\">-&gt;</span>index posn<span class=\"br0\">)</span><br/>    <span class=\"br0\">(</span><span class=\"sy0\">+</span> <span class=\"br0\">(</span><span class=\"sy0\">*</span> n <span class=\"br0\">(</span><span class=\"kw1\">cdr</span> posn<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>       <span class=\"br0\">(</span><span class=\"kw1\">car</span> posn<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>  <span class=\"br0\">(</span><span class=\"kw1\">define</span> <span class=\"br0\">(</span>pp solution<span class=\"br0\">)</span><br/>    <span class=\"br0\">(</span><span class=\"kw1\">let</span> <span class=\"br0\">(</span><span class=\"br0\">(</span>board <span class=\"br0\">(</span><span class=\"kw1\">make-vector</span> <span class=\"br0\">(</span>square n<span class=\"br0\">)</span> <span class=\"st0\">\".\"</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>      <span class=\"br0\">(</span><span class=\"kw1\">for-each</span> <span class=\"br0\">(</span><span class=\"kw1\">lambda</span> <span class=\"br0\">(</span>queen<span class=\"br0\">)</span> <span class=\"br0\">(</span><span class=\"kw1\">vector-set!</span> board <br/>                                             <span class=\"br0\">(</span>posn<span class=\"sy0\">-&gt;</span>index queen<span class=\"br0\">)</span><br/>                                             <span class=\"st0\">\"Q\"</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>                solution<span class=\"br0\">)</span><br/>      <span class=\"br0\">(</span><span class=\"kw1\">let</span> loop <span class=\"br0\">(</span><span class=\"br0\">(</span>row <span class=\"nu0\">0</span><span class=\"br0\">)</span><br/>                 <span class=\"br0\">(</span>col <span class=\"nu0\">0</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>        <span class=\"br0\">(</span><span class=\"kw1\">cond</span> <span class=\"br0\">(</span><span class=\"br0\">(</span><span class=\"sy0\">=</span> row n<span class=\"br0\">)</span> <br/>               <span class=\"br0\">(</span><span class=\"kw1\">newline</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>              <span class=\"br0\">(</span><span class=\"br0\">(</span><span class=\"sy0\">=</span> col n<span class=\"br0\">)</span> <br/>               <span class=\"br0\">(</span><span class=\"kw1\">newline</span><span class=\"br0\">)</span><br/>               <span class=\"br0\">(</span>loop <span class=\"br0\">(</span><span class=\"sy0\">+</span> <span class=\"nu0\">1</span> row<span class=\"br0\">)</span> <span class=\"nu0\">0</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>              <span class=\"br0\">(</span><span class=\"kw1\">else</span><br/>                <span class=\"br0\">(</span><span class=\"kw1\">display</span> <span class=\"br0\">(</span><span class=\"kw1\">vector-ref</span> board <span class=\"br0\">(</span>posn<span class=\"sy0\">-&gt;</span>index <span class=\"br0\">(</span><span class=\"kw1\">cons</span> row col<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>                <span class=\"br0\">(</span>loop row <span class=\"br0\">(</span><span class=\"sy0\">+</span> <span class=\"nu0\">1</span> col<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>  <span class=\"co1\">;</span><br/>  <span class=\"br0\">(</span><span class=\"kw1\">display</span> <span class=\"br0\">(</span><span class=\"kw1\">string-append</span> <span class=\"st0\">\"Found \"</span><br/>                          <span class=\"br0\">(</span>number<span class=\"sy0\">-&gt;</span><span class=\"kw1\">string</span> <span class=\"br0\">(</span><span class=\"kw1\">length</span> solutions<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>                          <span class=\"st0\">\" solutions for n=\"</span><br/>                          <span class=\"br0\">(</span>number<span class=\"sy0\">-&gt;</span><span class=\"kw1\">string</span> n<span class=\"br0\">)</span><br/>                          <span class=\"st0\">\"<span class=\"es0\">\\n</span><span class=\"es0\">\\n</span>\"</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>  <span class=\"br0\">(</span><span class=\"kw1\">for-each</span> pp solutions<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"co1\">;; create table of number of solutions</span><br/><span class=\"br0\">(</span><span class=\"kw1\">do</span> <span class=\"br0\">(</span><span class=\"br0\">(</span>n <span class=\"nu0\">1</span> <span class=\"br0\">(</span><span class=\"sy0\">+</span> <span class=\"nu0\">1</span> n<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>  <span class=\"br0\">(</span><span class=\"br0\">(</span><span class=\"sy0\">&gt;</span> n <span class=\"nu0\">10</span><span class=\"br0\">)</span> <span class=\"br0\">)</span><br/>  <span class=\"br0\">(</span><span class=\"kw1\">display</span> n<span class=\"br0\">)</span><br/>  <span class=\"br0\">(</span><span class=\"kw1\">display</span> <span class=\"st0\">\" \"</span><span class=\"br0\">)</span><br/>  <span class=\"br0\">(</span><span class=\"kw1\">display</span> <span class=\"br0\">(</span><span class=\"kw1\">length</span> <span class=\"br0\">(</span>n<span class=\"sy0\">-</span>queens n<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>  <span class=\"br0\">(</span><span class=\"kw1\">newline</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"co1\">;; show some examples</span><br/><span class=\"br0\">(</span>pretty<span class=\"sy0\">-</span>print <span class=\"br0\">(</span>n<span class=\"sy0\">-</span>queens <span class=\"nu0\">1</span><span class=\"br0\">)</span> <span class=\"nu0\">1</span><span class=\"br0\">)</span><br/><span class=\"br0\">(</span>pretty<span class=\"sy0\">-</span>print <span class=\"br0\">(</span>n<span class=\"sy0\">-</span>queens <span class=\"nu0\">2</span><span class=\"br0\">)</span> <span class=\"nu0\">2</span><span class=\"br0\">)</span><br/><span class=\"br0\">(</span>pretty<span class=\"sy0\">-</span>print <span class=\"br0\">(</span>n<span class=\"sy0\">-</span>queens <span class=\"nu0\">3</span><span class=\"br0\">)</span> <span class=\"nu0\">3</span><span class=\"br0\">)</span><br/><span class=\"br0\">(</span>pretty<span class=\"sy0\">-</span>print <span class=\"br0\">(</span>n<span class=\"sy0\">-</span>queens <span class=\"nu0\">4</span><span class=\"br0\">)</span> <span class=\"nu0\">4</span><span class=\"br0\">)</span><br/><span class=\"br0\">(</span>pretty<span class=\"sy0\">-</span>print <span class=\"br0\">(</span>n<span class=\"sy0\">-</span>queens <span class=\"nu0\">5</span><span class=\"br0\">)</span> <span class=\"nu0\">5</span><span class=\"br0\">)</span><br/><span class=\"br0\">(</span>pretty<span class=\"sy0\">-</span>print <span class=\"br0\">(</span>n<span class=\"sy0\">-</span>queens <span class=\"nu0\">8</span><span class=\"br0\">)</span> <span class=\"nu0\">8</span><span class=\"br0\">)</span><br/>\u00a0</pre>"}, {"lang": "Scilab", "loc": 142, "block": "<pre class=\"text highlighted_source\">//Length of board side<br/>Board_size = 8;<br/>\u00a0<br/>function flag_out = no_attack(side, board, pos)<br/>    //Evaluates (pos(1),pos(2)) in board if it's not on any queen attacking range<br/>    //side (scalar): board's side length<br/>    //board (sidexside matrix): matrix of 0s and 1s representing queens on a board<br/>    //pos (1x2 matrix): postition on board to be evaluated<br/>    //flag_out (bool):\u00a0%T if position is available, and\u00a0%F otherwise<br/>\u00a0<br/>    //Counting queens on rows and columns<br/>    row_col = sum(board(pos(1),:)) + sum(board(:,pos(2)));<br/>\u00a0<br/>    //Counting queens on first diagonal<br/>    diag_1 = sum(...<br/>                 diag(board, 0 +...<br/>                     (pos(2)&gt;pos(1))*(pos(2)-pos(1)) +...<br/>                     (pos(1)&gt;pos(2))*(pos(2)-pos(1))...<br/>                     )...<br/>                 );<br/>\u00a0<br/>    //Counting queens on second diagonal<br/>    a = pos(1) + pos(2);<br/>    if a&lt;=side+1 then<br/>        rows = [1:a-1]<br/>        cols = a - rows;<br/>    else<br/>        d = 2*(side+1)-a-1;<br/>        rows = [side:-1:side-d+1]<br/>        cols  = a - rows;<br/>    end<br/>\u00a0<br/>    diag_2 = 0;<br/>    for i = 1:length(rows)<br/>        diag_2 = diag_2 + board(rows(i),cols(i));<br/>    end<br/>\u00a0<br/>    //Check if there's any queen<br/>    flag_out = ( ~(row_col | diag_1 | diag_2) );<br/>endfunction<br/>\u00a0<br/>//Solution counter<br/>Sol_count = 0;<br/>\u00a0<br/>//\"Soltion found\" flag<br/>Sol_found =\u00a0%F;<br/>\u00a0<br/>//Empty board<br/>Board = zeros(Board_size,Board_size);<br/>\u00a0<br/>//Matrix for backtracking<br/>Queens= zeros(Board_size,2);<br/>\u00a0<br/>//Queens counter<br/>N_queens = Board_size;<br/>\u00a0<br/>//Row and column counters<br/>i = 1; j = 1;<br/>\u00a0<br/>//Start counting time<br/>tic();<br/>\u00a0<br/>//Begin search<br/>while i &lt;= Board_size<br/>    while j &lt;= Board_size<br/>        //Availability flag: check position (i,j)<br/>        flag =\u00a0%F;<br/>        if (0 &lt; i &amp; 0 &lt; j) &amp; (i &lt;= Board_size &amp; j &lt;= Board_size) then<br/>            flag = no_attack(Board_size,Board,[i j]);<br/>        end<br/>\u00a0<br/>        //Reset solution flag<br/>        Sol_found =\u00a0%F;<br/>\u00a0<br/>        if flag then<br/>            //Put a queen on the board if position is available<br/>            Board(i,j) = 1;<br/>\u00a0<br/>            //Update number of remaining queens<br/>            N_queens = N_queens - 1;<br/>\u00a0<br/>            //Keep track of queens positions<br/>            Queens(Board_size - N_queens,:) = [i j];<br/>\u00a0<br/>            //Jump to next row end of line is reached<br/>            if i+1&lt;=Board_size<br/>                i = i + 1;<br/>            end<br/>            //Start over from the begining of new line<br/>            j = 0;<br/>\u00a0<br/>            //Count and flag a solution if all queens have<br/>            //been placed on the board<br/>            if N_queens == 0 then<br/>                Sol_count = Sol_count + 1;<br/>                Sol_found =\u00a0%T;<br/>                break<br/>            end<br/>        end<br/>\u00a0<br/>        //Increment column number<br/>        j = j + 1;<br/>    end<br/>\u00a0<br/>    //Increment row number and start from first column<br/>    if ~Sol_found then<br/>        i = i + 1;<br/>        j = 1;<br/>\u00a0<br/>        //Limiting placement of the first queen to the first row<br/>        //Stop searching solutions if columns of first row <br/>        //have been tested<br/>        if i == 2 &amp; j == 1 &amp; sum(Board) == 0  then<br/>            break<br/>        end<br/>    end<br/>\u00a0<br/>    //Backtracking: if (i,j) reaches the and of the board<br/>    //and there are queens left to be placed on it<br/>    if ~Sol_found &amp; i == Board_size + 1 &amp; j == 1 then<br/>        ind = Board_size - N_queens;<br/>        if ind &gt; 0 then<br/>            //Recover last queen's position<br/>            i = Queens(ind,1);<br/>            j = Queens(ind,2);<br/>\u00a0<br/>            //Remove it from the board and from the counter<br/>            Board(i,j) = 0;<br/>            Queens(ind,:) = [0 0];<br/>            N_queens = N_queens + 1;<br/>\u00a0<br/>            //Move to next column<br/>            j = j + 1;<br/>        end<br/>    end <br/>end<br/>\u00a0<br/>//Printing result on console<br/>disp(\"There are \"+string(Sol_count)+\" solutions for a \"+...<br/>     string(Board_size)+\"x\"+string(Board_size)+\" board.\");<br/>//Time elapsed<br/>disp(\"Time: \"+string(toc())+\"s.\");</pre>"}, {"lang": "Seed7", "loc": 51, "block": "<pre class=\"text highlighted_source\">$ include \"seed7_05.s7i\";<br/>\u00a0<br/>var array integer: board is 8 times 0;<br/>var integer: solutionNum is 0;<br/>\u00a0<br/>const func boolean: safe (in integer: y) is func<br/>  result<br/>    var boolean: safe is TRUE;<br/>  local<br/>    var integer: i is 1;<br/>  begin<br/>    while i &lt; y and safe do<br/>      safe\u00a0:= board[y - i] &lt;&gt; board[y] and<br/>              board[y - i] &lt;&gt; board[y] - i and<br/>              board[y - i] &lt;&gt; board[y] + i;<br/>      incr(i);<br/>    end while;<br/>  end func;<br/>\u00a0<br/>const proc: putBoard is func<br/>  local<br/>    var integer: y is 0;<br/>  begin<br/>    incr(solutionNum);<br/>    writeln;<br/>    writeln(\"Solution \" &lt;&amp; solutionNum);<br/>    for y range 1 to 8 do<br/>      writeln(\"|_\" mult pred(board[y]) &lt;&amp; \"|Q\" &lt;&amp; \"|_\" mult (8 - board[y]) &lt;&amp; \"|\");<br/>    end for;<br/>  end func;<br/>\u00a0<br/>const proc: main is func<br/>  local<br/>    var integer: y is 1;<br/>  begin<br/>    while y &gt;= 1 do<br/>      repeat<br/>        incr(board[y]);<br/>      until board[y] &gt; 8 or safe(y);<br/>      if board[y] &lt;= 8 then<br/>        if y &lt; 8 then<br/>          incr(y);<br/>          board[y]\u00a0:= 0;<br/>        else<br/>          putBoard;<br/>        end if;<br/>      else<br/>        decr(y);<br/>      end if;<br/>    end while;<br/>  end func;</pre>"}, {"lang": "Sidef", "loc": 31, "block": "<pre class=\"ruby highlighted_source\">func N_queens_solution<span class=\"br0\">(</span>N = <span class=\"nu0\">8</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>\u00a0<br/>    func collision<span class=\"br0\">(</span>field, row<span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>        <span class=\"kw1\">for</span> i <span class=\"kw1\">in</span> <span class=\"br0\">(</span>^row<span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>            var distance = <span class=\"br0\">(</span>field<span class=\"br0\">[</span>i<span class=\"br0\">]</span> <span class=\"sy0\">-</span> field<span class=\"br0\">[</span>row<span class=\"br0\">]</span><span class=\"br0\">)</span><br/>            distance ~~ <span class=\"br0\">[</span><span class=\"nu0\">0</span>, row<span class=\"sy0\">-</span>i, i<span class=\"sy0\">-</span>row<span class=\"br0\">]</span> <span class=\"sy0\">&amp;&amp;</span> <span class=\"kw2\">return</span> <span class=\"kw2\">true</span><br/>        <span class=\"br0\">}</span><br/>        <span class=\"kw2\">return</span> <span class=\"kw2\">false</span><br/>    <span class=\"br0\">}</span><br/>\u00a0<br/>    func search<span class=\"br0\">(</span>field, row<span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>        row == N <span class=\"sy0\">&amp;&amp;</span> <span class=\"kw2\">return</span> field<br/>        <span class=\"kw1\">for</span> i <span class=\"kw1\">in</span> <span class=\"br0\">(</span>^N<span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>            field<span class=\"br0\">[</span>row<span class=\"br0\">]</span> = i<br/>            <span class=\"kw1\">if</span> <span class=\"br0\">(</span>!collision<span class=\"br0\">(</span>field, row<span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>                <span class=\"kw2\">return</span> <span class=\"br0\">(</span>__FUNC__<span class=\"br0\">(</span>field, row<span class=\"sy0\">+</span><span class=\"nu0\">1</span><span class=\"br0\">)</span> <span class=\"sy0\">||</span> <span class=\"kw1\">next</span><span class=\"br0\">)</span><br/>            <span class=\"br0\">}</span><br/>        <span class=\"br0\">}</span><br/>        <span class=\"kw2\">return</span> <span class=\"br0\">[</span><span class=\"br0\">]</span><br/>    <span class=\"br0\">}</span><br/>\u00a0<br/>    <span class=\"kw1\">for</span> i <span class=\"kw1\">in</span> <span class=\"br0\">(</span><span class=\"nu0\">0</span> .. <span class=\"me1\">N</span><span class=\"sy0\">&gt;&gt;</span><span class=\"nu0\">1</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>        <span class=\"kw1\">if</span> <span class=\"br0\">(</span>var r = search<span class=\"br0\">(</span><span class=\"br0\">[</span>i<span class=\"br0\">]</span>, <span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>            <span class=\"kw2\">return</span> r<br/>        <span class=\"br0\">}</span><br/>    <span class=\"br0\">}</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"kw1\">for</span> n <span class=\"kw1\">in</span> <span class=\"br0\">(</span><span class=\"nu0\">1</span>..<span class=\"nu0\">15</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>    say <span class=\"st0\">\"#{'%2d'\u00a0% n}: #{N_queens_solution(n) || 'No solution'}\"</span><br/><span class=\"br0\">}</span></pre>"}, {"lang": "SNOBOL4", "loc": 25, "block": "<pre class=\"text highlighted_source\">\u00a0<br/>* N queens problem<br/>* Set N to the desired number.  The program prints out all solution boards.<br/>\tN = 5<br/>\tNM1 = N - 1; NP1 = N + 1; NSZ = N * NP1; &amp;STLIMIT = 10 ** 9; &amp;ANCHOR = 1<br/>\tDEFINE('SOLVE(B)I')<br/>* This pattern tests if the first queen attacks any of the others:<br/>\tTEST = BREAK('Q') 'Q' (ARBNO(LEN(N) '-') LEN(N) 'Q'<br/>+\t      | ARBNO(LEN(NP1) '-') LEN(NP1) 'Q'<br/>+\t      | ARBNO(LEN(NM1) '-') LEN(NM1) 'Q')<br/>\tP = LEN(NM1) . X LEN(1); L = 'Q' DUPL('-',NM1) ' '<br/>\tSOLVE()       \u00a0:(END)<br/>SOLVE\tEQ(SIZE(B),NSZ) \t   \u00a0:S(PRINT)<br/>* Add another row with a queen:<br/>\tB = L B<br/>LOOP\tI = LT(I,N) I + 1\u00a0:F(RETURN)<br/>\tB TEST\u00a0:S(NEXT)<br/>\tSOLVE(B)<br/>* Try queen in next square:<br/>NEXT\tB P = '-' X\u00a0:(LOOP)<br/>PRINT\tSOLUTION = SOLUTION + 1<br/>\tOUTPUT = 'Solution number ' SOLUTION ' is:'<br/>PRTLOOP B LEN(NP1) . OUTPUT =\u00a0:S(PRTLOOP)F(RETURN)<br/>END<br/>\u00a0</pre>"}, {"lang": "Sparkling", "loc": 54, "block": "<pre class=\"text highlighted_source\">let print_table = function (pos) {<br/>\tpos.foreach(function (_, i) {<br/>\t\tstdout.printf(\" \u00a0%c\", 'a' + i);<br/>\t});<br/>\u00a0<br/>\tstdout.write(\"\\n\");<br/>\u00a0<br/>\tpos.foreach(function (col, row) {<br/>\t\tstdout.printf(\"%d\", row + 1);<br/>\t\tstdout.printf(\"%s #\\n\", range(col).reduce(\"\", function (s, t) {<br/>\t\t\treturn s .. \"   \";<br/>\t\t}));<br/>\t});<br/>\u00a0<br/>\tstdout.write(\"\\n\\n\");<br/>};<br/>\u00a0<br/>let threatens = function (row_a, col_a, row_b, col_b) {<br/>\treturn row_a == row_b<br/>\t    or col_a == col_b<br/>\t    or abs(row_a - row_b) == abs(col_a - col_b);<br/>};<br/>\u00a0<br/>let good = function(pos, end_idx) {<br/>\treturn pos.all(function (col_a, row_a) {<br/>\t\treturn range(row_a + 1, end_idx).all(function (row_b) {<br/>\t\t\tlet col_b = pos[row_b];<br/>\t\t\treturn not threatens(row_a, col_a, row_b, col_b);<br/>\t\t});<br/>\t});<br/>};<br/>\u00a0<br/>// Returns number of solutions<br/>let n_queens = function (pos, index) {<br/>\tif index &gt;= pos.length {<br/>\t\tif good(pos, index) {<br/>\t\t\tprint_table(pos);<br/>\t\t\treturn 1;<br/>\t\t}<br/>\u00a0<br/>\t\treturn 0;<br/>\t}<br/>\u00a0<br/>\tif not good(pos, index) {<br/>\t\treturn 0;<br/>\t}<br/>\u00a0<br/>\treturn pos.map(function (_, col) {<br/>\t\tpos[index] = col;<br/>\t\treturn n_queens(pos, index + 1);<br/>\t}).reduce(0, function (a, b) { return a + b; });<br/>};<br/>\u00a0<br/>stdout.printf(\"%d solutions\\n\", n_queens(range(8), 0));</pre>"}, {"lang": "SQL", "loc": 32, "block": "<pre class=\"sql highlighted_source\">\u00a0<br/><span class=\"kw1\">WITH</span> RECURSIVE<br/>  positions<span class=\"br0\">(</span>i<span class=\"br0\">)</span> <span class=\"kw1\">AS</span> <span class=\"br0\">(</span><br/>    <span class=\"kw1\">VALUES</span><span class=\"br0\">(</span><span class=\"nu0\">0</span><span class=\"br0\">)</span><br/>    <span class=\"kw1\">UNION</span> <span class=\"kw1\">SELECT</span> <span class=\"kw1\">ALL</span><br/>    i<span class=\"sy0\">+</span><span class=\"nu0\">1</span> <span class=\"kw1\">FROM</span> positions <span class=\"kw1\">WHERE</span> i <span class=\"sy0\">&lt;</span> <span class=\"nu0\">63</span><br/>    <span class=\"br0\">)</span><span class=\"sy0\">,</span><br/>  solutions<span class=\"br0\">(</span>board<span class=\"sy0\">,</span> n_queens<span class=\"br0\">)</span> <span class=\"kw1\">AS</span> <span class=\"br0\">(</span><br/>    <span class=\"kw1\">SELECT</span> <span class=\"st0\">'----------------------------------------------------------------'</span><span class=\"sy0\">,</span> <span class=\"kw1\">CAST</span><span class=\"br0\">(</span><span class=\"nu0\">0</span> <span class=\"kw1\">AS</span> <span class=\"kw1\">BIGINT</span><span class=\"br0\">)</span> <br/>      <span class=\"kw1\">FROM</span> positions<br/>    <span class=\"kw1\">UNION</span><br/>    <span class=\"kw1\">SELECT</span><br/>      substr<span class=\"br0\">(</span>board<span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"sy0\">,</span> i<span class=\"br0\">)</span> <span class=\"sy0\">||</span> <span class=\"st0\">'*'</span> <span class=\"sy0\">||</span> substr<span class=\"br0\">(</span>board<span class=\"sy0\">,</span> i<span class=\"sy0\">+</span><span class=\"nu0\">2</span><span class=\"br0\">)</span><span class=\"sy0\">,</span>n_queens <span class=\"sy0\">+</span> <span class=\"nu0\">1</span> <span class=\"kw1\">AS</span> n_queens<br/>      <span class=\"kw1\">FROM</span> positions <span class=\"kw1\">AS</span> ps<span class=\"sy0\">,</span> solutions <br/>    <span class=\"kw1\">WHERE</span> n_queens <span class=\"sy0\">&lt;</span> <span class=\"nu0\">8</span><br/>      <span class=\"kw1\">AND</span> substr<span class=\"br0\">(</span>board<span class=\"sy0\">,</span><span class=\"nu0\">1</span><span class=\"sy0\">,</span>i<span class=\"br0\">)</span>\u00a0!<span class=\"sy0\">=</span> <span class=\"st0\">'*'</span><br/>      <span class=\"kw1\">AND</span> <span class=\"kw1\">NOT</span> <span class=\"kw1\">EXISTS</span> <span class=\"br0\">(</span><br/>        <span class=\"kw1\">SELECT</span> <span class=\"nu0\">1</span> <span class=\"kw1\">FROM</span> positions <span class=\"kw1\">WHERE</span><br/>          substr<span class=\"br0\">(</span>board<span class=\"sy0\">,</span>i<span class=\"sy0\">+</span><span class=\"nu0\">1</span><span class=\"sy0\">,</span><span class=\"nu0\">1</span><span class=\"br0\">)</span> <span class=\"sy0\">=</span> <span class=\"st0\">'*'</span> <span class=\"kw1\">AND</span><br/>            <span class=\"br0\">(</span><br/>                i\u00a0% <span class=\"nu0\">8</span> <span class=\"sy0\">=</span> ps<span class=\"sy0\">.</span>i\u00a0%8 <span class=\"kw1\">OR</span><br/>                <span class=\"kw1\">CAST</span><span class=\"br0\">(</span>i <span class=\"sy0\">/</span> <span class=\"nu0\">8</span> <span class=\"kw1\">AS</span> <span class=\"kw1\">INT</span><span class=\"br0\">)</span> <span class=\"sy0\">=</span> <span class=\"kw1\">CAST</span><span class=\"br0\">(</span>ps<span class=\"sy0\">.</span>i <span class=\"sy0\">/</span> <span class=\"nu0\">8</span> <span class=\"kw1\">AS</span> <span class=\"kw1\">INT</span><span class=\"br0\">)</span> <span class=\"kw1\">OR</span><br/>                <span class=\"kw1\">CAST</span><span class=\"br0\">(</span>i <span class=\"sy0\">/</span> <span class=\"nu0\">8</span> <span class=\"kw1\">AS</span> <span class=\"kw1\">INT</span><span class=\"br0\">)</span> <span class=\"sy0\">+</span> <span class=\"br0\">(</span>i\u00a0% <span class=\"nu0\">8</span><span class=\"br0\">)</span> <span class=\"sy0\">=</span> <span class=\"kw1\">CAST</span><span class=\"br0\">(</span>ps<span class=\"sy0\">.</span>i <span class=\"sy0\">/</span> <span class=\"nu0\">8</span> <span class=\"kw1\">AS</span> <span class=\"kw1\">INT</span><span class=\"br0\">)</span> <span class=\"sy0\">+</span> <span class=\"br0\">(</span>ps<span class=\"sy0\">.</span>i\u00a0% <span class=\"nu0\">8</span><span class=\"br0\">)</span> <span class=\"kw1\">OR</span><br/>                <span class=\"kw1\">CAST</span><span class=\"br0\">(</span>i <span class=\"sy0\">/</span> <span class=\"nu0\">8</span> <span class=\"kw1\">AS</span> <span class=\"kw1\">INT</span><span class=\"br0\">)</span> <span class=\"sy0\">-</span> <span class=\"br0\">(</span>i\u00a0% <span class=\"nu0\">8</span><span class=\"br0\">)</span> <span class=\"sy0\">=</span> <span class=\"kw1\">CAST</span><span class=\"br0\">(</span>ps<span class=\"sy0\">.</span>i <span class=\"sy0\">/</span> <span class=\"nu0\">8</span> <span class=\"kw1\">AS</span> <span class=\"kw1\">INT</span><span class=\"br0\">)</span> <span class=\"sy0\">-</span> <span class=\"br0\">(</span>ps<span class=\"sy0\">.</span>i\u00a0% <span class=\"nu0\">8</span><span class=\"br0\">)</span><br/>            <span class=\"br0\">)</span><br/>        <span class=\"kw1\">LIMIT</span> <span class=\"nu0\">1</span><br/>        <span class=\"br0\">)</span> <br/>   <span class=\"kw1\">ORDER</span> <span class=\"kw1\">BY</span> n_queens <span class=\"kw1\">DESC</span> <span class=\"co1\">-- remove this when using Postgres (they don't support ORDER BY in CTEs)</span><br/>  <span class=\"br0\">)</span><br/><span class=\"kw1\">SELECT</span> board<span class=\"sy0\">,</span>n_queens <span class=\"kw1\">FROM</span> solutions <span class=\"kw1\">WHERE</span> n_queens <span class=\"sy0\">=</span> <span class=\"nu0\">8</span>;<br/>\u00a0<br/>\u00a0</pre>"}, {"lang": "Standard ML", "loc": 41, "block": "<pre class=\"text highlighted_source\">\u00a0<br/>(* <br/> * val threat\u00a0: (int * int) -&gt; (int * int) -&gt; bool<br/> * Returns true iff the queens at the given positions threaten each other<br/> *)<br/>fun threat (x, y) (x', y') =<br/>  x = x' orelse y = y' orelse abs(x - x') = abs(y - y');<br/>\u00a0<br/>(*<br/> * val conflict\u00a0: (int * int) -&gt; (int * int) list -&gt; bool<br/> * Returns true if there exists a conflict with the position and the list of queens.<br/> *)<br/>fun conflict pos = List.exists (threat pos);<br/>\u00a0<br/>(*<br/> * val addqueen\u00a0: (int * int * (int * int) list * (unit -&gt; (int * int) list option)) -&gt; (int * int) list option<br/> * Returns either NONE in the case that no solution exists or SOME(l) where l is a list of positions making up the solution.<br/> *)<br/>fun addqueen(i, n, qs, fc) =<br/>  let<br/>    fun try j =<br/>      if j &gt; n then fc()<br/>      else if (conflict (i, j) qs) then try (j + 1)<br/>      else if i = n then SOME((i, j)::qs)<br/>      else addqueen(i + 1, n, (i,j)::qs, fn() =&gt; try (j + 1))<br/>  in<br/>    try 1<br/>  end;<br/>\u00a0<br/>(*<br/> * val queens\u00a0: int -&gt; (int * int) list option<br/> * Given the board dimension n, returns a solution for the n-queens problem.<br/> *)<br/>fun queens(n) = addqueen(1, n, [], fn () =&gt; NONE);<br/>\u00a0<br/>(* SOME [(8,4),(7,2),(6,7),(5,3),(4,6),(3,8),(2,5),(1,1)] *)<br/>queens(8);<br/>\u00a0<br/>(* NONE *)<br/>queens(2);<br/>\u00a0</pre>"}, {"lang": "Stata", "loc": 58, "block": "<pre class=\"text highlighted_source\">mata<br/>real matrix queens(real scalar n) {<br/>\treal scalar i, j, k, p, q<br/>\treal rowvector a, s, u, v<br/>\treal matrix m<br/>\u00a0<br/>\tm = J(0, n, .)<br/>\ta = 1..n<br/>\ts = J(1, n, 0)<br/>\tu = J(1, 2*n-1, 1)<br/>\tv = J(1, 2*n-1, 1)<br/>\ti = 1<br/>L1:\tif (i &gt; n) {<br/>\t\tm = m\\a<br/>\t\tgoto L4<br/>\t}<br/>\tj=i<br/>L2:\tk = a[j]<br/>\tp = i-k+n<br/>\tq = i+k-1<br/>\tif (u[p] &amp; v[q]) {<br/>\t\tu[p] = v[q] = 0<br/>\t\ta[j] = a[i]<br/>\t\ta[i] = k<br/>\t\ts[i++] = j<br/>\t\tgoto L1<br/>\t}<br/>L3:\tif (++j &lt;= n) goto L2<br/>L4:\tif (--i == 0) return(m)<br/>\tj = s[i]<br/>\tk = a[i]<br/>\ta[i] = a[j]<br/>\ta[j] = k<br/>\tp = i-k+n<br/>\tq = i+k-1<br/>\tu[p] = v[q] = 1<br/>\tgoto L3<br/>}<br/>\u00a0<br/>a = queens(8)<br/>e = I(8)<br/>1:/e[a[1,.],.]<br/>       1   2   3   4   5   6   7   8<br/>    +---------------------------------+<br/>  1 |  1   .   .   .   .   .   .   .  |<br/>  2 |  .   .   .   .   1   .   .   .  |<br/>  3 |  .   .   .   .   .   .   .   1  |<br/>  4 |  .   .   .   .   .   1   .   .  |<br/>  5 |  .   .   1   .   .   .   .   .  |<br/>  6 |  .   .   .   .   .   .   1   .  |<br/>  7 |  .   1   .   .   .   .   .   .  |<br/>  8 |  .   .   .   1   .   .   .   .  |<br/>    +---------------------------------+<br/>\u00a0<br/>\u00a0<br/>rows(a)<br/>  92<br/>end</pre>"}, {"lang": "SystemVerilog", "loc": 38, "block": "<pre class=\"systemverilog highlighted_source\"><span class=\"kw4\">program</span> N_queens<span class=\"sy0\">;</span><br/>\u00a0<br/>  <span class=\"kw5\">parameter</span> SIZE_LOG2 <span class=\"sy0\">=</span> <span class=\"nu0\">3</span><span class=\"sy0\">;</span><br/>  <span class=\"kw5\">parameter</span> SIZE <span class=\"sy0\">=</span> <span class=\"nu0\">1</span> <span class=\"sy0\">&lt;&lt;</span> SIZE_LOG2<span class=\"sy0\">;</span><br/>\u00a0<br/>  <span class=\"kw2\">`define</span> ABS_DIFF<span class=\"br0\">(</span>a<span class=\"sy0\">,</span>b<span class=\"br0\">)</span> <span class=\"br0\">(</span>a<span class=\"sy0\">&gt;</span>b<span class=\"sy0\">?</span>a<span class=\"sy0\">-</span>b<span class=\"sy0\">:</span>b<span class=\"sy0\">-</span>a<span class=\"br0\">)</span><br/>\u00a0<br/>  <span class=\"kw4\">class</span> board<span class=\"sy0\">;</span><br/>    <span class=\"kw3\">rand</span> <span class=\"kw5\">bit</span> <span class=\"br0\">[</span>SIZE_LOG2<span class=\"sy0\">-</span><span class=\"nu0\">1</span><span class=\"sy0\">:</span><span class=\"nu0\">0</span><span class=\"br0\">]</span> row<span class=\"br0\">[</span>SIZE<span class=\"br0\">]</span><span class=\"sy0\">;</span><br/>\u00a0<br/>    <span class=\"kw3\">constraint</span> rook_moves <span class=\"br0\">{</span><br/>      <span class=\"kw3\">foreach</span> <span class=\"br0\">(</span>row<span class=\"br0\">[</span>i<span class=\"br0\">]</span><span class=\"br0\">)</span> <span class=\"kw3\">foreach</span> <span class=\"br0\">(</span>row<span class=\"br0\">[</span>j<span class=\"br0\">]</span><span class=\"br0\">)</span> <span class=\"kw3\">if</span> <span class=\"br0\">(</span>i <span class=\"sy0\">&lt;</span> j<span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>        row<span class=\"br0\">[</span>i<span class=\"br0\">]</span> <span class=\"sy0\">!=</span> row<span class=\"br0\">[</span>j<span class=\"br0\">]</span><span class=\"sy0\">;</span><br/>      <span class=\"br0\">}</span><br/>    <span class=\"br0\">}</span><br/>\u00a0<br/>    <span class=\"kw3\">constraint</span> diagonal_moves <span class=\"br0\">{</span><br/>      <span class=\"kw3\">foreach</span> <span class=\"br0\">(</span>row<span class=\"br0\">[</span>i<span class=\"br0\">]</span><span class=\"br0\">)</span> <span class=\"kw3\">foreach</span> <span class=\"br0\">(</span>row<span class=\"br0\">[</span>j<span class=\"br0\">]</span><span class=\"br0\">)</span> <span class=\"kw3\">if</span> <span class=\"br0\">(</span>i <span class=\"sy0\">&lt;</span> j<span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>        `ABS_DIFF<span class=\"br0\">(</span>row<span class=\"br0\">[</span>i<span class=\"br0\">]</span><span class=\"sy0\">,</span> row<span class=\"br0\">[</span>j<span class=\"br0\">]</span><span class=\"br0\">)</span> <span class=\"sy0\">!=</span> `ABS_DIFF<span class=\"br0\">(</span>i<span class=\"sy0\">,</span>j<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>      <span class=\"br0\">}</span><br/>    <span class=\"br0\">}</span><br/>\u00a0<br/>    <span class=\"kw4\">function</span> <span class=\"kw5\">void</span> <span class=\"kw7\">next</span><span class=\"sy0\">;</span><br/>      <span class=\"kw7\">randomize</span><span class=\"sy0\">;</span><br/>      <span class=\"kw3\">foreach</span> <span class=\"br0\">(</span>row<span class=\"br0\">[</span>i<span class=\"br0\">]</span><span class=\"br0\">)</span> <span class=\"kw4\">begin</span><br/>        <span class=\"kw5\">automatic</span> <span class=\"kw5\">bit</span> <span class=\"br0\">[</span>SIZE<span class=\"sy0\">-</span><span class=\"nu0\">1</span><span class=\"sy0\">:</span><span class=\"nu0\">0</span><span class=\"br0\">]</span> x <span class=\"sy0\">=</span> <span class=\"nu0\">1</span> <span class=\"sy0\">&lt;&lt;</span> row<span class=\"br0\">[</span>i<span class=\"br0\">]</span><span class=\"sy0\">;</span><br/>        $display<span class=\"br0\">(</span> <span class=\"st0\">\" \u00a0%b\"</span><span class=\"sy0\">,</span> x <span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>      <span class=\"kw4\">end</span><br/>      $display<span class=\"br0\">(</span><span class=\"st0\">\"--\"</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>    <span class=\"kw4\">endfunction</span><br/>\u00a0<br/>  <span class=\"kw4\">endclass</span><br/>\u00a0<br/>  board b <span class=\"sy0\">=</span> <span class=\"kw3\">new</span><span class=\"sy0\">;</span><br/>  <span class=\"kw4\">initial</span> <span class=\"kw3\">repeat</span><span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"br0\">)</span> b.<span class=\"kw7\">next</span><span class=\"sy0\">;</span><br/>\u00a0<br/><span class=\"kw4\">endprogram</span><br/>\u00a0</pre>"}, {"lang": "Tcl", "loc": 47, "block": "<pre class=\"tcl highlighted_source\"><span class=\"kw2\">package</span> require Tcl <span class=\"nu0\">8.5</span><br/>\u00a0<br/><span class=\"kw1\">proc</span> unsafe <span class=\"br0\">{</span>y<span class=\"br0\">}</span> <span class=\"br0\">{</span><br/>    <span class=\"kw1\">global</span> b<br/>    <span class=\"kw1\">set</span> x <span class=\"br0\">[</span><span class=\"kw2\">lindex</span> <span class=\"re0\">$b</span> <span class=\"re0\">$y</span><span class=\"br0\">]</span><br/>    <span class=\"kw1\">for</span> <span class=\"br0\">{</span><span class=\"kw1\">set</span> i <span class=\"nu0\">1</span><span class=\"br0\">}</span> <span class=\"br0\">{</span><span class=\"re0\">$i</span> <span class=\"sy0\">&lt;</span>= <span class=\"re0\">$y</span><span class=\"br0\">}</span> <span class=\"br0\">{</span><span class=\"kw2\">incr</span> i<span class=\"br0\">}</span> <span class=\"br0\">{</span><br/>\t<span class=\"kw1\">set</span> t <span class=\"br0\">[</span><span class=\"kw2\">lindex</span> <span class=\"re0\">$b</span> <span class=\"br0\">[</span><span class=\"kw1\">expr</span> <span class=\"br0\">{</span><span class=\"re0\">$y</span> - <span class=\"re0\">$i</span><span class=\"br0\">}</span><span class=\"br0\">]</span><span class=\"br0\">]</span><br/>\t<span class=\"kw1\">if</span> <span class=\"br0\">{</span><span class=\"re0\">$t</span>==<span class=\"re0\">$x</span> || <span class=\"re0\">$t</span>==<span class=\"re0\">$x</span>-<span class=\"re0\">$i</span> || <span class=\"re0\">$t</span>==<span class=\"re0\">$x</span>+<span class=\"re0\">$i</span><span class=\"br0\">}</span> <span class=\"br0\">{</span><br/>\t    <span class=\"kw1\">return</span> <span class=\"nu0\">1</span><br/>\t<span class=\"br0\">}</span><br/>    <span class=\"br0\">}</span><br/>    <span class=\"kw1\">return</span> <span class=\"nu0\">0</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"kw1\">proc</span> putboard <span class=\"br0\">{</span><span class=\"br0\">}</span> <span class=\"br0\">{</span><br/>    <span class=\"kw1\">global</span> b s N<br/>    <span class=\"kw2\">puts</span> <span class=\"st0\">\"<span class=\"es0\">\\n</span><span class=\"es0\">\\n</span>Solution #[incr s]\"</span><br/>    <span class=\"kw1\">for</span> <span class=\"br0\">{</span><span class=\"kw1\">set</span> y <span class=\"nu0\">0</span><span class=\"br0\">}</span> <span class=\"br0\">{</span><span class=\"re0\">$y</span> <span class=\"sy0\">&lt;</span> <span class=\"re0\">$N</span><span class=\"br0\">}</span> <span class=\"br0\">{</span><span class=\"kw2\">incr</span> y<span class=\"br0\">}</span> <span class=\"br0\">{</span><br/>\t<span class=\"kw1\">for</span> <span class=\"br0\">{</span><span class=\"kw1\">set</span> x <span class=\"nu0\">0</span><span class=\"br0\">}</span> <span class=\"br0\">{</span><span class=\"re0\">$x</span> <span class=\"sy0\">&lt;</span> <span class=\"re0\">$N</span><span class=\"br0\">}</span> <span class=\"br0\">{</span><span class=\"kw2\">incr</span> x<span class=\"br0\">}</span> <span class=\"br0\">{</span><br/>\t    <span class=\"kw2\">puts</span> -nonewline <span class=\"br0\">[</span><span class=\"kw1\">expr</span> <span class=\"br0\">{</span><span class=\"br0\">[</span><span class=\"kw2\">lindex</span> <span class=\"re0\">$b</span> <span class=\"re0\">$y</span><span class=\"br0\">]</span> == <span class=\"re0\">$x</span> <span class=\"sy0\">?</span> <span class=\"st0\">\"|Q\"</span>\u00a0: <span class=\"st0\">\"|_\"</span><span class=\"br0\">}</span><span class=\"br0\">]</span><br/>\t<span class=\"br0\">}</span><br/>\t<span class=\"kw2\">puts</span> <span class=\"st0\">\"|\"</span><br/>    <span class=\"br0\">}</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"kw1\">proc</span> main <span class=\"br0\">{</span>n<span class=\"br0\">}</span> <span class=\"br0\">{</span><br/>    <span class=\"kw1\">global</span> b N<br/>    <span class=\"kw1\">set</span> N <span class=\"re0\">$n</span><br/>    <span class=\"kw1\">set</span> b <span class=\"br0\">[</span>lrepeat <span class=\"re0\">$N</span> <span class=\"nu0\">0</span><span class=\"br0\">]</span><br/>    <span class=\"kw1\">set</span> y <span class=\"nu0\">0</span><br/>    <span class=\"kw2\">lset</span> b <span class=\"nu0\">0</span> -<span class=\"nu0\">1</span><br/>    <span class=\"kw1\">while</span> <span class=\"br0\">{</span><span class=\"re0\">$y</span> <span class=\"sy0\">&gt;</span>= <span class=\"nu0\">0</span><span class=\"br0\">}</span> <span class=\"br0\">{</span><br/>\t<span class=\"kw2\">lset</span> b <span class=\"re0\">$y</span> <span class=\"br0\">[</span><span class=\"kw1\">expr</span> <span class=\"br0\">{</span><span class=\"br0\">[</span><span class=\"kw2\">lindex</span> <span class=\"re0\">$b</span> <span class=\"re0\">$y</span><span class=\"br0\">]</span> + <span class=\"nu0\">1</span><span class=\"br0\">}</span><span class=\"br0\">]</span><br/>\t<span class=\"kw1\">while</span> <span class=\"br0\">{</span><span class=\"br0\">[</span><span class=\"kw2\">lindex</span> <span class=\"re0\">$b</span> <span class=\"re0\">$y</span><span class=\"br0\">]</span> <span class=\"sy0\">&lt;</span> <span class=\"re0\">$N</span> <span class=\"sy0\">&amp;&amp;</span> <span class=\"br0\">[</span>unsafe <span class=\"re0\">$y</span><span class=\"br0\">]</span><span class=\"br0\">}</span> <span class=\"br0\">{</span><br/>\t    <span class=\"kw2\">lset</span> b <span class=\"re0\">$y</span> <span class=\"br0\">[</span><span class=\"kw1\">expr</span> <span class=\"br0\">{</span><span class=\"br0\">[</span><span class=\"kw2\">lindex</span> <span class=\"re0\">$b</span> <span class=\"re0\">$y</span><span class=\"br0\">]</span> + <span class=\"nu0\">1</span><span class=\"br0\">}</span><span class=\"br0\">]</span><br/>\t<span class=\"br0\">}</span><br/>\t<span class=\"kw1\">if</span> <span class=\"br0\">{</span><span class=\"br0\">[</span><span class=\"kw2\">lindex</span> <span class=\"re0\">$b</span> <span class=\"re0\">$y</span><span class=\"br0\">]</span> <span class=\"sy0\">&gt;</span>= <span class=\"re0\">$N</span><span class=\"br0\">}</span> <span class=\"br0\">{</span><br/>\t    <span class=\"kw2\">incr</span> y -<span class=\"nu0\">1</span><br/>\t<span class=\"br0\">}</span> <span class=\"kw1\">elseif</span> <span class=\"br0\">{</span><span class=\"re0\">$y</span> <span class=\"sy0\">&lt;</span> <span class=\"re0\">$N</span>-<span class=\"nu0\">1</span><span class=\"br0\">}</span> <span class=\"br0\">{</span><br/>\t    <span class=\"kw2\">lset</span> b <span class=\"br0\">[</span><span class=\"kw2\">incr</span> y<span class=\"br0\">]</span> -<span class=\"nu0\">1</span><span class=\"sy0\">;</span><br/>\t<span class=\"br0\">}</span> <span class=\"kw1\">else</span> <span class=\"br0\">{</span><br/>\t    putboard<br/>\t<span class=\"br0\">}</span><br/>    <span class=\"br0\">}</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/>main <span class=\"br0\">[</span><span class=\"kw1\">expr</span> <span class=\"br0\">{</span><span class=\"kw2\"><span class=\"re0\">$argc</span></span> <span class=\"sy0\">?</span> int<span class=\"br0\">(</span><span class=\"nu0\">0</span>+<span class=\"br0\">[</span><span class=\"kw2\">lindex</span> <span class=\"kw2\"><span class=\"re0\">$argv</span></span> <span class=\"nu0\">0</span><span class=\"br0\">]</span><span class=\"br0\">)</span>\u00a0: <span class=\"nu0\">8</span><span class=\"br0\">}</span><span class=\"br0\">]</span></pre>"}, {"lang": "UNIX Shell ", "loc": 78, "block": "<pre class=\"bash highlighted_source\"><span class=\"co0\">#!/bin/bash</span><br/>\u00a0<br/><span class=\"co0\"># variable declaration</span><br/><span class=\"kw3\">typeset</span> <span class=\"re5\">-i</span> <span class=\"re2\">BoardSize</span>=<span class=\"nu0\">8</span><br/><span class=\"kw3\">typeset</span> <span class=\"re5\">-i</span> <span class=\"re2\">p</span>=<span class=\"nu0\">0</span><br/><span class=\"kw3\">typeset</span> <span class=\"re5\">-i</span> <span class=\"re2\">total</span>=<span class=\"nu0\">0</span><br/><span class=\"kw3\">typeset</span> <span class=\"re5\">-i</span> board<br/>\u00a0<br/><span class=\"co0\"># initialization</span><br/><span class=\"kw1\">function</span> init<br/><span class=\"br0\">{</span><br/>    <span class=\"kw1\">for</span> <span class=\"br0\">(</span><span class=\"br0\">(</span> <span class=\"re2\">i</span>=<span class=\"nu0\">0</span>;i<span class=\"sy0\">&lt;</span><span class=\"re1\">$BoardSize</span>;i++ <span class=\"br0\">)</span><span class=\"br0\">)</span><br/>    <span class=\"kw1\">do</span><br/>        <span class=\"br0\">(</span><span class=\"br0\">(</span> board<span class=\"br0\">[</span><span class=\"re1\">$i</span><span class=\"br0\">]</span>=-<span class=\"nu0\">1</span> <span class=\"br0\">)</span><span class=\"br0\">)</span><br/>    <span class=\"kw1\">done</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"co0\"># check if queen can be placed</span><br/><span class=\"kw1\">function</span> place <br/><span class=\"br0\">{</span><br/>        <span class=\"kw3\">typeset</span> <span class=\"re5\">-i</span> <span class=\"re2\">flag</span>=<span class=\"nu0\">1</span><br/>        <span class=\"kw1\">for</span> <span class=\"br0\">(</span><span class=\"br0\">(</span> <span class=\"re2\">i</span>=<span class=\"nu0\">0</span>;i<span class=\"sy0\">&lt;</span><span class=\"re4\">$1</span>;i++ <span class=\"br0\">)</span><span class=\"br0\">)</span><br/>        <span class=\"kw1\">do</span><br/>                <span class=\"kw1\">if</span> <span class=\"br0\">[</span><span class=\"br0\">[</span> <span class=\"br0\">(</span><span class=\"co1\">${board[$i]}</span>-<span class=\"co1\">${board[$1]}</span> <span class=\"re5\">-eq</span> <span class=\"co1\">${i}</span>-<span class=\"co1\">${1}</span><span class=\"br0\">)</span> <span class=\"sy0\">||</span> <span class=\"br0\">(</span><span class=\"co1\">${board[$i]}</span>-<span class=\"co1\">${board[$1]}</span> <span class=\"re5\">-eq</span> <span class=\"co1\">${1}</span>-<span class=\"co1\">${i}</span><span class=\"br0\">)</span> <span class=\"sy0\">||</span> <span class=\"br0\">(</span><span class=\"co1\">${board[$i]}</span> <span class=\"re5\">-eq</span> <span class=\"co1\">${board[$1]}</span><span class=\"br0\">)</span> <span class=\"br0\">]</span><span class=\"br0\">]</span><br/>                <span class=\"kw1\">then</span><br/>                        <span class=\"br0\">(</span><span class=\"br0\">(</span> <span class=\"re2\">flag</span>=<span class=\"nu0\">0</span> <span class=\"br0\">)</span><span class=\"br0\">)</span><br/>                <span class=\"kw1\">fi</span><br/>        <span class=\"kw1\">done</span><br/>        <span class=\"br0\">[</span><span class=\"br0\">[</span> <span class=\"re1\">$flag</span> <span class=\"re5\">-eq</span> <span class=\"nu0\">0</span> <span class=\"br0\">]</span><span class=\"br0\">]</span><br/>        <span class=\"kw3\">return</span> <span class=\"re4\">$?</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"co0\"># print the result</span><br/><span class=\"kw1\">function</span> out<br/><span class=\"br0\">{</span><br/>        <span class=\"kw3\">printf</span> <span class=\"st0\">\"Problem of queen\u00a0%d:%d<span class=\"es1\">\\n</span>\"</span> <span class=\"re1\">$BoardSize</span> <span class=\"re1\">$total</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"co0\"># free the variables</span><br/><span class=\"kw1\">function</span> depose<br/><span class=\"br0\">{</span><br/>    <span class=\"kw3\">unset</span> p<br/>    <span class=\"kw3\">unset</span> total<br/>    <span class=\"kw3\">unset</span> board<br/>    <span class=\"kw3\">unset</span> BoardSize<br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"co0\"># back tracing</span><br/><span class=\"kw1\">function</span> work<br/><span class=\"br0\">{</span><br/>    <span class=\"kw1\">while</span> <span class=\"br0\">[</span><span class=\"br0\">[</span> <span class=\"re1\">$p</span> <span class=\"re5\">-gt</span> <span class=\"re5\">-1</span> <span class=\"br0\">]</span><span class=\"br0\">]</span><br/>        <span class=\"kw1\">do</span><br/>        <span class=\"br0\">(</span><span class=\"br0\">(</span> board<span class=\"br0\">[</span><span class=\"re1\">$p</span><span class=\"br0\">]</span>++ <span class=\"br0\">)</span><span class=\"br0\">)</span><br/>        <span class=\"kw1\">if</span>  <span class=\"br0\">[</span><span class=\"br0\">[</span> <span class=\"co1\">${board[$p]}</span> <span class=\"re5\">-ge</span> <span class=\"co1\">${BoardSize}</span> <span class=\"br0\">]</span><span class=\"br0\">]</span><br/>        <span class=\"kw1\">then</span>  <span class=\"co0\"># back tracing</span><br/>            <span class=\"br0\">(</span><span class=\"br0\">(</span> p-- <span class=\"br0\">)</span><span class=\"br0\">)</span><br/>        <span class=\"kw1\">else</span>  <span class=\"co0\"># try next position</span><br/>            place <span class=\"re1\">$p</span><br/>            <span class=\"kw1\">if</span> <span class=\"br0\">[</span><span class=\"br0\">[</span> <span class=\"re4\">$?</span> <span class=\"re5\">-eq</span> <span class=\"nu0\">1</span> <span class=\"br0\">]</span><span class=\"br0\">]</span><br/>            <span class=\"kw1\">then</span><br/>                <span class=\"br0\">(</span><span class=\"br0\">(</span> p++ <span class=\"br0\">)</span><span class=\"br0\">)</span><br/>                <span class=\"kw1\">if</span> <span class=\"br0\">[</span><span class=\"br0\">[</span> <span class=\"re1\">$p</span> <span class=\"re5\">-ge</span> <span class=\"co1\">${BoardSize}</span> <span class=\"br0\">]</span><span class=\"br0\">]</span><br/>                <span class=\"kw1\">then</span><br/>                    <span class=\"br0\">(</span><span class=\"br0\">(</span> total++ <span class=\"br0\">)</span><span class=\"br0\">)</span><br/>                    <span class=\"br0\">(</span><span class=\"br0\">(</span> p-- <span class=\"br0\">)</span><span class=\"br0\">)</span><br/>                <span class=\"kw1\">else</span><br/>                    <span class=\"br0\">(</span><span class=\"br0\">(</span> board<span class=\"br0\">[</span><span class=\"re1\">$p</span><span class=\"br0\">]</span>=-<span class=\"nu0\">1</span> <span class=\"br0\">)</span><span class=\"br0\">)</span><br/>                <span class=\"kw1\">fi</span><br/>            <span class=\"kw1\">fi</span><br/>        <span class=\"kw1\">fi</span><br/>    <span class=\"kw1\">done</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"co0\"># entry</span><br/>init<br/>work<br/>out<br/>depose</pre>"}, {"lang": "Ursala", "loc": 18, "block": "<pre class=\"text highlighted_source\">#import std<br/>#import nat<br/>\u00a0<br/>remove_reflections = ^D(<a class=\"__cf_email__\" data-cfemail=\"177b727970637f577f63\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>,~&amp;); ~&amp;K2hlPS+ * ^lrNCCs/~&amp;r difference*D<br/>remove_rotations   = ~&amp;K2hlrS2S+ * num; ~&amp;srlXSsPNCCs<br/>\u00a0<br/>#executable &lt;'par',''&gt;<br/>#optimize+<br/>\u00a0<br/>queens =<br/>\u00a0<br/>%np+~command.options.&amp;h.keyword.&amp;iNC; -+<br/>   ~&amp;iNC+ file$[contents: --&lt;''&gt;+ mat` *+\u00a0%nP*=*],<br/>   remove_rotations+ remove_reflections+ ~&amp;rSSs+ nleq-&lt;&amp;l*rFlhthPXPSPS,<br/>   ~&amp;i&amp;&amp; ~&amp;lNrNCXX; ~&amp;rr-&gt;rl ^/~&amp;l ~&amp;lrrhrSiF4E?/~&amp;rrlPlCrtPX @r ^|/~&amp; ^|T\\~&amp; -+<br/>      -&lt;&amp;l^|*DlrTS/~&amp; ~&amp;iiDlSzyCK9hlPNNXXtCS,<br/>      ^jrX/~&amp; @rZK20lrpblPOlrEkPK13lhPK2 ~&amp;i&amp;&amp; nleq$-&amp;lh+-,<br/>   ^/~&amp;NNXS+iota -&lt;&amp;l+ ~&amp;plll2llr2lrPrNCCCCNXS*=irSxPSp+ ^H/block iota; *iiK0 ^/~&amp; sum+-</pre>"}, {"lang": "VBA", "loc": 58, "block": "<pre class=\"vb highlighted_source\"><span class=\"co1\">'N-queens problem - non recursive &amp; structured - vba - 26/02/2017<br/></span><span class=\"kw2\">Sub</span> n_queens()<br/>    Const l = 15  <span class=\"co1\">'number of queens<br/></span>    Const b = <span class=\"kw5\">False</span>  <span class=\"co1\">'print option<br/></span>    <span class=\"kw4\">Dim</span> a(l), s(l), u(4 * l - 2)<br/>    <span class=\"kw4\">Dim</span> n, m, i, j, p, q, r, k, t, z<br/>    <span class=\"kw3\">For</span> i = 1 <span class=\"kw3\">To</span> <span class=\"kw4\">UBound</span>(a): a(i) = i: <span class=\"kw3\">Next</span> i<br/>    <span class=\"kw3\">For</span> n = 1 <span class=\"kw3\">To</span> l<br/>        m = 0<br/>        i = 1<br/>        j = 0<br/>        r = 2 * n - 1<br/>        <span class=\"kw3\">Do</span><br/>            i = i - 1<br/>            j = j + 1<br/>            p = 0<br/>            q = -r<br/>            <span class=\"kw3\">Do</span><br/>                i = i + 1<br/>                u(p) = 1<br/>                u(q + r) = 1<br/>                z = a(j): a(j) = a(i): a(i) = z  <span class=\"co1\">'Swap a(i), a(j)<br/></span>                p = i - a(i) + n<br/>                q = i + a(i) - 1<br/>                s(i) = j<br/>                j = i + 1<br/>            <span class=\"kw3\">Loop</span> <span class=\"kw3\">Until</span> j &gt; n <span class=\"kw3\">Or</span> u(p) <span class=\"kw3\">Or</span> u(q + r)<br/>            <span class=\"kw3\">If</span> u(p) = 0 <span class=\"kw3\">Then</span><br/>                <span class=\"kw3\">If</span> u(q + r) = 0 <span class=\"kw3\">Then</span><br/>                    m = m + 1  <span class=\"co1\">'m: number of solutions<br/></span>                    <span class=\"kw3\">If</span> b <span class=\"kw3\">Then</span><br/>                        Debug.<span class=\"kw4\">Print</span> <span class=\"st0\">\"n=\"</span>; n; <span class=\"st0\">\"m=\"</span>; m<br/>                        <span class=\"kw3\">For</span> k = 1 <span class=\"kw3\">To</span> n<br/>                            <span class=\"kw3\">For</span> t = 1 <span class=\"kw3\">To</span> n<br/>                                Debug.<span class=\"kw4\">Print</span> IIf(a(n - k + 1) = t, <span class=\"st0\">\"Q\"</span>, <span class=\"st0\">\".\"</span>);<br/>                            <span class=\"kw3\">Next</span> t<br/>                            Debug.<span class=\"kw4\">Print</span><br/>                        <span class=\"kw3\">Next</span> k<br/>                    <span class=\"kw3\">End</span> <span class=\"kw3\">If</span><br/>                <span class=\"kw3\">End</span> <span class=\"kw3\">If</span><br/>            <span class=\"kw3\">End</span> <span class=\"kw3\">If</span><br/>            j = s(i)<br/>            <span class=\"kw3\">Do</span> <span class=\"kw3\">While</span> j &gt;= n <span class=\"kw3\">And</span> i &lt;&gt; 0<br/>                <span class=\"kw3\">Do</span><br/>                    z = a(j): a(j) = a(i): a(i) = z  <span class=\"co1\">'Swap a(i), a(j)<br/></span>                    j = j - 1<br/>                <span class=\"kw3\">Loop</span> <span class=\"kw3\">Until</span> j &lt; i<br/>                i = i - 1<br/>                p = i - a(i) + n<br/>                q = i + a(i) - 1<br/>                j = s(i)<br/>                u(p) = 0<br/>                u(q + r) = 0<br/>            <span class=\"kw3\">Loop</span><br/>        <span class=\"kw3\">Loop</span> <span class=\"kw3\">Until</span> i = 0<br/>        Debug.<span class=\"kw4\">Print</span> n, m  <span class=\"co1\">'number of queens, number of solutions<br/></span>    <span class=\"kw3\">Next</span> n<br/><span class=\"kw3\">End</span> <span class=\"kw2\">Sub</span> 'n_queens</pre>"}, {"lang": "VBScript", "loc": 46, "block": "<pre class=\"vb highlighted_source\"><span class=\"co1\">'N-queens problem - non recursive &amp; structured - vbs - 24/02/2017<br/></span>const l=15<br/><span class=\"kw4\">dim</span> a(),s(),u(): <span class=\"kw4\">redim</span> a(l),s(l),u(4*l-2)<br/><span class=\"kw3\">for</span> i=1 <span class=\"kw3\">to</span> l: a(i)=i: <span class=\"kw3\">next</span><br/><span class=\"kw3\">for</span> n=1 <span class=\"kw3\">to</span> l<br/>    m=0<br/>    i=1<br/>    j=0<br/>    r=2*n-1<br/>    <span class=\"kw3\">Do</span><br/>        i=i-1<br/>        j=j+1<br/>        p=0<br/>        q=-r<br/>        <span class=\"kw3\">Do</span><br/>            i=i+1<br/>            u(p)=1<br/>            u(q+r)=1<br/>            z=a(j): a(j)=a(i): a(i)=z  <span class=\"co1\">'swap a(i),a(j)<br/></span>            p=i-a(i)+n<br/>            q=i+a(i)-1<br/>            s(i)=j<br/>            j=i+1<br/>        <span class=\"kw3\">Loop</span> <span class=\"kw3\">Until</span> j&gt;n <span class=\"kw3\">Or</span> u(p)&lt;&gt;0 <span class=\"kw3\">Or</span> u(q+r)&lt;&gt;0<br/>        <span class=\"kw3\">If</span> u(p)=0 <span class=\"kw3\">Then</span><br/>            <span class=\"kw3\">If</span> u(q+r)=0 <span class=\"kw3\">Then</span><br/>                m=m+1  <span class=\"co1\">'m: number of solutions<br/></span>                <span class=\"co1\">'x=\"\": for k=1 to n: x=x&amp;\" \"&amp;a(k): next: msgbox x,,m<br/></span>             <span class=\"kw3\">End</span> <span class=\"kw3\">If</span><br/>        <span class=\"kw3\">End</span> <span class=\"kw3\">If</span><br/>        j=s(i)<br/>        <span class=\"kw3\">Do</span> <span class=\"kw3\">While</span> j&gt;=n <span class=\"kw3\">And</span> i&lt;&gt;0<br/>            <span class=\"kw3\">Do</span><br/>                z=a(j): a(j)=a(i): a(i)=z  <span class=\"co1\">'swap a(i),a(j)<br/></span>                j=j-1<br/>            <span class=\"kw3\">Loop</span> <span class=\"kw3\">Until</span> j&lt;i<br/>            i=i-1<br/>            p=i-a(i)+n<br/>            q=i+a(i)-1<br/>            j=s(i)<br/>            u(p)=0<br/>            u(q+r)=0<br/>        <span class=\"kw3\">Loop</span><br/>    <span class=\"kw3\">Loop</span> <span class=\"kw3\">Until</span> i=0<br/>    wscript.echo n &amp;<span class=\"st0\">\":\"</span>&amp; m<br/><span class=\"kw3\">next</span> 'n</pre>"}, {"lang": "Visual Basic", "loc": 58, "block": "<pre class=\"vb highlighted_source\"><span class=\"co1\">'N-queens problem - non recursive &amp; structured - vb6 - 25/02/2017<br/></span><span class=\"kw2\">Sub</span> n_queens()<br/>    Const l = 15  <span class=\"co1\">'number of queens<br/></span>    Const b = <span class=\"kw5\">False</span>  <span class=\"co1\">'print option<br/></span>    <span class=\"kw4\">Dim</span> a(l), s(l), u(4 * l - 2)<br/>    <span class=\"kw4\">Dim</span> n, m, i, j, p, q, r, k, t, z<br/>    <span class=\"kw3\">For</span> i = 1 <span class=\"kw3\">To</span> <span class=\"kw4\">UBound</span>(a): a(i) = i: <span class=\"kw3\">Next</span> i<br/>    <span class=\"kw3\">For</span> n = 1 <span class=\"kw3\">To</span> l<br/>        m = 0<br/>        i = 1<br/>        j = 0<br/>        r = 2 * n - 1<br/>        <span class=\"kw3\">Do</span><br/>            i = i - 1<br/>            j = j + 1<br/>            p = 0<br/>            q = -r<br/>            <span class=\"kw3\">Do</span><br/>                i = i + 1<br/>                u(p) = 1<br/>                u(q + r) = 1<br/>                z = a(j): a(j) = a(i): a(i) = z  <span class=\"co1\">'Swap a(i), a(j)<br/></span>                p = i - a(i) + n<br/>                q = i + a(i) - 1<br/>                s(i) = j<br/>                j = i + 1<br/>            <span class=\"kw3\">Loop</span> <span class=\"kw3\">Until</span> j &gt; n <span class=\"kw3\">Or</span> u(p) <span class=\"kw3\">Or</span> u(q + r)<br/>            <span class=\"kw3\">If</span> u(p) = 0 <span class=\"kw3\">Then</span><br/>                <span class=\"kw3\">If</span> u(q + r) = 0 <span class=\"kw3\">Then</span><br/>                    m = m + 1  <span class=\"co1\">'m: number of solutions<br/></span>                    <span class=\"kw3\">If</span> b <span class=\"kw3\">Then</span><br/>                        Debug.<span class=\"kw4\">Print</span> <span class=\"st0\">\"n=\"</span>; n; <span class=\"st0\">\"m=\"</span>; m<br/>                        <span class=\"kw3\">For</span> k = 1 <span class=\"kw3\">To</span> n<br/>                            <span class=\"kw3\">For</span> t = 1 <span class=\"kw3\">To</span> n<br/>                                Debug.<span class=\"kw4\">Print</span> IIf(a(n - k + 1) = t, <span class=\"st0\">\"Q\"</span>, <span class=\"st0\">\".\"</span>);<br/>                            <span class=\"kw3\">Next</span> t<br/>                            Debug.<span class=\"kw4\">Print</span><br/>                        <span class=\"kw3\">Next</span> k<br/>                    <span class=\"kw3\">End</span> <span class=\"kw3\">If</span><br/>                <span class=\"kw3\">End</span> <span class=\"kw3\">If</span><br/>            <span class=\"kw3\">End</span> <span class=\"kw3\">If</span><br/>            j = s(i)<br/>            <span class=\"kw3\">Do</span> <span class=\"kw3\">While</span> j &gt;= n <span class=\"kw3\">And</span> i &lt;&gt; 0<br/>                <span class=\"kw3\">Do</span><br/>                    z = a(j): a(j) = a(i): a(i) = z  <span class=\"co1\">'Swap a(i), a(j)<br/></span>                    j = j - 1<br/>                <span class=\"kw3\">Loop</span> <span class=\"kw3\">Until</span> j &lt; i<br/>                i = i - 1<br/>                p = i - a(i) + n<br/>                q = i + a(i) - 1<br/>                j = s(i)<br/>                u(p) = 0<br/>                u(q + r) = 0<br/>            <span class=\"kw3\">Loop</span><br/>        <span class=\"kw3\">Loop</span> <span class=\"kw3\">Until</span> i = 0<br/>        Debug.<span class=\"kw4\">Print</span> n, m  <span class=\"co1\">'number of queens, number of solutions<br/></span>    <span class=\"kw3\">Next</span> n<br/><span class=\"kw3\">End</span> <span class=\"kw2\">Sub</span> 'n_queens</pre>"}, {"lang": "Visual Basic .NET", "loc": 61, "block": "<pre class=\"vb highlighted_source\"><span class=\"co1\">'N-queens problem - non recursive &amp; structured - vb.net - 26/02/2017<br/></span>Module Mod_n_queens<br/>    <span class=\"kw2\">Sub</span> n_queens()<br/>        Const l = 15  <span class=\"co1\">'number of queens<br/></span>        Const b = <span class=\"kw5\">False</span>  <span class=\"co1\">'print option<br/></span>        <span class=\"kw4\">Dim</span> a(l), s(l), u(4 * l - 2)<br/>        <span class=\"kw4\">Dim</span> n, m, i, j, p, q, r, k, t, z<br/>        <span class=\"kw4\">Dim</span> w <span class=\"kw4\">As</span> <span class=\"kw1\">String</span><br/>        <span class=\"kw3\">For</span> i = 1 <span class=\"kw3\">To</span> <span class=\"kw4\">UBound</span>(a)\u00a0: a(i) = i\u00a0: <span class=\"kw3\">Next</span> i<br/>        <span class=\"kw3\">For</span> n = 1 <span class=\"kw3\">To</span> l<br/>            m = 0<br/>            i = 1<br/>            j = 0<br/>            r = 2 * n - 1<br/>            <span class=\"kw3\">Do</span><br/>                i = i - 1<br/>                j = j + 1<br/>                p = 0<br/>                q = -r<br/>                <span class=\"kw3\">Do</span><br/>                    i = i + 1<br/>                    u(p) = 1<br/>                    u(q + r) = 1<br/>                    z = a(j)\u00a0: a(j) = a(i)\u00a0: a(i) = z  <span class=\"co1\">'Swap a(i), a(j)<br/></span>                    p = i - a(i) + n<br/>                    q = i + a(i) - 1<br/>                    s(i) = j<br/>                    j = i + 1<br/>                <span class=\"kw3\">Loop</span> <span class=\"kw3\">Until</span> j &gt; n <span class=\"kw3\">Or</span> u(p) <span class=\"kw3\">Or</span> u(q + r)<br/>                <span class=\"kw3\">If</span> u(p) = 0 <span class=\"kw3\">Then</span><br/>                    <span class=\"kw3\">If</span> u(q + r) = 0 <span class=\"kw3\">Then</span><br/>                        m = m + 1  <span class=\"co1\">'m: number of solutions<br/></span>                        <span class=\"kw3\">If</span> b <span class=\"kw3\">Then</span><br/>                            Debug.<span class=\"kw4\">Print</span>(<span class=\"st0\">\"n=\"</span> &amp; n &amp; <span class=\"st0\">\" m=\"</span> &amp; m)\u00a0: w = <span class=\"st0\">\"\"</span><br/>                            <span class=\"kw3\">For</span> k = 1 <span class=\"kw3\">To</span> n<br/>                                <span class=\"kw3\">For</span> t = 1 <span class=\"kw3\">To</span> n<br/>                                    w = w &amp; <span class=\"kw3\">If</span>(a(n - k + 1) = t, <span class=\"st0\">\"Q\"</span>, <span class=\"st0\">\".\"</span>)<br/>                                <span class=\"kw3\">Next</span> t<br/>                                Debug.<span class=\"kw4\">Print</span>(w)<br/>                            <span class=\"kw3\">Next</span> k<br/>                        <span class=\"kw3\">End</span> <span class=\"kw3\">If</span><br/>                    <span class=\"kw3\">End</span> <span class=\"kw3\">If</span><br/>                <span class=\"kw3\">End</span> <span class=\"kw3\">If</span><br/>                j = s(i)<br/>                <span class=\"kw3\">Do</span> <span class=\"kw3\">While</span> j &gt;= n <span class=\"kw3\">And</span> i &lt;&gt; 0<br/>                    <span class=\"kw3\">Do</span><br/>                        z = a(j)\u00a0: a(j) = a(i)\u00a0: a(i) = z  <span class=\"co1\">'Swap a(i), a(j)<br/></span>                        j = j - 1<br/>                    <span class=\"kw3\">Loop</span> <span class=\"kw3\">Until</span> j &lt; i<br/>                    i = i - 1<br/>                    p = i - a(i) + n<br/>                    q = i + a(i) - 1<br/>                    j = s(i)<br/>                    u(p) = 0<br/>                    u(q + r) = 0<br/>                <span class=\"kw3\">Loop</span><br/>            <span class=\"kw3\">Loop</span> <span class=\"kw3\">Until</span> i = 0<br/>            Debug.<span class=\"kw4\">Print</span>(n &amp; vbTab &amp; m)  <span class=\"co1\">'number of queens, number of solutions<br/></span>        <span class=\"kw3\">Next</span> n<br/>    <span class=\"kw3\">End</span> <span class=\"kw2\">Sub</span> <span class=\"co1\">'n_queens<br/></span><span class=\"kw3\">End</span> Module</pre>"}, {"lang": "Wart", "loc": 24, "block": "<pre class=\"text highlighted_source\">def (nqueens n queens)<br/>  prn \"step: \" queens  # show progress<br/>  if (len.queens = n)<br/>    prn \"solution! \" queens<br/>    # else<br/>    let row (if queens (queens.zero.zero + 1) 0)<br/>      for col 0 (col &lt; n) ++col<br/>        let new_queens (cons (list row col) queens)<br/>          if (no conflicts.new_queens)<br/>            (nqueens n new_queens)<br/>\u00a0<br/># check if the first queen in 'queens' lies on the same column or diagonal as<br/># any of the others<br/>def (conflicts queens)<br/>  let (curr ... rest) queens<br/>    or (let curr_column curr.1<br/>         (some (fn(_) (= _ curr_column))<br/>               (map cadr rest)))  # columns<br/>       (some (fn(_) (diagonal_match curr _))<br/>             rest)<br/>\u00a0<br/>def (diagonal_match curr other)<br/>  (= (abs (curr.0 - other.0))<br/>     (abs (curr.1 - other.1)))</pre>"}, {"lang": "Xanadu", "loc": 70, "block": "<pre class=\"text highlighted_source\">\u00a0<br/>int abs(i: int) {<br/>    if (i &gt;= 0) return i; else return -i;<br/>}<br/>\u00a0<br/>unit print_dots(n: int) {<br/>  while (n &gt; 0) { print_string(\".\"); n = n - 1; }<br/>  return;<br/>}<br/>\u00a0<br/>{size:int | 0 &lt; size}<br/>unit print_board (board[size]: int, size: int(size)) {<br/>  var: int n, row;;<br/>\u00a0<br/>  invariant: [i:nat] (row: int(i))<br/>  for (row = 0; row &lt; size; row = row + 1) {<br/>    n = board[row];<br/>    print_dots(n-1);<br/>    print_string(\"Q\");<br/>    print_dots(size - n);<br/>    print_newline();<br/>  }<br/>    print_newline();<br/>    return;<br/>}<br/>\u00a0<br/>{size:int, j:int | 0 &lt;= j &lt; size}<br/>bool test (j: int(j), board[size]: int) {<br/>  var: int diff, i, qi, qj;;<br/>\u00a0<br/>  qj = board[j];<br/>\u00a0<br/>  invariant: [i:nat] (i: int(i))<br/>  for (i = 0; i &lt; j; i = i + 1) {<br/>    qi = board[i]; diff = abs (qi - qj);<br/>    if (diff == 0) { return false; } <br/>    else { if (diff == j - i) return false; }<br/>  }<br/>  return true;<br/>}<br/>\u00a0<br/>{size:int | 0 &lt; size}<br/>nat queen(size: int(size)) {<br/>  var: int board[], next, row; nat count;;<br/>\u00a0<br/>  count = 0; row = 0; board = alloc(size, 0);<br/>\u00a0<br/>  invariant: [n:nat | n &lt; size] (row: int(n))<br/>  while (true) {<br/>    next = board[row]; next = next + 1;<br/>    if (next &gt; size) {<br/>      if (row == 0) break; else { board[row] = 0; row = row - 1; }<br/>    } else {<br/>      board[row] = next;<br/>      if (test(row, board)) {<br/>        row = row + 1;<br/>        if (row == size) {<br/>          count = count + 1;<br/>\t  print_board(board, size);<br/>          row = row - 1;<br/>        }<br/>      }<br/>    }<br/>  }<br/>  return count;<br/>}<br/>\u00a0<br/>int main () {<br/>  return queen (8);<br/>}</pre>"}, {"lang": "XSLT", "loc": 7, "block": "<pre class=\"text highlighted_source\">\u00a0<br/>15863724<br/>16837425<br/>... 88 lines omitted ...<br/>83162574<br/>84136275<br/>\u00a0</pre>"}, {"lang": "XPL0", "loc": 57, "block": "<pre class=\"text highlighted_source\">def     N=8;    \\board size (NxN)<br/>int     R, C;   \\row and column of board<br/>char    B(N,N); \\board<br/>include c:\\cxpl\\codes;<br/>\u00a0<br/>proc Try;       \\Try adding a queen to the board<br/>int  R;         \\row, for each level of recursion<br/>\u00a0<br/>    func Okay;<br/>    \\Returns 'true' if no row, column, or diagonal from square R,C has a queen<br/>    int I;<br/>    [for I:= 0 to N-1 do<br/>        [if B(I,C) then return false;                   \\row is occupied<br/>        if B(R,I) then return false;                    \\column is occupied<br/>        if R+I&lt;N &amp; C+I&lt;N then<br/>                if B(R+I, C+I) then return false;       \\diagonal down right<br/>        if R-I&gt;=0 &amp; C-I&gt;=0 then<br/>                if B(R-I, C-I) then return false;       \\diagonal up left<br/>        if R-I&gt;=0 &amp; C+I&lt;N then<br/>                if B(R-I, C+I) then return false;       \\diagonal up right<br/>        if R+I&lt;N &amp; C-I&gt;=0 then<br/>                if B(R+I, C-I) then return false;       \\diagonal down left<br/>        ];<br/>    return true;<br/>    ]; \\Okay<br/>\u00a0<br/>[ \\Try<br/>if C&gt;=N then<br/>        [for R:= 0 to N-1 do                            \\display solution<br/>            [ChOut(0, ^ ); \\(avoids scrolling up a color)<br/>            for C:= 0 to N-1 do<br/>                [Attrib(if (R|C)&amp;1 then $0F else $4F);  \\checkerboard pattern<br/>                ChOut(6, if B(R,C) then $F2 else ^ );   \\cute queen symbol<br/>                ChOut(6, if B(R,C) then $F3 else ^ );<br/>                ];<br/>            CrLf(0);<br/>            ];<br/>        exit;                                           \\one solution is enough<br/>        ];<br/>for R:= 0 to N-1 do<br/>    [if Okay(R,C) then          \\a queen can be placed here<br/>        [B(R,C):= true;         \\ so do it<br/>        C:= C+1;                \\move to next column<br/>        Try;                    \\ and try from there<br/>        C:= C-1;                \\didn't work: backup<br/>        B(R,C):= false;         \\undo queen placement<br/>        ];<br/>    ];<br/>]; \\Try<br/>\u00a0<br/>\u00a0<br/>[for R:= 0 to N-1 do            \\clear the board<br/>    for C:= 0 to N-1 do<br/>        B(R,C):= false;<br/>C:= 0;                          \\start at left column<br/>Try;<br/>]</pre>"}, {"lang": "Yabasic", "loc": 65, "block": "<pre class=\"text highlighted_source\">DOCU The N Queens Problem:<br/>DOCU Place N Queens on an NxN chess board<br/>DOCU such that they don't threaten each other.<br/>\u00a0<br/>N = 8 // try some other sizes<br/>\u00a0<br/>sub threat(q1r, q1c, q2r, q2c)<br/>// do two queens threaten each other?<br/>\u00a0<br/>   if q1c = q2c then    return true<br/>   elsif (q1r - q1c) = (q2r - q2c) then return true<br/>   elsif (q1r + q1c) = (q2r + q2c) then return true<br/>   elsif q1r = q2r then    return true<br/>   else return false<br/>   end if<br/>end sub<br/>\u00a0<br/>sub conflict(r, c, queens$)<br/>// Would square p cause a conflict with other queens on board so far?<br/>   local r2, c2<br/>\u00a0<br/>   for i = 1 to len(queens$) step 2<br/>       r2 = val(mid$(queens$,i,1))<br/>       c2 = val(mid$(queens$,i+1,1))<br/>       if threat(r, c, r2, c2) then<br/>            return true<br/>       end if<br/>    next i<br/>   return false<br/>end sub<br/>\u00a0<br/>sub print_board(queens$)<br/>// print a solution, showing the Queens on the board<br/>   local k$<br/>\u00a0<br/>   print at(1, 1);<br/>   print \"Solution #\", soln, \"\\n\\n   \";<br/>   for c = asc(\"a\") to (asc(\"a\") + N - 1)<br/>        print chr$(c),\" \";<br/>   next c<br/>   print<br/>   for r = 1 to N<br/>        print r using \"##\",\" \";<br/>        for c = 1 to N<br/>            pos = instr(queens$, (str$(r)+str$(c)))<br/>            if pos and mod(pos, 2) then<br/>                queens$ = mid$(queens$,pos)<br/>                print \"Q \";<br/>            else<br/>                print \". \";<br/>            end if<br/>        next c<br/>        print<br/>    next r<br/>    print \"\\nPress Enter. (q to quit) \"<br/>    while(true)<br/>        k$ = inkey$<br/>        if lower$(k$) = \"q\" then<br/>           exit<br/>        elsif k$ = \"enter\" then<br/>           break<br/>        end if<br/>    wend<br/>end sub<br/>\u00a0</pre>"}, {"lang": "zkl", "loc": 9, "block": "<pre class=\"text highlighted_source\">fcn isAttacked([(x,y)],a,b) // explode list (x,y) into args x &amp; y<br/>   { (x==a or y==b or x+y==a+b or x-y==a-b) }<br/>fcn isSafe(a,b,qs){(not qs.filter1(isAttacked,a,b))} // stop at first attack<br/>fcn queensN(N=8,row=1,queens=T){  // T is read only list<br/>   qs\u00a0:= [1..N].filter(isSafe.fpM(\"101\",row,queens))  // fpM makes r&amp;q first &amp; third args<br/>               .apply(fcn(c,r,qs){qs+T(r,c)},row,queens);<br/>   if (row == N) return(qs);<br/>   return(qs.apply(self.fcn.fp(N,row+1)).flatten());  // recurse<br/>}</pre>"}]}