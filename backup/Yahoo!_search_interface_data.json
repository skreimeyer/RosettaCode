{"task": "Yahoo!_search_interface", "blocks": [{"lang": "AutoHotkey", "loc": 31, "block": "<pre class=\"autohotkey highlighted_source\"><span class=\"re2\">test:<br/></span>yahooSearch<span class=\"br0\">(</span><span class=\"st0\">\"test\"</span><span class=\"sy0\">,</span> <span class=\"nu0\">1</span><span class=\"br0\">)</span><br/>yahooSearch<span class=\"br0\">(</span><span class=\"st0\">\"test\"</span><span class=\"sy0\">,</span> <span class=\"nu0\">2</span><span class=\"br0\">)</span><br/><span class=\"kw1\">return</span><br/>\u00a0<br/>yahooSearch<span class=\"br0\">(</span>query<span class=\"sy0\">,</span> page<span class=\"br0\">)</span><br/><span class=\"br0\">{</span><br/>  global<br/>  start <span class=\"sy0\">:=</span> <span class=\"br0\">(</span><span class=\"br0\">(</span>page <span class=\"sy0\">-</span> <span class=\"nu0\">1</span><span class=\"br0\">)</span> <span class=\"sy0\">*</span> <span class=\"nu0\">10</span><span class=\"br0\">)</span> <span class=\"sy0\">+</span> <span class=\"nu0\">1</span><br/>  <a href=\"http://www.autohotkey.com/docs/commands/FileDelete.htm\"><span class=\"kw3\">filedelete</span></a><span class=\"sy0\">,</span> search<span class=\"sy0\">.</span>txt<br/>  <a href=\"http://www.autohotkey.com/docs/commands/URLDownloadToFile.htm\"><span class=\"kw3\">urldownloadtofile</span></a><span class=\"sy0\">,</span>\u00a0% <span class=\"st0\">\"http://search.yahoo.com/search?p=\"</span> <span class=\"sy0\">.</span> query<br/>  <span class=\"sy0\">.</span> <span class=\"st0\">\"&amp;b=\"</span> <span class=\"sy0\">.</span> start<span class=\"sy0\">,</span> search<span class=\"sy0\">.</span>txt<br/>  <a href=\"http://www.autohotkey.com/docs/commands/FileRead.htm\"><span class=\"kw3\">fileread</span></a><span class=\"sy0\">,</span> content<span class=\"sy0\">,</span> search<span class=\"sy0\">.</span>txt<br/>  reg <span class=\"sy0\">=</span> <span class=\"sy0\">&lt;</span>a class<span class=\"sy0\">=</span><span class=\"st0\">\"yschttl spt\"</span> href<span class=\"sy0\">=</span><span class=\"st0\">\".+?\"</span> <span class=\"sy0\">&gt;</span><span class=\"br0\">(</span><span class=\"sy0\">.+</span>?<span class=\"br0\">)</span><span class=\"sy0\">&lt;/</span>a<span class=\"sy0\">&gt;&lt;/</span>h3<span class=\"sy0\">&gt;&lt;/</span>div<span class=\"sy0\">&gt;&lt;</span>div class<span class=\"sy0\">=</span><span class=\"st0\">\"abstr\"</span><span class=\"sy0\">&gt;</span><span class=\"br0\">(</span><span class=\"sy0\">.+</span>?<span class=\"br0\">)</span><span class=\"sy0\">&lt;/</span>div<span class=\"sy0\">&gt;&lt;</span>span class<span class=\"sy0\">=</span>url<span class=\"sy0\">&gt;</span><span class=\"br0\">(</span><span class=\"sy0\">.+</span>?<span class=\"br0\">)</span><span class=\"sy0\">&lt;/</span>span<span class=\"sy0\">&gt;</span><br/>\u00a0<br/>  index <span class=\"sy0\">:=</span> found <span class=\"sy0\">:=</span> <span class=\"nu0\">1</span><br/>  <span class=\"kw1\">while</span> <span class=\"br0\">(</span>found <span class=\"sy0\">:=</span> <a href=\"http://www.autohotkey.com/docs/commands/RegExMatch.htm\"><span class=\"kw3\">regexmatch</span></a><span class=\"br0\">(</span>content<span class=\"sy0\">,</span> reg<span class=\"sy0\">,</span> self<span class=\"sy0\">,</span> found <span class=\"sy0\">+</span> <span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>  <span class=\"br0\">{</span><br/>    <a href=\"http://www.autohotkey.com/docs/commands/MsgBox.htm\"><span class=\"kw3\">msgbox</span></a>\u00a0% title<span class=\"re0\">%A_Index%</span> <span class=\"sy0\">:=</span> fix<span class=\"br0\">(</span>self1<span class=\"br0\">)</span><br/>    content<span class=\"re0\">%A_Index%</span> <span class=\"sy0\">:=</span> fix<span class=\"br0\">(</span>self2<span class=\"br0\">)</span><br/>    url<span class=\"re0\">%A_Index%</span> <span class=\"sy0\">:=</span> fix<span class=\"br0\">(</span>self3<span class=\"br0\">)</span><br/>  <span class=\"br0\">}</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/>fix<span class=\"br0\">(</span>url<span class=\"br0\">)</span><br/><span class=\"br0\">{</span><br/><span class=\"kw1\">if</span> pos <span class=\"sy0\">:=</span> <a href=\"http://www.autohotkey.com/docs/Functions.htm#BuiltIn\"><span class=\"kw4\">instr</span></a><span class=\"br0\">(</span>url<span class=\"sy0\">,</span> <span class=\"st0\">\"&lt;/a&gt;&lt;/h3&gt;&lt;/div&gt;\"</span><span class=\"br0\">)</span><br/><a href=\"http://www.autohotkey.com/docs/commands/StringLeft.htm\"><span class=\"kw3\">StringLeft</span></a><span class=\"sy0\">,</span> url<span class=\"sy0\">,</span> url<span class=\"sy0\">,</span> pos <span class=\"sy0\">-</span> <span class=\"nu0\">1</span><br/>url <span class=\"sy0\">:=</span> <a href=\"http://www.autohotkey.com/docs/commands/RegExReplace.htm\"><span class=\"kw3\">regexreplace</span></a><span class=\"br0\">(</span>url<span class=\"sy0\">,</span> <span class=\"st0\">\"&lt;.*?&gt;\"</span><span class=\"br0\">)</span><br/><span class=\"kw1\">return</span> url<br/><span class=\"br0\">}</span></pre>"}, {"lang": "C#", "loc": 114, "block": "<pre class=\"csharp highlighted_source\"><span class=\"kw1\">using</span> <span class=\"co3\">System</span><span class=\"sy0\">;</span><br/><span class=\"kw1\">using</span> <span class=\"co3\">System.Net</span><span class=\"sy0\">;</span><br/><span class=\"kw1\">using</span> <span class=\"co3\">System.Text.RegularExpressions</span><span class=\"sy0\">;</span><br/><span class=\"kw1\">using</span> <span class=\"co3\">System.Collections.Generic</span><span class=\"sy0\">;</span><br/>\u00a0<br/><span class=\"kw4\">class</span> YahooSearch <span class=\"br0\">{</span><br/>    <span class=\"kw1\">private</span> <span class=\"kw4\">string</span> query<span class=\"sy0\">;</span><br/>    <span class=\"kw1\">private</span> <span class=\"kw4\">string</span> content<span class=\"sy0\">;</span><br/>    <span class=\"kw1\">private</span> <span class=\"kw4\">int</span> page<span class=\"sy0\">;</span><br/>\u00a0<br/>    <span class=\"kw1\">const</span> <span class=\"kw4\">string</span> yahoo <span class=\"sy0\">=</span> <span class=\"st0\">\"http://search.yahoo.com/search?\"</span><span class=\"sy0\">;</span><br/>\u00a0<br/>    <span class=\"kw1\">public</span> YahooSearch<span class=\"br0\">(</span><span class=\"kw4\">string</span> query<span class=\"br0\">)</span> <span class=\"sy0\">:</span> <span class=\"kw1\">this</span><span class=\"br0\">(</span>query, <span class=\"nu0\">0</span><span class=\"br0\">)</span> <span class=\"br0\">{</span> <span class=\"br0\">}</span><br/>\u00a0<br/>    <span class=\"kw1\">public</span> YahooSearch<span class=\"br0\">(</span><span class=\"kw4\">string</span> query, <span class=\"kw4\">int</span> page<span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>        <span class=\"kw1\">this</span><span class=\"sy0\">.</span><span class=\"me1\">query</span> <span class=\"sy0\">=</span> query<span class=\"sy0\">;</span><br/>        <span class=\"kw1\">this</span><span class=\"sy0\">.</span><span class=\"me1\">page</span> <span class=\"sy0\">=</span> page<span class=\"sy0\">;</span><br/>        <span class=\"kw1\">this</span><span class=\"sy0\">.</span><span class=\"me1\">content</span> <span class=\"sy0\">=</span> <a href=\"http://www.google.com/search?q=new+msdn.microsoft.com\"><span class=\"kw3\">new</span></a> WebClient<span class=\"br0\">(</span><span class=\"br0\">)</span><br/>            <span class=\"sy0\">.</span><span class=\"me1\">DownloadString</span><span class=\"br0\">(</span><br/>                <span class=\"kw4\">string</span><span class=\"sy0\">.</span><span class=\"me1\">Format</span><span class=\"br0\">(</span>yahoo <span class=\"sy0\">+</span> <span class=\"st0\">\"p={0}&amp;b={1}\"</span>, query, <span class=\"kw1\">this</span><span class=\"sy0\">.</span><span class=\"me1\">page</span> <span class=\"sy0\">*</span> <span class=\"nu0\">10</span> <span class=\"sy0\">+</span> <span class=\"nu0\">1</span><span class=\"br0\">)</span><br/>            <span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>    <span class=\"br0\">}</span><br/>\u00a0<br/>    <span class=\"kw1\">public</span> YahooResult<span class=\"br0\">[</span><span class=\"br0\">]</span> Results <span class=\"br0\">{</span><br/>        <span class=\"kw1\">get</span> <span class=\"br0\">{</span><br/>            List<span class=\"sy0\">&lt;</span>YahooResult<span class=\"sy0\">&gt;</span> results <span class=\"sy0\">=</span> <a href=\"http://www.google.com/search?q=new+msdn.microsoft.com\"><span class=\"kw3\">new</span></a> List<span class=\"sy0\">&lt;</span>YahooResult<span class=\"sy0\">&gt;</span><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>\u00a0<br/>            Func<span class=\"sy0\">&lt;</span><span class=\"kw4\">string</span>, <span class=\"kw4\">string</span>, <span class=\"kw4\">string</span><span class=\"sy0\">&gt;</span> substringBefore <span class=\"sy0\">=</span> <span class=\"br0\">(</span>str, before<span class=\"br0\">)</span> <span class=\"sy0\">=&gt;</span><br/>            <span class=\"br0\">{</span><br/>                <span class=\"kw4\">int</span> iHref <span class=\"sy0\">=</span> str<span class=\"sy0\">.</span><span class=\"me1\">IndexOf</span><span class=\"br0\">(</span>before<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>                <span class=\"kw1\">return</span> iHref <span class=\"sy0\">&lt;</span> <span class=\"nu0\">0</span> <span class=\"sy0\">?</span> <span class=\"st0\">\"\"</span> <span class=\"sy0\">:</span> str<span class=\"sy0\">.</span><span class=\"me1\">Substring</span><span class=\"br0\">(</span><span class=\"nu0\">0</span>, iHref<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>            <span class=\"br0\">}</span><span class=\"sy0\">;</span><br/>            Func<span class=\"sy0\">&lt;</span><span class=\"kw4\">string</span>, <span class=\"kw4\">string</span>, <span class=\"kw4\">string</span><span class=\"sy0\">&gt;</span> substringAfter <span class=\"sy0\">=</span> <span class=\"br0\">(</span>str, after<span class=\"br0\">)</span> <span class=\"sy0\">=&gt;</span><br/>            <span class=\"br0\">{</span><br/>                <span class=\"kw4\">int</span> iHref <span class=\"sy0\">=</span> str<span class=\"sy0\">.</span><span class=\"me1\">IndexOf</span><span class=\"br0\">(</span>after<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>                <span class=\"kw1\">return</span> iHref <span class=\"sy0\">&lt;</span> <span class=\"nu0\">0</span> <span class=\"sy0\">?</span> <span class=\"st0\">\"\"</span> <span class=\"sy0\">:</span> str<span class=\"sy0\">.</span><span class=\"me1\">Substring</span><span class=\"br0\">(</span>iHref <span class=\"sy0\">+</span> after<span class=\"sy0\">.</span><span class=\"me1\">Length</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>            <span class=\"br0\">}</span><span class=\"sy0\">;</span><br/>            Converter<span class=\"sy0\">&lt;</span><span class=\"kw4\">string</span>, <span class=\"kw4\">string</span><span class=\"sy0\">&gt;</span> getText <span class=\"sy0\">=</span> p <span class=\"sy0\">=&gt;</span> <br/>                Regex<span class=\"sy0\">.</span><span class=\"me1\">Replace</span><span class=\"br0\">(</span>p, <span class=\"st0\">\"&lt;[^&gt;]*&gt;\"</span>, x <span class=\"sy0\">=&gt;</span> <span class=\"st0\">\"\"</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>\u00a0<br/>            Regex rx <span class=\"sy0\">=</span> <a href=\"http://www.google.com/search?q=new+msdn.microsoft.com\"><span class=\"kw3\">new</span></a> Regex<span class=\"br0\">(</span><span class=\"st_h\">@\"<br/>                &lt;li&gt;<br/>                    &lt;div \\s class=\"</span><span class=\"st0\">\"res\"</span><span class=\"st0\">\"&gt;<br/>                        &lt;div&gt;<br/>                            &lt;h3&gt;<br/>                                &lt;a <span class=\"es0\">\\s</span> (?'LinkAttributes'[^&gt;]+)&gt;<br/>                                    (?'LinkText' .*?)<br/>                                (?&gt;&lt;/a&gt;)<br/>                            &lt;/h3&gt;<br/>                        &lt;/div&gt;<br/>                        &lt;div <span class=\"es0\">\\s</span> class=\"</span><span class=\"st0\">\"abstr\"</span><span class=\"st0\">\"&gt;<br/>                            (?'Abstract' .*?)<br/>                        (?&gt;&lt;/div&gt;)<br/>                        .*?<br/>                    (?&gt;&lt;/div&gt;)<br/>                &lt;/li&gt;\"</span>,<br/>                RegexOptions<span class=\"sy0\">.</span><span class=\"me1\">IgnorePatternWhitespace</span><br/>                <span class=\"sy0\">|</span> RegexOptions<span class=\"sy0\">.</span><span class=\"me1\">ExplicitCapture</span><br/>            <span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>            <span class=\"kw1\">foreach</span> <span class=\"br0\">(</span>Match e <span class=\"kw1\">in</span> rx<span class=\"sy0\">.</span><span class=\"me1\">Matches</span><span class=\"br0\">(</span><span class=\"kw1\">this</span><span class=\"sy0\">.</span><span class=\"me1\">content</span><span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>                <span class=\"kw4\">string</span> rurl <span class=\"sy0\">=</span> getText<span class=\"br0\">(</span>substringBefore<span class=\"br0\">(</span>substringAfter<span class=\"br0\">(</span><br/>                    e<span class=\"sy0\">.</span><span class=\"me1\">Groups</span><span class=\"br0\">[</span><span class=\"st0\">\"LinkAttributes\"</span><span class=\"br0\">]</span><span class=\"sy0\">.</span><span class=\"kw1\">Value</span>, <span class=\"st_h\">@\"href=\"</span><span class=\"st0\">\"\"</span><span class=\"br0\">)</span>, <span class=\"st_h\">@\"\"</span><span class=\"st0\">\"\"</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>                <span class=\"kw4\">string</span> rtitle <span class=\"sy0\">=</span> getText<span class=\"br0\">(</span>e<span class=\"sy0\">.</span><span class=\"me1\">Groups</span><span class=\"br0\">[</span><span class=\"st0\">\"LinkText\"</span><span class=\"br0\">]</span><span class=\"sy0\">.</span><span class=\"kw1\">Value</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>                <span class=\"kw4\">string</span> rcontent <span class=\"sy0\">=</span> getText<span class=\"br0\">(</span>e<span class=\"sy0\">.</span><span class=\"me1\">Groups</span><span class=\"br0\">[</span><span class=\"st0\">\"Abstract\"</span><span class=\"br0\">]</span><span class=\"sy0\">.</span><span class=\"kw1\">Value</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>\u00a0<br/>                results<span class=\"sy0\">.</span><span class=\"kw1\">Add</span><span class=\"br0\">(</span><a href=\"http://www.google.com/search?q=new+msdn.microsoft.com\"><span class=\"kw3\">new</span></a> YahooResult<span class=\"br0\">(</span>rurl, rtitle, rcontent<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>            <span class=\"br0\">}</span><br/>            <span class=\"kw1\">return</span> results<span class=\"sy0\">.</span><span class=\"me1\">ToArray</span><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        <span class=\"br0\">}</span><br/>    <span class=\"br0\">}</span><br/>\u00a0<br/>    <span class=\"kw1\">public</span> YahooSearch NextPage<span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>        <span class=\"kw1\">return</span> <a href=\"http://www.google.com/search?q=new+msdn.microsoft.com\"><span class=\"kw3\">new</span></a> YahooSearch<span class=\"br0\">(</span><span class=\"kw1\">this</span><span class=\"sy0\">.</span><span class=\"me1\">query</span>, <span class=\"kw1\">this</span><span class=\"sy0\">.</span><span class=\"me1\">page</span> <span class=\"sy0\">+</span> <span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>    <span class=\"br0\">}</span><br/>\u00a0<br/>    <span class=\"kw1\">public</span> YahooSearch GetPage<span class=\"br0\">(</span><span class=\"kw4\">int</span> page<span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>        <span class=\"kw1\">return</span> <a href=\"http://www.google.com/search?q=new+msdn.microsoft.com\"><span class=\"kw3\">new</span></a> YahooSearch<span class=\"br0\">(</span><span class=\"kw1\">this</span><span class=\"sy0\">.</span><span class=\"me1\">query</span>, page<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>    <span class=\"br0\">}</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"kw4\">class</span> YahooResult <span class=\"br0\">{</span><br/>    <span class=\"kw1\">public</span> <span class=\"kw4\">string</span> URL <span class=\"br0\">{</span> <span class=\"kw1\">get</span><span class=\"sy0\">;</span> <span class=\"kw1\">set</span><span class=\"sy0\">;</span> <span class=\"br0\">}</span><br/>    <span class=\"kw1\">public</span> <span class=\"kw4\">string</span> Title <span class=\"br0\">{</span> <span class=\"kw1\">get</span><span class=\"sy0\">;</span> <span class=\"kw1\">set</span><span class=\"sy0\">;</span> <span class=\"br0\">}</span><br/>    <span class=\"kw1\">public</span> <span class=\"kw4\">string</span> Content <span class=\"br0\">{</span> <span class=\"kw1\">get</span><span class=\"sy0\">;</span> <span class=\"kw1\">set</span><span class=\"sy0\">;</span> <span class=\"br0\">}</span><br/>\u00a0<br/>    <span class=\"kw1\">public</span> YahooResult<span class=\"br0\">(</span><span class=\"kw4\">string</span> url, <span class=\"kw4\">string</span> title, <span class=\"kw4\">string</span> content<span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>        <span class=\"kw1\">this</span><span class=\"sy0\">.</span><span class=\"me1\">URL</span> <span class=\"sy0\">=</span> url<span class=\"sy0\">;</span><br/>        <span class=\"kw1\">this</span><span class=\"sy0\">.</span><span class=\"me1\">Title</span> <span class=\"sy0\">=</span> title<span class=\"sy0\">;</span><br/>        <span class=\"kw1\">this</span><span class=\"sy0\">.</span><span class=\"me1\">Content</span> <span class=\"sy0\">=</span> content<span class=\"sy0\">;</span><br/>    <span class=\"br0\">}</span><br/>\u00a0<br/>    <span class=\"kw1\">public</span> <span class=\"kw1\">override</span> <span class=\"kw4\">string</span> ToString<span class=\"br0\">(</span><span class=\"br0\">)</span><br/>    <span class=\"br0\">{</span><br/>        <span class=\"kw1\">return</span> <span class=\"kw4\">string</span><span class=\"sy0\">.</span><span class=\"me1\">Format</span><span class=\"br0\">(</span><span class=\"st0\">\"<span class=\"es0\">\\n</span>Title: {0}<span class=\"es0\">\\n</span>Link:  {1}<span class=\"es0\">\\n</span>Text:  {2}\"</span>,<br/>            Title, URL, Content<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>    <span class=\"br0\">}</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"co1\">// Usage: </span><br/>\u00a0<br/><span class=\"kw4\">class</span> Prog <span class=\"br0\">{</span><br/>    <span class=\"kw1\">static</span> <span class=\"kw4\">void</span> Main<span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>        <span class=\"kw1\">foreach</span> <span class=\"br0\">(</span><span class=\"kw4\">int</span> page <span class=\"kw1\">in</span> <a href=\"http://www.google.com/search?q=new+msdn.microsoft.com\"><span class=\"kw3\">new</span></a><span class=\"br0\">[</span><span class=\"br0\">]</span> <span class=\"br0\">{</span> <span class=\"nu0\">0</span>, <span class=\"nu0\">1</span> <span class=\"br0\">}</span><span class=\"br0\">)</span><br/>        <span class=\"br0\">{</span><br/>            YahooSearch x <span class=\"sy0\">=</span> <a href=\"http://www.google.com/search?q=new+msdn.microsoft.com\"><span class=\"kw3\">new</span></a> YahooSearch<span class=\"br0\">(</span><span class=\"st0\">\"test\"</span>, page<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>\u00a0<br/>            <span class=\"kw1\">foreach</span> <span class=\"br0\">(</span>YahooResult result <span class=\"kw1\">in</span> x<span class=\"sy0\">.</span><span class=\"me1\">Results</span><span class=\"br0\">)</span><br/>            <span class=\"br0\">{</span><br/>                Console<span class=\"sy0\">.</span><span class=\"me1\">WriteLine</span><span class=\"br0\">(</span>result<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>            <span class=\"br0\">}</span><br/>        <span class=\"br0\">}</span><br/>    <span class=\"br0\">}</span><br/><span class=\"br0\">}</span><br/>\u00a0</pre>"}, {"lang": "D", "loc": 59, "block": "<pre class=\"d highlighted_source\"><span class=\"kw2\">import</span> std.<span class=\"me1\">stdio</span><span class=\"sy0\">,</span> std.<span class=\"me1\">exception</span><span class=\"sy0\">,</span> std.<span class=\"me1\">regex</span><span class=\"sy0\">,</span> std.<span class=\"me1\">algorithm</span><span class=\"sy0\">,</span> std.<span class=\"kw4\">string</span><span class=\"sy0\">,</span><br/>       std.<span class=\"me1\">net</span>.<span class=\"me1\">curl</span><span class=\"sy0\">;</span><br/>\u00a0<br/><span class=\"kw4\">struct</span> YahooResult <span class=\"br0\">{</span><br/>    <span class=\"kw4\">string</span> url<span class=\"sy0\">,</span> title<span class=\"sy0\">,</span> content<span class=\"sy0\">;</span><br/>\u00a0<br/>    <span class=\"kw4\">string</span> toString<span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"kw4\">const</span> <span class=\"br0\">{</span><br/>        <span class=\"kw1\">return</span> <span class=\"st0\">\"<span class=\"es1\">\\n</span>Title:\u00a0%s<span class=\"es1\">\\n</span>Link: \u00a0%s<span class=\"es1\">\\n</span>Text: \u00a0%s\"</span><br/>               .<span class=\"me1\">format</span><span class=\"br0\">(</span>title<span class=\"sy0\">,</span> url<span class=\"sy0\">,</span> content<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>    <span class=\"br0\">}</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"kw4\">struct</span> YahooSearch <span class=\"br0\">{</span><br/>    <span class=\"kw4\">private</span> <span class=\"kw4\">string</span> query<span class=\"sy0\">,</span> content<span class=\"sy0\">;</span><br/>    <span class=\"kw4\">private</span> <span class=\"kw4\">uint</span> page<span class=\"sy0\">;</span><br/>\u00a0<br/>    <span class=\"kw2\">this</span><span class=\"br0\">(</span><span class=\"kw2\">in</span> <span class=\"kw4\">string</span> query_<span class=\"sy0\">,</span> <span class=\"kw2\">in</span> <span class=\"kw4\">uint</span> page_ <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>        <span class=\"kw2\">this</span>.<span class=\"me1\">query</span> <span class=\"sy0\">=</span> query_<span class=\"sy0\">;</span><br/>        <span class=\"kw2\">this</span>.<span class=\"me1\">page</span> <span class=\"sy0\">=</span> page_<span class=\"sy0\">;</span><br/>        <span class=\"kw2\">this</span>.<span class=\"me1\">content</span> <span class=\"sy0\">=</span> <span class=\"st0\">\"http://search.yahoo.com/search?p=%s&amp;b=%d\"</span><br/>                       .<span class=\"me1\">format</span><span class=\"br0\">(</span>query<span class=\"sy0\">,</span> page <span class=\"sy0\">*</span> <span class=\"nu0\">10</span> <span class=\"sy0\">+</span> <span class=\"nu0\">1</span><span class=\"br0\">)</span>.<span class=\"me1\">get</span>.<span class=\"me1\">assumeUnique</span><span class=\"sy0\">;</span><br/>    <span class=\"br0\">}</span><br/>\u00a0<br/>    <span class=\"kw4\">@property</span> results<span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"kw4\">const</span> <span class=\"br0\">{</span><br/>        <span class=\"kw4\">immutable</span> re <span class=\"sy0\">=</span> <span class=\"st_h\">`&lt;li&gt;<br/>                          &lt;div \\s class=\"res\"&gt;<br/>                            &lt;div&gt;<br/>                              &lt;h3&gt;<br/>                                &lt;a \\s (?P&lt;linkAttributes&gt; [^&gt;]+)&gt;<br/>                                  (?P&lt;linkText&gt; .*?)<br/>                                &lt;/a&gt;<br/>                              &lt;/h3&gt;<br/>                            &lt;/div&gt;<br/>                            &lt;div \\s class=\"abstr\"&gt;<br/>                              (?P&lt;abstract&gt; .*?)<br/>                            &lt;/div&gt;<br/>                            .*?<br/>                          &lt;/div&gt;<br/>                        &lt;/li&gt;`</span><span class=\"sy0\">;</span><br/>\u00a0<br/>        <span class=\"kw4\">const</span> clean <span class=\"sy0\">=</span> <span class=\"br0\">(</span><span class=\"kw4\">string</span> s<span class=\"br0\">)</span> <span class=\"sy0\">=&gt;</span> s.<span class=\"me1\">replace</span><span class=\"br0\">(</span><span class=\"st0\">\"&lt;[^&gt;]*&gt;\"</span>.<span class=\"me1\">regex</span><span class=\"br0\">(</span><span class=\"st0\">\"g\"</span><span class=\"br0\">)</span><span class=\"sy0\">,</span><span class=\"st0\">\"\"</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>\u00a0<br/>        <span class=\"kw1\">return</span> content.<span class=\"me1\">match</span><span class=\"br0\">(</span>re.<span class=\"me1\">regex</span><span class=\"br0\">(</span><span class=\"st0\">\"gx\"</span><span class=\"br0\">)</span><span class=\"br0\">)</span>.<span class=\"me1\">map</span><span class=\"sy0\">!</span><span class=\"br0\">(</span>m <span class=\"sy0\">=&gt;</span> YahooResult<span class=\"br0\">(</span><br/>            clean<span class=\"br0\">(</span>m.<span class=\"me1\">captures</span><span class=\"br0\">[</span><span class=\"st0\">\"linkAttributes\"</span><span class=\"br0\">]</span><br/>                  .<span class=\"me1\">findSplitAfter</span><span class=\"br0\">(</span><span class=\"st_h\">`href=\"`</span><span class=\"br0\">)</span><span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"br0\">]</span><br/>                  .<span class=\"me1\">findSplitBefore</span><span class=\"br0\">(</span><span class=\"st_h\">`\"`</span><span class=\"br0\">)</span><span class=\"br0\">[</span><span class=\"nu0\">0</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">,</span><br/>            clean<span class=\"br0\">(</span>m.<span class=\"me1\">captures</span><span class=\"br0\">[</span><span class=\"st0\">\"linkText\"</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">,</span><br/>            clean<span class=\"br0\">(</span>m.<span class=\"me1\">captures</span><span class=\"br0\">[</span><span class=\"st0\">\"abstract\"</span><span class=\"br0\">]</span><span class=\"br0\">)</span><br/>        <span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>    <span class=\"br0\">}</span><br/>\u00a0<br/>    YahooSearch nextPage<span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"kw4\">const</span> <span class=\"br0\">{</span><br/>        <span class=\"kw1\">return</span> YahooSearch<span class=\"br0\">(</span>query<span class=\"sy0\">,</span> page <span class=\"sy0\">+</span> <span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>    <span class=\"br0\">}</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"kw4\">void</span> main<span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>    writefln<span class=\"br0\">(</span><span class=\"st0\">\"%(%s<span class=\"es1\">\\n</span>%)\"</span><span class=\"sy0\">,</span> <span class=\"st0\">\"test\"</span>.<span class=\"me1\">YahooSearch</span>.<span class=\"me1\">results</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/><span class=\"br0\">}</span></pre>"}, {"lang": "Gambas", "loc": 12, "block": "<pre class=\"gambas highlighted_source\"><a href=\"http://gambasdoc.org/help/lang/public\"><span class=\"kw1\">Public</span></a> <a href=\"http://gambasdoc.org/help/lang/sub\"><span class=\"kw1\">Sub</span></a> Form_Open<span class=\"br0\">(</span><span class=\"br0\">)</span><br/><a href=\"http://gambasdoc.org/help/lang/dim\"><span class=\"kw1\">Dim</span></a> hWebView <a href=\"http://gambasdoc.org/help/lang/as\"><span class=\"kw1\">As</span></a> WebView<br/>\u00a0<br/><a href=\"http://gambasdoc.org/help/lang/me\"><span class=\"kw1\">Me</span></a>.<span class=\"me1\">Arrangement</span> <span class=\"sy0\">=</span> Arrange.<span class=\"me1\">Fill</span><br/><a href=\"http://gambasdoc.org/help/lang/me\"><span class=\"kw1\">Me</span></a>.<span class=\"me1\">Maximized</span> <span class=\"sy0\">=</span> <a href=\"http://gambasdoc.org/help/lang/true\"><span class=\"kw1\">True</span></a><br/><a href=\"http://gambasdoc.org/help/lang/me\"><span class=\"kw1\">Me</span></a>.<span class=\"me1\">Title</span> <span class=\"sy0\">=</span> <span class=\"st0\">\"Yahoo! search interface\"</span><br/>\u00a0<br/>hWebView <span class=\"sy0\">=</span> <a href=\"http://gambasdoc.org/help/lang/new\"><span class=\"kw1\">New</span></a> WebView<span class=\"br0\">(</span><a href=\"http://gambasdoc.org/help/lang/me\"><span class=\"kw1\">Me</span></a><span class=\"br0\">)</span><br/>hWebView.<span class=\"me1\">Expand</span> <span class=\"sy0\">=</span> <a href=\"http://gambasdoc.org/help/lang/true\"><span class=\"kw1\">True</span></a><br/>hWebView.<span class=\"me1\">URL</span> <span class=\"sy0\">=</span> <span class=\"st0\">\"https://www.yahoo.com\"</span><br/>\u00a0<br/><a href=\"http://gambasdoc.org/help/lang/end\"><span class=\"kw1\">End</span></a></pre>"}, {"lang": "GUISS", "loc": 2, "block": "<pre class=\"text highlighted_source\">Start,Programs,Applications,Mozilla Firefox,Inputbox:address bar&gt;www.yahoo.co.uk,<br/>Button:Go,Area:browser window,Inputbox:searchbox&gt;elephants,Button:Search</pre>"}, {"lang": "Haskell", "loc": 106, "block": "<pre class=\"haskell highlighted_source\"><span class=\"kw1\">import</span> Network<span class=\"sy0\">.</span>HTTP<br/><span class=\"kw1\">import</span> Text<span class=\"sy0\">.</span>Parsec<br/>\u00a0<br/><span class=\"kw1\">data</span> YahooSearchItem <span class=\"sy0\">=</span> YahooSearchItem <span class=\"br0\">{</span><br/>    itemUrl<span class=\"sy0\">,</span> itemTitle<span class=\"sy0\">,</span> itemContent <span class=\"sy0\">::</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t:String\"><span class=\"kw4\">String</span></a> <span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"kw1\">data</span> YahooSearch <span class=\"sy0\">=</span> YahooSearch <span class=\"br0\">{</span><br/>    searchQuery <span class=\"sy0\">::</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t:String\"><span class=\"kw4\">String</span></a><span class=\"sy0\">,</span><br/>    searchPage <span class=\"sy0\">::</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t:Int\"><span class=\"kw4\">Int</span></a><span class=\"sy0\">,</span><br/>    searchItems <span class=\"sy0\">::</span> <span class=\"br0\">[</span>YahooSearchItem<span class=\"br0\">]</span> <span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"co1\">-- URL for Yahoo! searches, without giving a page number</span><br/>yahooUrl <span class=\"sy0\">=</span> <span class=\"st0\">\"http://search.yahoo.com/search?p=\"</span><br/>\u00a0<br/><span class=\"co1\">-- make an HTTP request and return a YahooSearch</span><br/>yahoo <span class=\"sy0\">::</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t:String\"><span class=\"kw4\">String</span></a> <span class=\"sy0\">-&gt;</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t:IO\"><span class=\"kw4\">IO</span></a> YahooSearch<br/>yahoo q <span class=\"sy0\">=</span> simpleHTTP <span class=\"br0\">(</span>getRequest <span class=\"sy0\">$</span> yahooUrl <span class=\"sy0\">++</span> q<span class=\"br0\">)</span> <span class=\"sy0\">&gt;&gt;=</span><br/>    getResponseBody <span class=\"sy0\">&gt;&gt;=</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:return\"><span class=\"kw3\">return</span></a> <span class=\"sy0\">.</span> YahooSearch q <span class=\"nu0\">1</span> <span class=\"sy0\">.</span> items<br/>\u00a0<br/><span class=\"co1\">-- get some results and return the next page of results</span><br/>next <span class=\"sy0\">::</span> YahooSearch <span class=\"sy0\">-&gt;</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t:IO\"><span class=\"kw4\">IO</span></a> YahooSearch<br/>next <span class=\"br0\">(</span>YahooSearch q p <span class=\"sy0\">_</span><span class=\"br0\">)</span> <span class=\"sy0\">=</span><br/>    simpleHTTP <span class=\"br0\">(</span>getRequest <span class=\"sy0\">$</span><br/>    <span class=\"co1\">-- add the page number to the search</span><br/>    yahooUrl <span class=\"sy0\">++</span> q <span class=\"sy0\">++</span> <span class=\"st0\">\"&amp;b=\"</span> <span class=\"sy0\">++</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:show\"><span class=\"kw3\">show</span></a> <span class=\"br0\">(</span>p <span class=\"sy0\">+</span> <span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"sy0\">&gt;&gt;=</span><br/>    getResponseBody <span class=\"sy0\">&gt;&gt;=</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:return\"><span class=\"kw3\">return</span></a> <span class=\"sy0\">.</span> YahooSearch q <span class=\"br0\">(</span>p <span class=\"sy0\">+</span> <span class=\"nu0\">1</span><span class=\"br0\">)</span> <span class=\"sy0\">.</span> items<br/>\u00a0<br/>printResults <span class=\"sy0\">::</span> YahooSearch <span class=\"sy0\">-&gt;</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t:IO\"><span class=\"kw4\">IO</span></a> <span class=\"br0\">(</span><span class=\"br0\">)</span><br/>printResults <span class=\"br0\">(</span>YahooSearch q p items<span class=\"br0\">)</span> <span class=\"sy0\">=</span> <span class=\"kw1\">do</span><br/>    <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:putStrLn\"><span class=\"kw3\">putStrLn</span></a> <span class=\"sy0\">$</span> <span class=\"st0\">\"Showing Yahoo! search results for query: \"</span> <span class=\"sy0\">++</span> q<br/>    <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:putStrLn\"><span class=\"kw3\">putStrLn</span></a> <span class=\"sy0\">$</span> <span class=\"st0\">\"Page: \"</span> <span class=\"sy0\">++</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:show\"><span class=\"kw3\">show</span></a> p<br/>    <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:putChar\"><span class=\"kw3\">putChar</span></a> <span class=\"st0\">'<span class=\"es0\">\\n</span>'</span><br/>    <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:mapM_\"><span class=\"kw3\">mapM_</span></a> printOne items<br/>    <span class=\"kw1\">where</span><br/>        printOne <span class=\"br0\">(</span>YahooSearchItem itemUrl itemTitle itemContent<span class=\"br0\">)</span> <span class=\"sy0\">=</span> <span class=\"kw1\">do</span><br/>            <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:putStrLn\"><span class=\"kw3\">putStrLn</span></a> <span class=\"sy0\">$</span> <span class=\"st0\">\"URL  \u00a0: \"</span> <span class=\"sy0\">++</span> itemUrl<br/>            <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:putStrLn\"><span class=\"kw3\">putStrLn</span></a> <span class=\"sy0\">$</span> <span class=\"st0\">\"Title\u00a0: \"</span> <span class=\"sy0\">++</span> itemTitle<br/>            <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:putStrLn\"><span class=\"kw3\">putStrLn</span></a> <span class=\"sy0\">$</span> <span class=\"st0\">\"Abstr\u00a0: \"</span> <span class=\"sy0\">++</span> itemContent<br/>            <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:putChar\"><span class=\"kw3\">putChar</span></a> <span class=\"st0\">'<span class=\"es0\">\\n</span>'</span><br/>\u00a0<br/>urlTag<span class=\"sy0\">,</span> titleTag<span class=\"sy0\">,</span> contentTag1<span class=\"sy0\">,</span> contentTag2<span class=\"sy0\">,</span> ignoreTag<span class=\"sy0\">,</span><br/>    ignoreText <span class=\"sy0\">::</span> Parsec <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t:String\"><span class=\"kw4\">String</span></a> <span class=\"br0\">(</span><span class=\"br0\">)</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t:String\"><span class=\"kw4\">String</span></a><br/>\u00a0<br/><span class=\"co1\">-- parse a tag containing the URL of a search result</span><br/>urlTag <span class=\"sy0\">=</span> <span class=\"kw1\">do</span> <span class=\"br0\">{</span> string <span class=\"st0\">\"&lt;a id=<span class=\"es0\">\\\"</span>link-\"</span>;<br/>    many digit; string <span class=\"st0\">\"<span class=\"es0\">\\\"</span> class=<span class=\"es0\">\\\"</span>yschttl spt<span class=\"es0\">\\\"</span> href=<span class=\"es0\">\\\"</span>\"</span>;<br/>    url <span class=\"sy0\">&lt;-</span> manyTill anyChar <span class=\"br0\">(</span>char <span class=\"st0\">'\"'</span><span class=\"br0\">)</span>; manyTill anyChar <span class=\"br0\">(</span>char <span class=\"st0\">'&gt;'</span><span class=\"br0\">)</span>;<br/>    <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:return\"><span class=\"kw3\">return</span></a> url <span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"co1\">-- the title comes after the URL tag, so parse it first, discard it</span><br/><span class=\"co1\">-- and get the title text</span><br/>titleTag <span class=\"sy0\">=</span> <span class=\"kw1\">do</span> <span class=\"br0\">{</span> urlTag; manyTill anyChar <span class=\"br0\">(</span>try <span class=\"br0\">(</span>string <span class=\"st0\">\"&lt;/a&gt;\"</span><span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"co1\">-- parse a tag containing the description of the search result</span><br/><span class=\"co1\">-- the tag can be named \"sm-abs\" or \"abstr\"</span><br/>contentTag1 <span class=\"sy0\">=</span> <span class=\"kw1\">do</span> <span class=\"br0\">{</span> string <span class=\"st0\">\"&lt;div class=<span class=\"es0\">\\\"</span>sm-abs<span class=\"es0\">\\\"</span>&gt;\"</span>;<br/>    manyTill anyChar <span class=\"br0\">(</span>try <span class=\"br0\">(</span>string <span class=\"st0\">\"&lt;/div&gt;\"</span><span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"br0\">}</span><br/>\u00a0<br/>contentTag2 <span class=\"sy0\">=</span> <span class=\"kw1\">do</span> <span class=\"br0\">{</span> string <span class=\"st0\">\"&lt;div class=<span class=\"es0\">\\\"</span>abstr<span class=\"es0\">\\\"</span>&gt;\"</span>;<br/>    manyTill anyChar <span class=\"br0\">(</span>try <span class=\"br0\">(</span>string <span class=\"st0\">\"&lt;/div&gt;\"</span><span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"co1\">-- parse a tag and discard it</span><br/>ignoreTag <span class=\"sy0\">=</span> <span class=\"kw1\">do</span> <span class=\"br0\">{</span> char <span class=\"br0\">(</span><span class=\"st0\">'&lt;'</span><span class=\"br0\">)</span>; manyTill anyChar <span class=\"br0\">(</span>char <span class=\"st0\">'&gt;'</span><span class=\"br0\">)</span>;<br/>    <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:return\"><span class=\"kw3\">return</span></a> <span class=\"st0\">\"\"</span> <span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"co1\">-- parse some text and discard it</span><br/>ignoreText <span class=\"sy0\">=</span> <span class=\"kw1\">do</span> <span class=\"br0\">{</span> many1 <span class=\"br0\">(</span>noneOf <span class=\"st0\">\"&lt;\"</span><span class=\"br0\">)</span>; <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:return\"><span class=\"kw3\">return</span></a> <span class=\"st0\">\"\"</span> <span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"co1\">-- return only non-empty strings</span><br/>nonempty <span class=\"sy0\">::</span> <span class=\"br0\">[</span><a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t:String\"><span class=\"kw4\">String</span></a><span class=\"br0\">]</span> <span class=\"sy0\">-&gt;</span> Parsec <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t:String\"><span class=\"kw4\">String</span></a> <span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"br0\">[</span><a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t:String\"><span class=\"kw4\">String</span></a><span class=\"br0\">]</span><br/>nonempty xs <span class=\"sy0\">=</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:return\"><span class=\"kw3\">return</span></a> <span class=\"br0\">[</span> x <span class=\"sy0\">|</span> x <span class=\"sy0\">&lt;-</span> xs<span class=\"sy0\">,</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:not\"><span class=\"kw3\">not</span></a> <span class=\"br0\">(</span><a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:null\"><span class=\"kw3\">null</span></a> x<span class=\"br0\">)</span> <span class=\"br0\">]</span><br/>\u00a0<br/><span class=\"co1\">-- a template to parse a whole source file looking for items of the</span><br/><span class=\"co1\">-- same class</span><br/>parseCategory x <span class=\"sy0\">=</span> <span class=\"kw1\">do</span><br/>    res <span class=\"sy0\">&lt;-</span> many x<br/>    eof<br/>    nonempty res<br/>\u00a0<br/>urls<span class=\"sy0\">,</span> titles<span class=\"sy0\">,</span> contents <span class=\"sy0\">::</span> Parsec <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t:String\"><span class=\"kw4\">String</span></a> <span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"br0\">[</span><a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t:String\"><span class=\"kw4\">String</span></a><span class=\"br0\">]</span><br/>\u00a0<br/><span class=\"co1\">-- parse HTML source looking for URL tags of the search results</span><br/>urls <span class=\"sy0\">=</span> parseCategory url <span class=\"kw1\">where</span><br/>    url <span class=\"sy0\">=</span> <span class=\"br0\">(</span>try urlTag<span class=\"br0\">)</span> <span class=\"sy0\">&lt;|&gt;</span> ignoreTag <span class=\"sy0\">&lt;|&gt;</span> ignoreText<br/>\u00a0<br/><span class=\"co1\">-- parse HTML source looking for titles of the search results</span><br/>titles <span class=\"sy0\">=</span> parseCategory title <span class=\"kw1\">where</span><br/>    title <span class=\"sy0\">=</span> <span class=\"br0\">(</span>try titleTag<span class=\"br0\">)</span> <span class=\"sy0\">&lt;|&gt;</span> ignoreTag <span class=\"sy0\">&lt;|&gt;</span> ignoreText<br/>\u00a0<br/><span class=\"co1\">-- parse HTML source looking for descriptions of the search results</span><br/>contents <span class=\"sy0\">=</span> parseCategory content <span class=\"kw1\">where</span><br/>    content <span class=\"sy0\">=</span> <span class=\"br0\">(</span>try contentTag1<span class=\"br0\">)</span> <span class=\"sy0\">&lt;|&gt;</span> <span class=\"br0\">(</span>try contentTag2<span class=\"br0\">)</span> <span class=\"sy0\">&lt;|&gt;</span><br/>        ignoreTag <span class=\"sy0\">&lt;|&gt;</span> ignoreText<br/>\u00a0<br/><span class=\"co1\">-- parse the HTML source three times looking for URL, title and</span><br/><span class=\"co1\">-- description of all search results and return them as a list of</span><br/><span class=\"co1\">-- YahooSearchItem</span><br/>items <span class=\"sy0\">::</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t:String\"><span class=\"kw4\">String</span></a> <span class=\"sy0\">-&gt;</span> <span class=\"br0\">[</span>YahooSearchItem<span class=\"br0\">]</span><br/>items q <span class=\"sy0\">=</span><br/>    <span class=\"kw1\">let</span> ignoreOrKeep <span class=\"sy0\">=</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:either\"><span class=\"kw3\">either</span></a> <span class=\"br0\">(</span><a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:const\"><span class=\"kw3\">const</span></a> <span class=\"br0\">[</span><span class=\"br0\">]</span><span class=\"br0\">)</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:id\"><span class=\"kw3\">id</span></a><br/>        us <span class=\"sy0\">=</span> ignoreOrKeep <span class=\"sy0\">$</span> parse urls <span class=\"st0\">\"\"</span> q<br/>        ts <span class=\"sy0\">=</span> ignoreOrKeep <span class=\"sy0\">$</span> parse titles <span class=\"st0\">\"\"</span> q<br/>        cs <span class=\"sy0\">=</span> ignoreOrKeep <span class=\"sy0\">$</span> parse contents <span class=\"st0\">\"\"</span> q<br/>    <span class=\"kw1\">in</span> <span class=\"br0\">[</span> YahooSearchItem <span class=\"br0\">{</span> itemUrl <span class=\"sy0\">=</span> u<span class=\"sy0\">,</span> itemTitle <span class=\"sy0\">=</span> t<span class=\"sy0\">,</span> itemContent <span class=\"sy0\">=</span> c <span class=\"br0\">}</span> <span class=\"sy0\">|</span><br/>        <span class=\"br0\">(</span>u<span class=\"sy0\">,</span> t<span class=\"sy0\">,</span> c<span class=\"br0\">)</span> <span class=\"sy0\">&lt;-</span> <a href=\"http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:zip3\"><span class=\"kw3\">zip3</span></a> us ts cs <span class=\"br0\">]</span><br/>\u00a0</pre>"}, {"lang": "Icon and Unicon", "loc": 43, "block": "<pre class=\"icon highlighted_source\"><span class=\"kw1\">link</span> printf<span class=\"sy1\">,</span>strings<br/>\u00a0<br/><span class=\"kw1\">procedure</span> main<span class=\"br0\">(</span><span class=\"br0\">)</span> <br/>YS <span class=\"sy1\">:=</span> YahooSearch<span class=\"br0\">(</span><span class=\"st0\">\"rosettacode\"</span><span class=\"br0\">)</span><br/><span class=\"kw1\">every</span> <span class=\"nu0\">1</span> <span class=\"kw1\">to</span> <span class=\"nu0\">2</span> <span class=\"kw1\">do</span> <span class=\"br0\">{</span>   <span class=\"co1\"># 2 pages</span><br/>   YS<span class=\"sy1\">.</span><span class=\"me1\">readnext</span><span class=\"br0\">(</span><span class=\"br0\">)</span><br/>   YS<span class=\"sy1\">.</span><span class=\"me1\">showinfo</span><span class=\"br0\">(</span><span class=\"br0\">)</span><br/>   <span class=\"br0\">}</span><br/><span class=\"kw1\">end</span><br/>\u00a0<br/>class YahooSearch<span class=\"br0\">(</span>urlpat<span class=\"sy1\">,</span>page<span class=\"sy1\">,</span>response<span class=\"br0\">)</span>  <span class=\"co1\">#: class for Yahoo Search</span><br/>\u00a0<br/>   method readnext<span class=\"br0\">(</span><span class=\"br0\">)</span>    <span class=\"co1\">#: read the next page of search results</span><br/>      self<span class=\"sy1\">.</span><span class=\"me1\">page</span> <span class=\"sy1\">+:=</span> <span class=\"nu0\">1</span>   <span class=\"co1\"># can't find as w|w/o self </span><br/>      readurl<span class=\"br0\">(</span><span class=\"br0\">)</span><br/>   <span class=\"kw1\">end</span><br/>\u00a0<br/>   method readurl<span class=\"br0\">(</span><span class=\"br0\">)</span>     <span class=\"co1\">#: read the url </span><br/>      url <span class=\"sy1\">:=</span> sprintf<span class=\"br0\">(</span>self<span class=\"sy1\">.</span><span class=\"me1\">urlpat</span><span class=\"sy1\">,</span><span class=\"br0\">(</span>self<span class=\"sy1\">.</span><span class=\"me1\">page</span><span class=\"sy1\">-</span><span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"sy1\">*</span><span class=\"nu0\">10</span><span class=\"sy1\">+</span><span class=\"nu0\">1</span><span class=\"br0\">)</span><br/>      m <span class=\"sy1\">:=</span> <span class=\"kw4\">open</span><span class=\"br0\">(</span>url<span class=\"sy1\">,</span><span class=\"st0\">\"m\"</span><span class=\"br0\">)</span>  <span class=\"sy1\">|</span> <span class=\"kw4\">stop</span><span class=\"br0\">(</span><span class=\"st0\">\"Unable to open\u00a0: \"</span><span class=\"sy1\">,</span>url<span class=\"br0\">)</span><br/>      <span class=\"kw1\">every</span> <span class=\"br0\">(</span>self<span class=\"sy1\">.</span><span class=\"me1\">response</span> <span class=\"sy1\">:=</span> <span class=\"st0\">\"\"</span><span class=\"br0\">)</span> <span class=\"sy1\">||:=</span> <span class=\"sy1\">|</span><span class=\"kw4\">read</span><span class=\"br0\">(</span>m<span class=\"br0\">)</span><br/>      <span class=\"kw4\">close</span><span class=\"br0\">(</span>m<span class=\"br0\">)</span><br/>      self<span class=\"sy1\">.</span><span class=\"me1\">response</span> <span class=\"sy1\">:=</span> deletec<span class=\"br0\">(</span>self<span class=\"sy1\">.</span><span class=\"me1\">response</span><span class=\"sy1\">,</span><span class=\"st0\">\"<span class=\"es0\">\\x</span>00\"</span><span class=\"br0\">)</span> <span class=\"co1\"># kill stray NULs</span><br/>   <span class=\"kw1\">end</span><br/>\u00a0<br/>   method showinfo<span class=\"br0\">(</span><span class=\"br0\">)</span>    <span class=\"co1\">#: show the info of interest</span><br/>      self<span class=\"sy1\">.</span><span class=\"me1\">response</span> <span class=\"sy1\">?</span> <span class=\"kw1\">repeat</span> <span class=\"br0\">{</span><br/>         <span class=\"br0\">(</span><span class=\"kw4\">tab</span><span class=\"br0\">(</span><span class=\"kw4\">find</span><span class=\"br0\">(</span><span class=\"st0\">\"&lt;\"</span><span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"sy1\">&amp;</span> <span class=\"sy1\">=</span><span class=\"st0\">\"&lt;a class=<span class=\"es0\">\\\"</span>yschttl spt<span class=\"es0\">\\\"</span> href=<span class=\"es0\">\\\"</span>\"</span><span class=\"br0\">)</span> <span class=\"sy1\">|</span> <span class=\"kw1\">break</span><br/>         url   <span class=\"sy1\">:=</span> <span class=\"kw4\">tab</span><span class=\"br0\">(</span><span class=\"kw4\">find</span><span class=\"br0\">(</span><span class=\"st0\">\"<span class=\"es0\">\\\"</span>\"</span><span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"sy1\">&amp;</span> <span class=\"kw4\">tab</span><span class=\"br0\">(</span><span class=\"kw4\">find</span><span class=\"br0\">(</span><span class=\"st0\">\"&gt;\"</span><span class=\"br0\">)</span><span class=\"sy1\">+</span><span class=\"nu0\">1</span><span class=\"br0\">)</span><br/>         title <span class=\"sy1\">:=</span> <span class=\"kw4\">tab</span><span class=\"br0\">(</span><span class=\"kw4\">find</span><span class=\"br0\">(</span><span class=\"st0\">\"&lt;\"</span><span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"sy1\">&amp;</span> <span class=\"sy1\">=</span><span class=\"st0\">\"&lt;/a&gt;&lt;/h3&gt;&lt;/div&gt;\"</span><br/>         <span class=\"kw4\">tab</span><span class=\"br0\">(</span><span class=\"kw4\">find</span><span class=\"br0\">(</span><span class=\"st0\">\"&lt;\"</span><span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"sy1\">&amp;</span> <span class=\"sy1\">=</span><span class=\"br0\">(</span><span class=\"st0\">\"&lt;div class=<span class=\"es0\">\\\"</span>abstr<span class=\"es0\">\\\"</span>&gt;\"</span> <span class=\"sy1\">|</span> <span class=\"st0\">\"&lt;div class=<span class=\"es0\">\\\"</span>sm-abs<span class=\"es0\">\\\"</span>&gt;\"</span><span class=\"br0\">)</span><br/>         abstr <span class=\"sy1\">:=</span> <span class=\"kw4\">tab</span><span class=\"br0\">(</span><span class=\"kw4\">find</span><span class=\"br0\">(</span><span class=\"st0\">\"&lt;\"</span><span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"sy1\">&amp;</span> <span class=\"sy1\">=</span><span class=\"st0\">\"&lt;/div&gt;\"</span><br/>\u00a0<br/>         printf<span class=\"br0\">(</span><span class=\"st0\">\"<span class=\"es0\">\\n</span>Title\u00a0:\u00a0%i<span class=\"es0\">\\n</span>\"</span><span class=\"sy1\">,</span>title<span class=\"br0\">)</span><br/>         printf<span class=\"br0\">(</span><span class=\"st0\">\"URL  \u00a0:\u00a0%i<span class=\"es0\">\\n</span>\"</span><span class=\"sy1\">,</span>url<span class=\"br0\">)</span><br/>         printf<span class=\"br0\">(</span><span class=\"st0\">\"Abstr\u00a0:\u00a0%i<span class=\"es0\">\\n</span>\"</span><span class=\"sy1\">,</span>abstr<span class=\"br0\">)</span><br/>         <span class=\"br0\">}</span><br/>   <span class=\"kw1\">end</span><br/>\u00a0<br/><span class=\"kw1\">initially</span><span class=\"br0\">(</span>searchtext<span class=\"br0\">)</span>    <span class=\"co1\">#: initialize each instance</span><br/>   urlpat <span class=\"sy1\">:=</span> sprintf<span class=\"br0\">(</span><span class=\"st0\">\"http://search.yahoo.com/search?p=%s&amp;b=%%d\"</span><span class=\"sy1\">,</span>searchtext<span class=\"br0\">)</span><br/>   page <span class=\"sy1\">:=</span> <span class=\"nu0\">0</span><br/><span class=\"kw1\">end</span></pre>"}, {"lang": "Java", "loc": 157, "block": "<pre class=\"java highlighted_source\"><span class=\"kw1\">import</span> <span class=\"co2\">java.io.BufferedReader</span><span class=\"sy0\">;</span><br/><span class=\"kw1\">import</span> <span class=\"co2\">java.io.IOException</span><span class=\"sy0\">;</span><br/><span class=\"kw1\">import</span> <span class=\"co2\">java.io.InputStreamReader</span><span class=\"sy0\">;</span><br/><span class=\"kw1\">import</span> <span class=\"co2\">java.net.MalformedURLException</span><span class=\"sy0\">;</span><br/><span class=\"kw1\">import</span> <span class=\"co2\">java.net.URISyntaxException</span><span class=\"sy0\">;</span><br/><span class=\"kw1\">import</span> <span class=\"co2\">java.net.URL</span><span class=\"sy0\">;</span><br/><span class=\"kw1\">import</span> <span class=\"co2\">java.net.URLDecoder</span><span class=\"sy0\">;</span><br/><span class=\"kw1\">import</span> <span class=\"co2\">java.net.URLEncoder</span><span class=\"sy0\">;</span><br/><span class=\"kw1\">import</span> <span class=\"co2\">java.util.ArrayList</span><span class=\"sy0\">;</span><br/><span class=\"kw1\">import</span> <span class=\"co2\">java.util.List</span><span class=\"sy0\">;</span><br/><span class=\"kw1\">import</span> <span class=\"co2\">java.util.regex.Matcher</span><span class=\"sy0\">;</span><br/><span class=\"kw1\">import</span> <span class=\"co2\">java.util.regex.Pattern</span><span class=\"sy0\">;</span><br/>\u00a0<br/><span class=\"kw1\">class</span> YahooSearch <span class=\"br0\">{</span><br/>    <span class=\"kw1\">private</span> <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Astring+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">String</span></a> query<span class=\"sy0\">;</span><br/>    <span class=\"co1\">// Page number</span><br/>    <span class=\"kw1\">private</span> <span class=\"kw4\">int</span> page <span class=\"sy0\">=</span> <span class=\"nu0\">1</span><span class=\"sy0\">;</span><br/>    <span class=\"co1\">// Regexp to look for the individual results in the returned page</span><br/>    <span class=\"kw1\">private</span> <span class=\"kw1\">static</span> <span class=\"kw1\">final</span> Pattern pattern <span class=\"sy0\">=</span> Pattern.<span class=\"me1\">compile</span><span class=\"br0\">(</span><br/>        <span class=\"st0\">\"&lt;a class=<span class=\"es0\">\\\"</span>yschttl spt<span class=\"es0\">\\\"</span> href=<span class=\"es0\">\\\"</span>[^*]+?<span class=\"es0\">\\\\</span>*<span class=\"es0\">\\\\</span>*([^<span class=\"es0\">\\\"</span>]+?)<span class=\"es0\">\\\"</span>&gt;(.+?)&lt;/a&gt;&lt;/h3&gt;.*?&lt;div class=<span class=\"es0\">\\\"</span>(?:sm-abs|abstr)<span class=\"es0\">\\\"</span>&gt;(.+?)&lt;/div&gt;\"</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>\u00a0<br/>    <span class=\"kw1\">public</span> YahooSearch<span class=\"br0\">(</span><a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Astring+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">String</span></a> query<span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>        <span class=\"kw1\">this</span>.<span class=\"me1\">query</span> <span class=\"sy0\">=</span> query<span class=\"sy0\">;</span><br/>    <span class=\"br0\">}</span><br/>\u00a0<br/>    <span class=\"kw1\">public</span> List<span class=\"sy0\">&lt;</span>YahooResult<span class=\"sy0\">&gt;</span> search<span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"kw1\">throws</span> <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Amalformedurlexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">MalformedURLException</span></a>, URISyntaxException, <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Aioexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">IOException</span></a> <span class=\"br0\">{</span><br/>        <span class=\"co1\">// Build the search string, starting with the Yahoo search URL,</span><br/>        <span class=\"co1\">// then appending the query and optionally the page number (if &gt; 1)</span><br/>        StringBuilder searchUrl <span class=\"sy0\">=</span> <span class=\"kw1\">new</span> StringBuilder<span class=\"br0\">(</span><span class=\"st0\">\"http://search.yahoo.com/search?\"</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        searchUrl.<span class=\"me1\">append</span><span class=\"br0\">(</span><span class=\"st0\">\"p=\"</span><span class=\"br0\">)</span>.<span class=\"me1\">append</span><span class=\"br0\">(</span><a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Aurlencoder+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">URLEncoder</span></a>.<span class=\"me1\">encode</span><span class=\"br0\">(</span>query, <span class=\"st0\">\"UTF-8\"</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        <span class=\"kw1\">if</span> <span class=\"br0\">(</span>page <span class=\"sy0\">&gt;</span> <span class=\"nu0\">1</span><span class=\"br0\">)</span> <span class=\"br0\">{</span>searchUrl.<span class=\"me1\">append</span><span class=\"br0\">(</span><span class=\"st0\">\"&amp;b=\"</span><span class=\"br0\">)</span>.<span class=\"me1\">append</span><span class=\"br0\">(</span><span class=\"br0\">(</span>page <span class=\"sy0\">-</span> <span class=\"nu0\">1</span><span class=\"br0\">)</span> <span class=\"sy0\">*</span> <span class=\"nu0\">10</span> <span class=\"sy0\">+</span> <span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><span class=\"br0\">}</span><br/>        <span class=\"co1\">// Query the Yahoo search engine</span><br/>        <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Aurl+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">URL</span></a> url <span class=\"sy0\">=</span> <span class=\"kw1\">new</span> <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Aurl+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">URL</span></a><span class=\"br0\">(</span>searchUrl.<span class=\"me1\">toString</span><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        List<span class=\"sy0\">&lt;</span>YahooResult<span class=\"sy0\">&gt;</span> result <span class=\"sy0\">=</span> <span class=\"kw1\">new</span> ArrayList<span class=\"sy0\">&lt;</span>YahooResult<span class=\"sy0\">&gt;</span><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        StringBuilder sb <span class=\"sy0\">=</span> <span class=\"kw1\">new</span> StringBuilder<span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        <span class=\"co1\">// Get the search results using a buffered reader</span><br/>        <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Abufferedreader+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">BufferedReader</span></a> in <span class=\"sy0\">=</span> <span class=\"kw2\">null</span><span class=\"sy0\">;</span><br/>        <span class=\"kw1\">try</span> <span class=\"br0\">{</span><br/>            in <span class=\"sy0\">=</span> <span class=\"kw1\">new</span> <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Abufferedreader+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">BufferedReader</span></a><span class=\"br0\">(</span><span class=\"kw1\">new</span> <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Ainputstreamreader+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">InputStreamReader</span></a><span class=\"br0\">(</span>url.<span class=\"me1\">openStream</span><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>            <span class=\"co1\">// Read the results line by line</span><br/>            <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Astring+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">String</span></a> line <span class=\"sy0\">=</span> in.<span class=\"me1\">readLine</span><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>            <span class=\"kw1\">while</span> <span class=\"br0\">(</span>line <span class=\"sy0\">!=</span> <span class=\"kw2\">null</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>                sb.<span class=\"me1\">append</span><span class=\"br0\">(</span>line<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>                line <span class=\"sy0\">=</span> in.<span class=\"me1\">readLine</span><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>            <span class=\"br0\">}</span><br/>        <span class=\"br0\">}</span><br/>        <span class=\"kw1\">catch</span> <span class=\"br0\">(</span><a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Aioexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">IOException</span></a> ioe<span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>            ioe.<span class=\"me1\">printStackTrace</span><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        <span class=\"br0\">}</span><br/>        <span class=\"kw1\">finally</span> <span class=\"br0\">{</span><br/>            <span class=\"kw1\">try</span> <span class=\"br0\">{</span>in.<span class=\"me1\">close</span><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><span class=\"br0\">}</span> <span class=\"kw1\">catch</span> <span class=\"br0\">(</span><a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Aexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">Exception</span></a> ignoreMe<span class=\"br0\">)</span> <span class=\"br0\">{</span><span class=\"br0\">}</span><br/>        <span class=\"br0\">}</span><br/>        <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Astring+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">String</span></a> searchResult <span class=\"sy0\">=</span> sb.<span class=\"me1\">toString</span><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        <span class=\"co1\">// Look for the individual results by matching the regexp pattern</span><br/>        Matcher matcher <span class=\"sy0\">=</span> pattern.<span class=\"me1\">matcher</span><span class=\"br0\">(</span>searchResult<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        <span class=\"kw1\">while</span> <span class=\"br0\">(</span>matcher.<span class=\"me1\">find</span><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>            <span class=\"co1\">// Extract the result URL, title and excerpt</span><br/>            <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Astring+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">String</span></a> resultUrl <span class=\"sy0\">=</span> <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Aurldecoder+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">URLDecoder</span></a>.<span class=\"me1\">decode</span><span class=\"br0\">(</span>matcher.<span class=\"me1\">group</span><span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"br0\">)</span>, <span class=\"st0\">\"UTF-8\"</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>            <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Astring+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">String</span></a> resultTitle <span class=\"sy0\">=</span> matcher.<span class=\"me1\">group</span><span class=\"br0\">(</span><span class=\"nu0\">2</span><span class=\"br0\">)</span>.<span class=\"me1\">replaceAll</span><span class=\"br0\">(</span><span class=\"st0\">\"&lt;/?b&gt;\"</span>, <span class=\"st0\">\"\"</span><span class=\"br0\">)</span>.<span class=\"me1\">replaceAll</span><span class=\"br0\">(</span><span class=\"st0\">\"&lt;wbr\u00a0?/?&gt;\"</span>, <span class=\"st0\">\"\"</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>            <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Astring+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">String</span></a> resultContent <span class=\"sy0\">=</span> matcher.<span class=\"me1\">group</span><span class=\"br0\">(</span><span class=\"nu0\">3</span><span class=\"br0\">)</span>.<span class=\"me1\">replaceAll</span><span class=\"br0\">(</span><span class=\"st0\">\"&lt;/?b&gt;\"</span>, <span class=\"st0\">\"\"</span><span class=\"br0\">)</span>.<span class=\"me1\">replaceAll</span><span class=\"br0\">(</span><span class=\"st0\">\"&lt;wbr\u00a0?/?&gt;\"</span>, <span class=\"st0\">\"\"</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>            <span class=\"co1\">// Create a new YahooResult and add to the list</span><br/>            result.<span class=\"me1\">add</span><span class=\"br0\">(</span><span class=\"kw1\">new</span> YahooResult<span class=\"br0\">(</span>resultUrl, resultTitle, resultContent<span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        <span class=\"br0\">}</span><br/>        <span class=\"kw1\">return</span> result<span class=\"sy0\">;</span><br/>    <span class=\"br0\">}</span><br/>\u00a0<br/>    <span class=\"kw1\">public</span> List<span class=\"sy0\">&lt;</span>YahooResult<span class=\"sy0\">&gt;</span> search<span class=\"br0\">(</span><span class=\"kw4\">int</span> page<span class=\"br0\">)</span> <span class=\"kw1\">throws</span> <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Amalformedurlexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">MalformedURLException</span></a>, URISyntaxException, <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Aioexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">IOException</span></a> <span class=\"br0\">{</span><br/>        <span class=\"co1\">// Set the page number and search</span><br/>        <span class=\"kw1\">this</span>.<span class=\"me1\">page</span> <span class=\"sy0\">=</span> page<span class=\"sy0\">;</span><br/>        <span class=\"kw1\">return</span> search<span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>    <span class=\"br0\">}</span><br/>\u00a0<br/>    <span class=\"kw1\">public</span> List<span class=\"sy0\">&lt;</span>YahooResult<span class=\"sy0\">&gt;</span> nextPage<span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"kw1\">throws</span> <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Amalformedurlexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">MalformedURLException</span></a>, URISyntaxException, <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Aioexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">IOException</span></a> <span class=\"br0\">{</span><br/>        <span class=\"co1\">// Increment the page number and search</span><br/>        page<span class=\"sy0\">++;</span><br/>        <span class=\"kw1\">return</span> search<span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>    <span class=\"br0\">}</span><br/>\u00a0<br/>    <span class=\"kw1\">public</span> List<span class=\"sy0\">&lt;</span>YahooResult<span class=\"sy0\">&gt;</span> previousPage<span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"kw1\">throws</span> <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Amalformedurlexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">MalformedURLException</span></a>, URISyntaxException, <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Aioexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">IOException</span></a> <span class=\"br0\">{</span><br/>        <span class=\"co1\">// Decrement the page number and search; if the page number is 1 return an empty list</span><br/>        <span class=\"kw1\">if</span> <span class=\"br0\">(</span>page <span class=\"sy0\">&gt;</span> <span class=\"nu0\">1</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>            page<span class=\"sy0\">--;</span><br/>            <span class=\"kw1\">return</span> search<span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        <span class=\"br0\">}</span> <span class=\"kw1\">else</span> <span class=\"kw1\">return</span> <span class=\"kw1\">new</span> ArrayList<span class=\"sy0\">&lt;</span>YahooResult<span class=\"sy0\">&gt;</span><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>    <span class=\"br0\">}</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"kw1\">class</span> YahooResult <span class=\"br0\">{</span><br/>    <span class=\"kw1\">private</span> <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Aurl+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">URL</span></a> url<span class=\"sy0\">;</span><br/>    <span class=\"kw1\">private</span> <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Astring+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">String</span></a> title<span class=\"sy0\">;</span><br/>    <span class=\"kw1\">private</span> <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Astring+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">String</span></a> content<span class=\"sy0\">;</span><br/>\u00a0<br/>    <span class=\"kw1\">public</span> <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Aurl+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">URL</span></a> getUrl<span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>        <span class=\"kw1\">return</span> url<span class=\"sy0\">;</span><br/>    <span class=\"br0\">}</span><br/>\u00a0<br/>    <span class=\"kw1\">public</span> <span class=\"kw4\">void</span> setUrl<span class=\"br0\">(</span><a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Aurl+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">URL</span></a> url<span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>        <span class=\"kw1\">this</span>.<span class=\"me1\">url</span> <span class=\"sy0\">=</span> url<span class=\"sy0\">;</span><br/>    <span class=\"br0\">}</span><br/>\u00a0<br/>    <span class=\"kw1\">public</span> <span class=\"kw4\">void</span> setUrl<span class=\"br0\">(</span><a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Astring+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">String</span></a> url<span class=\"br0\">)</span> <span class=\"kw1\">throws</span> <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Amalformedurlexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">MalformedURLException</span></a> <span class=\"br0\">{</span><br/>        <span class=\"kw1\">this</span>.<span class=\"me1\">url</span> <span class=\"sy0\">=</span> <span class=\"kw1\">new</span> <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Aurl+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">URL</span></a><span class=\"br0\">(</span>url<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>    <span class=\"br0\">}</span><br/>\u00a0<br/>    <span class=\"kw1\">public</span> <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Astring+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">String</span></a> getTitle<span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>        <span class=\"kw1\">return</span> title<span class=\"sy0\">;</span><br/>    <span class=\"br0\">}</span><br/>\u00a0<br/>    <span class=\"kw1\">public</span> <span class=\"kw4\">void</span> setTitle<span class=\"br0\">(</span><a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Astring+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">String</span></a> title<span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>        <span class=\"kw1\">this</span>.<span class=\"me1\">title</span> <span class=\"sy0\">=</span> title<span class=\"sy0\">;</span><br/>    <span class=\"br0\">}</span><br/>\u00a0<br/>    <span class=\"kw1\">public</span> <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Astring+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">String</span></a> getContent<span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>        <span class=\"kw1\">return</span> content<span class=\"sy0\">;</span><br/>    <span class=\"br0\">}</span><br/>\u00a0<br/>    <span class=\"kw1\">public</span> <span class=\"kw4\">void</span> setContent<span class=\"br0\">(</span><a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Astring+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">String</span></a> content<span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>        <span class=\"kw1\">this</span>.<span class=\"me1\">content</span> <span class=\"sy0\">=</span> content<span class=\"sy0\">;</span><br/>    <span class=\"br0\">}</span><br/>\u00a0<br/>    <span class=\"kw1\">public</span> YahooResult<span class=\"br0\">(</span><a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Aurl+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">URL</span></a> url, <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Astring+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">String</span></a> title, <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Astring+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">String</span></a> content<span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>        setUrl<span class=\"br0\">(</span>url<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        setTitle<span class=\"br0\">(</span>title<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        setContent<span class=\"br0\">(</span>content<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>    <span class=\"br0\">}</span><br/>\u00a0<br/>    <span class=\"kw1\">public</span> YahooResult<span class=\"br0\">(</span><a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Astring+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">String</span></a> url, <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Astring+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">String</span></a> title, <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Astring+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">String</span></a> content<span class=\"br0\">)</span> <span class=\"kw1\">throws</span> <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Amalformedurlexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">MalformedURLException</span></a> <span class=\"br0\">{</span><br/>        setUrl<span class=\"br0\">(</span>url<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        setTitle<span class=\"br0\">(</span>title<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        setContent<span class=\"br0\">(</span>content<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>    <span class=\"br0\">}</span><br/>\u00a0<br/>    @Override<br/>    <span class=\"kw1\">public</span> <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Astring+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">String</span></a> toString<span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>        StringBuilder sb <span class=\"sy0\">=</span> <span class=\"kw1\">new</span> StringBuilder<span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        <span class=\"kw1\">if</span> <span class=\"br0\">(</span>title <span class=\"sy0\">!=</span> <span class=\"kw2\">null</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>            sb.<span class=\"me1\">append</span><span class=\"br0\">(</span><span class=\"st0\">\",title=\"</span><span class=\"br0\">)</span>.<span class=\"me1\">append</span><span class=\"br0\">(</span>title<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        <span class=\"br0\">}</span><br/>        <span class=\"kw1\">if</span> <span class=\"br0\">(</span>url <span class=\"sy0\">!=</span> <span class=\"kw2\">null</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>            sb.<span class=\"me1\">append</span><span class=\"br0\">(</span><span class=\"st0\">\",url=\"</span><span class=\"br0\">)</span>.<span class=\"me1\">append</span><span class=\"br0\">(</span>url<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        <span class=\"br0\">}</span><br/>        <span class=\"kw1\">return</span> sb.<span class=\"me1\">charAt</span><span class=\"br0\">(</span><span class=\"nu0\">0</span><span class=\"br0\">)</span> <span class=\"sy0\">==</span> <span class=\"st0\">','</span> <span class=\"sy0\">?</span> sb.<span class=\"me1\">substring</span><span class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"br0\">)</span> <span class=\"sy0\">:</span> sb.<span class=\"me1\">toString</span><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>    <span class=\"br0\">}</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"kw1\">public</span> <span class=\"kw1\">class</span> TestYahooSearch <span class=\"br0\">{</span><br/>    <span class=\"kw1\">public</span> <span class=\"kw1\">static</span> <span class=\"kw4\">void</span> main<span class=\"br0\">(</span><a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Astring+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">String</span></a><span class=\"br0\">[</span><span class=\"br0\">]</span> args<span class=\"br0\">)</span> <span class=\"kw1\">throws</span> <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Amalformedurlexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">MalformedURLException</span></a>, URISyntaxException, <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Aioexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">IOException</span></a> <span class=\"br0\">{</span><br/>        <span class=\"co1\">// Create a new search</span><br/>        YahooSearch search <span class=\"sy0\">=</span> <span class=\"kw1\">new</span> YahooSearch<span class=\"br0\">(</span><span class=\"st0\">\"Rosetta code\"</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        <span class=\"co1\">// Get the search results</span><br/>        List<span class=\"sy0\">&lt;</span>YahooResult<span class=\"sy0\">&gt;</span> results <span class=\"sy0\">=</span> search.<span class=\"me1\">search</span><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        <span class=\"co1\">// Show the search results</span><br/>        <span class=\"kw1\">for</span> <span class=\"br0\">(</span>YahooResult result <span class=\"sy0\">:</span> results<span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>            <a href=\"http://www.google.com/search?hl=en&amp;q=allinurl%3Asystem+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span class=\"kw3\">System</span></a>.<span class=\"me1\">out</span>.<span class=\"me1\">println</span><span class=\"br0\">(</span>result.<span class=\"me1\">toString</span><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>        <span class=\"br0\">}</span><br/>    <span class=\"br0\">}</span><br/><span class=\"br0\">}</span></pre>"}, {"lang": "Kotlin", "loc": 45, "block": "<pre class=\"scala highlighted_source\"><span class=\"co1\">// version 1.2.0</span><br/>\u00a0<br/><a href=\"http://scala-lang.org\"><span class=\"kw1\">import</span></a> java.<span class=\"me1\">net</span>.<span class=\"me1\">URL</span><br/>\u00a0<br/><a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> rx <span class=\"sy0\">=</span> Regex<span class=\"br0\">(</span><span class=\"st0\">\"\"</span><span class=\"st0\">\"&lt;div class=<span class=\"es1\">\\\"</span>yst result<span class=\"es1\">\\\"</span>&gt;.+?&lt;a href=<span class=\"es1\">\\\"</span>(.*?)<span class=\"es1\">\\\"</span> class=<span class=\"es1\">\\\"</span><span class=\"es1\">\\\"</span>&gt;(.*?)&lt;/a&gt;.+?class=\"</span><a href=\"http://scala-lang.org\"><span class=\"kw1\">abstract</span></a> ellipsis<span class=\"st0\">\"&gt;(.*?)&lt;/p&gt;\"</span><span class=\"st0\">\"\"</span><span class=\"br0\">)</span><br/>\u00a0<br/><a href=\"http://scala-lang.org\"><span class=\"kw1\">class</span></a> YahooResult<span class=\"br0\">(</span><a href=\"http://scala-lang.org\"><span class=\"kw1\">var</span></a> title<span class=\"sy0\">:</span> String, <a href=\"http://scala-lang.org\"><span class=\"kw1\">var</span></a> link<span class=\"sy0\">:</span> String, <a href=\"http://scala-lang.org\"><span class=\"kw1\">var</span></a> text<span class=\"sy0\">:</span> String<span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>\u00a0<br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">override</span></a> fun toString<span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"sy0\">=</span> <span class=\"st0\">\"<span class=\"es1\">\\n</span>Title: $title<span class=\"es1\">\\n</span>Link\u00a0: $link<span class=\"es1\">\\n</span>Text\u00a0: $text\"</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><a href=\"http://scala-lang.org\"><span class=\"kw1\">class</span></a> YahooSearch<span class=\"br0\">(</span><a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> query<span class=\"sy0\">:</span> String, <a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> page<span class=\"sy0\">:</span> Int <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>\u00a0<br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">private</span></a> <a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> content<span class=\"sy0\">:</span> String<br/>\u00a0<br/>    init <span class=\"br0\">{</span><br/>        <a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> yahoo <span class=\"sy0\">=</span> <span class=\"st0\">\"http://search.yahoo.com/search?\"</span><br/>        <a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> url <span class=\"sy0\">=</span> URL<span class=\"br0\">(</span><span class=\"st0\">\"${yahoo}p=$query&amp;b=${page * 10 + 1}\"</span><span class=\"br0\">)</span><br/>        content <span class=\"sy0\">=</span> url.<span class=\"me1\">readText</span><span class=\"br0\">(</span><span class=\"br0\">)</span><br/>    <span class=\"br0\">}</span><br/>\u00a0<br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> results<span class=\"sy0\">:</span> MutableList<span class=\"sy0\">&lt;</span>YahooResult<span class=\"sy0\">&gt;</span><br/>        get<span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>            <a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> list <span class=\"sy0\">=</span> mutableListOf<span class=\"sy0\">&lt;</span>YahooResult<span class=\"sy0\">&gt;</span><span class=\"br0\">(</span><span class=\"br0\">)</span><br/>            <a href=\"http://scala-lang.org\"><span class=\"kw1\">for</span></a> <span class=\"br0\">(</span>mr in rx.<span class=\"me1\">findAll</span><span class=\"br0\">(</span>content<span class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>               <a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> title <span class=\"sy0\">=</span> mr.<span class=\"me1\">groups</span><span class=\"br0\">[</span><span class=\"nu0\">2</span><span class=\"br0\">]</span><span class=\"sy0\">!!</span>.<span class=\"me1\">value</span>.<span class=\"me1\">replace</span><span class=\"br0\">(</span><span class=\"st0\">\"&lt;b&gt;\"</span>, <span class=\"st0\">\"\"</span><span class=\"br0\">)</span>.<span class=\"me1\">replace</span><span class=\"br0\">(</span><span class=\"st0\">\"&lt;/b&gt;\"</span>, <span class=\"st0\">\"\"</span><span class=\"br0\">)</span><br/>               <a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> link  <span class=\"sy0\">=</span> mr.<span class=\"me1\">groups</span><span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"br0\">]</span><span class=\"sy0\">!!</span>.<span class=\"me1\">value</span><br/>               <a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> text  <span class=\"sy0\">=</span> mr.<span class=\"me1\">groups</span><span class=\"br0\">[</span><span class=\"nu0\">3</span><span class=\"br0\">]</span><span class=\"sy0\">!!</span>.<span class=\"me1\">value</span>.<span class=\"me1\">replace</span><span class=\"br0\">(</span><span class=\"st0\">\"&lt;b&gt;\"</span>, <span class=\"st0\">\"\"</span><span class=\"br0\">)</span>.<span class=\"me1\">replace</span><span class=\"br0\">(</span><span class=\"st0\">\"&lt;/b&gt;\"</span>, <span class=\"st0\">\"\"</span><span class=\"br0\">)</span><br/>               list.<span class=\"me1\">add</span> <span class=\"br0\">(</span>YahooResult<span class=\"br0\">(</span>title, link, text<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>            <span class=\"br0\">}</span><br/>            <a href=\"http://scala-lang.org\"><span class=\"kw1\">return</span></a> list<br/>        <span class=\"br0\">}</span><br/>\u00a0<br/>    fun nextPage<span class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"sy0\">=</span> YahooSearch<span class=\"br0\">(</span>query, page + <span class=\"nu0\">1</span><span class=\"br0\">)</span><br/>\u00a0<br/>    fun getPage<span class=\"br0\">(</span>newPage<span class=\"sy0\">:</span> Int<span class=\"br0\">)</span> <span class=\"sy0\">=</span> YahooSearch<span class=\"br0\">(</span>query, newPage<span class=\"br0\">)</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/>fun main<span class=\"br0\">(</span>args<span class=\"sy0\">:</span> Array<span class=\"sy0\">&lt;</span>String<span class=\"sy0\">&gt;</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>    <a href=\"http://scala-lang.org\"><span class=\"kw1\">for</span></a> <span class=\"br0\">(</span>page in <span class=\"nu0\">0</span>..<span class=\"nu0\">1</span><span class=\"br0\">)</span> <span class=\"br0\">{</span><br/>        <a href=\"http://scala-lang.org\"><span class=\"kw1\">val</span></a> x <span class=\"sy0\">=</span> YahooSearch<span class=\"br0\">(</span><span class=\"st0\">\"rosettacode\"</span>, page<span class=\"br0\">)</span><br/>        println<span class=\"br0\">(</span><span class=\"st0\">\"<span class=\"es1\">\\n</span>PAGE ${page + 1} =&gt;\"</span><span class=\"br0\">)</span><br/>        <a href=\"http://scala-lang.org\"><span class=\"kw1\">for</span></a> <span class=\"br0\">(</span>result in x.<span class=\"me1\">results</span>.<span class=\"me1\">take</span><span class=\"br0\">(</span><span class=\"nu0\">3</span><span class=\"br0\">)</span><span class=\"br0\">)</span> println<span class=\"br0\">(</span>result<span class=\"br0\">)</span><br/>    <span class=\"br0\">}</span><br/><span class=\"br0\">}</span></pre>"}, {"lang": "Mathematica", "loc": 25, "block": "<pre class=\"text highlighted_source\">Manipulate[<br/> Column[Flatten[<br/>   StringCases[<br/>    StringCases[<br/>     URLFetch[<br/>      \"http://search.yahoo.com/search?p=\" &lt;&gt; query &lt;&gt; \"&amp;b=\" &lt;&gt; <br/>       <a class=\"__cf_email__\" data-cfemail=\"2c78437f585e45424b6c5c4d4b49\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>], \"&lt;ol\" ~~ ___ ~~ \"&lt;/ol&gt;\"], <br/>    \"&lt;a\" ~~ Shortest[__] ~~ \"class=\\\"yschttl spt\\\" href=\\\"\" ~~ <br/>      Shortest[url__] ~~ \"\\\"\" ~~ Shortest[__] ~~ \"&gt;\" ~~ <br/>      Shortest[title__] ~~ <br/>      \"&lt;div class=\\\"abstr\\\"&gt;\" | \"&lt;div class=\\\"sm-abs\\\"&gt;\" ~~ <br/>      Shortest[abstr__] ~~ \"&lt;/div&gt;\"\u00a0:&gt; <br/>     Column[{Hyperlink[Style[#[[1]], Larger], #[[2]]], #[[3]], <br/>         Style[#[[2]], Smaller]} &amp;@<br/>       StringReplace[{title, url, <br/>         abstr}, {\"&lt;\" ~~ Shortest[__] ~~ \"&gt;\" -&gt; \"\", <br/>         \"&amp;#\" ~~ n\u00a0: DigitCharacter ... ~~ \";\"\u00a0:&gt; <br/>          FromCharacterCode[<a class=\"__cf_email__\" data-cfemail=\"b8fecad7d5fcd1dfd1cccbf8d6\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>], \"&amp;amp;\" -&gt; \"&amp;\", <br/>         \"&amp;quot;\" -&gt; \"\\\"\", \"&amp;lt;\" -&gt; \"&lt;\", \"&amp;gt;\" -&gt; \"&gt;\"}]]], 1], <br/>  Spacings -&gt; 2], {{input, \"\", \"Yahoo!\"}, <br/>  InputField[<a class=\"__cf_email__\" data-cfemail=\"c286bbaca3afaba182abacb2b7b6\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>, String] &amp;}, {{query, \"\"}, <br/>  ControlType -&gt; None}, {{page, 1}, ControlType -&gt; None}, <br/> Row[{Button[\"Search\", page = 1; query = input], <br/>   Button[\"Prev\", page -= 10, Enabled -&gt; Dynamic[page &gt;= 10]], <br/>   Button[\"Next\", page += 10]}]]</pre>"}, {"lang": "Oz", "loc": 147, "block": "<pre class=\"oz highlighted_source\"><span class=\"kw1\">declare</span><br/>  <span class=\"br0\">[</span>HTTPClient<span class=\"br0\">]</span> = <span class=\"br0\">{</span>Module<span class=\"sy0\">.</span>link <span class=\"br0\">[</span><span class=\"st0\">'x-ozlib://mesaros/net/HTTPClient.ozf'</span><span class=\"br0\">]</span><span class=\"br0\">}</span><br/>  <span class=\"br0\">[</span>StringX<span class=\"br0\">]</span> = <span class=\"br0\">{</span>Module<span class=\"sy0\">.</span>link <span class=\"br0\">[</span><span class=\"st0\">'x-oz://system/String.ozf'</span><span class=\"br0\">]</span><span class=\"br0\">}</span><br/>  <span class=\"br0\">[</span>Regex<span class=\"br0\">]</span> = <span class=\"br0\">{</span>Module<span class=\"sy0\">.</span>link <span class=\"br0\">[</span><span class=\"st0\">'x-oz://contrib/regex'</span><span class=\"br0\">]</span><span class=\"br0\">}</span><br/>\u00a0<br/>  <span class=\"co1\">%% Displays page 1 and 3 of the search results.</span><br/>  <span class=\"co1\">%% The user can request and display more with context menu-&gt;Actions-&gt;Make Needed.</span><br/>  <span class=\"kw1\">proc</span> <span class=\"br0\">{</span><span class=\"re1\">ExampleUsage</span><span class=\"br0\">}</span>    <br/>     Pages = <span class=\"br0\">{</span>YahooSearch <span class=\"st0\">\"Rosetta code\"</span><span class=\"br0\">}</span><br/>  <span class=\"kw1\">in</span><br/>     <span class=\"br0\">{</span>Inspector<span class=\"sy0\">.</span>configure widgetShowStrings <span class=\"kw1\">true</span><span class=\"br0\">}</span><br/>     <span class=\"br0\">{</span>ForAll <span class=\"br0\">{</span>Nth Pages 1<span class=\"br0\">}</span> Value<span class=\"sy0\">.</span>makeNeeded<span class=\"br0\">}</span><br/>     <span class=\"br0\">{</span>ForAll <span class=\"br0\">{</span>Nth Pages 3<span class=\"br0\">}</span> Value<span class=\"sy0\">.</span>makeNeeded<span class=\"br0\">}</span><br/>     <span class=\"co1\">%% Display the infinite list of search result pages.</span><br/>     <span class=\"br0\">{</span>Inspect Pages<span class=\"br0\">}</span><br/>  <span class=\"kw1\">end</span><br/>\u00a0<br/>  <span class=\"co1\">%% Returns a lazy list of pages.</span><br/>  <span class=\"co1\">%% A page is a lazy list of entries like this: result(url:U title:T content:C).</span><br/>  <span class=\"kw1\">fun</span> <span class=\"br0\">{</span><span class=\"re1\">YahooSearch</span> Query<span class=\"br0\">}</span><br/>     FetchURL = <span class=\"br0\">{</span>CreateURLFetcher<span class=\"br0\">}</span><br/>\u00a0<br/>     <span class=\"kw1\">fun</span> <span class=\"br0\">{</span><span class=\"re1\">Page</span> Nr<span class=\"br0\">}</span><br/>\tStartResult = <span class=\"br0\">(</span>Nr<span class=\"sy0\">-</span>1<span class=\"br0\">)</span><span class=\"sy0\">*</span>10<span class=\"sy0\">+</span>1<br/>\t<span class=\"co1\">%% only retrieve it when really needed</span><br/>\tDoc = <span class=\"br0\">{</span>Value<span class=\"sy0\">.</span>byNeed <span class=\"kw1\">fun</span> <span class=\"br0\">{</span><span class=\"re1\">$</span><span class=\"br0\">}</span><br/>\t\t\t       <span class=\"br0\">{</span>FetchURL <span class=\"st0\">\"http://search.yahoo.com/search\"</span><br/>\t\t\t\t<span class=\"br0\">[</span><span class=\"st0\">\"p\"</span><span class=\"sy0\">#</span>Query <span class=\"st0\">\"b\"</span><span class=\"sy0\">#</span><span class=\"br0\">{</span>Int<span class=\"sy0\">.</span>toString StartResult<span class=\"br0\">}</span><span class=\"br0\">]</span><span class=\"br0\">}</span><br/>\t\t\t    <span class=\"kw1\">end</span><span class=\"br0\">}</span><br/>\tRE = <span class=\"st0\">\"&lt;a class=<span class=\"es0\">\\\"</span>yschttl spt<span class=\"es0\">\\\"</span> href=\"</span><br/>     <span class=\"kw1\">in</span><br/>\t<span class=\"co1\">%% Lazily returns results.</span><br/>\t<span class=\"co1\">%% In this way it is possible to build the pages list structure</span><br/>\t<span class=\"co1\">%% without creating the single elements</span><br/>\t<span class=\"co1\">%% (e.g. retrieve page 1 and 3 but not 2).</span><br/>\t<span class=\"kw1\">for</span> Match <span class=\"kw1\">in</span> <span class=\"br0\">{</span>Regex<span class=\"sy0\">.</span>allMatches RE Doc<span class=\"br0\">}</span> yield:Yield <span class=\"kw1\">do</span><br/>\t   Xs = <span class=\"br0\">{</span>List<span class=\"sy0\">.</span>drop Doc Match<span class=\"sy0\">.</span>0<span class=\"sy0\">.</span>2<span class=\"br0\">}</span><br/>\t<span class=\"kw1\">in</span><br/>\t   <span class=\"br0\">{</span>Yield <span class=\"br0\">{</span>ParseEntry Xs<span class=\"br0\">}</span><span class=\"br0\">}</span>\t <br/>\t<span class=\"kw1\">end</span><br/>     <span class=\"kw1\">end</span><br/>  <span class=\"kw1\">in</span><br/>     <span class=\"kw1\">for</span> PageNr <span class=\"kw1\">in</span> 1;PageNr<span class=\"sy0\">+</span>1 yield:Yield <span class=\"kw1\">do</span><br/>\t<span class=\"br0\">{</span>Yield <span class=\"br0\">{</span>Page PageNr<span class=\"br0\">}</span><span class=\"br0\">}</span><br/>     <span class=\"kw1\">end</span><br/>  <span class=\"kw1\">end</span><br/>\u00a0<br/>  <span class=\"kw1\">fun</span> <span class=\"br0\">{</span><span class=\"re1\">CreateURLFetcher</span><span class=\"br0\">}</span><br/>     Client = <span class=\"br0\">{</span>New HTTPClient<span class=\"sy0\">.</span>cgiGET<br/>\t       init<span class=\"br0\">(</span>inPrms<span class=\"br0\">(</span>toFile:<span class=\"kw1\">false</span> toStrm:<span class=\"kw1\">true</span><span class=\"br0\">)</span><br/>\t\t    httpReqPrms<br/>\t\t   <span class=\"br0\">)</span><span class=\"br0\">}</span><br/>     <span class=\"co1\">%% close when no longer used</span><br/>     <span class=\"br0\">{</span>Finalize<span class=\"sy0\">.</span>register Client <span class=\"kw1\">proc</span> <span class=\"br0\">{</span><span class=\"re1\">$</span> C<span class=\"br0\">}</span> <span class=\"br0\">{</span>C closeAll<span class=\"br0\">(</span><span class=\"kw1\">true</span><span class=\"br0\">)</span><span class=\"br0\">}</span> <span class=\"kw1\">end</span><span class=\"br0\">}</span><br/>\u00a0<br/>     <span class=\"kw1\">fun</span> <span class=\"br0\">{</span><span class=\"re1\">FetchURL</span> Url Params<span class=\"br0\">}</span><br/>\tOutParams<br/>     <span class=\"kw1\">in</span><br/>\t<span class=\"br0\">{</span>Client getService<span class=\"br0\">(</span>Url Params\u00a0?OutParams\u00a0?_<span class=\"br0\">)</span><span class=\"br0\">}</span><br/>\tOutParams<span class=\"sy0\">.</span>sOut<br/>     <span class=\"kw1\">end</span><br/>  <span class=\"kw1\">in</span><br/>     FetchURL<br/>  <span class=\"kw1\">end</span><br/>\u00a0<br/>  <span class=\"co1\">%% Xs: String containing HtmL</span><br/>  <span class=\"co1\">%% Result: \"result(url:U title:T content:C)\" or \"parseError\"</span><br/>  <span class=\"kw1\">fun</span> <span class=\"br0\">{</span><span class=\"re1\">ParseEntry</span> Xs<span class=\"br0\">}</span><br/>     <span class=\"kw1\">proc</span> <span class=\"br0\">{</span><span class=\"re1\">Parse</span> Root<span class=\"br0\">}</span><br/>\tR1 R2 R3 R4 R4 R5 R6 R7<br/>\tUrl = <span class=\"br0\">{</span>Fix <span class=\"br0\">{</span>QuotedString Xs R1<span class=\"br0\">}</span><span class=\"br0\">}</span><br/>\t<span class=\"br0\">{</span>Const <span class=\"st0\">\"&gt;\"</span> R1 R2<span class=\"br0\">}</span><br/>\tTitle = <span class=\"br0\">{</span>Fix <span class=\"br0\">{</span>Until <span class=\"st0\">\"&lt;/a&gt;\"</span> R2 R3<span class=\"br0\">}</span><span class=\"br0\">}</span><br/>\t<span class=\"br0\">{</span>Const <span class=\"st0\">\"&lt;/h3&gt;&lt;/div&gt;\"</span> R3 R4<span class=\"br0\">}</span><br/>\t<span class=\"kw1\">choice</span><br/>\t   <span class=\"co1\">%% \"enchanted\" result?</span><br/>\t   <span class=\"br0\">{</span>Const <span class=\"st0\">\"&lt;div class=<span class=\"es0\">\\\"</span>sm-bd sm-nophoto<span class=\"es0\">\\\"</span> id=<span class=\"es0\">\\\"</span>sm-bd-4-1<span class=\"es0\">\\\"</span>&gt;\"</span> R4 R5<span class=\"br0\">}</span><br/>\t   <span class=\"br0\">{</span>Until <span class=\"st0\">\"&lt;/div&gt;\"</span> R5 R6 _<span class=\"br0\">}</span><br/>\t<span class=\"re5\"><span class=\"br0\">[</span><span class=\"br0\">]</span></span> <span class=\"co1\">%% result with links into document</span><br/>\t   <span class=\"br0\">{</span>Const <span class=\"st0\">\"&lt;div class=<span class=\"es0\">\\\"</span>sm-bd sm-r<span class=\"es0\">\\\"</span> id=<span class=\"es0\">\\\"</span>sm-bd-8-1<span class=\"es0\">\\\"</span>&gt;\"</span> R4 R5<span class=\"br0\">}</span><br/>\t   <span class=\"br0\">{</span>Until <span class=\"st0\">\"&lt;/ul&gt;&lt;/div&gt;\"</span> R5 R6 _<span class=\"br0\">}</span><br/>\t<span class=\"re5\"><span class=\"br0\">[</span><span class=\"br0\">]</span></span> <span class=\"co1\">%% PDF file</span><br/>\t   <span class=\"br0\">{</span>Const <span class=\"st0\">\"&lt;div class=<span class=\"es0\">\\\"</span>format<span class=\"es0\">\\\"</span>&gt;\"</span> R4 R5<span class=\"br0\">}</span><br/>\t   <span class=\"br0\">{</span>Until <span class=\"st0\">\"&lt;/a&gt;&lt;/div&gt;\"</span> R5 R6 _<span class=\"br0\">}</span><br/>\t<span class=\"re5\"><span class=\"br0\">[</span><span class=\"br0\">]</span></span> <span class=\"co1\">%% With Review</span><br/>\t   <span class=\"br0\">{</span>Const <span class=\"st0\">\"&lt;div class=<span class=\"es0\">\\\"</span>sm-bd sm-r<span class=\"es0\">\\\"</span> id=<span class=\"es0\">\\\"</span>sm-bd-9-1<span class=\"es0\">\\\"</span>&gt;\"</span> R4 R5<span class=\"br0\">}</span><br/>\t   R6 = nil <span class=\"co1\">%% no nice abstract when a review is there</span><br/>\t<span class=\"re5\"><span class=\"br0\">[</span><span class=\"br0\">]</span></span> <span class=\"co1\">%% normal result</span><br/>\t   R6 = R4<br/>\t<span class=\"kw1\">end</span><br/>\tAbstract = <br/>\t<span class=\"kw1\">choice</span><br/>\t   <span class=\"br0\">{</span>Const <span class=\"st0\">\"&lt;div class=<span class=\"es0\">\\\"</span>abstr<span class=\"es0\">\\\"</span>&gt;\"</span> R6 R7<span class=\"br0\">}</span><br/>\t   <span class=\"br0\">{</span>Fix <span class=\"br0\">{</span>Until <span class=\"st0\">\"&lt;/div&gt;\"</span> R7 _<span class=\"br0\">}</span><span class=\"br0\">}</span><br/>\t<span class=\"re5\"><span class=\"br0\">[</span><span class=\"br0\">]</span></span> <span class=\"br0\">{</span>Const <span class=\"st0\">\"&lt;div class=<span class=\"es0\">\\\"</span>sm-abs<span class=\"es0\">\\\"</span>&gt;\"</span> R6 R7<span class=\"br0\">}</span><br/>\t   <span class=\"br0\">{</span>Fix <span class=\"br0\">{</span>Until <span class=\"st0\">\"&lt;/div&gt;\"</span> R7 _<span class=\"br0\">}</span><span class=\"br0\">}</span><br/>\t<span class=\"re5\"><span class=\"br0\">[</span><span class=\"br0\">]</span></span> <span class=\"st0\">\"\"</span><br/>\t<span class=\"kw1\">end</span><br/>     <span class=\"kw1\">in</span><br/>\tRoot = result<span class=\"br0\">(</span>url:Url title:Title content:Abstract<span class=\"br0\">)</span><br/>     <span class=\"kw1\">end</span><br/>  <span class=\"kw1\">in</span><br/>     <span class=\"br0\">{</span>CondSelect <span class=\"br0\">{</span>SearchOne Parse<span class=\"br0\">}</span> 1 parseError<span class=\"br0\">}</span><br/>  <span class=\"kw1\">end</span><br/>\u00a0<br/>  <span class=\"co1\">%% Result: contents of Xs until M is found.</span><br/>  <span class=\"co1\">%% Xs = {Append M Yr}</span><br/>  <span class=\"kw1\">fun</span> <span class=\"br0\">{</span><span class=\"re1\">Until</span> M Xs\u00a0?Yr<span class=\"br0\">}</span><br/>     L R<br/>  <span class=\"kw1\">in</span><br/>     <span class=\"br0\">{</span>List<span class=\"sy0\">.</span>takeDrop Xs <span class=\"br0\">{</span>Length M<span class=\"br0\">}</span> L R<span class=\"br0\">}</span><br/>     <span class=\"kw1\">if</span> L <span class=\"sy0\">==</span> M <span class=\"kw1\">then</span> Yr = R nil<br/>     <span class=\"kw1\">elsecase</span> Xs <span class=\"kw1\">of</span> X<span class=\"sy0\">|</span>Xr <span class=\"kw1\">then</span> X<span class=\"sy0\">|</span><span class=\"br0\">{</span>Until M Xr Yr<span class=\"br0\">}</span><br/>     <span class=\"re5\"><span class=\"br0\">[</span><span class=\"br0\">]</span></span> nil <span class=\"kw1\">then</span> Yr = nil nil<br/>     <span class=\"kw1\">end</span><br/>  <span class=\"kw1\">end</span><br/>\u00a0<br/>  <span class=\"co1\">%% Asserts that Xs starts with C. Returns the remainder in Ys.</span><br/>  <span class=\"kw1\">proc</span> <span class=\"br0\">{</span><span class=\"re1\">Const</span> C Xs\u00a0?Ys<span class=\"br0\">}</span><br/>     <span class=\"br0\">{</span>List<span class=\"sy0\">.</span>takeDrop Xs <span class=\"br0\">{</span>Length C<span class=\"br0\">}</span> C Ys<span class=\"br0\">}</span><br/>  <span class=\"kw1\">end</span><br/>\u00a0<br/>  <span class=\"co1\">%% Assert that a quoted string follows.</span><br/>  <span class=\"co1\">%% Returns the unquoted string and binds Ys to the remainder of Xs.</span><br/>  <span class=\"kw1\">fun</span> <span class=\"br0\">{</span><span class=\"re1\">QuotedString</span> &amp;<span class=\"st0\">\"|Xs\u00a0?Ys}<br/>     fun {Loop Xs Ys}<br/>\tcase Xs of &amp;<span class=\"es0\">\\\\</span>|&amp;\"</span><span class=\"sy0\">|</span>Xr <span class=\"kw1\">then</span>  <span class=\"re3\">&amp;\\</span>\\<span class=\"sy0\">|</span>&amp;<span class=\"st0\">\"|{Loop Xr Ys}<br/>\t[] &amp;\"</span><span class=\"sy0\">|</span>Xr <span class=\"kw1\">then</span> Ys = Xr nil<br/>\t<span class=\"re5\"><span class=\"br0\">[</span><span class=\"br0\">]</span></span> X<span class=\"sy0\">|</span>Xr <span class=\"kw1\">then</span> X<span class=\"sy0\">|</span><span class=\"br0\">{</span>Loop Xr Ys<span class=\"br0\">}</span><br/>\t<span class=\"kw1\">end</span><br/>     <span class=\"kw1\">end</span><br/>  <span class=\"kw1\">in</span><br/>     <span class=\"br0\">{</span>Loop Xs Ys<span class=\"br0\">}</span><br/>  <span class=\"kw1\">end</span><br/>\u00a0<br/>  <span class=\"co1\">%% Remove formatting tags.</span><br/>  <span class=\"kw1\">fun</span> <span class=\"br0\">{</span><span class=\"re1\">Fix</span> Xs<span class=\"br0\">}</span><br/>     <span class=\"br0\">{</span>Until <span class=\"st0\">\"&lt;/a&gt;&lt;/h3&gt;\"</span><br/>      <span class=\"br0\">{</span>FoldL <span class=\"br0\">[</span><span class=\"st0\">\"&lt;b&gt;\"</span> <span class=\"st0\">\"&lt;/b&gt;\"</span> <span class=\"st0\">\"&lt;wbr /&gt;\"</span> <span class=\"st0\">\"&lt;wbr&gt;\"</span> <span class=\"st0\">\"&lt;b&gt;...&lt;/b&gt;\"</span><span class=\"br0\">]</span><br/>       <span class=\"kw1\">fun</span> <span class=\"br0\">{</span><span class=\"re1\">$</span> Ys Z<span class=\"br0\">}</span><br/>\t  <span class=\"br0\">{</span>StringX<span class=\"sy0\">.</span>replace Ys Z <span class=\"st0\">\"\"</span><span class=\"br0\">}</span><br/>       <span class=\"kw1\">end</span><br/>       Xs<span class=\"br0\">}</span><br/>      _<span class=\"br0\">}</span><br/>  <span class=\"kw1\">end</span><br/><span class=\"kw1\">in</span><br/>  <span class=\"br0\">{</span>ExampleUsage<span class=\"br0\">}</span></pre>"}, {"lang": "Perl", "loc": 68, "block": "<pre class=\"perl highlighted_source\"><a href=\"http://perldoc.perl.org/functions/package.html\"><span class=\"kw3\">package</span></a> YahooSearch<span class=\"sy0\">;</span><br/>\u00a0<br/><span class=\"kw2\">use</span> Encode<span class=\"sy0\">;</span><br/><span class=\"kw2\">use</span> HTTP<span class=\"sy0\">::</span><span class=\"me2\">Cookies</span><span class=\"sy0\">;</span>  <br/><span class=\"kw2\">use</span> WWW<span class=\"sy0\">::</span><span class=\"me2\">Mechanize</span><span class=\"sy0\">;</span><br/>\u00a0<br/><span class=\"co1\"># --- Internals -------------------------------------------------</span><br/>\u00a0<br/><span class=\"kw2\">sub</span> apply <span class=\"br0\">(</span><span class=\"sy0\">&amp;</span><span class=\"co5\">$)</span><br/> <span class=\"br0\">{</span><span class=\"kw1\">my</span> <span class=\"re0\">$f</span> <span class=\"sy0\">=</span> <a href=\"http://perldoc.perl.org/functions/shift.html\"><span class=\"kw3\">shift</span></a><span class=\"sy0\">;</span> <a href=\"http://perldoc.perl.org/functions/local.html\"><span class=\"kw3\">local</span></a> <span class=\"co5\">$_</span> <span class=\"sy0\">=</span> <a href=\"http://perldoc.perl.org/functions/shift.html\"><span class=\"kw3\">shift</span></a><span class=\"sy0\">;</span> <span class=\"re0\">$f</span><span class=\"sy0\">-&gt;</span><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"sy0\">;</span> <a href=\"http://perldoc.perl.org/functions/return.html\"><span class=\"kw3\">return</span></a> <span class=\"co5\">$_</span><span class=\"sy0\">;</span><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"co1\"># We construct a cookie to get 100 results per page and prevent</span><br/><span class=\"co1\"># \"enhanced results\".</span><br/><span class=\"kw1\">my</span> <span class=\"re0\">$search_prefs</span> <span class=\"sy0\">=</span> <span class=\"st_h\">'v=1&amp;n=100&amp;sm='</span> <span class=\"sy0\">.</span><br/>    apply <span class=\"br0\">{</span><a href=\"http://perldoc.perl.org/functions/s.html\"><span class=\"kw3\">s</span></a><span class=\"sy0\">/</span><span class=\"br0\">(</span><span class=\"br0\">[</span><span class=\"sy0\">^</span>a<span class=\"sy0\">-</span>zA<span class=\"sy0\">-</span>Z0<span class=\"sy0\">-</span><span class=\"nu0\">9</span><span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">/</span><a href=\"http://perldoc.perl.org/functions/sprintf.html\"><span class=\"kw3\">sprintf</span></a> <span class=\"st_h\">'%%%02X'</span><span class=\"sy0\">,</span> <a href=\"http://perldoc.perl.org/functions/ord.html\"><span class=\"kw3\">ord</span></a> <span class=\"co3\">$1</span><span class=\"sy0\">/</span><span class=\"kw1\">ge</span><span class=\"br0\">}</span><br/>    <a href=\"http://perldoc.perl.org/functions/join.html\"><span class=\"kw3\">join</span></a> <span class=\"st_h\">'|'</span><span class=\"sy0\">,</span><br/>    <a href=\"http://perldoc.perl.org/functions/map.html\"><span class=\"kw3\">map</span></a> <span class=\"br0\">{</span><span class=\"st_h\">'!'</span> <span class=\"sy0\">.</span> <span class=\"co5\">$_</span><span class=\"br0\">}</span><br/>    <a href=\"http://perldoc.perl.org/functions/qw.html\"><span class=\"kw3\">qw</span></a><span class=\"br0\">(</span>hsb Zq0 XbM sss dDO VFM RQh uZ0 Fxe yCl GP4 FZK yNC mEG niH<span class=\"br0\">)</span><span class=\"sy0\">;</span><br/><span class=\"kw1\">my</span> <span class=\"re0\">$cookies</span> <span class=\"sy0\">=</span> HTTP<span class=\"sy0\">::</span><span class=\"me2\">Cookies</span><span class=\"sy0\">-&gt;</span><span class=\"kw2\">new</span><span class=\"sy0\">;</span><br/><span class=\"re0\">$cookies</span><span class=\"sy0\">-&gt;</span><span class=\"me1\">set_cookie</span><span class=\"br0\">(</span><span class=\"nu0\">0</span><span class=\"sy0\">,</span> <span class=\"st_h\">'sB'</span><span class=\"sy0\">,</span> <span class=\"re0\">$search_prefs</span><span class=\"sy0\">,</span> <span class=\"st_h\">'/'</span><span class=\"sy0\">,</span> <span class=\"st_h\">'search.yahoo.com'</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>\u00a0<br/><span class=\"kw1\">my</span> <span class=\"re0\">$mech</span> <span class=\"sy0\">=</span> <span class=\"kw2\">new</span> WWW<span class=\"sy0\">::</span><span class=\"me2\">Mechanize</span><br/>   <span class=\"br0\">(</span>cookie_jar <span class=\"sy0\">=&gt;</span> <span class=\"re0\">$cookies</span><span class=\"sy0\">,</span><br/>    stack_depth <span class=\"sy0\">=&gt;</span> <span class=\"nu0\">0</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>\u00a0<br/><span class=\"kw2\">sub</span> read_page<br/> <span class=\"br0\">{</span><span class=\"kw1\">my</span> <span class=\"br0\">(</span><span class=\"re0\">$next</span><span class=\"sy0\">,</span> <span class=\"re0\">$page</span><span class=\"sy0\">,</span> <span class=\"re0\">@results</span><span class=\"br0\">)</span> <span class=\"sy0\">=</span><br/>     <span class=\"br0\">(</span><span class=\"re0\">$mech</span><span class=\"sy0\">-&gt;</span><span class=\"me1\">find_link</span><span class=\"br0\">(</span>text <span class=\"sy0\">=&gt;</span> <span class=\"st_h\">'Next &gt;'</span><span class=\"br0\">)</span><span class=\"sy0\">-&gt;</span><span class=\"me1\">url</span><span class=\"sy0\">,</span><br/>      decode <span class=\"st_h\">'iso-8859-1'</span><span class=\"sy0\">,</span> <span class=\"re0\">$mech</span><span class=\"sy0\">-&gt;</span><span class=\"me1\">content</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>  <span class=\"kw1\">while</span> <span class=\"br0\">(</span><span class=\"re0\">$page</span> <span class=\"sy0\">=~</span> <a href=\"http://perldoc.perl.org/functions/m.html\"><span class=\"kw3\">m</span></a><br/>         <span class=\"br0\">{</span><span class=\"re4\">&lt;h3&gt;</span> <span class=\"sy0\">&lt;</span>a \\<a href=\"http://perldoc.perl.org/functions/s.html\"><span class=\"kw3\">s</span></a> class<span class=\"sy0\">=</span><span class=\"st0\">\"yschttl <span class=\"es0\">\\s</span> spt\"</span> \\<a href=\"http://perldoc.perl.org/functions/s.html\"><span class=\"kw3\">s</span></a><br/>          href<span class=\"sy0\">=</span><span class=\"st0\">\" ([^\"</span><span class=\"br0\">]</span><span class=\"sy0\">+</span><span class=\"br0\">)</span> <span class=\"st0\">\" <span class=\"es0\">\\s</span>* &gt;                #\"</span><br/>          <span class=\"br0\">(</span><span class=\"sy0\">.+?</span><span class=\"br0\">)</span> <span class=\"sy0\">&lt;/</span>a<span class=\"sy0\">&gt;</span><br/>          <span class=\"sy0\">.+?</span><br/>          <span class=\"sy0\">&lt;</span>div \\<a href=\"http://perldoc.perl.org/functions/s.html\"><span class=\"kw3\">s</span></a> class<span class=\"sy0\">=</span><span class=\"st0\">\"abstr\"</span><span class=\"sy0\">&gt;</span><br/>          <span class=\"br0\">(</span><span class=\"sy0\">.+?</span><span class=\"br0\">)</span> <span class=\"sy0\">&lt;/</span>div<span class=\"sy0\">&gt;</span><span class=\"br0\">}</span>xg<span class=\"br0\">)</span><br/>     <span class=\"br0\">{</span><a href=\"http://perldoc.perl.org/functions/push.html\"><span class=\"kw3\">push</span></a> <span class=\"re0\">@results</span><span class=\"sy0\">,</span> <span class=\"br0\">{</span>url <span class=\"sy0\">=&gt;</span> <span class=\"co3\">$1</span><span class=\"sy0\">,</span> title <span class=\"sy0\">=&gt;</span> <span class=\"co3\">$2</span><span class=\"sy0\">,</span> content <span class=\"sy0\">=&gt;</span> <span class=\"co3\">$3</span><span class=\"br0\">}</span><span class=\"sy0\">;</span><br/>      <span class=\"kw1\">foreach</span> <span class=\"br0\">(</span> <span class=\"sy0\">@</span><span class=\"br0\">{</span><span class=\"re0\">$results</span><span class=\"br0\">[</span><span class=\"sy0\">-</span><span class=\"nu0\">1</span><span class=\"br0\">]</span><span class=\"br0\">}</span><span class=\"br0\">{</span><a href=\"http://perldoc.perl.org/functions/qw.html\"><span class=\"kw3\">qw</span></a><span class=\"br0\">(</span>title content<span class=\"br0\">)</span><span class=\"br0\">}</span> <span class=\"br0\">)</span><br/>         <span class=\"br0\">{</span><a href=\"http://perldoc.perl.org/functions/s.html\"><span class=\"kw3\">s</span></a><span class=\"sy0\">/&lt;.+?&gt;//</span>g<span class=\"sy0\">;</span><br/>          <span class=\"co5\">$_</span> <span class=\"sy0\">=</span> encode <span class=\"st_h\">'utf8'</span><span class=\"sy0\">,</span> <span class=\"co5\">$_</span><span class=\"sy0\">;</span><span class=\"br0\">}</span><span class=\"br0\">}</span><br/>  <a href=\"http://perldoc.perl.org/functions/return.html\"><span class=\"kw3\">return</span></a> <span class=\"re0\">$next</span><span class=\"sy0\">,</span> <span class=\"re0\">\\@results</span><span class=\"sy0\">;</span><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"co1\"># --- Methods ---------------------------------------------------</span><br/>\u00a0<br/><span class=\"kw2\">sub</span> <span class=\"kw2\">new</span><br/> <span class=\"br0\">{</span><span class=\"kw1\">my</span> <span class=\"re0\">$invocant</span> <span class=\"sy0\">=</span> <a href=\"http://perldoc.perl.org/functions/shift.html\"><span class=\"kw3\">shift</span></a><span class=\"sy0\">;</span><br/>  <span class=\"kw1\">my</span> <span class=\"re0\">$class</span> <span class=\"sy0\">=</span> <a href=\"http://perldoc.perl.org/functions/ref.html\"><span class=\"kw3\">ref</span></a><span class=\"br0\">(</span><span class=\"re0\">$invocant</span><span class=\"br0\">)</span> <span class=\"sy0\">||</span> <span class=\"re0\">$invocant</span><span class=\"sy0\">;</span><br/>  <span class=\"re0\">$mech</span><span class=\"sy0\">-&gt;</span><span class=\"me1\">get</span><span class=\"br0\">(</span><span class=\"st_h\">'http://search.yahoo.com/search?p='</span> <span class=\"sy0\">.</span> apply<br/>     <span class=\"br0\">{</span><a href=\"http://perldoc.perl.org/functions/s.html\"><span class=\"kw3\">s</span></a><span class=\"sy0\">/</span><span class=\"br0\">(</span><span class=\"br0\">[</span><span class=\"sy0\">^</span>a<span class=\"sy0\">-</span>zA<span class=\"sy0\">-</span>Z0<span class=\"sy0\">-</span><span class=\"nu0\">9</span> <span class=\"br0\">]</span><span class=\"br0\">)</span><span class=\"sy0\">/</span><a href=\"http://perldoc.perl.org/functions/sprintf.html\"><span class=\"kw3\">sprintf</span></a> <span class=\"st_h\">'%%%02X'</span><span class=\"sy0\">,</span> <a href=\"http://perldoc.perl.org/functions/ord.html\"><span class=\"kw3\">ord</span></a> <span class=\"co3\">$1</span><span class=\"sy0\">/</span><span class=\"kw1\">ge</span><span class=\"sy0\">;</span><br/>      <span class=\"co2\">s/ /+/g</span><span class=\"sy0\">;</span><span class=\"br0\">}</span><br/>    <a href=\"http://perldoc.perl.org/functions/shift.html\"><span class=\"kw3\">shift</span></a><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>  <span class=\"kw1\">my</span> <span class=\"br0\">(</span><span class=\"re0\">$next</span><span class=\"sy0\">,</span> <span class=\"re0\">$results</span><span class=\"br0\">)</span> <span class=\"sy0\">=</span> read_page<span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>  <a href=\"http://perldoc.perl.org/functions/return.html\"><span class=\"kw3\">return</span></a> <a href=\"http://perldoc.perl.org/functions/bless.html\"><span class=\"kw3\">bless</span></a> <span class=\"br0\">{</span>link_to_next <span class=\"sy0\">=&gt;</span> <span class=\"re0\">$next</span><span class=\"sy0\">,</span> results <span class=\"sy0\">=&gt;</span> <span class=\"re0\">$results</span><span class=\"br0\">}</span><span class=\"sy0\">,</span> <span class=\"re0\">$class</span><span class=\"sy0\">;</span><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"kw2\">sub</span> results<br/> <span class=\"br0\">{</span><span class=\"sy0\">@</span><span class=\"br0\">{</span><a href=\"http://perldoc.perl.org/functions/shift.html\"><span class=\"kw3\">shift</span></a><span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"sy0\">-&gt;</span><span class=\"br0\">{</span>results<span class=\"br0\">}</span><span class=\"br0\">}</span><span class=\"sy0\">;</span><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"kw2\">sub</span> next_page<br/> <span class=\"br0\">{</span><span class=\"kw1\">my</span> <span class=\"re0\">$invocant</span> <span class=\"sy0\">=</span> <a href=\"http://perldoc.perl.org/functions/shift.html\"><span class=\"kw3\">shift</span></a><span class=\"sy0\">;</span><br/>  <span class=\"kw1\">my</span> <span class=\"re0\">$next</span> <span class=\"sy0\">=</span> <span class=\"re0\">$invocant</span><span class=\"sy0\">-&gt;</span><span class=\"br0\">{</span>link_to_next<span class=\"br0\">}</span><span class=\"sy0\">;</span><br/>  <span class=\"kw1\">unless</span> <span class=\"br0\">(</span><span class=\"re0\">$next</span><span class=\"br0\">)</span><br/>     <span class=\"br0\">{</span><span class=\"re0\">$invocant</span><span class=\"sy0\">-&gt;</span><span class=\"br0\">{</span>results<span class=\"br0\">}</span> <span class=\"sy0\">=</span> <span class=\"br0\">[</span><span class=\"br0\">]</span><span class=\"sy0\">;</span><br/>      <a href=\"http://perldoc.perl.org/functions/return.html\"><span class=\"kw3\">return</span></a> <a href=\"http://perldoc.perl.org/functions/undef.html\"><span class=\"kw3\">undef</span></a><span class=\"sy0\">;</span><span class=\"br0\">}</span><br/>  <span class=\"re0\">$mech</span><span class=\"sy0\">-&gt;</span><span class=\"me1\">get</span><span class=\"br0\">(</span><span class=\"re0\">$next</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>  <span class=\"br0\">(</span><span class=\"re0\">$next</span><span class=\"sy0\">,</span> <span class=\"kw1\">my</span> <span class=\"re0\">$results</span><span class=\"br0\">)</span> <span class=\"sy0\">=</span> read_page<span class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"sy0\">;</span><br/>  <span class=\"re0\">$invocant</span><span class=\"sy0\">-&gt;</span><span class=\"br0\">{</span>link_to_next<span class=\"br0\">}</span> <span class=\"sy0\">=</span> <span class=\"re0\">$next</span><span class=\"sy0\">;</span><br/>  <span class=\"re0\">$invocant</span><span class=\"sy0\">-&gt;</span><span class=\"br0\">{</span>results<span class=\"br0\">}</span> <span class=\"sy0\">=</span> <span class=\"re0\">$results</span><span class=\"sy0\">;</span><br/>  <a href=\"http://perldoc.perl.org/functions/return.html\"><span class=\"kw3\">return</span></a> <span class=\"nu0\">1</span><span class=\"sy0\">;</span><span class=\"br0\">}</span></pre>"}, {"lang": "PicoLisp", "loc": 25, "block": "<pre class=\"text highlighted_source\">(load \"@lib/http.l\")<br/>\u00a0<br/>(de yahoo (Query Page)<br/>   (default Page 1)<br/>   (client \"search.yahoo.com\" 80<br/>      (pack<br/>         \"search?p=\" (ht:Fmt Query)<br/>         \"&amp;b=\" (inc (* 10 (dec Page))) )<br/>      (make<br/>         (while (from \"&lt;a class=\\\"yschttl spt\\\" href=\\\"\")<br/>            (link<br/>               (make<br/>                  (link (till \"\\\"\" T))       # Url<br/>                  (from \"&lt;b&gt;\")<br/>                  (link (till \"&lt;\" T))        # Title<br/>                  (from \"class=\\\"abstr\\\"\")<br/>                  (from \"&gt;\")<br/>                  (link                      # Content<br/>                     (pack<br/>                        (make<br/>                           (loop<br/>                              (link (till \"&lt;\" T))<br/>                              (T (eof))<br/>                              (T (= \"&lt;/div\" (till \"&gt;\" T)))<br/>                              (char) ) ) ) ) ) ) ) ) ) )</pre>"}, {"lang": "Python", "loc": 45, "block": "<pre class=\"python highlighted_source\"><span class=\"kw1\">import</span> <span class=\"kw3\">urllib</span><br/><span class=\"kw1\">import</span> <span class=\"kw3\">re</span><br/>\u00a0<br/><span class=\"kw1\">def</span> fix<span class=\"br0\">(</span>x<span class=\"br0\">)</span>:<br/>    p <span class=\"sy0\">=</span> <span class=\"kw3\">re</span>.<span class=\"kw2\">compile</span><span class=\"br0\">(</span>r<span class=\"st0\">'&lt;[^&lt;]*?&gt;'</span><span class=\"br0\">)</span><br/>    <span class=\"kw1\">return</span> p.<span class=\"me1\">sub</span><span class=\"br0\">(</span><span class=\"st0\">''</span><span class=\"sy0\">,</span> x<span class=\"br0\">)</span>.<span class=\"me1\">replace</span><span class=\"br0\">(</span><span class=\"st0\">'&amp;amp;'</span><span class=\"sy0\">,</span> <span class=\"st0\">'&amp;'</span><span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"kw1\">class</span> YahooSearch:<br/>    <span class=\"kw1\">def</span> <span class=\"kw4\">__init__</span><span class=\"br0\">(</span><span class=\"kw2\">self</span><span class=\"sy0\">,</span> query<span class=\"sy0\">,</span> page<span class=\"sy0\">=</span><span class=\"nu0\">1</span><span class=\"br0\">)</span>:       <br/>        <span class=\"kw2\">self</span>.<span class=\"me1\">query</span> <span class=\"sy0\">=</span> query<br/>        <span class=\"kw2\">self</span>.<span class=\"me1\">page</span> <span class=\"sy0\">=</span> page<br/>        <span class=\"kw2\">self</span>.<span class=\"me1\">url</span> <span class=\"sy0\">=</span> <span class=\"st0\">\"http://search.yahoo.com/search?p=%s&amp;b=%s\"</span>\u00a0%<span class=\"br0\">(</span><span class=\"kw2\">self</span>.<span class=\"me1\">query</span><span class=\"sy0\">,</span> <span class=\"br0\">(</span><span class=\"br0\">(</span><span class=\"kw2\">self</span>.<span class=\"me1\">page</span> - <span class=\"nu0\">1</span><span class=\"br0\">)</span> * <span class=\"nu0\">10</span> + <span class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"br0\">)</span><br/>        <span class=\"kw2\">self</span>.<span class=\"me1\">content</span> <span class=\"sy0\">=</span> <span class=\"kw3\">urllib</span>.<span class=\"me1\">urlopen</span><span class=\"br0\">(</span><span class=\"kw2\">self</span>.<span class=\"me1\">url</span><span class=\"br0\">)</span>.<span class=\"me1\">read</span><span class=\"br0\">(</span><span class=\"br0\">)</span>        <br/>\u00a0<br/>    <span class=\"kw1\">def</span> getresults<span class=\"br0\">(</span><span class=\"kw2\">self</span><span class=\"br0\">)</span>:<br/>        <span class=\"kw2\">self</span>.<span class=\"me1\">results</span> <span class=\"sy0\">=</span> <span class=\"br0\">[</span><span class=\"br0\">]</span><br/>\u00a0<br/>        <span class=\"kw1\">for</span> i <span class=\"kw1\">in</span> <span class=\"kw3\">re</span>.<span class=\"me1\">findall</span><span class=\"br0\">(</span><span class=\"st0\">'&lt;a class=\"yschttl spt\" href=\".+?\"&gt;(.+?)&lt;/a&gt;&lt;/h3&gt;&lt;/div&gt;(.+?)&lt;/div&gt;.*?&lt;span class=url&gt;(.+?)&lt;/span&gt;'</span><span class=\"sy0\">,</span> <span class=\"kw2\">self</span>.<span class=\"me1\">content</span><span class=\"br0\">)</span>:<br/>\u00a0<br/>            title <span class=\"sy0\">=</span> fix<span class=\"br0\">(</span>i<span class=\"br0\">[</span><span class=\"nu0\">0</span><span class=\"br0\">]</span><span class=\"br0\">)</span><br/>            content <span class=\"sy0\">=</span> fix<span class=\"br0\">(</span>i<span class=\"br0\">[</span><span class=\"nu0\">1</span><span class=\"br0\">]</span><span class=\"br0\">)</span><br/>            url <span class=\"sy0\">=</span> fix<span class=\"br0\">(</span>i<span class=\"br0\">[</span><span class=\"nu0\">2</span><span class=\"br0\">]</span><span class=\"br0\">)</span><br/>\u00a0<br/>            <span class=\"kw2\">self</span>.<span class=\"me1\">results</span>.<span class=\"me1\">append</span><span class=\"br0\">(</span>YahooResult<span class=\"br0\">(</span>title<span class=\"sy0\">,</span> content<span class=\"sy0\">,</span> url<span class=\"br0\">)</span><span class=\"br0\">)</span><br/>\u00a0<br/>        <span class=\"kw1\">return</span> <span class=\"kw2\">self</span>.<span class=\"me1\">results</span><br/>\u00a0<br/>    <span class=\"kw1\">def</span> getnextpage<span class=\"br0\">(</span><span class=\"kw2\">self</span><span class=\"br0\">)</span>:<br/>        <span class=\"kw1\">return</span> YahooSearch<span class=\"br0\">(</span><span class=\"kw2\">self</span>.<span class=\"me1\">query</span><span class=\"sy0\">,</span> <span class=\"kw2\">self</span>.<span class=\"me1\">page</span>+<span class=\"nu0\">1</span><span class=\"br0\">)</span><br/>\u00a0<br/>    search_results <span class=\"sy0\">=</span> <span class=\"kw2\">property</span><span class=\"br0\">(</span>fget<span class=\"sy0\">=</span>getresults<span class=\"br0\">)</span><br/>    nextpage <span class=\"sy0\">=</span> <span class=\"kw2\">property</span><span class=\"br0\">(</span>fget<span class=\"sy0\">=</span>getnextpage<span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"kw1\">class</span> YahooResult:<br/>    <span class=\"kw1\">def</span> <span class=\"kw4\">__init__</span><span class=\"br0\">(</span><span class=\"kw2\">self</span><span class=\"sy0\">,</span>title<span class=\"sy0\">,</span>content<span class=\"sy0\">,</span>url<span class=\"br0\">)</span>:<br/>        <span class=\"kw2\">self</span>.<span class=\"me1\">title</span> <span class=\"sy0\">=</span> title<br/>        <span class=\"kw2\">self</span>.<span class=\"me1\">content</span> <span class=\"sy0\">=</span> content<br/>        <span class=\"kw2\">self</span>.<span class=\"me1\">url</span> <span class=\"sy0\">=</span> url<br/>\u00a0<br/><span class=\"co1\"># Usage:</span><br/>\u00a0<br/>x <span class=\"sy0\">=</span> YahooSearch<span class=\"br0\">(</span><span class=\"st0\">\"test\"</span><span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"kw1\">for</span> result <span class=\"kw1\">in</span> x.<span class=\"me1\">search_results</span>:<br/>    <span class=\"kw1\">print</span> result.<span class=\"me1\">title</span></pre>"}, {"lang": "R", "loc": 90, "block": "<pre class=\"text highlighted_source\">YahooSearch &lt;- function(query, page=1, .opts=list(), ignoreMarkUpErrors=TRUE)<br/>{<br/>   if(!require(RCurl) ||\u00a0!require(XML))<br/>   {<br/>      stop(\"Could not load required packages\")<br/>   }   <br/>\u00a0<br/>   # Replace \" \" with \"%20\", etc<br/>   query &lt;- curlEscape(query)<br/>\u00a0<br/>   # Retrieve page<br/>   b &lt;- 10*(page-1)+1<br/>   theurl &lt;- paste(\"http://uk.search.yahoo.com/search?p=\",<br/>      query, \"&amp;b=\", b, sep=\"\")<br/>   webpage &lt;- getURL(theurl, .opts=.opts)<br/>\u00a0<br/>   # Save search for nextpage function<br/>   .Search &lt;- list(query=query, page=page, .opts=.opts, <br/>      ignoreMarkUpErrors=ignoreMarkUpErrors)<br/>   assign(\".Search\", .Search, envir=globalenv())<br/>\u00a0<br/>   # Parse HTML; retrieve results block<br/>   webpage &lt;- readLines(tc &lt;- textConnection(webpage)); close(tc)<br/>   if(ignoreMarkUpErrors)<br/>   {<br/>      pagetree &lt;- htmlTreeParse(webpage, error=function(...){})     <br/>   } else<br/>   {<br/>      pagetree &lt;- htmlTreeParse(webpage)<br/>   }<br/>\u00a0<br/>\u00a0<br/>   findbyattr &lt;- function(x, id, type=\"id\")<br/>   {<br/>      ids &lt;- sapply(x, function(x) x$attributes[type])<br/>      x[ids==id]   <br/>   }<br/>\u00a0<br/>   body &lt;- pagetree$children$html$children$body<br/>   bd &lt;- findbyattr(body$children$div$children, \"bd\")<br/>   left &lt;- findbyattr(bd$div$children$div$children, \"left\")<br/>   web &lt;- findbyattr(left$div$children$div$children, \"web\") <br/>   resol &lt;- web$div$children$ol<br/>\u00a0<br/>   #Get url, title, content from results<br/>   gettextfromnode &lt;- function(x)<br/>   {<br/>      un &lt;- unlist(x$children)  <br/>      paste(un[grep(\"value\", names(un))], collapse=\" \") <br/>   }<br/>\u00a0<br/>   n &lt;- length(resol)<br/>   results &lt;- list()<br/>   length(results) &lt;- n<br/>   for(i in 1:n)<br/>   {<br/>      mainlink &lt;- resol[[i]]$children$div$children[1]$div$children$h3$children$a<br/>      url &lt;- mainlink$attributes[\"href\"]<br/>      title &lt;- gettextfromnode(mainlink)<br/>\u00a0<br/>      contenttext &lt;- findbyattr(resol[[i]]$children$div$children[2], \"abstr\", type=\"class\")      <br/>      if(length(contenttext)==0)<br/>      {<br/>          contenttext &lt;- findbyattr(resol[[i]]$children$div$children[2]$div$children$div$children, <br/>            \"sm-abs\", type=\"class\")<br/>      }<br/>\u00a0<br/>      content &lt;- gettextfromnode(contenttext$div)        <br/>      results[[i]] &lt;- list(url=url, title=title, content=content)                                                        <br/>   }<br/>   names(results) &lt;- as.character(seq(b, b+n-1)) <br/>   results <br/>}<br/>\u00a0<br/>nextpage &lt;- function()<br/>{<br/>   if(exists(\".Search\", envir=globalenv())) <br/>   {<br/>      .Search &lt;- get(\".Search\", envir=globalenv())   <br/>      .Search$page  &lt;- .Search$page + 1L<br/>      do.call(YahooSearch, .Search)<br/>   } else<br/>   {<br/>      message(\"No search has been performed yet\")<br/>   }   <br/>}<br/>\u00a0<br/>#Usage        <br/>YahooSearch(\"rosetta code\")<br/>nextpage()</pre>"}, {"lang": "Racket", "loc": 29, "block": "<pre class=\"text highlighted_source\">#lang racket<br/>(require net/url)<br/>(define *yaho-url* \"http://search.yahoo.com/search?p=~a&amp;b=~a\")<br/>(define *current-page* 0)<br/>(define *current-query* \"\")<br/>(define request (compose port-&gt;string get-pure-port string-&gt;url))<br/>\u00a0<br/>;;strip html tags<br/>(define (remove-tags text)<br/>  (regexp-replace* #px\"&lt;[^&lt;]+?&gt;\" text \"\"))<br/>\u00a0<br/>;;search, parse and print<br/>(define (search-yahoo query)<br/>  (unless (string=? *current-query* query)\u00a0;different query, go back to page 1<br/>    (set! *current-query* query)<br/>    (set! *current-page* 0))<br/>  (let* ([current-page (number-&gt;string (add1 (* 10 *current-page*)))]<br/>         [html (request (format *yaho-url* query current-page))]<br/>         [results (regexp-match* #px\"lass=\\\"yschttl spt\\\" href=\\\".+?\\\"&gt;(.+?)&lt;span class=url&gt;(.+?)&lt;/span&gt;.+?&lt;div class=\\\"abstr\\\"&gt;(.+?)&lt;/div&gt;\" html #:match-select cdr)])<br/>    (for ([result (in-list results)])<br/>      (printf \"Title: ~a \\n Link: ~a \\n Text: ~a \\n\\n\" <br/>              (remove-tags (first result)) <br/>              (remove-tags (second result) )<br/>              (remove-tags (third result))))))<br/>\u00a0<br/>;;search nexxt page<br/>(define (next-page)<br/>  (set! *current-page* (add1 *current-page*))<br/>  (search-yahoo *current-query*))</pre>"}, {"lang": "Ruby", "loc": 63, "block": "<pre class=\"ruby highlighted_source\"><span class=\"kw3\">require</span> <span class=\"st0\">'open-uri'</span><br/><span class=\"kw3\">require</span> <span class=\"st0\">'hpricot'</span><br/>\u00a0<br/>SearchResult = <span class=\"kw4\">Struct</span>.<span class=\"me1\">new</span><span class=\"br0\">(</span><span class=\"re3\">:url</span>, <span class=\"re3\">:title</span>, <span class=\"re3\">:content</span><span class=\"br0\">)</span><br/>\u00a0<br/><span class=\"kw1\">class</span> SearchYahoo<br/>  @@urlinfo = <span class=\"br0\">[</span><span class=\"kw2\">nil</span>, <span class=\"st0\">'ca.search.yahoo.com'</span>, <span class=\"nu0\">80</span>, <span class=\"st0\">'/search'</span>, <span class=\"kw2\">nil</span>, <span class=\"kw2\">nil</span><span class=\"br0\">]</span><br/>\u00a0<br/>  <span class=\"kw1\">def</span> initialize<span class=\"br0\">(</span>term<span class=\"br0\">)</span><br/>    <span class=\"re1\">@term</span> = term<br/>    <span class=\"re1\">@page</span> = <span class=\"nu0\">1</span><br/>    <span class=\"re1\">@results</span> = <span class=\"kw2\">nil</span><br/>    <span class=\"re1\">@url</span> = <span class=\"kw4\"><span class=\"re2\">URI::HTTP</span></span>.<span class=\"me1\">build</span><span class=\"br0\">(</span>@@urlinfo<span class=\"br0\">)</span><br/>  <span class=\"kw1\">end</span><br/>\u00a0<br/>  <span class=\"kw1\">def</span> next_result<br/>    <span class=\"kw1\">if</span> <span class=\"kw1\">not</span> <span class=\"re1\">@results</span><br/>      <span class=\"re1\">@results</span> = <span class=\"br0\">[</span><span class=\"br0\">]</span><br/>      fetch_results<br/>    <span class=\"kw1\">elsif</span> <span class=\"re1\">@results</span>.<span class=\"me1\">empty</span>?<br/>      next_page<br/>    <span class=\"kw1\">end</span><br/>    <span class=\"re1\">@results</span>.<span class=\"me1\">shift</span><br/>  <span class=\"kw1\">end</span><br/>\u00a0<br/>  <span class=\"kw1\">def</span> fetch_results<br/>    <span class=\"re1\">@url</span>.<span class=\"me1\">query</span> = <span class=\"kw4\">URI</span>.<span class=\"me1\">escape</span><span class=\"br0\">(</span><span class=\"st0\">\"p=%s&amp;b=%d\"</span> <span class=\"sy0\">%</span> <span class=\"br0\">[</span>@term, <span class=\"re1\">@page</span><span class=\"br0\">]</span><span class=\"br0\">)</span><br/>    doc = <span class=\"kw3\">open</span><span class=\"br0\">(</span>@url<span class=\"br0\">)</span> <span class=\"br0\">{</span> <span class=\"sy0\">|</span>f<span class=\"sy0\">|</span> Hpricot<span class=\"br0\">(</span>f<span class=\"br0\">)</span> <span class=\"br0\">}</span>  <br/>    parse_html<span class=\"br0\">(</span>doc<span class=\"br0\">)</span><br/>  <span class=\"kw1\">end</span><br/>\u00a0<br/>  <span class=\"kw1\">def</span> next_page<br/>    <span class=\"re1\">@page</span> <span class=\"sy0\">+</span>= <span class=\"nu0\">10</span><br/>    fetch_results<br/>  <span class=\"kw1\">end</span><br/>\u00a0<br/>  <span class=\"kw1\">def</span> parse_html<span class=\"br0\">(</span>doc<span class=\"br0\">)</span><br/>    doc.<span class=\"me1\">search</span><span class=\"br0\">(</span><span class=\"st0\">\"div#main\"</span><span class=\"br0\">)</span>.<span class=\"me1\">search</span><span class=\"br0\">(</span><span class=\"st0\">\"div\"</span><span class=\"br0\">)</span>.<span class=\"me1\">each</span> <span class=\"kw1\">do</span> <span class=\"sy0\">|</span>div<span class=\"sy0\">|</span><br/>      <span class=\"kw1\">next</span> <span class=\"kw1\">unless</span> div.<span class=\"me1\">has_attribute</span>?<span class=\"br0\">(</span><span class=\"st0\">\"class\"</span><span class=\"br0\">)</span> <span class=\"kw1\">and</span> div.<span class=\"me1\">get_attribute</span><span class=\"br0\">(</span><span class=\"st0\">\"class\"</span><span class=\"br0\">)</span>.<span class=\"me1\">index</span><span class=\"br0\">(</span><span class=\"st0\">\"res\"</span><span class=\"br0\">)</span> == <span class=\"nu0\">0</span><br/>      result = SearchResult.<span class=\"me1\">new</span><br/>      div.<span class=\"me1\">search</span><span class=\"br0\">(</span><span class=\"st0\">\"a\"</span><span class=\"br0\">)</span>.<span class=\"me1\">each</span> <span class=\"kw1\">do</span> <span class=\"sy0\">|</span>link<span class=\"sy0\">|</span><br/>        <span class=\"kw1\">next</span> <span class=\"kw1\">unless</span> link.<span class=\"me1\">has_attribute</span>?<span class=\"br0\">(</span><span class=\"st0\">\"class\"</span><span class=\"br0\">)</span> <span class=\"kw1\">and</span> link.<span class=\"me1\">get_attribute</span><span class=\"br0\">(</span><span class=\"st0\">\"class\"</span><span class=\"br0\">)</span> == <span class=\"st0\">\"yschttl spt\"</span><br/>        result.<span class=\"me1\">url</span> = link.<span class=\"me1\">get_attribute</span><span class=\"br0\">(</span><span class=\"st0\">\"href\"</span><span class=\"br0\">)</span><br/>        result.<span class=\"me1\">title</span> = link.<span class=\"me1\">inner_text</span><br/>      <span class=\"kw1\">end</span><br/>      div.<span class=\"me1\">search</span><span class=\"br0\">(</span><span class=\"st0\">\"div\"</span><span class=\"br0\">)</span>.<span class=\"me1\">each</span> <span class=\"kw1\">do</span> <span class=\"sy0\">|</span>abstract<span class=\"sy0\">|</span><br/>        <span class=\"kw1\">next</span> <span class=\"kw1\">unless</span> abstract.<span class=\"me1\">has_attribute</span>?<span class=\"br0\">(</span><span class=\"st0\">\"class\"</span><span class=\"br0\">)</span> <span class=\"kw1\">and</span> abstract.<span class=\"me1\">get_attribute</span><span class=\"br0\">(</span><span class=\"st0\">\"class\"</span><span class=\"br0\">)</span>.<span class=\"me1\">index</span><span class=\"br0\">(</span><span class=\"st0\">\"abstr\"</span><span class=\"br0\">)</span><br/>        result.<span class=\"me1\">content</span> = abstract.<span class=\"me1\">inner_text</span><br/>      <span class=\"kw1\">end</span><br/>      <span class=\"re1\">@results</span> <span class=\"sy0\">&lt;&lt;</span> result<br/>    <span class=\"kw1\">end</span><br/>  <span class=\"kw1\">end</span><br/><span class=\"kw1\">end</span><br/>\u00a0<br/>s = SearchYahoo.<span class=\"me1\">new</span><span class=\"br0\">(</span><span class=\"st0\">\"test\"</span><span class=\"br0\">)</span><br/><span class=\"nu0\">15</span>.<span class=\"me1\">times</span> <span class=\"kw1\">do</span> <span class=\"sy0\">|</span>i<span class=\"sy0\">|</span><br/>  result = s.<span class=\"me1\">next_result</span><br/>  <span class=\"kw3\">puts</span> i<span class=\"sy0\">+</span><span class=\"nu0\">1</span><br/>  <span class=\"kw3\">puts</span> result.<span class=\"me1\">title</span><br/>  <span class=\"kw3\">puts</span> result.<span class=\"me1\">url</span><br/>  <span class=\"kw3\">puts</span> result.<span class=\"me1\">content</span><br/>  <span class=\"kw3\">puts</span><br/><span class=\"kw1\">end</span></pre>"}, {"lang": "Run BASIC", "loc": 38, "block": "<pre class=\"text highlighted_source\">'--------------------------------------------------------------------------<br/>' send this from the server to the clients browser<br/>'--------------------------------------------------------------------------<br/>html \"&lt;table border=1 cellpadding=0 cellspacing=0 bgcolor=wheat&gt;\"<br/>html \"&lt;tr&gt;&lt;td align=center colspan=2&gt;Yahoo Search&lt;/td&gt;&lt;/tr&gt;\"<br/>html \"&lt;tr&gt;&lt;td align=right&gt;Find&lt;/td&gt;&lt;td&gt;\"<br/>     textbox #find,findThis$,30<br/>\u00a0<br/>html \"&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td align=right&gt;Page&lt;/td&gt;&lt;td&gt;\"<br/>     textbox #page,findPage$,2<br/>\u00a0<br/>html \"&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td align=center colspan=2&gt;\"<br/>     button #s, \"Search\", [search]<br/>html \"        \"<br/>     button #ex, \"Exit\", [exit]<br/>\u00a0<br/>html \"&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;\"<br/>wait<br/>\u00a0<br/>'--------------------------------------------------------------------------<br/>' get search stuff from the clients browser<br/>'--------------------------------------------------------------------------<br/>[search]<br/>findThis$  = trim$(#find contents$())<br/>findPage$  = trim$(#page contents$())<br/>findPage   = max(val(findPage$),1)           ' must be at least 1<br/>\u00a0<br/>'--------------------------------------------------------------------------<br/>' sho page but keep user interface at the top by not clearing the page (cls)<br/>'  so they can change the search or page<br/>' -------------------------------------------------------------------------<br/>url$ = \"http://search.yahoo.com/search?p=\";findThis$;\"&amp;b=\";((findPage - 1) * 10) + 1<br/>html httpget$(url$)<br/>wait<br/>\u00a0<br/>[exit]<br/>cls                   ' clear browser screen and get outta here<br/>wait</pre>"}, {"lang": "Tcl", "loc": 38, "block": "<pre class=\"tcl highlighted_source\"><span class=\"kw2\">package</span> require <span class=\"kw2\">http</span><br/>\u00a0<br/><span class=\"kw1\">proc</span> fix s <span class=\"br0\">{</span><br/>    <span class=\"kw2\">string</span> map <span class=\"br0\">{</span><span class=\"sy0\">&lt;</span>b<span class=\"sy0\">&gt;</span>...<span class=\"sy0\">&lt;</span>/b<span class=\"sy0\">&gt;</span> <span class=\"st0\">\"\"</span> <span class=\"sy0\">&lt;</span>b<span class=\"sy0\">&gt;</span> <span class=\"st0\">\"\"</span> <span class=\"sy0\">&lt;</span>/b<span class=\"sy0\">&gt;</span> <span class=\"st0\">\"\"</span> <span class=\"sy0\">&lt;</span>wbr<span class=\"sy0\">&gt;</span> <span class=\"st0\">\"\"</span> <span class=\"st0\">\"&lt;wbr /&gt;\"</span> <span class=\"st0\">\"\"</span><span class=\"br0\">}</span> \\<br/>            <span class=\"br0\">[</span><span class=\"kw2\">regsub</span> <span class=\"st0\">\"&lt;/a&gt;&lt;/h3&gt;&lt;/div&gt;.*\"</span> <span class=\"re0\">$s</span> <span class=\"st0\">\"\"</span><span class=\"br0\">]</span><br/><span class=\"br0\">}</span><br/><span class=\"kw1\">proc</span> YahooSearch <span class=\"br0\">{</span>term <span class=\"br0\">{</span>page <span class=\"nu0\">1</span><span class=\"br0\">}</span><span class=\"br0\">}</span> <span class=\"br0\">{</span><br/>    <span class=\"co1\"># Build the (ugly) scraper URL</span><br/>    <span class=\"kw2\">append</span> re <span class=\"br0\">{</span><span class=\"sy0\">&lt;</span>a class=<span class=\"st0\">\"yschttl spt\"</span> href=<span class=\"st0\">\".+?\"</span> <span class=\"sy0\">&gt;</span><span class=\"br0\">(</span>.+<span class=\"sy0\">?</span><span class=\"br0\">)</span><span class=\"sy0\">&lt;</span>/a<span class=\"sy0\">&gt;&lt;</span>/h3<span class=\"sy0\">&gt;</span><span class=\"br0\">}</span><br/>    <span class=\"kw2\">append</span> re <span class=\"br0\">{</span><span class=\"sy0\">&lt;</span>/div<span class=\"sy0\">&gt;&lt;</span>div class=<span class=\"st0\">\"abstr\"</span><span class=\"sy0\">&gt;</span><span class=\"br0\">(</span>.+<span class=\"sy0\">?</span><span class=\"br0\">)</span><span class=\"br0\">}</span><br/>    <span class=\"kw2\">append</span> re <span class=\"br0\">{</span><span class=\"sy0\">&lt;</span>/div<span class=\"sy0\">&gt;&lt;</span>span class=url<span class=\"sy0\">&gt;</span><span class=\"br0\">(</span>.+<span class=\"sy0\">?</span><span class=\"br0\">)</span><span class=\"sy0\">&lt;</span>/span<span class=\"sy0\">&gt;</span><span class=\"br0\">}</span><br/>\u00a0<br/>    <span class=\"co1\"># Perform the query; note that this handles special characters</span><br/>    <span class=\"co1\"># in the query term correctly</span><br/>    <span class=\"kw1\">set</span> q <span class=\"br0\">[</span><span class=\"kw2\">http</span>::<span class=\"me1\">formatQuery</span> p <span class=\"re0\">$term</span> b <span class=\"br0\">[</span><span class=\"kw1\">expr</span> <span class=\"br0\">{</span><span class=\"re0\">$page</span><span class=\"sy0\">*</span><span class=\"nu0\">10</span>-<span class=\"nu0\">9</span><span class=\"br0\">}</span><span class=\"br0\">]</span><span class=\"br0\">]</span><br/>    <span class=\"kw1\">set</span> token <span class=\"br0\">[</span><span class=\"kw2\">http</span>::<span class=\"me1\">geturl</span> <span class=\"kw2\">http</span>://search.yahoo.com/search<span class=\"sy0\">?</span><span class=\"re0\">$q</span><span class=\"br0\">]</span><br/>    <span class=\"kw1\">set</span> data <span class=\"br0\">[</span><span class=\"kw2\">http</span>::<span class=\"me1\">data</span> <span class=\"re0\">$token</span><span class=\"br0\">]</span><br/>    <span class=\"kw2\">http</span>::<span class=\"me1\">cleanup</span> <span class=\"re0\">$token</span><br/>\u00a0<br/>    <span class=\"co1\"># Assemble the results into a nice list</span><br/>    <span class=\"kw1\">set</span> results <span class=\"br0\">{</span><span class=\"br0\">}</span><br/>    <span class=\"kw1\">foreach</span> <span class=\"br0\">{</span>- title content url<span class=\"br0\">}</span> <span class=\"br0\">[</span><span class=\"kw2\">regexp</span> -all -inline <span class=\"re0\">$re</span> <span class=\"re0\">$data</span><span class=\"br0\">]</span> <span class=\"br0\">{</span><br/>        <span class=\"kw2\">lappend</span> results <span class=\"br0\">[</span>fix <span class=\"re0\">$title</span><span class=\"br0\">]</span> <span class=\"br0\">[</span>fix <span class=\"re0\">$content</span><span class=\"br0\">]</span> <span class=\"br0\">[</span>fix <span class=\"re0\">$url</span><span class=\"br0\">]</span><br/>    <span class=\"br0\">}</span><br/>\u00a0<br/>    <span class=\"co1\"># set up the call for the next page</span><br/>    <span class=\"kw2\">interp</span> alias <span class=\"br0\">{</span><span class=\"br0\">}</span> Nextpage <span class=\"br0\">{</span><span class=\"br0\">}</span> YahooSearch <span class=\"re0\">$term</span> <span class=\"br0\">[</span><span class=\"kw2\">incr</span> page<span class=\"br0\">]</span><br/>\u00a0<br/>    <span class=\"kw1\">return</span> <span class=\"re0\">$results</span><br/><span class=\"br0\">}</span><br/>\u00a0<br/><span class=\"co1\"># Usage:  get the first two pages of results</span><br/><span class=\"kw1\">foreach</span> <span class=\"br0\">{</span>title content url<span class=\"br0\">}</span> <span class=\"br0\">[</span>YahooSearch <span class=\"st0\">\"test\"</span><span class=\"br0\">]</span> <span class=\"br0\">{</span><br/>    <span class=\"kw2\">puts</span> <span class=\"re0\">$title</span><br/><span class=\"br0\">}</span><br/><span class=\"kw1\">foreach</span> <span class=\"br0\">{</span>title content url<span class=\"br0\">}</span> <span class=\"br0\">[</span>Nextpage<span class=\"br0\">]</span> <span class=\"br0\">{</span><br/>     <span class=\"kw2\">puts</span> <span class=\"re0\">$title</span><br/><span class=\"br0\">}</span></pre>"}, {"lang": "TXR", "loc": 23, "block": "<pre class=\"text highlighted_source\">#!/usr/bin/txr -f<br/>@(next\u00a0:args)<br/>@(cases)<br/>@  QUERY<br/>@  PAGE<br/>@(or)<br/>@  (throw error \"specify query and page# (from zero)\")<br/>@(end)<br/>@(next (open-command \"!wget -O - http://search.yahoo.com/<a class=\"__cf_email__\" data-cfemail=\"84f7e1e5f6e7ecbbf4b9c4d5d1c1d6dd\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>\\&amp;<a class=\"__cf_email__\" data-cfemail=\"ed8fd0ad\" href=\"/cdn-cgi/l/email-protection\">[email\u00a0protected]</a>{PAGE}1 2&gt; /dev/null\"))<br/>@(all)<br/>@  (coll)&lt;a class=\"yschttl spt\" href=\"@URL\" @/[^&gt;]+/&gt;@TITLE&lt;/a&gt;@(end)<br/>@(and)<br/>@  (coll)&lt;div class=\"@/abstr|sm-abs/\"&gt;@ABSTR&lt;/div&gt;@(end)<br/>@(end)<br/>@(output)<br/>@  (repeat)<br/>TITLE: @TITLE<br/>URL: @URL<br/>TEXT: @ABSTR<br/>---<br/>@  (end)<br/>@(end)<br/>\u00a0</pre>"}]}